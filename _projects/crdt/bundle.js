!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=73)}([function(e,t,r){"use strict";t.Emitter=r(131),t.Disposable=r(22),t.CompositeDisposable=r(47)},function(e,t,r){"use strict";e.exports=r(74)},function(e,t,r){(function(){t.Emitter=r(100),t.Disposable=r(17),t.CompositeDisposable=r(101)}).call(this)},function(e,t,r){"use strict";var n=!0,i=!0;function o(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}e.exports={extractVersion:o,wrapPeerConnectionEvent:function(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);var o=function(e){n(r(e))};return this._eventMap=this._eventMap||{},this._eventMap[n]=o,i.apply(this,[e,o])};var o=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return o.apply(this,arguments);var n=this._eventMap[r];return delete this._eventMap[r],o.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)}})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(i=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(n)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){i&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=o(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)r.browser="chrome",r.version=o(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=o(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=o(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return r}}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)})(e)}function a(e,t,r){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&c(i,r.prototype),i}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error)),d=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error)),p=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error)),h=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error)),f=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error)),g=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error)),y=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error)),m=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error)),v=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error)),b=function(e){function t(){return n(this,t),i(this,l(t).apply(this,arguments))}return o(t,e),t}(s(Error));e.exports={ClientOutOfDateError:u,HTTPRequestError:d,NetworkConnectionError:p,InvalidAuthenticationTokenError:h,UnexpectedAuthenticationError:f,PeerConnectionError:g,PortalCreationError:y,PortalJoinError:m,PortalNotFoundError:v,PubSubConnectionError:b}},function(e,t,r){(function(n){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(134)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(9))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(90),i=r(91),o=r(92);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,r)}function l(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=a(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|h(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=a(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|h(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(n)return N(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return M(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return C(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var o,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var u=-1;for(o=r;o<a;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){for(var d=!0,p=0;p<c;p++)if(l(e,o+p)!==l(t,p)){d=!1;break}if(d)return o}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function w(e,t,r,n){return z(N(t,e.length-r),e,r,n)}function S(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function k(e,t,r,n){return S(e,t,r,n)}function E(e,t,r,n){return z(W(t),e,r,n)}function _(e,t,r,n){return z(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function C(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function M(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,c,l=e[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=r)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=d}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=x));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return l(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return u(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(n,i),u=e.slice(t,r),d=0;d<a;++d)if(l[d]!==u[d]){o=l[d],s=u[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return S(this,e,t,r);case"latin1":case"binary":return k(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=$(e[o]);return i}function I(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function B(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function L(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function U(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return o||U(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,o){return o||U(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;r=new c(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||P(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||A(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||A(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);A(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);A(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=c.isBuffer(e)?e:N(new c(e,n).toString()),a=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function $(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(6))},function(e,t,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var o=r(97),s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,c="foo"===function(){}.name;function l(e){return Object.prototype.toString.call(e)}function u(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var d=e.exports=m,p=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(o.isFunction(e)){if(c)return e.name;var t=e.toString().match(p);return t&&t[1]}}function f(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(c||!o.isFunction(e))return o.inspect(e);var t=h(e);return"[Function"+(t?": "+t:"")+"]"}function y(e,t,r,n,i){throw new d.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function m(e,t){e||y(e,!0,t,"==",d.ok)}function v(e,t,r,s){if(e===t)return!0;if(i(e)&&i(t))return 0===n(e,t);if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(u(e)&&u(t)&&l(e)===l(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var c=(s=s||{actual:[],expected:[]}).actual.indexOf(e);return-1!==c&&c===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=b(e),s=b(t);if(i&&!s||!i&&s)return!1;if(i)return e=a.call(e),t=a.call(t),v(e,t,r);var c,l,u=k(e),d=k(t);if(u.length!==d.length)return!1;for(u.sort(),d.sort(),l=u.length-1;l>=0;l--)if(u[l]!==d[l])return!1;for(l=u.length-1;l>=0;l--)if(c=u[l],!v(e[c],t[c],r,n))return!1;return!0}(e,t,r,s))}return r?e===t:e==t}function b(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function w(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function S(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&y(i,r,"Missing expected exception"+n);var s="string"==typeof n,a=!e&&i&&!r;if((!e&&o.isError(i)&&s&&w(i,r)||a)&&y(i,r,"Got unwanted exception"+n),e&&i&&r&&!w(i,r)||!e&&i)throw i}d.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return f(g(e.actual),128)+" "+e.operator+" "+f(g(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=h(t),o=n.indexOf("\n"+i);if(o>=0){var s=n.indexOf("\n",o+1);n=n.substring(s+1)}this.stack=n}}},o.inherits(d.AssertionError,Error),d.fail=y,d.ok=m,d.equal=function(e,t,r){e!=t&&y(e,t,r,"==",d.equal)},d.notEqual=function(e,t,r){e==t&&y(e,t,r,"!=",d.notEqual)},d.deepEqual=function(e,t,r){v(e,t,!1)||y(e,t,r,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,r){v(e,t,!0)||y(e,t,r,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,r){v(e,t,!1)&&y(e,t,r,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,r,n){v(t,r,!0)&&y(t,r,n,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,r){e!==t&&y(e,t,r,"===",d.strictEqual)},d.notStrictEqual=function(e,t,r){e===t&&y(e,t,r,"!==",d.notStrictEqual)},d.throws=function(e,t,r){S(!0,e,t,r)},d.doesNotThrow=function(e,t,r){S(!1,e,t,r)},d.ifError=function(e){if(e)throw e};var k=Object.keys||function(e){var t=[];for(var r in e)s.call(e,r)&&t.push(r);return t}}).call(this,r(6))},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!u){var e=a(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||u||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){var n=r(19),i=n,o=Function("return this")(),s=r(117);i.exportSymbol("proto.BufferProxy",null,o),i.exportSymbol("proto.BufferProxyUpdate",null,o),i.exportSymbol("proto.BufferProxyUpdate.OperationsUpdate",null,o),i.exportSymbol("proto.BufferProxyUpdate.URIUpdate",null,o),i.exportSymbol("proto.EditorProxy",null,o),i.exportSymbol("proto.EditorProxyMetadata",null,o),i.exportSymbol("proto.EditorProxyUpdate",null,o),i.exportSymbol("proto.EditorProxyUpdate.SelectionsUpdate",null,o),i.exportSymbol("proto.NetworkMessage",null,o),i.exportSymbol("proto.NetworkMessage.StarBroadcast",null,o),i.exportSymbol("proto.NetworkMessage.StarJoinNotification",null,o),i.exportSymbol("proto.NetworkMessage.StarJoinRequest",null,o),i.exportSymbol("proto.NetworkMessage.StarJoinResponse",null,o),i.exportSymbol("proto.NetworkMessage.StarLeaveNotification",null,o),i.exportSymbol("proto.NetworkMessage.StarUnicast",null,o),i.exportSymbol("proto.PeerIdentity",null,o),i.exportSymbol("proto.PortalSubscriptionResponse",null,o),i.exportSymbol("proto.PortalUpdate",null,o),i.exportSymbol("proto.PortalUpdate.EditorProxyCreation",null,o),i.exportSymbol("proto.PortalUpdate.EditorProxyRemoval",null,o),i.exportSymbol("proto.PortalUpdate.EditorProxySwitch",null,o),i.exportSymbol("proto.PortalUpdate.SiteAssignment",null,o),i.exportSymbol("proto.RouterMessage",null,o),i.exportSymbol("proto.RouterMessage.Notification",null,o),i.exportSymbol("proto.RouterMessage.Request",null,o),i.exportSymbol("proto.RouterMessage.Response",null,o),i.exportSymbol("proto.Tether",null,o),proto.PortalSubscriptionResponse=function(e){n.Message.initialize(this,e,0,-1,proto.PortalSubscriptionResponse.repeatedFields_,null)},i.inherits(proto.PortalSubscriptionResponse,n.Message),i.DEBUG&&!COMPILED&&(proto.PortalSubscriptionResponse.displayName="proto.PortalSubscriptionResponse"),proto.PortalSubscriptionResponse.repeatedFields_=[4,5,6,8],n.Message.GENERATE_TO_OBJECT&&(proto.PortalSubscriptionResponse.prototype.toObject=function(e){return proto.PortalSubscriptionResponse.toObject(e,this)},proto.PortalSubscriptionResponse.toObject=function(e,t){var r,i={siteIdsByPeerIdMap:(r=t.getSiteIdsByPeerIdMap())?r.toObject(e,void 0):[],tethersList:n.Message.toObjectList(t.getTethersList(),proto.Tether.toObject,e),activeBufferProxiesList:n.Message.toObjectList(t.getActiveBufferProxiesList(),proto.BufferProxy.toObject,e),activeEditorProxiesList:n.Message.toObjectList(t.getActiveEditorProxiesList(),proto.EditorProxy.toObject,e),activeEditorProxyIdsBySiteIdMap:(r=t.getActiveEditorProxyIdsBySiteIdMap())?r.toObject(e,void 0):[],editorProxiesMetadataList:n.Message.toObjectList(t.getEditorProxiesMetadataList(),proto.EditorProxyMetadata.toObject,e)};return e&&(i.$jspbMessageInstance=t),i}),proto.PortalSubscriptionResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.PortalSubscriptionResponse;return proto.PortalSubscriptionResponse.deserializeBinaryFromReader(r,t)},proto.PortalSubscriptionResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=e.getSiteIdsByPeerIdMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readString,n.BinaryReader.prototype.readUint32)}));break;case 4:r=new proto.Tether;t.readMessage(r,proto.Tether.deserializeBinaryFromReader),e.addTethers(r);break;case 5:r=new proto.BufferProxy;t.readMessage(r,proto.BufferProxy.deserializeBinaryFromReader),e.addActiveBufferProxies(r);break;case 6:r=new proto.EditorProxy;t.readMessage(r,proto.EditorProxy.deserializeBinaryFromReader),e.addActiveEditorProxies(r);break;case 7:r=e.getActiveEditorProxyIdsBySiteIdMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readUint32,n.BinaryReader.prototype.readUint32)}));break;case 8:r=new proto.EditorProxyMetadata;t.readMessage(r,proto.EditorProxyMetadata.deserializeBinaryFromReader),e.addEditorProxiesMetadata(r);break;default:t.skipField()}}return e},proto.PortalSubscriptionResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.PortalSubscriptionResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalSubscriptionResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSiteIdsByPeerIdMap(!0))&&r.getLength()>0&&r.serializeBinary(1,t,n.BinaryWriter.prototype.writeString,n.BinaryWriter.prototype.writeUint32),(r=e.getTethersList()).length>0&&t.writeRepeatedMessage(4,r,proto.Tether.serializeBinaryToWriter),(r=e.getActiveBufferProxiesList()).length>0&&t.writeRepeatedMessage(5,r,proto.BufferProxy.serializeBinaryToWriter),(r=e.getActiveEditorProxiesList()).length>0&&t.writeRepeatedMessage(6,r,proto.EditorProxy.serializeBinaryToWriter),(r=e.getActiveEditorProxyIdsBySiteIdMap(!0))&&r.getLength()>0&&r.serializeBinary(7,t,n.BinaryWriter.prototype.writeUint32,n.BinaryWriter.prototype.writeUint32),(r=e.getEditorProxiesMetadataList()).length>0&&t.writeRepeatedMessage(8,r,proto.EditorProxyMetadata.serializeBinaryToWriter)},proto.PortalSubscriptionResponse.prototype.getSiteIdsByPeerIdMap=function(e){return n.Message.getMapField(this,1,e,null)},proto.PortalSubscriptionResponse.prototype.clearSiteIdsByPeerIdMap=function(){this.getSiteIdsByPeerIdMap().clear()},proto.PortalSubscriptionResponse.prototype.getTethersList=function(){return n.Message.getRepeatedWrapperField(this,proto.Tether,4)},proto.PortalSubscriptionResponse.prototype.setTethersList=function(e){n.Message.setRepeatedWrapperField(this,4,e)},proto.PortalSubscriptionResponse.prototype.addTethers=function(e,t){return n.Message.addToRepeatedWrapperField(this,4,e,proto.Tether,t)},proto.PortalSubscriptionResponse.prototype.clearTethersList=function(){this.setTethersList([])},proto.PortalSubscriptionResponse.prototype.getActiveBufferProxiesList=function(){return n.Message.getRepeatedWrapperField(this,proto.BufferProxy,5)},proto.PortalSubscriptionResponse.prototype.setActiveBufferProxiesList=function(e){n.Message.setRepeatedWrapperField(this,5,e)},proto.PortalSubscriptionResponse.prototype.addActiveBufferProxies=function(e,t){return n.Message.addToRepeatedWrapperField(this,5,e,proto.BufferProxy,t)},proto.PortalSubscriptionResponse.prototype.clearActiveBufferProxiesList=function(){this.setActiveBufferProxiesList([])},proto.PortalSubscriptionResponse.prototype.getActiveEditorProxiesList=function(){return n.Message.getRepeatedWrapperField(this,proto.EditorProxy,6)},proto.PortalSubscriptionResponse.prototype.setActiveEditorProxiesList=function(e){n.Message.setRepeatedWrapperField(this,6,e)},proto.PortalSubscriptionResponse.prototype.addActiveEditorProxies=function(e,t){return n.Message.addToRepeatedWrapperField(this,6,e,proto.EditorProxy,t)},proto.PortalSubscriptionResponse.prototype.clearActiveEditorProxiesList=function(){this.setActiveEditorProxiesList([])},proto.PortalSubscriptionResponse.prototype.getActiveEditorProxyIdsBySiteIdMap=function(e){return n.Message.getMapField(this,7,e,null)},proto.PortalSubscriptionResponse.prototype.clearActiveEditorProxyIdsBySiteIdMap=function(){this.getActiveEditorProxyIdsBySiteIdMap().clear()},proto.PortalSubscriptionResponse.prototype.getEditorProxiesMetadataList=function(){return n.Message.getRepeatedWrapperField(this,proto.EditorProxyMetadata,8)},proto.PortalSubscriptionResponse.prototype.setEditorProxiesMetadataList=function(e){n.Message.setRepeatedWrapperField(this,8,e)},proto.PortalSubscriptionResponse.prototype.addEditorProxiesMetadata=function(e,t){return n.Message.addToRepeatedWrapperField(this,8,e,proto.EditorProxyMetadata,t)},proto.PortalSubscriptionResponse.prototype.clearEditorProxiesMetadataList=function(){this.setEditorProxiesMetadataList([])},proto.PortalUpdate=function(e){n.Message.initialize(this,e,0,-1,null,proto.PortalUpdate.oneofGroups_)},i.inherits(proto.PortalUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.PortalUpdate.displayName="proto.PortalUpdate"),proto.PortalUpdate.oneofGroups_=[[1,2,4,5]],proto.PortalUpdate.VariantCase={VARIANT_NOT_SET:0,EDITOR_PROXY_SWITCH:1,SITE_ASSIGNMENT:2,TETHER_UPDATE:4,EDITOR_PROXY_CREATION:5},proto.PortalUpdate.prototype.getVariantCase=function(){return n.Message.computeOneofCase(this,proto.PortalUpdate.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.prototype.toObject=function(e){return proto.PortalUpdate.toObject(e,this)},proto.PortalUpdate.toObject=function(e,t){var r,n={editorProxySwitch:(r=t.getEditorProxySwitch())&&proto.PortalUpdate.EditorProxySwitch.toObject(e,r),siteAssignment:(r=t.getSiteAssignment())&&proto.PortalUpdate.SiteAssignment.toObject(e,r),tetherUpdate:(r=t.getTetherUpdate())&&proto.Tether.toObject(e,r),editorProxyCreation:(r=t.getEditorProxyCreation())&&proto.PortalUpdate.EditorProxyCreation.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.PortalUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.PortalUpdate;return proto.PortalUpdate.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.PortalUpdate.EditorProxySwitch;t.readMessage(r,proto.PortalUpdate.EditorProxySwitch.deserializeBinaryFromReader),e.setEditorProxySwitch(r);break;case 2:r=new proto.PortalUpdate.SiteAssignment;t.readMessage(r,proto.PortalUpdate.SiteAssignment.deserializeBinaryFromReader),e.setSiteAssignment(r);break;case 4:r=new proto.Tether;t.readMessage(r,proto.Tether.deserializeBinaryFromReader),e.setTetherUpdate(r);break;case 5:r=new proto.PortalUpdate.EditorProxyCreation;t.readMessage(r,proto.PortalUpdate.EditorProxyCreation.deserializeBinaryFromReader),e.setEditorProxyCreation(r);break;default:t.skipField()}}return e},proto.PortalUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.PortalUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getEditorProxySwitch())&&t.writeMessage(1,r,proto.PortalUpdate.EditorProxySwitch.serializeBinaryToWriter),null!=(r=e.getSiteAssignment())&&t.writeMessage(2,r,proto.PortalUpdate.SiteAssignment.serializeBinaryToWriter),null!=(r=e.getTetherUpdate())&&t.writeMessage(4,r,proto.Tether.serializeBinaryToWriter),null!=(r=e.getEditorProxyCreation())&&t.writeMessage(5,r,proto.PortalUpdate.EditorProxyCreation.serializeBinaryToWriter)},proto.PortalUpdate.EditorProxySwitch=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.PortalUpdate.EditorProxySwitch,n.Message),i.DEBUG&&!COMPILED&&(proto.PortalUpdate.EditorProxySwitch.displayName="proto.PortalUpdate.EditorProxySwitch"),n.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.EditorProxySwitch.prototype.toObject=function(e){return proto.PortalUpdate.EditorProxySwitch.toObject(e,this)},proto.PortalUpdate.EditorProxySwitch.toObject=function(e,t){var r={editorProxyId:n.Message.getFieldWithDefault(t,1,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.PortalUpdate.EditorProxySwitch.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.PortalUpdate.EditorProxySwitch;return proto.PortalUpdate.EditorProxySwitch.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.EditorProxySwitch.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setEditorProxyId(r);break;default:t.skipField()}}return e},proto.PortalUpdate.EditorProxySwitch.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.PortalUpdate.EditorProxySwitch.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.EditorProxySwitch.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getEditorProxyId())&&t.writeUint32(1,r)},proto.PortalUpdate.EditorProxySwitch.prototype.getEditorProxyId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.PortalUpdate.EditorProxySwitch.prototype.setEditorProxyId=function(e){n.Message.setProto3IntField(this,1,e)},proto.PortalUpdate.SiteAssignment=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.PortalUpdate.SiteAssignment,n.Message),i.DEBUG&&!COMPILED&&(proto.PortalUpdate.SiteAssignment.displayName="proto.PortalUpdate.SiteAssignment"),n.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.SiteAssignment.prototype.toObject=function(e){return proto.PortalUpdate.SiteAssignment.toObject(e,this)},proto.PortalUpdate.SiteAssignment.toObject=function(e,t){var r={peerId:n.Message.getFieldWithDefault(t,1,""),siteId:n.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.PortalUpdate.SiteAssignment.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.PortalUpdate.SiteAssignment;return proto.PortalUpdate.SiteAssignment.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.SiteAssignment.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setPeerId(r);break;case 2:r=t.readUint32();e.setSiteId(r);break;default:t.skipField()}}return e},proto.PortalUpdate.SiteAssignment.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.PortalUpdate.SiteAssignment.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.SiteAssignment.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getPeerId()).length>0&&t.writeString(1,r),0!==(r=e.getSiteId())&&t.writeUint32(2,r)},proto.PortalUpdate.SiteAssignment.prototype.getPeerId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.PortalUpdate.SiteAssignment.prototype.setPeerId=function(e){n.Message.setProto3StringField(this,1,e)},proto.PortalUpdate.SiteAssignment.prototype.getSiteId=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.PortalUpdate.SiteAssignment.prototype.setSiteId=function(e){n.Message.setProto3IntField(this,2,e)},proto.PortalUpdate.EditorProxyRemoval=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.PortalUpdate.EditorProxyRemoval,n.Message),i.DEBUG&&!COMPILED&&(proto.PortalUpdate.EditorProxyRemoval.displayName="proto.PortalUpdate.EditorProxyRemoval"),n.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.EditorProxyRemoval.prototype.toObject=function(e){return proto.PortalUpdate.EditorProxyRemoval.toObject(e,this)},proto.PortalUpdate.EditorProxyRemoval.toObject=function(e,t){var r={editorProxyId:n.Message.getFieldWithDefault(t,1,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.PortalUpdate.EditorProxyRemoval.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.PortalUpdate.EditorProxyRemoval;return proto.PortalUpdate.EditorProxyRemoval.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.EditorProxyRemoval.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setEditorProxyId(r);break;default:t.skipField()}}return e},proto.PortalUpdate.EditorProxyRemoval.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.PortalUpdate.EditorProxyRemoval.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.EditorProxyRemoval.serializeBinaryToWriter=function(e,t){var r;0!==(r=e.getEditorProxyId())&&t.writeUint32(1,r)},proto.PortalUpdate.EditorProxyRemoval.prototype.getEditorProxyId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.PortalUpdate.EditorProxyRemoval.prototype.setEditorProxyId=function(e){n.Message.setProto3IntField(this,1,e)},proto.PortalUpdate.EditorProxyCreation=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.PortalUpdate.EditorProxyCreation,n.Message),i.DEBUG&&!COMPILED&&(proto.PortalUpdate.EditorProxyCreation.displayName="proto.PortalUpdate.EditorProxyCreation"),n.Message.GENERATE_TO_OBJECT&&(proto.PortalUpdate.EditorProxyCreation.prototype.toObject=function(e){return proto.PortalUpdate.EditorProxyCreation.toObject(e,this)},proto.PortalUpdate.EditorProxyCreation.toObject=function(e,t){var r,n={editorProxyMetadata:(r=t.getEditorProxyMetadata())&&proto.EditorProxyMetadata.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.PortalUpdate.EditorProxyCreation.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.PortalUpdate.EditorProxyCreation;return proto.PortalUpdate.EditorProxyCreation.deserializeBinaryFromReader(r,t)},proto.PortalUpdate.EditorProxyCreation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.EditorProxyMetadata;t.readMessage(r,proto.EditorProxyMetadata.deserializeBinaryFromReader),e.setEditorProxyMetadata(r);break;default:t.skipField()}}return e},proto.PortalUpdate.EditorProxyCreation.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.PortalUpdate.EditorProxyCreation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PortalUpdate.EditorProxyCreation.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getEditorProxyMetadata())&&t.writeMessage(1,r,proto.EditorProxyMetadata.serializeBinaryToWriter)},proto.PortalUpdate.EditorProxyCreation.prototype.getEditorProxyMetadata=function(){return n.Message.getWrapperField(this,proto.EditorProxyMetadata,1)},proto.PortalUpdate.EditorProxyCreation.prototype.setEditorProxyMetadata=function(e){n.Message.setWrapperField(this,1,e)},proto.PortalUpdate.EditorProxyCreation.prototype.clearEditorProxyMetadata=function(){this.setEditorProxyMetadata(void 0)},proto.PortalUpdate.EditorProxyCreation.prototype.hasEditorProxyMetadata=function(){return null!=n.Message.getField(this,1)},proto.PortalUpdate.prototype.getEditorProxySwitch=function(){return n.Message.getWrapperField(this,proto.PortalUpdate.EditorProxySwitch,1)},proto.PortalUpdate.prototype.setEditorProxySwitch=function(e){n.Message.setOneofWrapperField(this,1,proto.PortalUpdate.oneofGroups_[0],e)},proto.PortalUpdate.prototype.clearEditorProxySwitch=function(){this.setEditorProxySwitch(void 0)},proto.PortalUpdate.prototype.hasEditorProxySwitch=function(){return null!=n.Message.getField(this,1)},proto.PortalUpdate.prototype.getSiteAssignment=function(){return n.Message.getWrapperField(this,proto.PortalUpdate.SiteAssignment,2)},proto.PortalUpdate.prototype.setSiteAssignment=function(e){n.Message.setOneofWrapperField(this,2,proto.PortalUpdate.oneofGroups_[0],e)},proto.PortalUpdate.prototype.clearSiteAssignment=function(){this.setSiteAssignment(void 0)},proto.PortalUpdate.prototype.hasSiteAssignment=function(){return null!=n.Message.getField(this,2)},proto.PortalUpdate.prototype.getTetherUpdate=function(){return n.Message.getWrapperField(this,proto.Tether,4)},proto.PortalUpdate.prototype.setTetherUpdate=function(e){n.Message.setOneofWrapperField(this,4,proto.PortalUpdate.oneofGroups_[0],e)},proto.PortalUpdate.prototype.clearTetherUpdate=function(){this.setTetherUpdate(void 0)},proto.PortalUpdate.prototype.hasTetherUpdate=function(){return null!=n.Message.getField(this,4)},proto.PortalUpdate.prototype.getEditorProxyCreation=function(){return n.Message.getWrapperField(this,proto.PortalUpdate.EditorProxyCreation,5)},proto.PortalUpdate.prototype.setEditorProxyCreation=function(e){n.Message.setOneofWrapperField(this,5,proto.PortalUpdate.oneofGroups_[0],e)},proto.PortalUpdate.prototype.clearEditorProxyCreation=function(){this.setEditorProxyCreation(void 0)},proto.PortalUpdate.prototype.hasEditorProxyCreation=function(){return null!=n.Message.getField(this,5)},proto.Tether=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Tether,n.Message),i.DEBUG&&!COMPILED&&(proto.Tether.displayName="proto.Tether"),n.Message.GENERATE_TO_OBJECT&&(proto.Tether.prototype.toObject=function(e){return proto.Tether.toObject(e,this)},proto.Tether.toObject=function(e,t){var r={followerSiteId:n.Message.getFieldWithDefault(t,1,0),leaderSiteId:n.Message.getFieldWithDefault(t,2,0),state:n.Message.getFieldWithDefault(t,3,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Tether.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Tether;return proto.Tether.deserializeBinaryFromReader(r,t)},proto.Tether.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setFollowerSiteId(r);break;case 2:r=t.readUint32();e.setLeaderSiteId(r);break;case 3:r=t.readUint32();e.setState(r);break;default:t.skipField()}}return e},proto.Tether.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Tether.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Tether.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getFollowerSiteId())&&t.writeUint32(1,r),0!==(r=e.getLeaderSiteId())&&t.writeUint32(2,r),0!==(r=e.getState())&&t.writeUint32(3,r)},proto.Tether.prototype.getFollowerSiteId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.Tether.prototype.setFollowerSiteId=function(e){n.Message.setProto3IntField(this,1,e)},proto.Tether.prototype.getLeaderSiteId=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.Tether.prototype.setLeaderSiteId=function(e){n.Message.setProto3IntField(this,2,e)},proto.Tether.prototype.getState=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.Tether.prototype.setState=function(e){n.Message.setProto3IntField(this,3,e)},proto.EditorProxy=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.EditorProxy,n.Message),i.DEBUG&&!COMPILED&&(proto.EditorProxy.displayName="proto.EditorProxy"),n.Message.GENERATE_TO_OBJECT&&(proto.EditorProxy.prototype.toObject=function(e){return proto.EditorProxy.toObject(e,this)},proto.EditorProxy.toObject=function(e,t){var r,i={id:n.Message.getFieldWithDefault(t,1,0),bufferProxyId:n.Message.getFieldWithDefault(t,2,0),selectionLayerIdsBySiteIdMap:(r=t.getSelectionLayerIdsBySiteIdMap())?r.toObject(e,void 0):[]};return e&&(i.$jspbMessageInstance=t),i}),proto.EditorProxy.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.EditorProxy;return proto.EditorProxy.deserializeBinaryFromReader(r,t)},proto.EditorProxy.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setId(r);break;case 2:r=t.readUint32();e.setBufferProxyId(r);break;case 3:r=e.getSelectionLayerIdsBySiteIdMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readUint32,n.BinaryReader.prototype.readUint32)}));break;default:t.skipField()}}return e},proto.EditorProxy.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.EditorProxy.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.EditorProxy.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getId())&&t.writeUint32(1,r),0!==(r=e.getBufferProxyId())&&t.writeUint32(2,r),(r=e.getSelectionLayerIdsBySiteIdMap(!0))&&r.getLength()>0&&r.serializeBinary(3,t,n.BinaryWriter.prototype.writeUint32,n.BinaryWriter.prototype.writeUint32)},proto.EditorProxy.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.EditorProxy.prototype.setId=function(e){n.Message.setProto3IntField(this,1,e)},proto.EditorProxy.prototype.getBufferProxyId=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.EditorProxy.prototype.setBufferProxyId=function(e){n.Message.setProto3IntField(this,2,e)},proto.EditorProxy.prototype.getSelectionLayerIdsBySiteIdMap=function(e){return n.Message.getMapField(this,3,e,null)},proto.EditorProxy.prototype.clearSelectionLayerIdsBySiteIdMap=function(){this.getSelectionLayerIdsBySiteIdMap().clear()},proto.EditorProxyMetadata=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.EditorProxyMetadata,n.Message),i.DEBUG&&!COMPILED&&(proto.EditorProxyMetadata.displayName="proto.EditorProxyMetadata"),n.Message.GENERATE_TO_OBJECT&&(proto.EditorProxyMetadata.prototype.toObject=function(e){return proto.EditorProxyMetadata.toObject(e,this)},proto.EditorProxyMetadata.toObject=function(e,t){var r={id:n.Message.getFieldWithDefault(t,1,0),bufferProxyId:n.Message.getFieldWithDefault(t,2,0),bufferProxyUri:n.Message.getFieldWithDefault(t,3,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.EditorProxyMetadata.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.EditorProxyMetadata;return proto.EditorProxyMetadata.deserializeBinaryFromReader(r,t)},proto.EditorProxyMetadata.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setId(r);break;case 2:r=t.readUint32();e.setBufferProxyId(r);break;case 3:r=t.readString();e.setBufferProxyUri(r);break;default:t.skipField()}}return e},proto.EditorProxyMetadata.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.EditorProxyMetadata.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.EditorProxyMetadata.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getId())&&t.writeUint32(1,r),0!==(r=e.getBufferProxyId())&&t.writeUint32(2,r),(r=e.getBufferProxyUri()).length>0&&t.writeString(3,r)},proto.EditorProxyMetadata.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.EditorProxyMetadata.prototype.setId=function(e){n.Message.setProto3IntField(this,1,e)},proto.EditorProxyMetadata.prototype.getBufferProxyId=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.EditorProxyMetadata.prototype.setBufferProxyId=function(e){n.Message.setProto3IntField(this,2,e)},proto.EditorProxyMetadata.prototype.getBufferProxyUri=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.EditorProxyMetadata.prototype.setBufferProxyUri=function(e){n.Message.setProto3StringField(this,3,e)},proto.EditorProxyUpdate=function(e){n.Message.initialize(this,e,0,-1,null,proto.EditorProxyUpdate.oneofGroups_)},i.inherits(proto.EditorProxyUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.EditorProxyUpdate.displayName="proto.EditorProxyUpdate"),proto.EditorProxyUpdate.oneofGroups_=[[1]],proto.EditorProxyUpdate.VariantCase={VARIANT_NOT_SET:0,SELECTIONS_UPDATE:1},proto.EditorProxyUpdate.prototype.getVariantCase=function(){return n.Message.computeOneofCase(this,proto.EditorProxyUpdate.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.EditorProxyUpdate.prototype.toObject=function(e){return proto.EditorProxyUpdate.toObject(e,this)},proto.EditorProxyUpdate.toObject=function(e,t){var r,n={selectionsUpdate:(r=t.getSelectionsUpdate())&&proto.EditorProxyUpdate.SelectionsUpdate.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.EditorProxyUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.EditorProxyUpdate;return proto.EditorProxyUpdate.deserializeBinaryFromReader(r,t)},proto.EditorProxyUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.EditorProxyUpdate.SelectionsUpdate;t.readMessage(r,proto.EditorProxyUpdate.SelectionsUpdate.deserializeBinaryFromReader),e.setSelectionsUpdate(r);break;default:t.skipField()}}return e},proto.EditorProxyUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.EditorProxyUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.EditorProxyUpdate.serializeBinaryToWriter=function(e,t){var r;null!=(r=e.getSelectionsUpdate())&&t.writeMessage(1,r,proto.EditorProxyUpdate.SelectionsUpdate.serializeBinaryToWriter)},proto.EditorProxyUpdate.SelectionsUpdate=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.EditorProxyUpdate.SelectionsUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.EditorProxyUpdate.SelectionsUpdate.displayName="proto.EditorProxyUpdate.SelectionsUpdate"),n.Message.GENERATE_TO_OBJECT&&(proto.EditorProxyUpdate.SelectionsUpdate.prototype.toObject=function(e){return proto.EditorProxyUpdate.SelectionsUpdate.toObject(e,this)},proto.EditorProxyUpdate.SelectionsUpdate.toObject=function(e,t){var r,n={selectionLayerIdsBySiteIdMap:(r=t.getSelectionLayerIdsBySiteIdMap())?r.toObject(e,void 0):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.EditorProxyUpdate.SelectionsUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.EditorProxyUpdate.SelectionsUpdate;return proto.EditorProxyUpdate.SelectionsUpdate.deserializeBinaryFromReader(r,t)},proto.EditorProxyUpdate.SelectionsUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=e.getSelectionLayerIdsBySiteIdMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readUint32,n.BinaryReader.prototype.readUint32)}));break;default:t.skipField()}}return e},proto.EditorProxyUpdate.SelectionsUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.EditorProxyUpdate.SelectionsUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.EditorProxyUpdate.SelectionsUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSelectionLayerIdsBySiteIdMap(!0))&&r.getLength()>0&&r.serializeBinary(1,t,n.BinaryWriter.prototype.writeUint32,n.BinaryWriter.prototype.writeUint32)},proto.EditorProxyUpdate.SelectionsUpdate.prototype.getSelectionLayerIdsBySiteIdMap=function(e){return n.Message.getMapField(this,1,e,null)},proto.EditorProxyUpdate.SelectionsUpdate.prototype.clearSelectionLayerIdsBySiteIdMap=function(){this.getSelectionLayerIdsBySiteIdMap().clear()},proto.EditorProxyUpdate.prototype.getSelectionsUpdate=function(){return n.Message.getWrapperField(this,proto.EditorProxyUpdate.SelectionsUpdate,1)},proto.EditorProxyUpdate.prototype.setSelectionsUpdate=function(e){n.Message.setOneofWrapperField(this,1,proto.EditorProxyUpdate.oneofGroups_[0],e)},proto.EditorProxyUpdate.prototype.clearSelectionsUpdate=function(){this.setSelectionsUpdate(void 0)},proto.EditorProxyUpdate.prototype.hasSelectionsUpdate=function(){return null!=n.Message.getField(this,1)},proto.BufferProxy=function(e){n.Message.initialize(this,e,0,-1,proto.BufferProxy.repeatedFields_,null)},i.inherits(proto.BufferProxy,n.Message),i.DEBUG&&!COMPILED&&(proto.BufferProxy.displayName="proto.BufferProxy"),proto.BufferProxy.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.BufferProxy.prototype.toObject=function(e){return proto.BufferProxy.toObject(e,this)},proto.BufferProxy.toObject=function(e,t){var r={id:n.Message.getFieldWithDefault(t,1,0),uri:n.Message.getFieldWithDefault(t,2,""),operationsList:n.Message.toObjectList(t.getOperationsList(),s.Operation.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.BufferProxy.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.BufferProxy;return proto.BufferProxy.deserializeBinaryFromReader(r,t)},proto.BufferProxy.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setId(r);break;case 2:r=t.readString();e.setUri(r);break;case 3:r=new s.Operation;t.readMessage(r,s.Operation.deserializeBinaryFromReader),e.addOperations(r);break;default:t.skipField()}}return e},proto.BufferProxy.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.BufferProxy.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.BufferProxy.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getId())&&t.writeUint32(1,r),(r=e.getUri()).length>0&&t.writeString(2,r),(r=e.getOperationsList()).length>0&&t.writeRepeatedMessage(3,r,s.Operation.serializeBinaryToWriter)},proto.BufferProxy.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.BufferProxy.prototype.setId=function(e){n.Message.setProto3IntField(this,1,e)},proto.BufferProxy.prototype.getUri=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.BufferProxy.prototype.setUri=function(e){n.Message.setProto3StringField(this,2,e)},proto.BufferProxy.prototype.getOperationsList=function(){return n.Message.getRepeatedWrapperField(this,s.Operation,3)},proto.BufferProxy.prototype.setOperationsList=function(e){n.Message.setRepeatedWrapperField(this,3,e)},proto.BufferProxy.prototype.addOperations=function(e,t){return n.Message.addToRepeatedWrapperField(this,3,e,proto.Operation,t)},proto.BufferProxy.prototype.clearOperationsList=function(){this.setOperationsList([])},proto.BufferProxyUpdate=function(e){n.Message.initialize(this,e,0,-1,null,proto.BufferProxyUpdate.oneofGroups_)},i.inherits(proto.BufferProxyUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.BufferProxyUpdate.displayName="proto.BufferProxyUpdate"),proto.BufferProxyUpdate.oneofGroups_=[[2,3]],proto.BufferProxyUpdate.VariantCase={VARIANT_NOT_SET:0,OPERATIONS_UPDATE:2,URI_UPDATE:3},proto.BufferProxyUpdate.prototype.getVariantCase=function(){return n.Message.computeOneofCase(this,proto.BufferProxyUpdate.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.BufferProxyUpdate.prototype.toObject=function(e){return proto.BufferProxyUpdate.toObject(e,this)},proto.BufferProxyUpdate.toObject=function(e,t){var r,n={operationsUpdate:(r=t.getOperationsUpdate())&&proto.BufferProxyUpdate.OperationsUpdate.toObject(e,r),uriUpdate:(r=t.getUriUpdate())&&proto.BufferProxyUpdate.URIUpdate.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.BufferProxyUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.BufferProxyUpdate;return proto.BufferProxyUpdate.deserializeBinaryFromReader(r,t)},proto.BufferProxyUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new proto.BufferProxyUpdate.OperationsUpdate;t.readMessage(r,proto.BufferProxyUpdate.OperationsUpdate.deserializeBinaryFromReader),e.setOperationsUpdate(r);break;case 3:r=new proto.BufferProxyUpdate.URIUpdate;t.readMessage(r,proto.BufferProxyUpdate.URIUpdate.deserializeBinaryFromReader),e.setUriUpdate(r);break;default:t.skipField()}}return e},proto.BufferProxyUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.BufferProxyUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.BufferProxyUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getOperationsUpdate())&&t.writeMessage(2,r,proto.BufferProxyUpdate.OperationsUpdate.serializeBinaryToWriter),null!=(r=e.getUriUpdate())&&t.writeMessage(3,r,proto.BufferProxyUpdate.URIUpdate.serializeBinaryToWriter)},proto.BufferProxyUpdate.OperationsUpdate=function(e){n.Message.initialize(this,e,0,-1,proto.BufferProxyUpdate.OperationsUpdate.repeatedFields_,null)},i.inherits(proto.BufferProxyUpdate.OperationsUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.BufferProxyUpdate.OperationsUpdate.displayName="proto.BufferProxyUpdate.OperationsUpdate"),proto.BufferProxyUpdate.OperationsUpdate.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.BufferProxyUpdate.OperationsUpdate.prototype.toObject=function(e){return proto.BufferProxyUpdate.OperationsUpdate.toObject(e,this)},proto.BufferProxyUpdate.OperationsUpdate.toObject=function(e,t){var r={operationsList:n.Message.toObjectList(t.getOperationsList(),s.Operation.toObject,e)};return e&&(r.$jspbMessageInstance=t),r}),proto.BufferProxyUpdate.OperationsUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.BufferProxyUpdate.OperationsUpdate;return proto.BufferProxyUpdate.OperationsUpdate.deserializeBinaryFromReader(r,t)},proto.BufferProxyUpdate.OperationsUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new s.Operation;t.readMessage(r,s.Operation.deserializeBinaryFromReader),e.addOperations(r);break;default:t.skipField()}}return e},proto.BufferProxyUpdate.OperationsUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.BufferProxyUpdate.OperationsUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.BufferProxyUpdate.OperationsUpdate.serializeBinaryToWriter=function(e,t){var r;(r=e.getOperationsList()).length>0&&t.writeRepeatedMessage(1,r,s.Operation.serializeBinaryToWriter)},proto.BufferProxyUpdate.OperationsUpdate.prototype.getOperationsList=function(){return n.Message.getRepeatedWrapperField(this,s.Operation,1)},proto.BufferProxyUpdate.OperationsUpdate.prototype.setOperationsList=function(e){n.Message.setRepeatedWrapperField(this,1,e)},proto.BufferProxyUpdate.OperationsUpdate.prototype.addOperations=function(e,t){return n.Message.addToRepeatedWrapperField(this,1,e,proto.Operation,t)},proto.BufferProxyUpdate.OperationsUpdate.prototype.clearOperationsList=function(){this.setOperationsList([])},proto.BufferProxyUpdate.URIUpdate=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.BufferProxyUpdate.URIUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.BufferProxyUpdate.URIUpdate.displayName="proto.BufferProxyUpdate.URIUpdate"),n.Message.GENERATE_TO_OBJECT&&(proto.BufferProxyUpdate.URIUpdate.prototype.toObject=function(e){return proto.BufferProxyUpdate.URIUpdate.toObject(e,this)},proto.BufferProxyUpdate.URIUpdate.toObject=function(e,t){var r={uri:n.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.BufferProxyUpdate.URIUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.BufferProxyUpdate.URIUpdate;return proto.BufferProxyUpdate.URIUpdate.deserializeBinaryFromReader(r,t)},proto.BufferProxyUpdate.URIUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setUri(r);break;default:t.skipField()}}return e},proto.BufferProxyUpdate.URIUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.BufferProxyUpdate.URIUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.BufferProxyUpdate.URIUpdate.serializeBinaryToWriter=function(e,t){var r;(r=e.getUri()).length>0&&t.writeString(1,r)},proto.BufferProxyUpdate.URIUpdate.prototype.getUri=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.BufferProxyUpdate.URIUpdate.prototype.setUri=function(e){n.Message.setProto3StringField(this,1,e)},proto.BufferProxyUpdate.prototype.getOperationsUpdate=function(){return n.Message.getWrapperField(this,proto.BufferProxyUpdate.OperationsUpdate,2)},proto.BufferProxyUpdate.prototype.setOperationsUpdate=function(e){n.Message.setOneofWrapperField(this,2,proto.BufferProxyUpdate.oneofGroups_[0],e)},proto.BufferProxyUpdate.prototype.clearOperationsUpdate=function(){this.setOperationsUpdate(void 0)},proto.BufferProxyUpdate.prototype.hasOperationsUpdate=function(){return null!=n.Message.getField(this,2)},proto.BufferProxyUpdate.prototype.getUriUpdate=function(){return n.Message.getWrapperField(this,proto.BufferProxyUpdate.URIUpdate,3)},proto.BufferProxyUpdate.prototype.setUriUpdate=function(e){n.Message.setOneofWrapperField(this,3,proto.BufferProxyUpdate.oneofGroups_[0],e)},proto.BufferProxyUpdate.prototype.clearUriUpdate=function(){this.setUriUpdate(void 0)},proto.BufferProxyUpdate.prototype.hasUriUpdate=function(){return null!=n.Message.getField(this,3)},proto.RouterMessage=function(e){n.Message.initialize(this,e,0,-1,null,proto.RouterMessage.oneofGroups_)},i.inherits(proto.RouterMessage,n.Message),i.DEBUG&&!COMPILED&&(proto.RouterMessage.displayName="proto.RouterMessage"),proto.RouterMessage.oneofGroups_=[[2,3,4]],proto.RouterMessage.VariantCase={VARIANT_NOT_SET:0,NOTIFICATION:2,REQUEST:3,RESPONSE:4},proto.RouterMessage.prototype.getVariantCase=function(){return n.Message.computeOneofCase(this,proto.RouterMessage.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.RouterMessage.prototype.toObject=function(e){return proto.RouterMessage.toObject(e,this)},proto.RouterMessage.toObject=function(e,t){var r,n={notification:(r=t.getNotification())&&proto.RouterMessage.Notification.toObject(e,r),request:(r=t.getRequest())&&proto.RouterMessage.Request.toObject(e,r),response:(r=t.getResponse())&&proto.RouterMessage.Response.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.RouterMessage.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.RouterMessage;return proto.RouterMessage.deserializeBinaryFromReader(r,t)},proto.RouterMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new proto.RouterMessage.Notification;t.readMessage(r,proto.RouterMessage.Notification.deserializeBinaryFromReader),e.setNotification(r);break;case 3:r=new proto.RouterMessage.Request;t.readMessage(r,proto.RouterMessage.Request.deserializeBinaryFromReader),e.setRequest(r);break;case 4:r=new proto.RouterMessage.Response;t.readMessage(r,proto.RouterMessage.Response.deserializeBinaryFromReader),e.setResponse(r);break;default:t.skipField()}}return e},proto.RouterMessage.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.RouterMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.RouterMessage.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getNotification())&&t.writeMessage(2,r,proto.RouterMessage.Notification.serializeBinaryToWriter),null!=(r=e.getRequest())&&t.writeMessage(3,r,proto.RouterMessage.Request.serializeBinaryToWriter),null!=(r=e.getResponse())&&t.writeMessage(4,r,proto.RouterMessage.Response.serializeBinaryToWriter)},proto.RouterMessage.Notification=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.RouterMessage.Notification,n.Message),i.DEBUG&&!COMPILED&&(proto.RouterMessage.Notification.displayName="proto.RouterMessage.Notification"),n.Message.GENERATE_TO_OBJECT&&(proto.RouterMessage.Notification.prototype.toObject=function(e){return proto.RouterMessage.Notification.toObject(e,this)},proto.RouterMessage.Notification.toObject=function(e,t){var r={channelId:n.Message.getFieldWithDefault(t,1,""),body:t.getBody_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.RouterMessage.Notification.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.RouterMessage.Notification;return proto.RouterMessage.Notification.deserializeBinaryFromReader(r,t)},proto.RouterMessage.Notification.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setChannelId(r);break;case 2:r=t.readBytes();e.setBody(r);break;default:t.skipField()}}return e},proto.RouterMessage.Notification.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.RouterMessage.Notification.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.RouterMessage.Notification.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getChannelId()).length>0&&t.writeString(1,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(2,r)},proto.RouterMessage.Notification.prototype.getChannelId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.RouterMessage.Notification.prototype.setChannelId=function(e){n.Message.setProto3StringField(this,1,e)},proto.RouterMessage.Notification.prototype.getBody=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.RouterMessage.Notification.prototype.getBody_asB64=function(){return n.Message.bytesAsB64(this.getBody())},proto.RouterMessage.Notification.prototype.getBody_asU8=function(){return n.Message.bytesAsU8(this.getBody())},proto.RouterMessage.Notification.prototype.setBody=function(e){n.Message.setProto3BytesField(this,2,e)},proto.RouterMessage.Request=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.RouterMessage.Request,n.Message),i.DEBUG&&!COMPILED&&(proto.RouterMessage.Request.displayName="proto.RouterMessage.Request"),n.Message.GENERATE_TO_OBJECT&&(proto.RouterMessage.Request.prototype.toObject=function(e){return proto.RouterMessage.Request.toObject(e,this)},proto.RouterMessage.Request.toObject=function(e,t){var r={channelId:n.Message.getFieldWithDefault(t,1,""),requestId:n.Message.getFieldWithDefault(t,2,0),body:t.getBody_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.RouterMessage.Request.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.RouterMessage.Request;return proto.RouterMessage.Request.deserializeBinaryFromReader(r,t)},proto.RouterMessage.Request.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setChannelId(r);break;case 2:r=t.readUint32();e.setRequestId(r);break;case 3:r=t.readBytes();e.setBody(r);break;default:t.skipField()}}return e},proto.RouterMessage.Request.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.RouterMessage.Request.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.RouterMessage.Request.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getChannelId()).length>0&&t.writeString(1,r),0!==(r=e.getRequestId())&&t.writeUint32(2,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(3,r)},proto.RouterMessage.Request.prototype.getChannelId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.RouterMessage.Request.prototype.setChannelId=function(e){n.Message.setProto3StringField(this,1,e)},proto.RouterMessage.Request.prototype.getRequestId=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.RouterMessage.Request.prototype.setRequestId=function(e){n.Message.setProto3IntField(this,2,e)},proto.RouterMessage.Request.prototype.getBody=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.RouterMessage.Request.prototype.getBody_asB64=function(){return n.Message.bytesAsB64(this.getBody())},proto.RouterMessage.Request.prototype.getBody_asU8=function(){return n.Message.bytesAsU8(this.getBody())},proto.RouterMessage.Request.prototype.setBody=function(e){n.Message.setProto3BytesField(this,3,e)},proto.RouterMessage.Response=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.RouterMessage.Response,n.Message),i.DEBUG&&!COMPILED&&(proto.RouterMessage.Response.displayName="proto.RouterMessage.Response"),n.Message.GENERATE_TO_OBJECT&&(proto.RouterMessage.Response.prototype.toObject=function(e){return proto.RouterMessage.Response.toObject(e,this)},proto.RouterMessage.Response.toObject=function(e,t){var r={requestId:n.Message.getFieldWithDefault(t,1,0),body:t.getBody_asB64(),ok:n.Message.getFieldWithDefault(t,3,!1)};return e&&(r.$jspbMessageInstance=t),r}),proto.RouterMessage.Response.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.RouterMessage.Response;return proto.RouterMessage.Response.deserializeBinaryFromReader(r,t)},proto.RouterMessage.Response.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setRequestId(r);break;case 2:r=t.readBytes();e.setBody(r);break;case 3:r=t.readBool();e.setOk(r);break;default:t.skipField()}}return e},proto.RouterMessage.Response.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.RouterMessage.Response.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.RouterMessage.Response.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getRequestId())&&t.writeUint32(1,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(2,r),(r=e.getOk())&&t.writeBool(3,r)},proto.RouterMessage.Response.prototype.getRequestId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.RouterMessage.Response.prototype.setRequestId=function(e){n.Message.setProto3IntField(this,1,e)},proto.RouterMessage.Response.prototype.getBody=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.RouterMessage.Response.prototype.getBody_asB64=function(){return n.Message.bytesAsB64(this.getBody())},proto.RouterMessage.Response.prototype.getBody_asU8=function(){return n.Message.bytesAsU8(this.getBody())},proto.RouterMessage.Response.prototype.setBody=function(e){n.Message.setProto3BytesField(this,2,e)},proto.RouterMessage.Response.prototype.getOk=function(){return n.Message.getFieldWithDefault(this,3,!1)},proto.RouterMessage.Response.prototype.setOk=function(e){n.Message.setProto3BooleanField(this,3,e)},proto.RouterMessage.prototype.getNotification=function(){return n.Message.getWrapperField(this,proto.RouterMessage.Notification,2)},proto.RouterMessage.prototype.setNotification=function(e){n.Message.setOneofWrapperField(this,2,proto.RouterMessage.oneofGroups_[0],e)},proto.RouterMessage.prototype.clearNotification=function(){this.setNotification(void 0)},proto.RouterMessage.prototype.hasNotification=function(){return null!=n.Message.getField(this,2)},proto.RouterMessage.prototype.getRequest=function(){return n.Message.getWrapperField(this,proto.RouterMessage.Request,3)},proto.RouterMessage.prototype.setRequest=function(e){n.Message.setOneofWrapperField(this,3,proto.RouterMessage.oneofGroups_[0],e)},proto.RouterMessage.prototype.clearRequest=function(){this.setRequest(void 0)},proto.RouterMessage.prototype.hasRequest=function(){return null!=n.Message.getField(this,3)},proto.RouterMessage.prototype.getResponse=function(){return n.Message.getWrapperField(this,proto.RouterMessage.Response,4)},proto.RouterMessage.prototype.setResponse=function(e){n.Message.setOneofWrapperField(this,4,proto.RouterMessage.oneofGroups_[0],e)},proto.RouterMessage.prototype.clearResponse=function(){this.setResponse(void 0)},proto.RouterMessage.prototype.hasResponse=function(){return null!=n.Message.getField(this,4)},proto.NetworkMessage=function(e){n.Message.initialize(this,e,0,-1,null,proto.NetworkMessage.oneofGroups_)},i.inherits(proto.NetworkMessage,n.Message),i.DEBUG&&!COMPILED&&(proto.NetworkMessage.displayName="proto.NetworkMessage"),proto.NetworkMessage.oneofGroups_=[[2,3,4,5,6,7]],proto.NetworkMessage.VariantCase={VARIANT_NOT_SET:0,STAR_JOIN_REQUEST:2,STAR_JOIN_RESPONSE:3,STAR_JOIN_NOTIFICATION:4,STAR_LEAVE_NOTIFICATION:5,STAR_UNICAST:6,STAR_BROADCAST:7},proto.NetworkMessage.prototype.getVariantCase=function(){return n.Message.computeOneofCase(this,proto.NetworkMessage.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.prototype.toObject=function(e){return proto.NetworkMessage.toObject(e,this)},proto.NetworkMessage.toObject=function(e,t){var r,i={networkId:n.Message.getFieldWithDefault(t,1,""),starJoinRequest:(r=t.getStarJoinRequest())&&proto.NetworkMessage.StarJoinRequest.toObject(e,r),starJoinResponse:(r=t.getStarJoinResponse())&&proto.NetworkMessage.StarJoinResponse.toObject(e,r),starJoinNotification:(r=t.getStarJoinNotification())&&proto.NetworkMessage.StarJoinNotification.toObject(e,r),starLeaveNotification:(r=t.getStarLeaveNotification())&&proto.NetworkMessage.StarLeaveNotification.toObject(e,r),starUnicast:(r=t.getStarUnicast())&&proto.NetworkMessage.StarUnicast.toObject(e,r),starBroadcast:(r=t.getStarBroadcast())&&proto.NetworkMessage.StarBroadcast.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),proto.NetworkMessage.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.NetworkMessage;return proto.NetworkMessage.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setNetworkId(r);break;case 2:r=new proto.NetworkMessage.StarJoinRequest;t.readMessage(r,proto.NetworkMessage.StarJoinRequest.deserializeBinaryFromReader),e.setStarJoinRequest(r);break;case 3:r=new proto.NetworkMessage.StarJoinResponse;t.readMessage(r,proto.NetworkMessage.StarJoinResponse.deserializeBinaryFromReader),e.setStarJoinResponse(r);break;case 4:r=new proto.NetworkMessage.StarJoinNotification;t.readMessage(r,proto.NetworkMessage.StarJoinNotification.deserializeBinaryFromReader),e.setStarJoinNotification(r);break;case 5:r=new proto.NetworkMessage.StarLeaveNotification;t.readMessage(r,proto.NetworkMessage.StarLeaveNotification.deserializeBinaryFromReader),e.setStarLeaveNotification(r);break;case 6:r=new proto.NetworkMessage.StarUnicast;t.readMessage(r,proto.NetworkMessage.StarUnicast.deserializeBinaryFromReader),e.setStarUnicast(r);break;case 7:r=new proto.NetworkMessage.StarBroadcast;t.readMessage(r,proto.NetworkMessage.StarBroadcast.deserializeBinaryFromReader),e.setStarBroadcast(r);break;default:t.skipField()}}return e},proto.NetworkMessage.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.NetworkMessage.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getNetworkId()).length>0&&t.writeString(1,r),null!=(r=e.getStarJoinRequest())&&t.writeMessage(2,r,proto.NetworkMessage.StarJoinRequest.serializeBinaryToWriter),null!=(r=e.getStarJoinResponse())&&t.writeMessage(3,r,proto.NetworkMessage.StarJoinResponse.serializeBinaryToWriter),null!=(r=e.getStarJoinNotification())&&t.writeMessage(4,r,proto.NetworkMessage.StarJoinNotification.serializeBinaryToWriter),null!=(r=e.getStarLeaveNotification())&&t.writeMessage(5,r,proto.NetworkMessage.StarLeaveNotification.serializeBinaryToWriter),null!=(r=e.getStarUnicast())&&t.writeMessage(6,r,proto.NetworkMessage.StarUnicast.serializeBinaryToWriter),null!=(r=e.getStarBroadcast())&&t.writeMessage(7,r,proto.NetworkMessage.StarBroadcast.serializeBinaryToWriter)},proto.NetworkMessage.StarJoinRequest=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.NetworkMessage.StarJoinRequest,n.Message),i.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarJoinRequest.displayName="proto.NetworkMessage.StarJoinRequest"),n.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarJoinRequest.prototype.toObject=function(e){return proto.NetworkMessage.StarJoinRequest.toObject(e,this)},proto.NetworkMessage.StarJoinRequest.toObject=function(e,t){var r={senderId:n.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.NetworkMessage.StarJoinRequest.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.NetworkMessage.StarJoinRequest;return proto.NetworkMessage.StarJoinRequest.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarJoinRequest.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setSenderId(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarJoinRequest.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.NetworkMessage.StarJoinRequest.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarJoinRequest.serializeBinaryToWriter=function(e,t){var r;(r=e.getSenderId()).length>0&&t.writeString(1,r)},proto.NetworkMessage.StarJoinRequest.prototype.getSenderId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarJoinRequest.prototype.setSenderId=function(e){n.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarJoinResponse=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.NetworkMessage.StarJoinResponse,n.Message),i.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarJoinResponse.displayName="proto.NetworkMessage.StarJoinResponse"),n.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarJoinResponse.prototype.toObject=function(e){return proto.NetworkMessage.StarJoinResponse.toObject(e,this)},proto.NetworkMessage.StarJoinResponse.toObject=function(e,t){var r,n={memberIdentitiesByIdMap:(r=t.getMemberIdentitiesByIdMap())?r.toObject(e,proto.PeerIdentity.toObject):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.NetworkMessage.StarJoinResponse.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.NetworkMessage.StarJoinResponse;return proto.NetworkMessage.StarJoinResponse.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarJoinResponse.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=e.getMemberIdentitiesByIdMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readString,n.BinaryReader.prototype.readMessage,proto.PeerIdentity.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.NetworkMessage.StarJoinResponse.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.NetworkMessage.StarJoinResponse.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarJoinResponse.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getMemberIdentitiesByIdMap(!0))&&r.getLength()>0&&r.serializeBinary(1,t,n.BinaryWriter.prototype.writeString,n.BinaryWriter.prototype.writeMessage,proto.PeerIdentity.serializeBinaryToWriter)},proto.NetworkMessage.StarJoinResponse.prototype.getMemberIdentitiesByIdMap=function(e){return n.Message.getMapField(this,1,e,proto.PeerIdentity)},proto.NetworkMessage.StarJoinResponse.prototype.clearMemberIdentitiesByIdMap=function(){this.getMemberIdentitiesByIdMap().clear()},proto.NetworkMessage.StarJoinNotification=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.NetworkMessage.StarJoinNotification,n.Message),i.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarJoinNotification.displayName="proto.NetworkMessage.StarJoinNotification"),n.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarJoinNotification.prototype.toObject=function(e){return proto.NetworkMessage.StarJoinNotification.toObject(e,this)},proto.NetworkMessage.StarJoinNotification.toObject=function(e,t){var r,i={memberId:n.Message.getFieldWithDefault(t,1,""),memberIdentity:(r=t.getMemberIdentity())&&proto.PeerIdentity.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),proto.NetworkMessage.StarJoinNotification.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.NetworkMessage.StarJoinNotification;return proto.NetworkMessage.StarJoinNotification.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarJoinNotification.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setMemberId(r);break;case 2:r=new proto.PeerIdentity;t.readMessage(r,proto.PeerIdentity.deserializeBinaryFromReader),e.setMemberIdentity(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarJoinNotification.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.NetworkMessage.StarJoinNotification.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarJoinNotification.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getMemberId()).length>0&&t.writeString(1,r),null!=(r=e.getMemberIdentity())&&t.writeMessage(2,r,proto.PeerIdentity.serializeBinaryToWriter)},proto.NetworkMessage.StarJoinNotification.prototype.getMemberId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarJoinNotification.prototype.setMemberId=function(e){n.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarJoinNotification.prototype.getMemberIdentity=function(){return n.Message.getWrapperField(this,proto.PeerIdentity,2)},proto.NetworkMessage.StarJoinNotification.prototype.setMemberIdentity=function(e){n.Message.setWrapperField(this,2,e)},proto.NetworkMessage.StarJoinNotification.prototype.clearMemberIdentity=function(){this.setMemberIdentity(void 0)},proto.NetworkMessage.StarJoinNotification.prototype.hasMemberIdentity=function(){return null!=n.Message.getField(this,2)},proto.NetworkMessage.StarLeaveNotification=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.NetworkMessage.StarLeaveNotification,n.Message),i.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarLeaveNotification.displayName="proto.NetworkMessage.StarLeaveNotification"),n.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarLeaveNotification.prototype.toObject=function(e){return proto.NetworkMessage.StarLeaveNotification.toObject(e,this)},proto.NetworkMessage.StarLeaveNotification.toObject=function(e,t){var r={memberId:n.Message.getFieldWithDefault(t,1,""),connectionLost:n.Message.getFieldWithDefault(t,2,!1)};return e&&(r.$jspbMessageInstance=t),r}),proto.NetworkMessage.StarLeaveNotification.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.NetworkMessage.StarLeaveNotification;return proto.NetworkMessage.StarLeaveNotification.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarLeaveNotification.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setMemberId(r);break;case 2:r=t.readBool();e.setConnectionLost(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarLeaveNotification.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.NetworkMessage.StarLeaveNotification.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarLeaveNotification.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getMemberId()).length>0&&t.writeString(1,r),(r=e.getConnectionLost())&&t.writeBool(2,r)},proto.NetworkMessage.StarLeaveNotification.prototype.getMemberId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarLeaveNotification.prototype.setMemberId=function(e){n.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarLeaveNotification.prototype.getConnectionLost=function(){return n.Message.getFieldWithDefault(this,2,!1)},proto.NetworkMessage.StarLeaveNotification.prototype.setConnectionLost=function(e){n.Message.setProto3BooleanField(this,2,e)},proto.NetworkMessage.StarUnicast=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.NetworkMessage.StarUnicast,n.Message),i.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarUnicast.displayName="proto.NetworkMessage.StarUnicast"),n.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarUnicast.prototype.toObject=function(e){return proto.NetworkMessage.StarUnicast.toObject(e,this)},proto.NetworkMessage.StarUnicast.toObject=function(e,t){var r={senderId:n.Message.getFieldWithDefault(t,1,""),recipientId:n.Message.getFieldWithDefault(t,2,""),body:t.getBody_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.NetworkMessage.StarUnicast.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.NetworkMessage.StarUnicast;return proto.NetworkMessage.StarUnicast.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarUnicast.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setSenderId(r);break;case 2:r=t.readString();e.setRecipientId(r);break;case 3:r=t.readBytes();e.setBody(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarUnicast.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.NetworkMessage.StarUnicast.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarUnicast.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSenderId()).length>0&&t.writeString(1,r),(r=e.getRecipientId()).length>0&&t.writeString(2,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(3,r)},proto.NetworkMessage.StarUnicast.prototype.getSenderId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarUnicast.prototype.setSenderId=function(e){n.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarUnicast.prototype.getRecipientId=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.NetworkMessage.StarUnicast.prototype.setRecipientId=function(e){n.Message.setProto3StringField(this,2,e)},proto.NetworkMessage.StarUnicast.prototype.getBody=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.NetworkMessage.StarUnicast.prototype.getBody_asB64=function(){return n.Message.bytesAsB64(this.getBody())},proto.NetworkMessage.StarUnicast.prototype.getBody_asU8=function(){return n.Message.bytesAsU8(this.getBody())},proto.NetworkMessage.StarUnicast.prototype.setBody=function(e){n.Message.setProto3BytesField(this,3,e)},proto.NetworkMessage.StarBroadcast=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.NetworkMessage.StarBroadcast,n.Message),i.DEBUG&&!COMPILED&&(proto.NetworkMessage.StarBroadcast.displayName="proto.NetworkMessage.StarBroadcast"),n.Message.GENERATE_TO_OBJECT&&(proto.NetworkMessage.StarBroadcast.prototype.toObject=function(e){return proto.NetworkMessage.StarBroadcast.toObject(e,this)},proto.NetworkMessage.StarBroadcast.toObject=function(e,t){var r={senderId:n.Message.getFieldWithDefault(t,1,""),body:t.getBody_asB64()};return e&&(r.$jspbMessageInstance=t),r}),proto.NetworkMessage.StarBroadcast.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.NetworkMessage.StarBroadcast;return proto.NetworkMessage.StarBroadcast.deserializeBinaryFromReader(r,t)},proto.NetworkMessage.StarBroadcast.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setSenderId(r);break;case 2:r=t.readBytes();e.setBody(r);break;default:t.skipField()}}return e},proto.NetworkMessage.StarBroadcast.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.NetworkMessage.StarBroadcast.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.NetworkMessage.StarBroadcast.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getSenderId()).length>0&&t.writeString(1,r),(r=e.getBody_asU8()).length>0&&t.writeBytes(2,r)},proto.NetworkMessage.StarBroadcast.prototype.getSenderId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.StarBroadcast.prototype.setSenderId=function(e){n.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.StarBroadcast.prototype.getBody=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.NetworkMessage.StarBroadcast.prototype.getBody_asB64=function(){return n.Message.bytesAsB64(this.getBody())},proto.NetworkMessage.StarBroadcast.prototype.getBody_asU8=function(){return n.Message.bytesAsU8(this.getBody())},proto.NetworkMessage.StarBroadcast.prototype.setBody=function(e){n.Message.setProto3BytesField(this,2,e)},proto.NetworkMessage.prototype.getNetworkId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.NetworkMessage.prototype.setNetworkId=function(e){n.Message.setProto3StringField(this,1,e)},proto.NetworkMessage.prototype.getStarJoinRequest=function(){return n.Message.getWrapperField(this,proto.NetworkMessage.StarJoinRequest,2)},proto.NetworkMessage.prototype.setStarJoinRequest=function(e){n.Message.setOneofWrapperField(this,2,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarJoinRequest=function(){this.setStarJoinRequest(void 0)},proto.NetworkMessage.prototype.hasStarJoinRequest=function(){return null!=n.Message.getField(this,2)},proto.NetworkMessage.prototype.getStarJoinResponse=function(){return n.Message.getWrapperField(this,proto.NetworkMessage.StarJoinResponse,3)},proto.NetworkMessage.prototype.setStarJoinResponse=function(e){n.Message.setOneofWrapperField(this,3,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarJoinResponse=function(){this.setStarJoinResponse(void 0)},proto.NetworkMessage.prototype.hasStarJoinResponse=function(){return null!=n.Message.getField(this,3)},proto.NetworkMessage.prototype.getStarJoinNotification=function(){return n.Message.getWrapperField(this,proto.NetworkMessage.StarJoinNotification,4)},proto.NetworkMessage.prototype.setStarJoinNotification=function(e){n.Message.setOneofWrapperField(this,4,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarJoinNotification=function(){this.setStarJoinNotification(void 0)},proto.NetworkMessage.prototype.hasStarJoinNotification=function(){return null!=n.Message.getField(this,4)},proto.NetworkMessage.prototype.getStarLeaveNotification=function(){return n.Message.getWrapperField(this,proto.NetworkMessage.StarLeaveNotification,5)},proto.NetworkMessage.prototype.setStarLeaveNotification=function(e){n.Message.setOneofWrapperField(this,5,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarLeaveNotification=function(){this.setStarLeaveNotification(void 0)},proto.NetworkMessage.prototype.hasStarLeaveNotification=function(){return null!=n.Message.getField(this,5)},proto.NetworkMessage.prototype.getStarUnicast=function(){return n.Message.getWrapperField(this,proto.NetworkMessage.StarUnicast,6)},proto.NetworkMessage.prototype.setStarUnicast=function(e){n.Message.setOneofWrapperField(this,6,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarUnicast=function(){this.setStarUnicast(void 0)},proto.NetworkMessage.prototype.hasStarUnicast=function(){return null!=n.Message.getField(this,6)},proto.NetworkMessage.prototype.getStarBroadcast=function(){return n.Message.getWrapperField(this,proto.NetworkMessage.StarBroadcast,7)},proto.NetworkMessage.prototype.setStarBroadcast=function(e){n.Message.setOneofWrapperField(this,7,proto.NetworkMessage.oneofGroups_[0],e)},proto.NetworkMessage.prototype.clearStarBroadcast=function(){this.setStarBroadcast(void 0)},proto.NetworkMessage.prototype.hasStarBroadcast=function(){return null!=n.Message.getField(this,7)},proto.PeerIdentity=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.PeerIdentity,n.Message),i.DEBUG&&!COMPILED&&(proto.PeerIdentity.displayName="proto.PeerIdentity"),n.Message.GENERATE_TO_OBJECT&&(proto.PeerIdentity.prototype.toObject=function(e){return proto.PeerIdentity.toObject(e,this)},proto.PeerIdentity.toObject=function(e,t){var r={login:n.Message.getFieldWithDefault(t,1,"")};return e&&(r.$jspbMessageInstance=t),r}),proto.PeerIdentity.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.PeerIdentity;return proto.PeerIdentity.deserializeBinaryFromReader(r,t)},proto.PeerIdentity.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readString();e.setLogin(r);break;default:t.skipField()}}return e},proto.PeerIdentity.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.PeerIdentity.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.PeerIdentity.serializeBinaryToWriter=function(e,t){var r;(r=e.getLogin()).length>0&&t.writeString(1,r)},proto.PeerIdentity.prototype.getLogin=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.PeerIdentity.prototype.setLogin=function(e){n.Message.setProto3StringField(this,1,e)},i.object.extend(t,proto)},function(e,t,r){var n,i=r(145),o=r(54),s=r(147),a=r(148),c=r(149);"undefined"!=typeof ArrayBuffer&&(n=r(150));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=l||u;t.protocol=3;var p=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=i(p),f={type:"error",data:"parser error"},g=r(151);function y(e,t,r){for(var n=new Array(e.length),i=a(e.length,r),o=function(e,r,i){t(r,(function(t,r){n[e]=r,i(t,n)}))},s=0;s<e.length;s++)o(s,e[s],i)}t.encodePacket=function(e,r,n,i){"function"==typeof r&&(i=r,r=!1),"function"==typeof n&&(i=n,n=null);var o=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var i=e.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=p[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return n(s.buffer)}(e,r,i);if(void 0!==g&&o instanceof g)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);if(d)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},r,!0,n)},i.readAsArrayBuffer(e.data)}(e,r,n);var i=new Uint8Array(1);i[0]=p[e.type];var o=new g([i.buffer,e.data]);return n(o)}(e,r,i);if(o&&o.base64)return function(e,r){var n="b"+t.packets[e.type]+e.data.data;return r(n)}(e,i);var s=p[e.type];return void 0!==e.data&&(s+=n?c.encode(String(e.data),{strict:!1}):String(e.data)),i(""+s)},t.encodeBase64Packet=function(e,r){var n,i="b"+t.packets[e.type];if(void 0!==g&&e.data instanceof g){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];r(i+e)},o.readAsDataURL(e.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];n=String.fromCharCode.apply(null,a)}return i+=btoa(n),r(i)},t.decodePacket=function(e,r,n){if(void 0===e)return f;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),r);if(n&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return f;var i=e.charAt(0);return Number(i)==i&&h[i]?e.length>1?{type:h[i],data:e.substring(1)}:{type:h[i]}:f}i=new Uint8Array(e)[0];var o=s(e,1);return g&&"blob"===r&&(o=new g([o])),{type:h[i],data:o}},t.decodeBase64Packet=function(e,t){var r=h[e.charAt(0)];if(!n)return{type:r,data:{base64:!0,data:e.substr(1)}};var i=n.decode(e.substr(1));return"blob"===t&&g&&(i=new g([i])),{type:r,data:i}},t.encodePayload=function(e,r,n){"function"==typeof r&&(n=r,r=null);var i=o(e);if(r&&i)return g&&!d?t.encodePayloadAsBlob(e,n):t.encodePayloadAsArrayBuffer(e,n);if(!e.length)return n("0:");y(e,(function(e,n){t.encodePacket(e,!!i&&r,!1,(function(e){n(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return n(t.join(""))}))},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);var i;if("function"==typeof r&&(n=r,r=null),""===e)return n(f,0,1);for(var o,s,a="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"===u){if(""===a||a!=(o=Number(a)))return n(f,0,1);if(a!=(s=e.substr(c+1,o)).length)return n(f,0,1);if(s.length){if(i=t.decodePacket(s,r,!1),f.type===i.type&&f.data===i.data)return n(f,0,1);if(!1===n(i,c+o,l))return}c+=o,a=""}else a+=u}return""!==a?n(f,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));y(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){return r(null,e)}))}),(function(e,t){var n=t.reduce((function(e,t){var r;return e+(r="string"==typeof t?t.length:t.byteLength).toString().length+r+2}),0),i=new Uint8Array(n),o=0;return t.forEach((function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);r=n.buffer}i[o++]=t?0:1;var a=r.byteLength.toString();for(s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(n=new Uint8Array(r),s=0;s<n.length;s++)i[o++]=n[s]})),r(i.buffer)}))},t.encodePayloadAsBlob=function(e,r){y(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);e=n.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)s[i]=parseInt(o[i]);if(s[o.length]=255,g){var a=new g([t.buffer,s.buffer,e]);r(null,a)}}))}),(function(e,t){return r(new g(t))}))},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var i=e,o=[];i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],l="",u=1;255!==a[u];u++){if(l.length>310)return n(f,0,1);l+=a[u]}i=s(i,2+l.length),l=parseInt(l);var d=s(i,0,l);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var p=new Uint8Array(d);d="";for(u=0;u<p.length;u++)d+=String.fromCharCode(p[u])}o.push(d),i=s(i,l)}var h=o.length;o.forEach((function(e,i){n(t.decodePacket(e,r,!0),i,h)}))}},function(e,t,r){var n=r(89),i=r(21),o=r(4);e.exports={TeletypeClient:n,FollowState:i,Errors:o}},function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,i=r.length;n<i;n++){var o=r[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){e.exports=r(83)()},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){(function(){e.exports=function(){function e(e){this.disposalAction=e}return e.prototype.disposed=!1,e.isDisposable=function(e){return"function"==typeof(null!=e?e.dispose:void 0)},e.prototype.dispose=function(){this.disposed||(this.disposed=!0,"function"==typeof this.disposalAction&&this.disposalAction(),this.disposalAction=null)},e}()}).call(this)},function(e,t,r){(function(t){e.exports=function(e){return null==e?e:(e instanceof t||(e=t.from(e)),e.constructor=Uint8Array,e)}}).call(this,r(7).Buffer)},function(module,exports,__webpack_require__){(function(global){var $jscomp={scope:{},getGlobal:function(e){return"undefined"!=typeof window&&window===e?e:void 0!==global?global:e}};$jscomp.global=$jscomp.getGlobal(this),$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol),$jscomp.initSymbol=function(){}},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return"jscomp_symbol_"+e+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol(),$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),$jscomp.initSymbolIterator=function(){}},$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator(),$jscomp.initSymbol(),$jscomp.initSymbolIterator();var t=e[Symbol.iterator];if(t)return t.call(e);var r=0;return{next:function(){return r<e.length?{done:!1,value:e[r++]}:{done:!0}}}},$jscomp.arrayFromIterator=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r},$jscomp.arrayFromIterable=function(e){return e instanceof Array?e:$jscomp.arrayFromIterator($jscomp.makeIterator(e))},$jscomp.inherits=function(e,t){function r(){}for(var n in r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,t)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n]},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(e,t){$jscomp.initSymbolIterator(),e instanceof String&&(e+="");var r=0,n={next:function(){if(r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return $jscomp.initSymbol(),$jscomp.initSymbolIterator(),n[Symbol.iterator]=function(){return n},n},$jscomp.findInternal=function(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,i=0;i<n;i++){var o=e[i];if(t.call(r,o,i,e))return{i:i,v:o}}return{i:-1,v:void 0}},$jscomp.array.from=function(e,t,r){$jscomp.initSymbolIterator(),t=null!=t?t:function(e){return e};var n=[];if($jscomp.initSymbol(),$jscomp.initSymbolIterator(),"function"==typeof(i=e[Symbol.iterator])&&(e=i.call(e)),"function"==typeof e.next)for(;!(i=e.next()).done;)n.push(t.call(r,i.value));else for(var i=e.length,o=0;o<i;o++)n.push(t.call(r,e[o]));return n},$jscomp.array.of=function(e){return $jscomp.array.from(arguments)},$jscomp.array.entries=function(){return $jscomp.iteratorFromArray(this,(function(e,t){return[e,t]}))},$jscomp.array.installHelper_=function(e,t){!Array.prototype[e]&&Object.defineProperties&&Object.defineProperty&&Object.defineProperty(Array.prototype,e,{configurable:!0,enumerable:!1,writable:!0,value:t})},$jscomp.array.entries$install=function(){$jscomp.array.installHelper_("entries",$jscomp.array.entries)},$jscomp.array.keys=function(){return $jscomp.iteratorFromArray(this,(function(e){return e}))},$jscomp.array.keys$install=function(){$jscomp.array.installHelper_("keys",$jscomp.array.keys)},$jscomp.array.values=function(){return $jscomp.iteratorFromArray(this,(function(e,t){return t}))},$jscomp.array.values$install=function(){$jscomp.array.installHelper_("values",$jscomp.array.values)},$jscomp.array.copyWithin=function(e,t,r){var n=this.length;if(e=Number(e),t=Number(t),r=Number(null!=r?r:n),e<t)for(r=Math.min(r,n);t<r;)t in this?this[e++]=this[t++]:(delete this[e++],t++);else for(e+=(r=Math.min(r,n+t-e))-t;r>t;)--r in this?this[--e]=this[r]:delete this[e];return this},$jscomp.array.copyWithin$install=function(){$jscomp.array.installHelper_("copyWithin",$jscomp.array.copyWithin)},$jscomp.array.fill=function(e,t,r){var n=this.length||0;for(0>t&&(t=Math.max(0,n+t)),(null==r||r>n)&&(r=n),0>(r=Number(r))&&(r=Math.max(0,n+r)),t=Number(t||0);t<r;t++)this[t]=e;return this},$jscomp.array.fill$install=function(){$jscomp.array.installHelper_("fill",$jscomp.array.fill)},$jscomp.array.find=function(e,t){return $jscomp.findInternal(this,e,t).v},$jscomp.array.find$install=function(){$jscomp.array.installHelper_("find",$jscomp.array.find)},$jscomp.array.findIndex=function(e,t){return $jscomp.findInternal(this,e,t).i},$jscomp.array.findIndex$install=function(){$jscomp.array.installHelper_("findIndex",$jscomp.array.findIndex)},$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.Map$isConformant=function(){if($jscomp.ASSUME_NO_NATIVE_MAP)return!1;var e=$jscomp.global.Map;if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e($jscomp.makeIterator([[t,"s"]]));if("s"!=r.get(t)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=n.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!n.next().done)}catch(e){return!1}},$jscomp.Map=function(e){if(this.data_={},this.head_=$jscomp.Map.createHead(),this.size=0,e){e=$jscomp.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}},$jscomp.Map.prototype.set=function(e,t){var r=$jscomp.Map.maybeGetEntry(this,e);return r.list||(r.list=this.data_[r.id]=[]),r.entry?r.entry.value=t:(r.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},r.list.push(r.entry),this.head_.previous.next=r.entry,this.head_.previous=r.entry,this.size++),this},$jscomp.Map.prototype.delete=function(e){return!(!(e=$jscomp.Map.maybeGetEntry(this,e)).entry||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,!0)},$jscomp.Map.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=$jscomp.Map.createHead(),this.size=0},$jscomp.Map.prototype.has=function(e){return!!$jscomp.Map.maybeGetEntry(this,e).entry},$jscomp.Map.prototype.get=function(e){return(e=$jscomp.Map.maybeGetEntry(this,e).entry)&&e.value},$jscomp.Map.prototype.entries=function(){return $jscomp.Map.makeIterator_(this,(function(e){return[e.key,e.value]}))},$jscomp.Map.prototype.keys=function(){return $jscomp.Map.makeIterator_(this,(function(e){return e.key}))},$jscomp.Map.prototype.values=function(){return $jscomp.Map.makeIterator_(this,(function(e){return e.value}))},$jscomp.Map.prototype.forEach=function(e,t){for(var r,n=this.entries();!(r=n.next()).done;)r=r.value,e.call(t,r[1],r[0],this)},$jscomp.Map.maybeGetEntry=function(e,t){var r=$jscomp.Map.getId(t),n=e.data_[r];if(n&&Object.prototype.hasOwnProperty.call(e.data_,r))for(var i=0;i<n.length;i++){var o=n[i];if(t!=t&&o.key!=o.key||t===o.key)return{id:r,list:n,index:i,entry:o}}return{id:r,list:n,index:-1,entry:void 0}},$jscomp.Map.makeIterator_=function(e,t){var r=e.head_,n={next:function(){if(r){for(;r.head!=e.head_;)r=r.previous;for(;r.next!=r.head;)return r=r.next,{done:!1,value:t(r)};r=null}return{done:!0,value:void 0}}};return $jscomp.initSymbol(),$jscomp.initSymbolIterator(),n[Symbol.iterator]=function(){return n},n},$jscomp.Map.mapIndex_=0,$jscomp.Map.createHead=function(){var e={};return e.previous=e.next=e.head=e},$jscomp.Map.getId=function(e){if(!(e instanceof Object))return"p_"+e;if(!($jscomp.Map.idKey in e))try{$jscomp.Map.defineProperty(e,$jscomp.Map.idKey,{value:++$jscomp.Map.mapIndex_})}catch(e){}return $jscomp.Map.idKey in e?e[$jscomp.Map.idKey]:"o_ "+e},$jscomp.Map.defineProperty=Object.defineProperty?function(e,t,r){Object.defineProperty(e,t,{value:String(r)})}:function(e,t,r){e[t]=String(r)},$jscomp.Map.Entry=function(){},$jscomp.Map$install=function(){$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map$isConformant()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.idKey=Symbol("map-id-key"),$jscomp.Map$install=function(){})},$jscomp.math=$jscomp.math||{},$jscomp.math.clz32=function(e){if(0===(e=Number(e)>>>0))return 32;var t=0;return 0==(4294901760&e)&&(e<<=16,t+=16),0==(4278190080&e)&&(e<<=8,t+=8),0==(4026531840&e)&&(e<<=4,t+=4),0==(3221225472&e)&&(e<<=2,t+=2),0==(2147483648&e)&&t++,t},$jscomp.math.imul=function(e,t){var r=65535&(e=Number(e)),n=65535&(t=Number(t));return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},$jscomp.math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:0<e?1:-1},$jscomp.math.log10=function(e){return Math.log(e)/Math.LN10},$jscomp.math.log2=function(e){return Math.log(e)/Math.LN2},$jscomp.math.log1p=function(e){if(.25>(e=Number(e))&&-.25<e){for(var t=e,r=1,n=e,i=0,o=1;i!=n;)n=(i=n)+(o*=-1)*(t*=e)/++r;return n}return Math.log(1+e)},$jscomp.math.expm1=function(e){if(.25>(e=Number(e))&&-.25<e){for(var t=e,r=1,n=e,i=0;i!=n;)n=(i=n)+(t*=e/++r);return n}return Math.exp(e)-1},$jscomp.math.cosh=function(e){return e=Number(e),(Math.exp(e)+Math.exp(-e))/2},$jscomp.math.sinh=function(e){return 0===(e=Number(e))?e:(Math.exp(e)-Math.exp(-e))/2},$jscomp.math.tanh=function(e){if(0===(e=Number(e)))return e;var t=(1-(t=Math.exp(-2*Math.abs(e))))/(1+t);return 0>e?-t:t},$jscomp.math.acosh=function(e){return e=Number(e),Math.log(e+Math.sqrt(e*e-1))},$jscomp.math.asinh=function(e){if(0===(e=Number(e)))return e;var t=Math.log(Math.abs(e)+Math.sqrt(e*e+1));return 0>e?-t:t},$jscomp.math.atanh=function(e){return e=Number(e),($jscomp.math.log1p(e)-$jscomp.math.log1p(-e))/2},$jscomp.math.hypot=function(e,t,r){e=Number(e),t=Number(t);var n,i,o,s=Math.max(Math.abs(e),Math.abs(t));for(n=2;n<arguments.length;n++)s=Math.max(s,Math.abs(arguments[n]));if(1e100<s||1e-100>s){for(o=(e/=s)*e+(t/=s)*t,n=2;n<arguments.length;n++)o+=(i=Number(arguments[n])/s)*i;return Math.sqrt(o)*s}for(o=e*e+t*t,n=2;n<arguments.length;n++)o+=(i=Number(arguments[n]))*i;return Math.sqrt(o)},$jscomp.math.trunc=function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t},$jscomp.math.cbrt=function(e){if(0===e)return e;e=Number(e);var t=Math.pow(Math.abs(e),1/3);return 0>e?-t:t},$jscomp.number=$jscomp.number||{},$jscomp.number.isFinite=function(e){return"number"==typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)},$jscomp.number.isInteger=function(e){return!!$jscomp.number.isFinite(e)&&e===Math.floor(e)},$jscomp.number.isNaN=function(e){return"number"==typeof e&&isNaN(e)},$jscomp.number.isSafeInteger=function(e){return $jscomp.number.isInteger(e)&&Math.abs(e)<=$jscomp.number.MAX_SAFE_INTEGER},$jscomp.number.EPSILON=Math.pow(2,-52),$jscomp.number.MAX_SAFE_INTEGER=9007199254740991,$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991,$jscomp.object=$jscomp.object||{},$jscomp.object.assign=function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$jscomp.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.Set$isConformant=function(){if($jscomp.ASSUME_NO_NATIVE_SET)return!1;var e=$jscomp.global.Set;if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e($jscomp.makeIterator([t]));if(!r.has(t)||1!=r.size||r.add(t)!=r||1!=r.size||r.add({x:4})!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=n.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&n.next().done)}catch(e){return!1}},$jscomp.Set=function(e){if(this.map_=new $jscomp.Map,e){e=$jscomp.makeIterator(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.map_.size},$jscomp.Set.prototype.add=function(e){return this.map_.set(e,e),this.size=this.map_.size,this},$jscomp.Set.prototype.delete=function(e){return e=this.map_.delete(e),this.size=this.map_.size,e},$jscomp.Set.prototype.clear=function(){this.map_.clear(),this.size=0},$jscomp.Set.prototype.has=function(e){return this.map_.has(e)},$jscomp.Set.prototype.entries=function(){return this.map_.entries()},$jscomp.Set.prototype.values=function(){return this.map_.values()},$jscomp.Set.prototype.forEach=function(e,t){var r=this;this.map_.forEach((function(n){return e.call(t,n,n,r)}))},$jscomp.Set$install=function(){$jscomp.Map$install(),$jscomp.Set$isConformant()?$jscomp.Set=$jscomp.global.Set:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values,$jscomp.Set$install=function(){})},$jscomp.string=$jscomp.string||{},$jscomp.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},$jscomp.string.fromCodePoint=function(e){for(var t="",r=0;r<arguments.length;r++){var n=Number(arguments[r]);if(0>n||1114111<n||n!==Math.floor(n))throw new RangeError("invalid_code_point "+n);65535>=n?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(n>>>10&1023|55296),t+=String.fromCharCode(1023&n|56320))}return t},$jscomp.string.repeat=function(e){var t=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)1&e&&(r+=t),(e>>>=1)&&(t+=t);return r},$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)},$jscomp.string.codePointAt=function(e){var t=$jscomp.checkStringArgs(this,null,"codePointAt"),r=t.length;if(0<=(e=Number(e)||0)&&e<r){e|=0;var n=t.charCodeAt(e);return 55296>n||56319<n||e+1===r?n:56320>(e=t.charCodeAt(e+1))||57343<e?n:1024*(n-55296)+e+9216}},$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)},$jscomp.string.includes=function(e,t){return-1!==$jscomp.checkStringArgs(this,e,"includes").indexOf(e,t||0)},$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)},$jscomp.string.startsWith=function(e,t){var r=$jscomp.checkStringArgs(this,e,"startsWith");e+="";for(var n=r.length,i=e.length,o=Math.max(0,Math.min(0|t,r.length)),s=0;s<i&&o<n;)if(r[o++]!=e[s++])return!1;return s>=i},$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)},$jscomp.string.endsWith=function(e,t){var r=$jscomp.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=r.length);for(var n=Math.max(0,Math.min(0|t,r.length)),i=e.length;0<i&&0<n;)if(r[--n]!=e[--i])return!1;return 0>=i},$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,r){e=e.split("."),r=r||goog.global,e[0]in r||!r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)!e.length&&goog.isDef(t)?r[n]=t:r=r[n]?r[n]:r[n]={}},goog.define=function(e,t){var r=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?r=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(r=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,r)},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED)return goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var r,n=e.split("."),i=t||goog.global;r=n.shift();){if(!goog.isDefAndNotNull(i[r]))return null;i=i[r]}return i},goog.globalize=function(e,t){var r,n=t||goog.global;for(r in e)n[r]=e[r]},goog.addDependency=function(e,t,r,n){if(goog.DEPENDENCIES_ENABLED){var i;e=e.replace(/\\/g,"/");for(var o=goog.dependencies_,s=0;i=t[s];s++)o.nameToPath[i]=e,o.pathIsModule[e]=!!n;for(n=0;t=r[n];n++)e in o.requires||(o.requires[e]={}),o.requires[e][t]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.writeScripts_(t),null}throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e)}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("SCRIPT"),t=e.length-1;0<=t;--t){var r=e[t].src,n=-1==(n=r.lastIndexOf("?"))?r.length:n;if("base.js"==r.substr(n-7,7)){goog.basePath=r.substr(0,n-7);break}}},goog.importScript_=function(e,t){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(e){goog.importScript_("",'goog.retrieveAndExecModule_("'+e+'");')&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(0<e){var t=goog.queuedModules_;goog.queuedModules_=[];for(var r=0;r<e;r++)goog.maybeProcessDeferredPath_(t[r])}},goog.maybeProcessDeferredDep_=function(e){goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)&&(e=goog.getPathFromDeps_(e),goog.maybeProcessDeferredPath_(goog.basePath+e))},goog.isDeferredModule_=function(e){return!(!(e=goog.getPathFromDeps_(e))||!goog.dependencies_.pathIsModule[e])&&goog.basePath+e in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(e){if((e=goog.getPathFromDeps_(e))&&e in goog.dependencies_.requires)for(var t in goog.dependencies_.requires[e])if(!goog.isProvided_(t)&&!goog.isDeferredModule_(t))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModuleFromUrl=function(e){goog.retrieveAndExecModule_(e)},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{var r;if(goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1},goog.isFunction(e))r=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");r=goog.loadModuleFromSource_.call(goog.global,e)}var n=goog.moduleLoaderState_.moduleName;if(!goog.isString(n)||!n)throw Error('Invalid module name "'+n+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(r),goog.loadedModules_[n]=r}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"><\/script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.src=e,r.defer=!1,r.async=!1,t.head.appendChild(r)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var r=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==r.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}var n=goog.IS_OLD_IE_;return void 0===t?n?(n=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",r.write('<script type="text/javascript" src="'+e+'"'+n+"><\/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e):r.write('<script type="text/javascript">'+t+"<\/script>"),!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(e){var t=[],r={},n=goog.dependencies_;for(function e(i){if(!(i in n.written||i in n.visited)){if(n.visited[i]=!0,i in n.requires)for(var o in n.requires[i])if(!goog.isProvided_(o)){if(!(o in n.nameToPath))throw Error("Undefined nameToPath for "+o);e(n.nameToPath[o])}i in r||(r[i]=!0,t.push(i))}}(e),e=0;e<t.length;e++){var i=t[e];goog.dependencies_.written[i]=!0}var o=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,e=0;e<t.length;e++){if(!(i=t[e]))throw goog.moduleLoaderState_=o,Error("Undefined script input");n.pathIsModule[i]?goog.importModule_(goog.basePath+i):goog.importScript_(goog.basePath+i)}goog.moduleLoaderState_=o},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),t.responseText},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var r=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,n=goog.loadFileSync_(e);if(null==n)throw Error("load of "+e+"failed");n=goog.wrapModule_(e,n),goog.IS_OLD_IE_?(goog.dependencies_.deferred[t]=n,goog.queuedModules_.push(t)):r(e,n)}},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){if("object"==(r=goog.typeOf(e))||"array"==r){if(e.clone)return e.clone();var t,r="array"==r?[]:{};for(t in e)r[t]=goog.cloneObject(e[t]);return r}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("SCRIPT");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.body.appendChild(r),t.body.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){var r=function(e){return goog.cssNameMapping_[e]||e},n=function(e){e=e.split("-");for(var t=[],n=0;n<e.length;n++)t.push(r(e[n]));return t.join("-")};n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:n:function(e){return e};return t?e+"-"+n(t):n(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,r){return null!=t&&r in t?t[r]:e}))),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,n){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[r].apply(e,i)}},goog.base=function(e,t,r){var n=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_){for(var i=Array(arguments.length-1),o=1;o<arguments.length;o++)i[o-1]=arguments[o];return n.superClass_.constructor.apply(e,i)}for(i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];o=!1;for(var s=e.constructor;s;s=s.superClass_&&s.superClass_.constructor)if(s.prototype[t]===n)o=!0;else if(o)return s.prototype[t].apply(e,i);if(e[t]===n)return e.constructor.prototype[t].apply(e,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var r=t.constructor,n=t.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,e),e&&goog.inherits(r,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(r.prototype,t),null!=n&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return e;var r=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===r&&Object.seal(t),t};return r}return e},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.string={},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.endsWith=function(e,t){var r=e.length-t.length;return 0<=r&&e.indexOf(t,r)==r},goog.string.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.subs=function(e,t){for(var r=e.split("%s"),n="",i=Array.prototype.slice.call(arguments,1);i.length&&1<r.length;)n+=r.shift()+i.shift();return n+r.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(e,t){var r=String(e).toLowerCase(),n=String(t).toLowerCase();return r<n?-1:r==n?0:1},goog.string.numberAwareCompare_=function(e,t,r){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var n=e.toLowerCase().match(r),i=t.toLowerCase().match(r),o=Math.min(n.length,i.length),s=0;s<o;s++){r=n[s];var a=i[s];if(r!=a)return e=parseInt(r,10),!isNaN(e)&&(t=parseInt(a,10),!isNaN(t)&&e-t)?e-t:r<a?-1:1}return n.length!=i.length?n.length-i.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=e.indexOf("e")&&(e=e.replace(goog.string.E_RE_,"&#101;"))}return e},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var r,n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};return r=t?t.createElement("div"):goog.global.document.createElement("div"),e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var i=n[e];if(i)return i;if("#"==t.charAt(0)){var o=Number("0"+t.substr(1));isNaN(o)||(i=String.fromCharCode(o))}return i||(r.innerHTML=e+" ",i=r.firstChild.nodeValue.slice(0,-1)),n[e]=i}))},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var r=Number("0"+t.substr(1));if(!isNaN(r))return String.fromCharCode(r)}return e}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var r=t.length,n=0;n<r;n++){var i=1==r?t:t.charAt(n);if(e.charAt(0)==i&&e.charAt(e.length-1)==i)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,r){return r&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),r&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,r,n){if(r&&(e=goog.string.unescapeEntities(e)),n&&e.length>t){n>t&&(n=t);var i=e.length-n;e=e.substring(0,t-n)+"..."+e.substring(i)}else e.length>t&&(n=Math.floor(t/2),i=e.length-n,e=e.substring(0,n+t%2)+"..."+e.substring(i));return r&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],r=0;r<e.length;r++){var n=e.charAt(r),i=n.charCodeAt(0);t[r+1]=goog.string.specialEscapeChars_[n]||(31<i&&127>i?n:goog.string.escapeChar(n))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=goog.string.escapeChar(e.charAt(r));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t,r=e.charCodeAt(0);return 31<r&&127>r?t=e:(256>r?(t="\\x",(16>r||256<r)&&(t+="0")):(t="\\u",4096>r&&(t+="0")),t+=r.toString(16).toUpperCase()),goog.string.jsEscapeCache_[e]=t},goog.string.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.caseInsensitiveContains=function(e,t){return goog.string.contains(e.toLowerCase(),t.toLowerCase())},goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,r){var n=e;return 0<=t&&t<e.length&&0<r&&(n=e.substr(0,t)+e.substr(t+r,e.length-t-r)),n},goog.string.remove=function(e,t){var r=new RegExp(goog.string.regExpEscape(t),"");return e.replace(r,"")},goog.string.removeAll=function(e,t){var r=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(r,"")},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,r){return-1==(r=(e=goog.isDef(r)?e.toFixed(r):String(e)).indexOf("."))&&(r=e.length),goog.string.repeat("0",Math.max(0,t-r))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(e,t){for(var r=0,n=goog.string.trim(String(e)).split("."),i=goog.string.trim(String(t)).split("."),o=Math.max(n.length,i.length),s=0;0==r&&s<o;s++){var a=n[s]||"",c=i[s]||"",l=RegExp("(\\d*)(\\D*)","g"),u=RegExp("(\\d*)(\\D*)","g");do{var d=l.exec(a)||["","",""],p=u.exec(c)||["","",""];if(0==d[0].length&&0==p[0].length)break;r=0==d[1].length?0:parseInt(d[1],10);var h=0==p[1].length?0:parseInt(p[1],10);r=goog.string.compareElements_(r,h)||goog.string.compareElements_(0==d[2].length,0==p[2].length)||goog.string.compareElements_(d[2],p[2])}while(0==r)}return r},goog.string.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.string.hashCode=function(e){for(var t=0,r=0;r<e.length;++r)t=31*t+e.charCodeAt(r)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){var r=goog.isString(t)?goog.string.regExpEscape(t):"\\s";return e.replace(new RegExp("(^"+(r?"|["+r+"]+":"")+")([a-z])","g"),(function(e,t,r){return t+r.toUpperCase()}))},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,r){e=e.split(t);for(var n=[];0<r&&e.length;)n.push(e.shift()),r--;return e.length&&n.push(e.join(t)),n},goog.string.editDistance=function(e,t){var r=[],n=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var i=0;i<t.length+1;i++)r[i]=i;for(i=0;i<e.length;i++){n[0]=i+1;for(var o=0;o<t.length;o++)n[o+1]=Math.min(n[o]+1,r[o+1]+1,r[o]+Number(e[i]!=t[o]));for(o=0;o<r.length;o++)r[o]=n[o]}return n[t.length]},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){t.unshift(e),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift(),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(e,t,r,n){var i="Assertion failed";if(r){i=i+": "+r;var o=n}else e&&(i+=": "+e,o=t);e=new goog.asserts.AssertionError(""+i,o||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,r){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,r){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,r,n){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],r,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e};var jspb={Map:function(e,t){this.arr_=e,this.valueCtor_=t,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()}},a,b;jspb.Map.prototype.loadFromArray_=function(){for(var e=0;e<this.arr_.length;e++){var t=this.arr_[e],r=t[0];this.map_[r.toString()]=new jspb.Map.Entry_(r,t[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var e,t=this.map_;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e].valueWrapper;r&&r.toArray()}}}else{for(this.arr_.length=0,(t=this.stringKeys_()).sort(),e=0;e<t.length;e++){var n=this.map_[t[e]];(r=n.valueWrapper)&&r.toArray(),this.arr_.push([n.key,n.value])}this.arrClean=!0}return this.arr_},jspb.Map.prototype.toObject=function(e,t){for(var r=this.toArray(),n=[],i=0;i<r.length;i++){var o=this.map_[r[i][0].toString()];this.wrapEntry_(o);var s=o.valueWrapper;s?(goog.asserts.assert(t),n.push([o.key,t(e,s)])):n.push([o.key,o.value])}return n},jspb.Map.fromObject=function(e,t,r){t=new jspb.Map([],t);for(var n=0;n<e.length;n++){var i=e[n][0],o=r(e[n][1]);t.set(i,o)}return t},jspb.Map.ArrayIteratorIterable_=function(e){this.idx_=0,this.arr_=e},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},$jscomp.initSymbol(),"undefined"!=typeof Symbol&&($jscomp.initSymbol(),$jscomp.initSymbolIterator(),jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},jspb.Map.prototype.del=function(e){e=e.toString();var t=this.map_.hasOwnProperty(e);return delete this.map_[e],this.arrClean=!1,t},jspb.Map.prototype.getEntryList=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,n.value])}return e},jspb.Map.prototype.entries=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++){var n=this.map_[t[r]];e.push([n.key,this.wrapEntry_(n)])}return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.keys=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.map_[t[r]].key);return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.values=function(){var e=[],t=this.stringKeys_();t.sort();for(var r=0;r<t.length;r++)e.push(this.wrapEntry_(this.map_[t[r]]));return new jspb.Map.ArrayIteratorIterable_(e)},jspb.Map.prototype.forEach=function(e,t){var r=this.stringKeys_();r.sort();for(var n=0;n<r.length;n++){var i=this.map_[r[n]];e.call(t,this.wrapEntry_(i),i.key,this)}},jspb.Map.prototype.set=function(e,t){var r=new jspb.Map.Entry_(e);return this.valueCtor_?(r.valueWrapper=t,r.value=t.toArray()):r.value=t,this.map_[e.toString()]=r,this.arrClean=!1,this},jspb.Map.prototype.wrapEntry_=function(e){return this.valueCtor_?(e.valueWrapper||(e.valueWrapper=new this.valueCtor_(e.value)),e.valueWrapper):e.value},jspb.Map.prototype.get=function(e){if(e=this.map_[e.toString()])return this.wrapEntry_(e)},jspb.Map.prototype.has=function(e){return e.toString()in this.map_},jspb.Map.prototype.serializeBinary=function(e,t,r,n,i){var o=this.stringKeys_();o.sort();for(var s=0;s<o.length;s++){var a=this.map_[o[s]];t.beginSubMessage(e),r.call(t,1,a.key),this.valueCtor_?n.call(t,2,this.wrapEntry_(a),i):n.call(t,2,a.value),t.endSubMessage()}},jspb.Map.deserializeBinary=function(e,t,r,n,i){for(var o=void 0,s=void 0;t.nextField()&&!t.isEndGroup();){var a=t.getFieldNumber();1==a?o=r.call(t):2==a&&(e.valueCtor_?(s=new e.valueCtor_,n.call(t,s,i)):s=n.call(t))}goog.asserts.assert(null!=o),goog.asserts.assert(null!=s),e.set(o,s)},jspb.Map.prototype.stringKeys_=function(){var e,t=this.map_,r=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&r.push(e);return r},jspb.Map.Entry_=function(e,t){this.key=e,this.value=t,this.valueWrapper=void 0},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=!1,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,r)}:function(e,t,r){if(r=null==r?0:0>r?Math.max(0,e.length+r):r,goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,r):-1;for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==r?e.length-1:r)}:function(e,t,r){if(0>(r=null==r?e.length-1:r)&&(r=Math.max(0,e.length+r)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,r):-1;for(;0<=r;r--)if(r in e&&e[r]===t)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,r){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<n;o++)o in i&&t.call(r,i[o],o,e)},goog.array.forEachRight=function(e,t,r){var n=e.length,i=goog.isString(e)?e.split(""):e;for(n=n-1;0<=n;--n)n in i&&t.call(r,i[n],n,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=[],o=0,s=goog.isString(e)?e.split(""):e,a=0;a<n;a++)if(a in s){var c=s[a];t.call(r,c,a,e)&&(i[o++]=c)}return i},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=Array(n),o=goog.isString(e)?e.split(""):e,s=0;s<n;s++)s in o&&(i[s]=t.call(r,o[s],s,e));return i},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,r,n){return goog.asserts.assert(null!=e.length),n&&(t=goog.bind(t,n)),Array.prototype.reduce.call(e,t,r)}:function(e,t,r,n){var i=r;return goog.array.forEach(e,(function(r,o){i=t.call(n,i,r,o,e)})),i},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,r,n){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),n&&(t=goog.bind(t,n)),Array.prototype.reduceRight.call(e,t,r)}:function(e,t,r,n){var i=r;return goog.array.forEachRight(e,(function(r,o){i=t.call(n,i,r,o,e)})),i},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(r,i[o],o,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,r){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,r)}:function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&!t.call(r,i[o],o,e))return!1;return!0},goog.array.count=function(e,t,r){var n=0;return goog.array.forEach(e,(function(e,i,o){t.call(r,e,i,o)&&++n}),r),n},goog.array.find=function(e,t,r){return 0>(t=goog.array.findIndex(e,t,r))?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,r){for(var n=e.length,i=goog.isString(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(r,i[o],o,e))return o;return-1},goog.array.findRight=function(e,t,r){return 0>(t=goog.array.findIndexRight(e,t,r))?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,r){var n=e.length,i=goog.isString(e)?e.split(""):e;for(n=n-1;0<=n;n--)if(n in i&&t.call(r,i[n],n,e))return n;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,r){goog.array.splice(e,r,0,t)},goog.array.insertArrayAt=function(e,t,r){goog.partial(goog.array.splice,e,r,0).apply(null,t)},goog.array.insertBefore=function(e,t,r){var n;2==arguments.length||0>(n=goog.array.indexOf(e,r))?e.push(t):goog.array.insertAt(e,t,n)},goog.array.remove=function(e,t){var r,n=goog.array.indexOf(e,t);return(r=0<=n)&&goog.array.removeAt(e,n),r},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,r){return 0<=(t=goog.array.findIndex(e,t,r))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,r){var n=0;return goog.array.forEachRight(e,(function(i,o){t.call(r,i,o,e)&&goog.array.removeAt(e,o)&&n++})),n},goog.array.concat=function(e){return Array.prototype.concat.apply(Array.prototype,arguments)},goog.array.join=function(e){return Array.prototype.concat.apply(Array.prototype,arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var r=Array(t),n=0;n<t;n++)r[n]=e[n];return r}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(goog.isArrayLike(n)){var i=e.length||0,o=n.length||0;e.length=i+o;for(var s=0;s<o;s++)e[i+s]=n[s]}else e.push(n)}},goog.array.splice=function(e,t,r,n){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,r){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,r)},goog.array.removeDuplicates=function(e,t,r){t=t||e;var n=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};r=r||n;n={};for(var i=0,o=0;o<e.length;){var s=e[o++],a=r(s);Object.prototype.hasOwnProperty.call(n,a)||(n[a]=!0,t[i++]=s)}t.length=i},goog.array.binarySearch=function(e,t,r){return goog.array.binarySearch_(e,r||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,r){return goog.array.binarySearch_(e,t,!0,void 0,r)},goog.array.binarySearch_=function(e,t,r,n,i){for(var o,s=0,a=e.length;s<a;){var c,l=s+a>>1;0<(c=r?t.call(i,e[l],l,e):t(n,e[l]))?s=l+1:(a=l,o=!c)}return o?s:~s},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var r=0;r<e.length;r++)e[r]={index:r,value:e[r]};var n=t||goog.array.defaultCompare;for(goog.array.sort(e,(function(e,t){return n(e.value,t.value)||e.index-t.index})),r=0;r<e.length;r++)e[r]=e[r].value},goog.array.sortByKey=function(e,t,r){var n=r||goog.array.defaultCompare;goog.array.sort(e,(function(e,r){return n(t(e),t(r))}))},goog.array.sortObjectsByKey=function(e,t,r){goog.array.sortByKey(e,(function(e){return e[t]}),r)},goog.array.isSorted=function(e,t,r){t=t||goog.array.defaultCompare;for(var n=1;n<e.length;n++){var i=t(e[n-1],e[n]);if(0<i||0==i&&r)return!1}return!0},goog.array.equals=function(e,t,r){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var n=e.length;r=r||goog.array.defaultCompareEquality;for(var i=0;i<n;i++)if(!r(e[i],t[i]))return!1;return!0},goog.array.compare3=function(e,t,r){r=r||goog.array.defaultCompare;for(var n=Math.min(e.length,t.length),i=0;i<n;i++){var o=r(e[i],t[i]);if(0!=o)return o}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,r){return 0>(r=goog.array.binarySearch(e,t,r))&&(goog.array.insertAt(e,t,-(r+1)),!0)},goog.array.binaryRemove=function(e,t,r){return 0<=(t=goog.array.binarySearch(e,t,r))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,r){for(var n={},i=0;i<e.length;i++){var o=e[i],s=t.call(r,o,i,e);goog.isDef(s)&&(n[s]||(n[s]=[])).push(o)}return n},goog.array.toObject=function(e,t,r){var n={};return goog.array.forEach(e,(function(i,o){n[t.call(r,i,o,e)]=i})),n},goog.array.range=function(e,t,r){var n=[],i=0,o=e;if(void 0!==t&&(i=e,o=t),0>(r=r||1)*(o-i))return[];if(0<r)for(e=i;e<o;e+=r)n.push(e);else for(e=i;e>o;e+=r)n.push(e);return n},goog.array.repeat=function(e,t){for(var r=[],n=0;n<t;n++)r[n]=e;return r},goog.array.flatten=function(e){for(var t=[],r=0;r<arguments.length;r++){var n=arguments[r];if(goog.isArray(n))for(var i=0;i<n.length;i+=8192)for(var o=goog.array.slice(n,i,i+8192),s=(o=goog.array.flatten.apply(null,o),0);s<o.length;s++)t.push(o[s]);else t.push(n)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,r){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=r&&r<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,r,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],r=arguments[0].length,n=1;n<arguments.length;n++)arguments[n].length<r&&(r=arguments[n].length);for(n=0;n<r;n++){for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o][n]);t.push(i)}return t},goog.array.shuffle=function(e,t){for(var r=t||Math.random,n=e.length-1;0<n;n--){var i=Math.floor(r()*(n+1)),o=e[n];e[n]=e[i],e[i]=o}},goog.array.copyByIndex=function(e,t){var r=[];return goog.array.forEach(t,(function(t){r.push(e[t])})),r},goog.crypt={},goog.crypt.stringToByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){for(var i=e.charCodeAt(n);255<i;)t[r++]=255&i,i>>=8;t[r++]=i}return t},goog.crypt.byteArrayToString=function(e){if(8192>=e.length)return String.fromCharCode.apply(null,e);for(var t="",r=0;r<e.length;r+=8192){var n=goog.array.slice(e,r,r+8192);t=t+String.fromCharCode.apply(null,n)}return t},goog.crypt.byteArrayToHex=function(e){return goog.array.map(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")},goog.crypt.hexToByteArray=function(e){goog.asserts.assert(0==e.length%2,"Key string length must be multiple of 2");for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return t},goog.crypt.stringToUtf8ByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t[r++]=i:(2048>i?t[r++]=i>>6|192:(55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},goog.crypt.utf8ByteArrayToString=function(e){for(var t=[],r=0,n=0;r<e.length;){if(128>(s=e[r++]))t[n++]=String.fromCharCode(s);else if(191<s&&224>s){var i=e[r++];t[n++]=String.fromCharCode((31&s)<<6|63&i)}else if(239<s&&365>s){i=e[r++];var o=e[r++],s=((7&s)<<18|(63&i)<<12|(63&o)<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else i=e[r++],o=e[r++],t[n++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}return t.join("")},goog.crypt.xorByteArray=function(e,t){goog.asserts.assert(e.length==t.length,"XOR array lengths must match");for(var r=[],n=0;n<e.length;n++)r.push(e[n]^t[n]);return r},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,r=RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),n=[];t=r.exec(e);)n.push([t[1],t[2],t[3]||void 0]);return n},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.object={},goog.object.forEach=function(e,t,r){for(var n in e)t.call(r,e[n],n,e)},goog.object.filter=function(e,t,r){var n,i={};for(n in e)t.call(r,e[n],n,e)&&(i[n]=e[n]);return i},goog.object.map=function(e,t,r){var n,i={};for(n in e)i[n]=t.call(r,e[n],n,e);return i},goog.object.some=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return!0;return!1},goog.object.every=function(e,t,r){for(var n in e)if(!t.call(r,e[n],n,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],n=0;for(t in e)r[n++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],n=0;for(t in e)r[n++]=t;return r},goog.object.getValueByKeys=function(e,t){for(var r=(n=goog.isArrayLike(t))?t:arguments,n=n?0:1;n<r.length&&(e=e[r[n]],goog.isDef(e));n++);return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return n},goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return null!==e&&t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){return t in e?e[t]:(r=r(),e[t]=r)},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(r in t)if(!(r in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){if("object"==(r=goog.typeOf(e))||"array"==r){if(goog.isFunction(e.clone))return e.clone();var t,r="array"==r?[]:{};for(t in e)r[t]=goog.object.unsafeClone(e[t]);return r}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,n,i=1;i<arguments.length;i++){for(r in n=arguments[i])e[r]=n[r];for(var o=0;o<goog.object.PROTOTYPE_FIELDS_.length;o++)r=goog.object.PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},n=0;n<t;n+=2)r[arguments[n]]=arguments[n+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},n=0;n<t;n++)r[arguments[n]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchOpera_()&&!goog.labs.userAgent.browser.matchEdge_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,n),r[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var r={};goog.array.forEach(t,(function(e){r[e[0]]=e[1]}));var n=goog.partial(goog.object.containsKey,r);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera","OPR"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){if((t=/rv: *([\d\.]*)/.exec(e))&&t[1])return t[1];var t="",r=/MSIE +([\d\.]+)/.exec(e);if(r&&r[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==r[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=r[1];return t},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){if(t=goog.labs.userAgent.util.getUserAgent()){var e,t=goog.labs.userAgent.util.extractVersionTuples(t),r=goog.labs.userAgent.engine.getEngineTuple_(t);if(r)return"Gecko"==r[0]?goog.labs.userAgent.engine.getVersionForKey_(t,"Firefox"):r[1];if((t=t[0])&&(e=t[2])&&(e=/Trident\/([^\s;]+)/.exec(e)))return e[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var r=e[t];if("Edge"==r[0])return r}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){var r=goog.array.find(e,(function(e){return t==e[0]}));return r&&r[1]||""},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigator=function(){return goog.global.navigator||null},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigator();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigator();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.operaVersion_=function(){var e=goog.global.opera.version;try{return e()}catch(t){return e}},goog.userAgent.determineVersion_=function(){if(goog.userAgent.OPERA&&goog.global.opera)return goog.userAgent.operaVersion_();var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&(t=goog.userAgent.getDocumentMode_())>parseFloat(e)?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv\:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[e]||(goog.userAgent.isVersionOrHigherCache_[e]=0<=goog.string.compareVersions(goog.userAgent.VERSION,e))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=(a=goog.global.document,b=goog.userAgent.getDocumentMode_(),a&&goog.userAgent.IE?b||("CSS1Compat"==a.compatMode?parseInt(goog.userAgent.VERSION,10):5):void 0),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.byteToCharMap_=null,goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.byteToCharMapWebSafe_=null,goog.crypt.base64.ENCODED_VALS_BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.ENCODED_VALS_BASE+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.ENCODED_VALS_BASE+"-_.",goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||"function"==typeof goog.global.btoa,goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&"function"==typeof goog.global.atob,goog.crypt.base64.encodeByteArray=function(e,t){goog.asserts.assert(goog.isArrayLike(e),"encodeByteArray takes an array as a parameter"),goog.crypt.base64.init_();for(var r=t?goog.crypt.base64.byteToCharMapWebSafe_:goog.crypt.base64.byteToCharMap_,n=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=o>>2,u=(o=(3&o)<<4|a>>4,a=(15&a)<<2|(u=c?e[i+2]:0)>>6,63&u);c||(u=64,s||(a=64)),n.push(r[l],r[o],r[a],r[u])}return n.join("")},goog.crypt.base64.encodeString=function(e,t){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!t?goog.global.btoa(e):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(e),t)},goog.crypt.base64.decodeString=function(e,t){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!t)return goog.global.atob(e);var r="";return goog.crypt.base64.decodeStringInternal_(e,(function(e){r+=String.fromCharCode(e)})),r},goog.crypt.base64.decodeStringToByteArray=function(e,t){var r=[];return goog.crypt.base64.decodeStringInternal_(e,(function(e){r.push(e)})),r},goog.crypt.base64.decodeStringToUint8Array=function(e){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var t=new Uint8Array(Math.ceil(3*e.length/4)),r=0;return goog.crypt.base64.decodeStringInternal_(e,(function(e){t[r++]=e})),t.subarray(0,r)},goog.crypt.base64.decodeStringInternal_=function(e,t){function r(t){for(;n<e.length;){var r=e.charAt(n++),i=goog.crypt.base64.charToByteMap_[r];if(null!=i)return i;if(!goog.string.isEmptyOrWhitespace(r))throw Error("Unknown base64 encoding at char: "+r)}return t}goog.crypt.base64.init_();for(var n=0;;){var i=r(-1),o=r(0),s=r(64),a=r(64);if(64===a&&-1===i)break;t(i<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.byteToCharMap_){goog.crypt.base64.byteToCharMap_={},goog.crypt.base64.charToByteMap_={},goog.crypt.base64.byteToCharMapWebSafe_={};for(var e=0;e<goog.crypt.base64.ENCODED_VALS.length;e++)goog.crypt.base64.byteToCharMap_[e]=goog.crypt.base64.ENCODED_VALS.charAt(e),goog.crypt.base64.charToByteMap_[goog.crypt.base64.byteToCharMap_[e]]=e,goog.crypt.base64.byteToCharMapWebSafe_[e]=goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e),e>=goog.crypt.base64.ENCODED_VALS_BASE.length&&(goog.crypt.base64.charToByteMap_[goog.crypt.base64.ENCODED_VALS_WEBSAFE.charAt(e)]=e)}},jspb.ExtensionFieldInfo=function(e,t,r,n,i){this.fieldIndex=e,this.fieldName=t,this.ctor=r,this.toObjectFn=n,this.isRepeated=i},jspb.ExtensionFieldBinaryInfo=function(e,t,r,n,i,o){this.fieldInfo=e,this.binaryReaderFn=t,this.binaryWriterFn=r,this.binaryMessageSerializeFn=n,this.binaryMessageDeserializeFn=i,this.isPacked=o},jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},jspb.Message=function(){},jspb.Message.GENERATE_TO_OBJECT=!0,jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.MINIMIZE_MEMORY_ALLOCATIONS=COMPILED,jspb.Message.SUPPORTS_UINT8ARRAY_="function"==typeof Uint8Array,jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},jspb.Message.getIndex_=function(e,t){return t+e.arrayIndexOffset_},jspb.Message.initialize=function(e,t,r,n,i,o){if(e.wrappers_=jspb.Message.MINIMIZE_MEMORY_ALLOCATIONS?null:{},t||(t=r?[r]:[]),e.messageId_=r?String(r):void 0,e.arrayIndexOffset_=0===r?-1:0,e.array=t,jspb.Message.initPivotAndExtensionObject_(e,n),e.convertedFloatingPointFields_={},i)for(t=0;t<i.length;t++)(r=i[t])<e.pivot_?(r=jspb.Message.getIndex_(e,r),e.array[r]=e.array[r]||(jspb.Message.MINIMIZE_MEMORY_ALLOCATIONS?jspb.Message.EMPTY_LIST_SENTINEL_:[])):(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[r]=e.extensionObject_[r]||(jspb.Message.MINIMIZE_MEMORY_ALLOCATIONS?jspb.Message.EMPTY_LIST_SENTINEL_:[]));o&&o.length&&goog.array.forEach(o,goog.partial(jspb.Message.computeOneofCase,e))},jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(e){return jspb.Message.ASSUME_LOCAL_ARRAYS?e instanceof Array:goog.isArray(e)},jspb.Message.initPivotAndExtensionObject_=function(e,t){if(e.array.length){var r=e.array.length-1,n=e.array[r];if(n&&"object"==typeof n&&!jspb.Message.isArray_(n)&&!(jspb.Message.SUPPORTS_UINT8ARRAY_&&n instanceof Uint8Array))return e.pivot_=r-e.arrayIndexOffset_,void(e.extensionObject_=n)}-1<t?(e.pivot_=t,e.extensionObject_=null):e.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(e){var t=jspb.Message.getIndex_(e,e.pivot_);e.array[t]||(e.extensionObject_=e.array[t]={})},jspb.Message.toObjectList=function(e,t,r){for(var n=[],i=0;i<e.length;i++)n[i]=t.call(e[i],r,e[i]);return n},jspb.Message.toObjectExtension=function(e,t,r,n,i){for(var o in r){var s=r[o],a=n.call(e,s);if(null!=a){for(var c in s.fieldName)if(s.fieldName.hasOwnProperty(c))break;t[c]=s.toObjectFn?s.isRepeated?jspb.Message.toObjectList(a,s.toObjectFn,i):s.toObjectFn(i,a):a}}},jspb.Message.serializeBinaryExtensions=function(e,t,r,n){for(var i in r){var o=r[i],s=o.fieldInfo;if(!o.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var a=n.call(e,s);if(null!=a)if(s.isMessageType()){if(!o.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");o.binaryWriterFn.call(t,s.fieldIndex,a,o.binaryMessageSerializeFn)}else o.binaryWriterFn.call(t,s.fieldIndex,a)}},jspb.Message.readBinaryExtension=function(e,t,r,n,i){var o=r[t.getFieldNumber()];if(o){if(r=o.fieldInfo,!o.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");var s;r.isMessageType()?(s=new r.ctor,o.binaryReaderFn.call(t,s,o.binaryMessageDeserializeFn)):s=o.binaryReaderFn.call(t),r.isRepeated&&!o.isPacked?(t=n.call(e,r))?t.push(s):i.call(e,r,[s]):i.call(e,r,s)}else t.skipField()},jspb.Message.getField=function(e,t){if(t<e.pivot_){var r=jspb.Message.getIndex_(e,t),n=e.array[r];return n===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[r]=[]:n}if(e.extensionObject_)return(n=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:n},jspb.Message.getRepeatedField=function(e,t){if(t<e.pivot_){var r=jspb.Message.getIndex_(e,t),n=e.array[r];return n===jspb.Message.EMPTY_LIST_SENTINEL_?e.array[r]=[]:n}return(n=e.extensionObject_[t])===jspb.Message.EMPTY_LIST_SENTINEL_?e.extensionObject_[t]=[]:n},jspb.Message.getOptionalFloatingPointField=function(e,t){var r=jspb.Message.getField(e,t);return null==r?r:+r},jspb.Message.getRepeatedFloatingPointField=function(e,t){var r=jspb.Message.getRepeatedField(e,t);if(e.convertedFloatingPointFields_||(e.convertedFloatingPointFields_={}),!e.convertedFloatingPointFields_[t]){for(var n=0;n<r.length;n++)r[n]=+r[n];e.convertedFloatingPointFields_[t]=!0}return r},jspb.Message.bytesAsB64=function(e){return null==e||goog.isString(e)?e:jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array?goog.crypt.base64.encodeByteArray(e):(goog.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(e)),null)},jspb.Message.bytesAsU8=function(e){return null==e||e instanceof Uint8Array?e:goog.isString(e)?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(e)),null)},jspb.Message.bytesListAsB64=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||goog.isString(e[0])?e:goog.array.map(e,jspb.Message.bytesAsB64)},jspb.Message.bytesListAsU8=function(e){return jspb.Message.assertConsistentTypes_(e),!e.length||e[0]instanceof Uint8Array?e:goog.array.map(e,jspb.Message.bytesAsU8)},jspb.Message.assertConsistentTypes_=function(e){if(goog.DEBUG&&e&&1<e.length){var t=goog.typeOf(e[0]);goog.array.forEach(e,(function(e){goog.typeOf(e)!=t&&goog.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(e)+" expected "+t)}))}},jspb.Message.getFieldWithDefault=function(e,t,r){return null==(e=jspb.Message.getField(e,t))?r:e},jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,jspb.Message.getMapField=function(e,t,r,n){return e.wrappers_||(e.wrappers_={}),t in e.wrappers_?e.wrappers_[t]:r?void 0:((r=jspb.Message.getField(e,t))||(r=[],jspb.Message.setField(e,t,r)),e.wrappers_[t]=new jspb.Map(r,n))},jspb.Message.setField=function(e,t,r){t<e.pivot_?e.array[jspb.Message.getIndex_(e,t)]=r:(jspb.Message.maybeInitEmptyExtensionObject_(e),e.extensionObject_[t]=r)},jspb.Message.setProto3IntField=function(e,t,r){jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},jspb.Message.setProto3FloatField=function(e,t,r){jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},jspb.Message.setProto3BooleanField=function(e,t,r){jspb.Message.setFieldIgnoringDefault_(e,t,r,!1)},jspb.Message.setProto3StringField=function(e,t,r){jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},jspb.Message.setProto3BytesField=function(e,t,r){jspb.Message.setFieldIgnoringDefault_(e,t,r,"")},jspb.Message.setProto3EnumField=function(e,t,r){jspb.Message.setFieldIgnoringDefault_(e,t,r,0)},jspb.Message.setFieldIgnoringDefault_=function(e,t,r,n){r!=n?jspb.Message.setField(e,t,r):e.array[jspb.Message.getIndex_(e,t)]=null},jspb.Message.addToRepeatedField=function(e,t,r,n){e=jspb.Message.getRepeatedField(e,t),null!=n?e.splice(n,0,r):e.push(r)},jspb.Message.setOneofField=function(e,t,r,n){(r=jspb.Message.computeOneofCase(e,r))&&r!==t&&void 0!==n&&(e.wrappers_&&r in e.wrappers_&&(e.wrappers_[r]=void 0),jspb.Message.setField(e,r,void 0)),jspb.Message.setField(e,t,n)},jspb.Message.computeOneofCase=function(e,t){var r,n;return goog.array.forEach(t,(function(t){var i=jspb.Message.getField(e,t);goog.isDefAndNotNull(i)&&(r=t,n=i,jspb.Message.setField(e,t,void 0))})),r?(jspb.Message.setField(e,r,n),r):0},jspb.Message.getWrapperField=function(e,t,r,n){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){var i=jspb.Message.getField(e,r);(n||i)&&(e.wrappers_[r]=new t(i))}return e.wrappers_[r]},jspb.Message.getRepeatedWrapperField=function(e,t,r){return jspb.Message.wrapRepeatedField_(e,t,r),(t=e.wrappers_[r])==jspb.Message.EMPTY_LIST_SENTINEL_&&(t=e.wrappers_[r]=[]),t},jspb.Message.wrapRepeatedField_=function(e,t,r){if(e.wrappers_||(e.wrappers_={}),!e.wrappers_[r]){for(var n=jspb.Message.getRepeatedField(e,r),i=[],o=0;o<n.length;o++)i[o]=new t(n[o]);e.wrappers_[r]=i}},jspb.Message.setWrapperField=function(e,t,r){e.wrappers_||(e.wrappers_={});var n=r?r.toArray():r;e.wrappers_[t]=r,jspb.Message.setField(e,t,n)},jspb.Message.setOneofWrapperField=function(e,t,r,n){e.wrappers_||(e.wrappers_={});var i=n?n.toArray():n;e.wrappers_[t]=n,jspb.Message.setOneofField(e,t,r,i)},jspb.Message.setRepeatedWrapperField=function(e,t,r){e.wrappers_||(e.wrappers_={}),r=r||[];for(var n=[],i=0;i<r.length;i++)n[i]=r[i].toArray();e.wrappers_[t]=r,jspb.Message.setField(e,t,n)},jspb.Message.addToRepeatedWrapperField=function(e,t,r,n,i){jspb.Message.wrapRepeatedField_(e,n,t);var o=e.wrappers_[t];return o||(o=e.wrappers_[t]=[]),r=r||new n,e=jspb.Message.getRepeatedField(e,t),null!=i?(o.splice(i,0,r),e.splice(i,0,r.toArray())):(o.push(r),e.push(r.toArray())),r},jspb.Message.toMap=function(e,t,r,n){for(var i={},o=0;o<e.length;o++)i[t.call(e[o])]=r?r.call(e[o],n,e[o]):e[o];return i},jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var e in this.wrappers_){var t=this.wrappers_[e];if(goog.isArray(t))for(var r=0;r<t.length;r++)t[r]&&t[r].toArray();else t&&t.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(e){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var t=e.fieldIndex;if(e.isRepeated){if(e.isMessageType())return this.wrappers_[t]||(this.wrappers_[t]=goog.array.map(this.extensionObject_[t]||[],(function(t){return new e.ctor(t)}))),this.wrappers_[t]}else if(e.isMessageType())return!this.wrappers_[t]&&this.extensionObject_[t]&&(this.wrappers_[t]=new e.ctor(this.extensionObject_[t])),this.wrappers_[t];return this.extensionObject_[t]}},jspb.Message.prototype.setExtension=function(e,t){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var r=e.fieldIndex;return e.isRepeated?(t=t||[],e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=goog.array.map(t,(function(e){return e.toArray()}))):this.extensionObject_[r]=t):e.isMessageType()?(this.wrappers_[r]=t,this.extensionObject_[r]=t?t.toArray():t):this.extensionObject_[r]=t,this},jspb.Message.difference=function(e,t){if(!(e instanceof t.constructor))throw Error("Messages have different types.");var r=e.toArray(),n=t.toArray(),i=[],o=0,s=r.length>n.length?r.length:n.length;for(e.getJsPbMessageId()&&(i[0]=e.getJsPbMessageId(),o=1);o<s;o++)jspb.Message.compareFields(r[o],n[o])||(i[o]=n[o]);return new e.constructor(i)},jspb.Message.equals=function(e,t){return e==t||!(!e||!t)&&e instanceof t.constructor&&jspb.Message.compareFields(e.toArray(),t.toArray())},jspb.Message.compareExtensions=function(e,t){e=e||{},t=t||{};var r,n={};for(r in e)n[r]=0;for(r in t)n[r]=0;for(r in n)if(!jspb.Message.compareFields(e[r],t[r]))return!1;return!0},jspb.Message.compareFields=function(e,t){if(e==t)return!0;if(!goog.isObject(e)||!goog.isObject(t)||e.constructor!=t.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e.constructor===Uint8Array){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}if(e.constructor===Array){var n=void 0,i=void 0,o=Math.max(e.length,t.length);for(r=0;r<o;r++){var s=e[r],a=t[r];if(s&&s.constructor==Object&&(goog.asserts.assert(void 0===n),goog.asserts.assert(r===e.length-1),n=s,s=void 0),a&&a.constructor==Object&&(goog.asserts.assert(void 0===i),goog.asserts.assert(r===t.length-1),i=a,a=void 0),!jspb.Message.compareFields(s,a))return!1}return!n&&!i||(n=n||{},i=i||{},jspb.Message.compareExtensions(n,i))}if(e.constructor===Object)return jspb.Message.compareExtensions(e,t);throw Error("Invalid type in JSPB array")},jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},jspb.Message.clone=function(e){return jspb.Message.cloneMessage(e)},jspb.Message.cloneMessage=function(e){return new e.constructor(jspb.Message.clone_(e.toArray()))},jspb.Message.copyInto=function(e,t){goog.asserts.assertInstanceof(e,jspb.Message),goog.asserts.assertInstanceof(t,jspb.Message),goog.asserts.assert(e.constructor==t.constructor,"Copy source and target message should have the same type.");for(var r=jspb.Message.clone(e),n=t.toArray(),i=r.toArray(),o=n.length=0;o<i.length;o++)n[o]=i[o];t.wrappers_=r.wrappers_,t.extensionObject_=r.extensionObject_},jspb.Message.clone_=function(e){var t;if(goog.isArray(e)){for(var r=Array(e.length),n=0;n<e.length;n++)null!=(t=e[n])&&(r[n]="object"==typeof t?jspb.Message.clone_(t):t);return r}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&e instanceof Uint8Array)return new Uint8Array(e);for(n in r={},e)null!=(t=e[n])&&(r[n]="object"==typeof t?jspb.Message.clone_(t):t);return r},jspb.Message.registerMessageType=function(e,t){jspb.Message.registry_[e]=t,t.messageId=e},jspb.Message.registry_={},jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.arith={},jspb.arith.UInt64=function(e,t){this.lo=e,this.hi=t},jspb.arith.UInt64.prototype.cmp=function(e){return this.hi<e.hi||this.hi==e.hi&&this.lo<e.lo?-1:this.hi==e.hi&&this.lo==e.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return 0==this.lo&&0==this.hi},jspb.arith.UInt64.prototype.add=function(e){return new jspb.arith.UInt64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(e){return new jspb.arith.UInt64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(e,t){for(var r=e>>>16,n=65535&t,i=t>>>16,o=(s=65535&e)*n+65536*(s*i&65535)+65536*(r*n&65535),s=r*i+(s*i>>>16)+(r*n>>>16);4294967296<=o;)o-=4294967296,s+=1;return new jspb.arith.UInt64(o>>>0,s>>>0)},jspb.arith.UInt64.prototype.mul=function(e){var t=jspb.arith.UInt64.mul32x32(this.lo,e);return(e=jspb.arith.UInt64.mul32x32(this.hi,e)).hi=e.lo,e.lo=0,t.add(e)},jspb.arith.UInt64.prototype.div=function(e){if(0==e)return[];var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(this.lo,this.hi);e=new jspb.arith.UInt64(e,0);for(var n=new jspb.arith.UInt64(1,0);!e.msb();)e=e.leftShift(),n=n.leftShift();for(;!n.zero();)0>=e.cmp(r)&&(t=t.add(n),r=r.sub(e)),e=e.rightShift(),n=n.rightShift();return[t,r]},jspb.arith.UInt64.prototype.toString=function(){for(var e="",t=this;!t.zero();){var r=(t=t.div(10))[0];e=t[1].lo+e,t=r}return""==e&&(e="0"),e},jspb.arith.UInt64.fromString=function(e){for(var t=new jspb.arith.UInt64(0,0),r=new jspb.arith.UInt64(0,0),n=0;n<e.length;n++){if("0">e[n]||"9"<e[n])return null;var i=parseInt(e[n],10);r.lo=i,t=t.mul(10).add(r)}return t},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(e,t){this.lo=e,this.hi=t},jspb.arith.Int64.prototype.add=function(e){return new jspb.arith.Int64((this.lo+e.lo&4294967295)>>>0>>>0,((this.hi+e.hi&4294967295)>>>0)+(4294967296<=this.lo+e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(e){return new jspb.arith.Int64((this.lo-e.lo&4294967295)>>>0>>>0,((this.hi-e.hi&4294967295)>>>0)-(0>this.lo-e.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var e=0!=(2147483648&this.hi),t=new jspb.arith.UInt64(this.lo,this.hi);return e&&(t=new jspb.arith.UInt64(0,0).sub(t)),(e?"-":"")+t.toString()},jspb.arith.Int64.fromString=function(e){var t=0<e.length&&"-"==e[0];return t&&(e=e.substring(1)),null===(e=jspb.arith.UInt64.fromString(e))?null:(t&&(e=new jspb.arith.UInt64(0,0).sub(e)),new jspb.arith.Int64(e.lo,e.hi))},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(e){var t=jspb.BinaryConstants.FieldType,r=jspb.BinaryConstants.WireType;switch(e){case t.INT32:case t.INT64:case t.UINT32:case t.UINT64:case t.SINT32:case t.SINT64:case t.BOOL:case t.ENUM:case t.VHASH64:return r.VARINT;case t.DOUBLE:case t.FIXED64:case t.SFIXED64:case t.FHASH64:return r.FIXED64;case t.STRING:case t.MESSAGE:case t.BYTES:return r.DELIMITED;case t.FLOAT:case t.FIXED32:case t.SFIXED32:return r.FIXED32;default:return r.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=0x8000000000000000,jspb.BinaryConstants.TWO_TO_64=0x10000000000000000,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(e){var t=e>>>0;e=Math.floor((e-t)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=t,jspb.utils.split64High=e},jspb.utils.splitInt64=function(e){var t=0>e,r=(e=Math.abs(e))>>>0;e=Math.floor((e-r)/jspb.BinaryConstants.TWO_TO_32),e>>>=0,t&&(e=~e>>>0,4294967295<(r=1+(~r>>>0))&&(r=0,4294967295<++e&&(e=0))),jspb.utils.split64Low=r,jspb.utils.split64High=e},jspb.utils.splitZigzag64=function(e){var t=0>e;e=2*Math.abs(e),jspb.utils.splitUint64(e),e=jspb.utils.split64Low;var r=jspb.utils.split64High;t&&(0==e?0==r?r=e=4294967295:(r--,e=4294967295):e--),jspb.utils.split64Low=e,jspb.utils.split64High=r},jspb.utils.splitFloat32=function(e){var t,r=0>e?1:0;0===(e=r?-e:e)?0<1/e?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648):isNaN(e)?(jspb.utils.split64High=0,jspb.utils.split64Low=2147483647):e>jspb.BinaryConstants.FLOAT32_MAX?(jspb.utils.split64High=0,jspb.utils.split64Low=(r<<31|2139095040)>>>0):e<jspb.BinaryConstants.FLOAT32_MIN?(e=Math.round(e/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(r<<31|e)>>>0):(t=Math.floor(Math.log(e)/Math.LN2),e*=Math.pow(2,-t),e=8388607&Math.round(e*jspb.BinaryConstants.TWO_TO_23),jspb.utils.split64High=0,jspb.utils.split64Low=(r<<31|t+127<<23|e)>>>0)},jspb.utils.splitFloat64=function(e){var t=0>e?1:0;if(0===(e=t?-e:e))jspb.utils.split64High=0<1/e?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(e))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(e>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(t<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(e<jspb.BinaryConstants.FLOAT64_MIN){var r=e/Math.pow(2,-1074);e=r/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(t<<31|e)>>>0,jspb.utils.split64Low=r>>>0}else{var n=Math.floor(Math.log(e)/Math.LN2);1024==n&&(n=1023),e=(r=e*Math.pow(2,-n))*jspb.BinaryConstants.TWO_TO_20&1048575,r=r*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(t<<31|n+1023<<20|e)>>>0,jspb.utils.split64Low=r}},jspb.utils.splitHash64=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=e.charCodeAt(4),s=e.charCodeAt(5),a=e.charCodeAt(6);e=e.charCodeAt(7),jspb.utils.split64Low=t+(r<<8)+(n<<16)+(i<<24)>>>0,jspb.utils.split64High=o+(s<<8)+(a<<16)+(e<<24)>>>0},jspb.utils.joinUint64=function(e,t){return t*jspb.BinaryConstants.TWO_TO_32+e},jspb.utils.joinInt64=function(e,t){var r=2147483648&t;r&&(t=~t>>>0,0==(e=1+~e>>>0)&&(t=t+1>>>0));var n=jspb.utils.joinUint64(e,t);return r?-n:n},jspb.utils.joinZigzag64=function(e,t){var r=1&e;e=(e>>>1|t<<31)>>>0,t>>>=1,r&&(0==(e=e+1>>>0)&&(t=t+1>>>0));var n=jspb.utils.joinUint64(e,t);return r?-n:n},jspb.utils.joinFloat32=function(e,t){var r=2*(e>>31)+1,n=e>>>23&255,i=8388607&e;return 255==n?i?NaN:1/0*r:0==n?r*Math.pow(2,-149)*i:r*Math.pow(2,n-150)*(i+Math.pow(2,23))},jspb.utils.joinFloat64=function(e,t){var r=2*(t>>31)+1,n=t>>>20&2047,i=jspb.BinaryConstants.TWO_TO_32*(1048575&t)+e;return 2047==n?i?NaN:1/0*r:0==n?r*Math.pow(2,-1074)*i:r*Math.pow(2,n-1075)*(i+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(e,t){return String.fromCharCode(e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255,t>>>0&255,t>>>8&255,t>>>16&255,t>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.joinUnsignedDecimalString=function(e,t){function r(e){for(var t=1e7,r=0;7>r;r++){var n=e/(t=t/10)%10>>>0;(0!=n||a)&&(a=!0,c+=s[n])}}if(2097151>=t)return""+(jspb.BinaryConstants.TWO_TO_32*t+e);var n=(16777215&e)+6777216*(i=(e>>>24|t<<8)>>>0&16777215)+6710656*(o=t>>16&65535),i=i+8147497*o,o=2*o;1e7<=n&&(i+=Math.floor(n/1e7),n%=1e7),1e7<=i&&(o+=Math.floor(i/1e7),i%=1e7);var s=jspb.utils.DIGITS,a=!1,c="";return(o||a)&&r(o),(i||a)&&r(i),(n||a)&&r(n),c},jspb.utils.joinSignedDecimalString=function(e,t){var r=2147483648&t;r&&(t=~t+(0==(e=1+~e>>>0)?1:0)>>>0);var n=jspb.utils.joinUnsignedDecimalString(e,t);return r?"-"+n:n},jspb.utils.hash64ToDecimalString=function(e,t){jspb.utils.splitHash64(e);var r=jspb.utils.split64Low,n=jspb.utils.split64High;return t?jspb.utils.joinSignedDecimalString(r,n):jspb.utils.joinUnsignedDecimalString(r,n)},jspb.utils.hash64ArrayToDecimalStrings=function(e,t){for(var r=Array(e.length),n=0;n<e.length;n++)r[n]=jspb.utils.hash64ToDecimalString(e[n],t);return r},jspb.utils.decimalStringToHash64=function(e){function t(e,t){for(var r=0;8>r&&(1!==e||0<t);r++){var i=e*n[r]+t;n[r]=255&i,t=i>>>8}}goog.asserts.assert(0<e.length);var r=!1;"-"===e[0]&&(r=!0,e=e.slice(1));for(var n=[0,0,0,0,0,0,0,0],i=0;i<e.length;i++)t(10,jspb.utils.DIGITS.indexOf(e[i]));return r&&(function(){for(var e=0;8>e;e++)n[e]=255&~n[e]}(),t(1,1)),goog.crypt.byteArrayToString(n)},jspb.utils.splitDecimalString=function(e){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e))},jspb.utils.hash64ToHexString=function(e){var t=Array(18);t[0]="0",t[1]="x";for(var r=0;8>r;r++){var n=e.charCodeAt(7-r);t[2*r+2]=jspb.utils.DIGITS[n>>4],t[2*r+3]=jspb.utils.DIGITS[15&n]}return t.join("")},jspb.utils.hexStringToHash64=function(e){e=e.toLowerCase(),goog.asserts.assert(18==e.length),goog.asserts.assert("0"==e[0]),goog.asserts.assert("x"==e[1]);for(var t="",r=0;8>r;r++){var n=jspb.utils.DIGITS.indexOf(e[2*r+2]),i=jspb.utils.DIGITS.indexOf(e[2*r+3]);t=String.fromCharCode(16*n+i)+t}return t},jspb.utils.hash64ToNumber=function(e,t){jspb.utils.splitHash64(e);var r=jspb.utils.split64Low,n=jspb.utils.split64High;return t?jspb.utils.joinInt64(r,n):jspb.utils.joinUint64(r,n)},jspb.utils.numberToHash64=function(e){return jspb.utils.splitInt64(e),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(e,t,r){for(var n=0,i=t;i<r;i++)n+=e[i]>>7;return r-t-n},jspb.utils.countVarintFields=function(e,t,r,n){var i=0;if(128>(n=8*n+jspb.BinaryConstants.WireType.VARINT))for(;t<r&&e[t++]==n;)for(i++;;){var o=e[t++];if(0==(128&o))break}else for(;t<r;){for(o=n;128<o;){if(e[t]!=(127&o|128))return i;t++,o>>=7}if(e[t++]!=o)break;for(i++;0!=(128&(o=e[t++])););}return i},jspb.utils.countFixedFields_=function(e,t,r,n,i){var o=0;if(128>n)for(;t<r&&e[t++]==n;)o++,t+=i;else for(;t<r;){for(var s=n;128<s;){if(e[t++]!=(127&s|128))return o;s>>=7}if(e[t++]!=s)break;o++,t+=i}return o},jspb.utils.countFixed32Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(e,t,r,n){return jspb.utils.countFixedFields_(e,t,r,8*n+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(e,t,r,n){var i=0;for(n=8*n+jspb.BinaryConstants.WireType.DELIMITED;t<r;){for(var o=n;128<o;){if(e[t++]!=(127&o|128))return i;o>>=7}if(e[t++]!=o)break;i++;for(var s=0,a=1;s+=(127&(o=e[t++]))*a,a*=128,0!=(128&o););t+=s}return i},jspb.utils.debugBytesToTextFormat=function(e){var t='"';if(e){e=jspb.utils.byteSourceToUint8Array(e);for(var r=0;r<e.length;r++)t+="\\x",16>e[r]&&(t+="0"),t+=e[r].toString(16)}return t+'"'},jspb.utils.debugScalarToTextFormat=function(e){return goog.isString(e)?goog.string.quote(e):e.toString()},jspb.utils.stringToByteArray=function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++){var n=e.charCodeAt(r);if(255<n)throw Error("Conversion error: string contains codepoint outside of byte range");t[r]=n}return t},jspb.utils.byteSourceToUint8Array=function(e){return e.constructor===Uint8Array?e:e.constructor===ArrayBuffer||e.constructor===Array?new Uint8Array(e):e.constructor===String?goog.crypt.base64.decodeStringToUint8Array(e):(goog.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var e=this.buffer_;return this.buffer_=[],e},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(e,t){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32);0<t||127<e;)this.buffer_.push(127&e|128),e=(e>>>7|t<<25)>>>0,t>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(e,t){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(t==Math.floor(t)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(e),this.writeUint32(t)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(e){for(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32);127<e;)this.buffer_.push(127&e|128),e>>>=7;this.buffer_.push(e)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(e){if(goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),0<=e)this.writeUnsignedVarint32(e);else{for(var t=0;9>t;t++)this.buffer_.push(127&e|128),e>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((e<<1^e>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(e){this.writeZigzagVarint64(parseInt(e,10))},jspb.BinaryEncoder.prototype.writeUint8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&256>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&65536>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(0<=e&&e<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-128<=e&&128>e),this.buffer_.push(e>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(-32768<=e&&32768>e),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(e>>>0&255),this.buffer_.push(e>>>8&255),this.buffer_.push(e>>>16&255),this.buffer_.push(e>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_63&&e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(e),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(+e>=-jspb.BinaryConstants.TWO_TO_63&&+e<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(e)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT32_MAX&&e<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(e),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(e){goog.asserts.assert(e>=-jspb.BinaryConstants.FLOAT64_MAX&&e<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(e){goog.asserts.assert(goog.isBoolean(e)||goog.isNumber(e)),this.buffer_.push(e?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(e){goog.asserts.assert(e==Math.floor(e)),goog.asserts.assert(e>=-jspb.BinaryConstants.TWO_TO_31&&e<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(e)},jspb.BinaryEncoder.prototype.writeBytes=function(e){this.buffer_.push.apply(this.buffer_,e)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(e){jspb.utils.splitHash64(e),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(e){jspb.utils.splitHash64(e),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(e){for(var t=this.buffer_.length,r=0;r<e.length;r++){var n=e.charCodeAt(r);if(128>n)this.buffer_.push(n);else if(2048>n)this.buffer_.push(n>>6|192),this.buffer_.push(63&n|128);else if(65536>n)if(55296<=n&&56319>=n&&r+1<e.length){var i=e.charCodeAt(r+1);56320<=i&&57343>=i&&(n=1024*(n-55296)+i-56320+65536,this.buffer_.push(n>>18|240),this.buffer_.push(n>>12&63|128),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128),r++)}else this.buffer_.push(n>>12|224),this.buffer_.push(n>>6&63|128),this.buffer_.push(63&n|128)}return this.buffer_.length-t},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(e){var t=this.encoder_.end();this.blocks_.push(t),this.blocks_.push(e),this.totalLength_+=t.length+e.length},jspb.BinaryWriter.prototype.beginDelimited_=function(e){return this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),e=this.encoder_.end(),this.blocks_.push(e),this.totalLength_+=e.length,e.push(this.totalLength_),e},jspb.BinaryWriter.prototype.endDelimited_=function(e){var t=e.pop();t=this.totalLength_+this.encoder_.length()-t;for(goog.asserts.assert(0<=t);127<t;)e.push(127&t|128),t>>>=7,this.totalLength_++;e.push(t),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(e,t,r){this.appendUint8Array_(e.subarray(t,r))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(e,t,r){null!=e&&null!=t&&null!=r&&this.writeSerializedMessage(e,t,r)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){goog.asserts.assert(0==this.bookmarks_.length);for(var e=new Uint8Array(this.totalLength_+this.encoder_.length()),t=this.blocks_,r=t.length,n=0,i=0;i<r;i++){var o=t[i];e.set(o,n),n+=o.length}return t=this.encoder_.end(),e.set(t,n),n+=t.length,goog.asserts.assert(n==e.length),this.blocks_=[e],e},jspb.BinaryWriter.prototype.getResultBase64String=function(){return goog.crypt.base64.encodeByteArray(this.getResultBuffer())},jspb.BinaryWriter.prototype.beginSubMessage=function(e){this.bookmarks_.push(this.beginDelimited_(e))},jspb.BinaryWriter.prototype.endSubMessage=function(){goog.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(e,t){goog.asserts.assert(1<=e&&e==Math.floor(e)),this.encoder_.writeUnsignedVarint32(8*e+t)},jspb.BinaryWriter.prototype.writeAny=function(e,t,r){var n=jspb.BinaryConstants.FieldType;switch(e){case n.DOUBLE:this.writeDouble(t,r);break;case n.FLOAT:this.writeFloat(t,r);break;case n.INT64:this.writeInt64(t,r);break;case n.UINT64:this.writeUint64(t,r);break;case n.INT32:this.writeInt32(t,r);break;case n.FIXED64:this.writeFixed64(t,r);break;case n.FIXED32:this.writeFixed32(t,r);break;case n.BOOL:this.writeBool(t,r);break;case n.STRING:this.writeString(t,r);break;case n.GROUP:goog.asserts.fail("Group field type not supported in writeAny()");break;case n.MESSAGE:goog.asserts.fail("Message field type not supported in writeAny()");break;case n.BYTES:this.writeBytes(t,r);break;case n.UINT32:this.writeUint32(t,r);break;case n.ENUM:this.writeEnum(t,r);break;case n.SFIXED32:this.writeSfixed32(t,r);break;case n.SFIXED64:this.writeSfixed64(t,r);break;case n.SINT32:this.writeSint32(t,r);break;case n.SINT64:this.writeSint64(t,r);break;case n.FHASH64:this.writeFixedHash64(t,r);break;case n.VHASH64:this.writeVarintHash64(t,r);break;default:goog.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(t))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(t))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(t))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(t))},jspb.BinaryWriter.prototype.writeInt32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeInt32String=function(e,t){if(null!=t){var r=parseInt(t,10);goog.asserts.assert(r>=-jspb.BinaryConstants.TWO_TO_31&&r<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(e,r)}},jspb.BinaryWriter.prototype.writeInt64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeInt64String=function(e,t){if(null!=t){var r=jspb.arith.Int64.fromString(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writeUint32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,t))},jspb.BinaryWriter.prototype.writeUint32String=function(e,t){if(null!=t){var r=parseInt(t,10);goog.asserts.assert(0<=r&&r<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(e,r)}},jspb.BinaryWriter.prototype.writeUint64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(e,t))},jspb.BinaryWriter.prototype.writeUint64String=function(e,t){if(null!=t){var r=jspb.arith.UInt64.fromString(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writeSint32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(e,t))},jspb.BinaryWriter.prototype.writeSint64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(e,t))},jspb.BinaryWriter.prototype.writeSint64String=function(e,t){null!=t&&(goog.asserts.assert(+t>=-jspb.BinaryConstants.TWO_TO_63&&+t<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64String_(e,t))},jspb.BinaryWriter.prototype.writeFixed32=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(t))},jspb.BinaryWriter.prototype.writeFixed64=function(e,t){null!=t&&(goog.asserts.assert(0<=t&&t<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(t))},jspb.BinaryWriter.prototype.writeFixed64String=function(e,t){if(null!=t){var r=jspb.arith.UInt64.fromString(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writeSfixed32=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(t))},jspb.BinaryWriter.prototype.writeSfixed64=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_63&&t<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(t))},jspb.BinaryWriter.prototype.writeSfixed64String=function(e,t){if(null!=t){var r=jspb.arith.Int64.fromString(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(r.lo,r.hi)}},jspb.BinaryWriter.prototype.writeFloat=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(t))},jspb.BinaryWriter.prototype.writeDouble=function(e,t){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(t))},jspb.BinaryWriter.prototype.writeBool=function(e,t){null!=t&&(goog.asserts.assert(goog.isBoolean(t)||goog.isNumber(t)),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(t))},jspb.BinaryWriter.prototype.writeEnum=function(e,t){null!=t&&(goog.asserts.assert(t>=-jspb.BinaryConstants.TWO_TO_31&&t<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(t))},jspb.BinaryWriter.prototype.writeString=function(e,t){if(null!=t){var r=this.beginDelimited_(e);this.encoder_.writeString(t),this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writeBytes=function(e,t){if(null!=t){var r=jspb.utils.byteSourceToUint8Array(t);this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(r.length),this.appendUint8Array_(r)}},jspb.BinaryWriter.prototype.writeMessage=function(e,t,r){null!=t&&(e=this.beginDelimited_(e),r(t,this),this.endDelimited_(e))},jspb.BinaryWriter.prototype.writeGroup=function(e,t,r){null!=t&&(this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t,this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeFixedHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(t))},jspb.BinaryWriter.prototype.writeVarintHash64=function(e,t){null!=t&&(goog.asserts.assert(8==t.length),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(t))},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint32_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSignedVarint64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeInt64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint32_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint32String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUnsignedVarint64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeUint64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint32_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeZigzagVarint64String_(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed32(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed32(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeSfixed64String(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFloat(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedDouble=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeDouble(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedBool=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBool(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedEnum=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeEnum(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedString=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeString(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedBytes=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeBytes(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedMessage=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++){var i=this.beginDelimited_(e);r(t[n],this),this.endDelimited_(i)}},jspb.BinaryWriter.prototype.writeRepeatedGroup=function(e,t,r){if(null!=t)for(var n=0;n<t.length;n++)this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.START_GROUP),r(t[n],this),this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.END_GROUP)},jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeFixedHash64(e,t[r])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(e,t){if(null!=t)for(var r=0;r<t.length;r++)this.writeVarintHash64(e,t[r])},jspb.BinaryWriter.prototype.writePackedInt32=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(t[n]);this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedInt32String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeSignedVarint32(parseInt(t[n],10));this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedInt64=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeSignedVarint64(t[n]);this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++){var i=jspb.arith.Int64.fromString(t[n]);this.encoder_.writeSplitVarint64(i.lo,i.hi)}this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedUint32=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(t[n]);this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedUint32String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint32(parseInt(t[n],10));this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedUint64=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeUnsignedVarint64(t[n]);this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedUint64String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++){var i=jspb.arith.UInt64.fromString(t[n]);this.encoder_.writeSplitVarint64(i.lo,i.hi)}this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedSint32=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeZigzagVarint32(t[n]);this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedSint64=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(t[n]);this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedSint64String=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeZigzagVarint64(parseInt(t[n],10));this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeUint32(t[r])}},jspb.BinaryWriter.prototype.writePackedFixed64=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeUint64(t[r])}},jspb.BinaryWriter.prototype.writePackedFixed64String=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++){var n=jspb.arith.UInt64.fromString(t[r]);this.encoder_.writeSplitFixed64(n.lo,n.hi)}}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeInt32(t[r])}},jspb.BinaryWriter.prototype.writePackedSfixed64=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeInt64(t[r])}},jspb.BinaryWriter.prototype.writePackedSfixed64String=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeInt64String(t[r])}},jspb.BinaryWriter.prototype.writePackedFloat=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeFloat(t[r])}},jspb.BinaryWriter.prototype.writePackedDouble=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeDouble(t[r])}},jspb.BinaryWriter.prototype.writePackedBool=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(t.length);for(var r=0;r<t.length;r++)this.encoder_.writeBool(t[r])}},jspb.BinaryWriter.prototype.writePackedEnum=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeEnum(t[n]);this.endDelimited_(r)}},jspb.BinaryWriter.prototype.writePackedFixedHash64=function(e,t){if(null!=t&&t.length){this.writeFieldHeader_(e,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*t.length);for(var r=0;r<t.length;r++)this.encoder_.writeFixedHash64(t[r])}},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(e,t){if(null!=t&&t.length){for(var r=this.beginDelimited_(e),n=0;n<t.length;n++)this.encoder_.writeVarintHash64(t[n]);this.endDelimited_(r)}},jspb.BinaryIterator=function(e,t,r){this.elements_=this.nextMethod_=this.decoder_=null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!0,this.init_(e,t,r)},jspb.BinaryIterator.prototype.init_=function(e,t,r){e&&t&&(this.decoder_=e,this.nextMethod_=t),this.elements_=r||null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!this.decoder_&&!this.elements_,this.next()},jspb.BinaryIterator.instanceCache_=[],jspb.BinaryIterator.alloc=function(e,t,r){if(jspb.BinaryIterator.instanceCache_.length){var n=jspb.BinaryIterator.instanceCache_.pop();return n.init_(e,t,r),n}return new jspb.BinaryIterator(e,t,r)},jspb.BinaryIterator.prototype.free=function(){this.clear(),100>jspb.BinaryIterator.instanceCache_.length&&jspb.BinaryIterator.instanceCache_.push(this)},jspb.BinaryIterator.prototype.clear=function(){this.decoder_&&this.decoder_.free(),this.elements_=this.nextMethod_=this.decoder_=null,this.cursor_=0,this.nextValue_=null,this.atEnd_=!0},jspb.BinaryIterator.prototype.get=function(){return this.nextValue_},jspb.BinaryIterator.prototype.atEnd=function(){return this.atEnd_},jspb.BinaryIterator.prototype.next=function(){var e=this.nextValue_;return this.decoder_?this.decoder_.atEnd()?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.nextMethod_.call(this.decoder_):this.elements_&&(this.cursor_==this.elements_.length?(this.nextValue_=null,this.atEnd_=!0):this.nextValue_=this.elements_[this.cursor_++]),e},jspb.BinaryDecoder=function(e,t,r){this.bytes_=null,this.tempHigh_=this.tempLow_=this.cursor_=this.end_=this.start_=0,this.error_=!1,e&&this.setBlock(e,t,r)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(e,t,r){if(jspb.BinaryDecoder.instanceCache_.length){var n=jspb.BinaryDecoder.instanceCache_.pop();return e&&n.setBlock(e,t,r),n}return new jspb.BinaryDecoder(e,t,r)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(e,t,r){this.bytes_=jspb.utils.byteSourceToUint8Array(e),this.start_=goog.isDef(t)?t:0,this.end_=goog.isDef(r)?this.start_+r:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(e){this.end_=e},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(e){this.cursor_=e},jspb.BinaryDecoder.prototype.advance=function(e){this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64_=function(){for(var e,t,r=0,n=0;4>n;n++)if(r|=(127&(e=this.bytes_[this.cursor_++]))<<7*n,128>e)return this.tempLow_=r>>>0,void(this.tempHigh_=0);if(r|=(127&(e=this.bytes_[this.cursor_++]))<<28,t=0|(127&e)>>4,128>e)this.tempLow_=r>>>0,this.tempHigh_=t>>>0;else{for(n=0;5>n;n++)if(t|=(127&(e=this.bytes_[this.cursor_++]))<<7*n+3,128>e)return this.tempLow_=r>>>0,void(this.tempHigh_=t>>>0);goog.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0}},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(e){for(;128<e;)this.cursor_--,e>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var e,t=this.bytes_,r=127&(e=t[this.cursor_+0]);return 128>e?(this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(e=t[this.cursor_+1]))<<7,128>e?(this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(e=t[this.cursor_+2]))<<14,128>e?(this.cursor_+=3,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(127&(e=t[this.cursor_+3]))<<21,128>e?(this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),r):(r|=(15&(e=t[this.cursor_+4]))<<28,128>e?(this.cursor_+=5,goog.asserts.assert(this.cursor_<=this.end_),r>>>0):(this.cursor_+=5,128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&128<=t[this.cursor_++]&&goog.asserts.assert(!1),goog.asserts.assert(this.cursor_<=this.end_),r)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=jspb.BinaryDecoder.prototype.readUnsignedVarint32,jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var e=this.readUnsignedVarint32();return e>>>1^-(1&e)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinUint64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64_(),jspb.utils.joinUnsignedDecimalString(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinInt64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64_(),jspb.utils.joinSignedDecimalString(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64_(),jspb.utils.joinZigzag64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readZigzagVarint64().toString()},jspb.BinaryDecoder.prototype.readUint8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e},jspb.BinaryDecoder.prototype.readUint16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8|r<<16|n<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUint64(e,t)},jspb.BinaryDecoder.prototype.readUint64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinUnsignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readInt8=function(){var e=this.bytes_[this.cursor_+0];return this.cursor_+=1,goog.asserts.assert(this.cursor_<=this.end_),e<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1];return this.cursor_+=2,goog.asserts.assert(this.cursor_<=this.end_),(e<<0|t<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var e=this.bytes_[this.cursor_+0],t=this.bytes_[this.cursor_+1],r=this.bytes_[this.cursor_+2],n=this.bytes_[this.cursor_+3];return this.cursor_+=4,goog.asserts.assert(this.cursor_<=this.end_),e<<0|t<<8|r<<16|n<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinInt64(e,t)},jspb.BinaryDecoder.prototype.readInt64String=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinSignedDecimalString(e,t)},jspb.BinaryDecoder.prototype.readFloat=function(){var e=this.readUint32();return jspb.utils.joinFloat32(e,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var e=this.readUint32(),t=this.readUint32();return jspb.utils.joinFloat64(e,t)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(e){var t=this.bytes_,r=this.cursor_;e=r+e;for(var n=[],i="";r<e;){if(128>(a=t[r++]))n.push(a);else{if(192>a)continue;if(224>a){var o=t[r++];n.push((31&a)<<6|63&o)}else if(240>a){o=t[r++];var s=t[r++];n.push((15&a)<<12|(63&o)<<6|63&s)}else if(248>a){var a=(a=(7&a)<<18|(63&(o=t[r++]))<<12|(63&(s=t[r++]))<<6|63&t[r++])-65536;n.push(55296+(a>>10&1023),56320+(1023&a))}}8192<=n.length&&(i+=String.fromCharCode.apply(null,n),n.length=0)}return i+=goog.crypt.byteArrayToString(n),this.cursor_=r,i},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var e=this.readUnsignedVarint32();return this.readString(e)},jspb.BinaryDecoder.prototype.readBytes=function(e){if(0>e||this.cursor_+e>this.bytes_.length)return this.error_=!0,goog.asserts.fail("Invalid byte length!"),new Uint8Array(0);var t=this.bytes_.subarray(this.cursor_,this.cursor_+e);return this.cursor_+=e,goog.asserts.assert(this.cursor_<=this.end_),t},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64_(),jspb.utils.joinHash64(this.tempLow_,this.tempHigh_)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var e=this.bytes_,t=this.cursor_,r=e[t+0],n=e[t+1],i=e[t+2],o=e[t+3],s=e[t+4],a=e[t+5],c=e[t+6];e=e[t+7];return this.cursor_+=8,String.fromCharCode(r,n,i,o,s,a,c,e)},jspb.BinaryReader=function(e,t,r){this.decoder_=jspb.BinaryDecoder.alloc(e,t,r),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(e,t,r){if(jspb.BinaryReader.instanceCache_.length){var n=jspb.BinaryReader.instanceCache_.pop();return e&&n.decoder_.setBlock(e,t,r),n}return new jspb.BinaryReader(e,t,r)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(e,t,r){this.decoder_.setBlock(e,t,r),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(e){this.decoder_.advance(e)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return goog.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var e,t=(e=this.decoder_.readUnsignedVarint32())>>>3;return(e=7&e)!=jspb.BinaryConstants.WireType.VARINT&&e!=jspb.BinaryConstants.WireType.FIXED32&&e!=jspb.BinaryConstants.WireType.FIXED64&&e!=jspb.BinaryConstants.WireType.DELIMITED&&e!=jspb.BinaryConstants.WireType.START_GROUP&&e!=jspb.BinaryConstants.WireType.END_GROUP?(goog.asserts.fail("Invalid wire type"),this.error_=!0,!1):(this.nextField_=t,this.nextWireType_=e,!0)},jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var e=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==e;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(goog.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)goog.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var e=this.decoder_.readUnsignedVarint32();this.decoder_.advance(e)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(goog.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(goog.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){var e=[this.nextField_];do{if(!this.nextField()){goog.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP)e.push(this.nextField_);else if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP&&this.nextField_!=e.pop()){goog.asserts.fail("Unmatched end-group tag"),this.error_=!0;break}}while(0<e.length)},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:goog.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(e,t){goog.isNull(this.readCallbacks_)&&(this.readCallbacks_={}),goog.asserts.assert(!this.readCallbacks_[e]),this.readCallbacks_[e]=t},jspb.BinaryReader.prototype.runReadCallback=function(e){return goog.asserts.assert(!goog.isNull(this.readCallbacks_)),e=this.readCallbacks_[e],goog.asserts.assert(e),e(this)},jspb.BinaryReader.prototype.readAny=function(e){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(e);var t=jspb.BinaryConstants.FieldType;switch(e){case t.DOUBLE:return this.readDouble();case t.FLOAT:return this.readFloat();case t.INT64:return this.readInt64();case t.UINT64:return this.readUint64();case t.INT32:return this.readInt32();case t.FIXED64:return this.readFixed64();case t.FIXED32:return this.readFixed32();case t.BOOL:return this.readBool();case t.STRING:return this.readString();case t.GROUP:goog.asserts.fail("Group field type not supported in readAny()");case t.MESSAGE:goog.asserts.fail("Message field type not supported in readAny()");case t.BYTES:return this.readBytes();case t.UINT32:return this.readUint32();case t.ENUM:return this.readEnum();case t.SFIXED32:return this.readSfixed32();case t.SFIXED64:return this.readSfixed64();case t.SINT32:return this.readSint32();case t.SINT64:return this.readSint64();case t.FHASH64:return this.readFixedHash64();case t.VHASH64:return this.readVarintHash64();default:goog.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(e,t){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var r=this.decoder_.getEnd(),n=this.decoder_.readUnsignedVarint32();n=this.decoder_.getCursor()+n;this.decoder_.setEnd(n),t(e,this),this.decoder_.setCursor(n),this.decoder_.setEnd(r)},jspb.BinaryReader.prototype.readGroup=function(e,t,r){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),goog.asserts.assert(this.nextField_==e),r(t,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(goog.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},jspb.BinaryReader.prototype.getFieldDecoder=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32(),t=this.decoder_.getCursor(),r=t+e;e=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),t,e);return this.decoder_.setCursor(r),e},jspb.BinaryReader.prototype.readInt32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},jspb.BinaryReader.prototype.readInt32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readInt64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readUint32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},jspb.BinaryReader.prototype.readUint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},jspb.BinaryReader.prototype.readSint64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},jspb.BinaryReader.prototype.readSint64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},jspb.BinaryReader.prototype.readFixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},jspb.BinaryReader.prototype.readFixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},jspb.BinaryReader.prototype.readSfixed32String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},jspb.BinaryReader.prototype.readSfixed64String=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},jspb.BinaryReader.prototype.readDouble=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},jspb.BinaryReader.prototype.readBool=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},jspb.BinaryReader.prototype.readEnum=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},jspb.BinaryReader.prototype.readString=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(e)},jspb.BinaryReader.prototype.readBytes=function(){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var e=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(e)},jspb.BinaryReader.prototype.readVarintHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readFixedHash64=function(){return goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readPackedField_=function(e){goog.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);for(var t=this.decoder_.readUnsignedVarint32(),r=(t=this.decoder_.getCursor()+t,[]);this.decoder_.getCursor()<t;)r.push(e.call(this.decoder_));return r},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf}).call(this,__webpack_require__(6))},function(e,t,r){const n=r(8);function i(e,t,r,n){return e===r?t-n:e-r}t.ZERO_POINT=Object.freeze({row:0,column:0}),t.compare=function(e,t){return i(e.row,e.column,t.row,t.column)},t.traverse=function(e,t){return 0===t.row?{row:e.row,column:e.column+t.column}:{row:e.row+t.row,column:t.column}},t.traversal=function(e,t){return e.row===t.row?{row:0,column:e.column-t.column}:{row:e.row-t.row,column:e.column}},t.extentForText=function(e){let t=0,r=0,n=0;for(;n<e.length;){"\n"===e[n]?(r=0,t++):r++,n++}return{row:t,column:r}},t.characterIndexForPosition=function(e,t){let r=0,o=0,s=0;for(;i(r,o,t.row,t.column)<0&&s<=e.length;)"\n"===e[s]?(r++,o=0):o++,s++;return n(i(r,o,t.row,t.column)<=0,"Target position should not exceed the extent of the given text"),s}},function(e,t){e.exports={DISCONNECTED:0,RETRACTED:1,EXTENDED:2}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.disposed=!1,this.disposalAction=t}return i(e,null,[{key:"isDisposable",value:function(e){return"function"==typeof(null!=e?e.dispose:void 0)}}]),i(e,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,"function"==typeof this.disposalAction&&this.disposalAction(),this.disposalAction=null)}}]),e}()},function(e,t,r){var n=r(136)("socket.io-parser"),i=r(139),o=r(140),s=r(49),a=r(50);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=d;var l=t.ERROR+'"encode error"';function u(e){var r=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(r+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(r+=e.nsp+","),null!=e.id&&(r+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return l;r+=i}return n("encoded %j as %s",e,r),r}function d(){this.reconstructor=null}function p(e){this.reconPack=e,this.buffers=[]}function h(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,r){(n("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){o.removeBlobs(e,(function(e){var r=o.deconstructPacket(e),n=u(r.packet),i=r.buffers;i.unshift(n),t(i)}))}(e,r):r([u(e)])},i(d.prototype),d.prototype.add=function(e){var r;if("string"==typeof e)r=function(e){var r=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return h("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var o="";"-"!==e.charAt(++r)&&(o+=e.charAt(r),r!=e.length););if(o!=Number(o)||"-"!==e.charAt(r))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===e.charAt(r+1))for(i.nsp="";++r;){if(","===(c=e.charAt(r)))break;if(i.nsp+=c,r===e.length)break}else i.nsp="/";var a=e.charAt(r+1);if(""!==a&&Number(a)==a){for(i.id="";++r;){var c;if(null==(c=e.charAt(r))||Number(c)!=c){--r;break}if(i.id+=e.charAt(r),r===e.length)break}i.id=Number(i.id)}if(e.charAt(++r)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(r));if(!(!1!==l&&(i.type===t.ERROR||s(l))))return h("invalid payload");i.data=l}return n("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type?(this.reconstructor=new p(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",r))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,r){var n=r(143);e.exports=function(e){var t=e.xdomain,r=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(e){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t,r){var n=r(11),i=r(26);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return(i?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),o=n(r.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var l=[];for(c=a;c<i.length;c++)l.push("..");return(l=l.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){r=t+1;break}}else-1===n&&(i=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===n&&(i=!1,n=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){r=s+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(9))},function(e,t){function r(e){return"atom://teletype/portal/"+e}e.exports={getEditorURI:function(e,t){return r(e)+"/editor/"+t},getPortalURI:r}},function(e,t){e.exports=new Set(["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"])},function(e,t,r){const n=r(69),i=r(29);function o(e,t){let r;if(null!=e.text)r=document.createTextNode(e.text);else{const{tag:o,children:a}=e;let{props:c,context:l}=e;if(l&&(t={refs:l.refs,listenerContext:l}),"function"==typeof o){let n;c&&c.ref&&(n=c.ref);const i=new o(c||{},a);e.component=i,r=i.element,"function"==typeof n?n(i):t&&t.refs&&n&&(t.refs[n]=i)}else i.has(o)?(r=document.createElementNS("http://www.w3.org/2000/svg",o),a&&s(r,a,t),c&&n(r,null,e,t)):(r=document.createElement(o),a&&s(r,a,t),c&&n(r,null,e,t))}return e.domNode=r,r}function s(e,t,r){for(let n=0;n<t.length;n++)e.appendChild(o(t[n],r))}e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(82),i=r(85);t.diff=i.default;var o=r(40);t.split=o.default,t.default=n.default},function(e,t){var r=/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/;e.exports={findPortalId:function(e){if(!e)return null;var t=e.match(r);return t?t[0]:null}}},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,c=s(e),l=1;l<arguments.length;l++){for(var u in r=Object(arguments[l]))i.call(r,u)&&(c[u]=r[u]);if(n){a=n(r);for(var d=0;d<a.length;d++)o.call(r,a[d])&&(c[a[d]]=r[a[d]])}}return c}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var i=(s=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),o=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[r].concat(o).concat([i]).join("\n")}var s;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];null!=s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),t.push(s))}},t}},function(e,t,r){"use strict";var n,i={},o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},s=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}();function a(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],s=t.base?o[0]+t.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(a):r.push(n[s]={id:s,parts:[a]})}return r}function c(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=i[n.id],s=0;if(o){for(o.refs++;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(y(n.parts[s],t))}else{for(var a=[];s<n.parts.length;s++)a.push(y(n.parts[s],t));i[n.id]={id:n.id,refs:1,parts:a}}}}function l(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var n=r.nc;n&&(e.attributes.nonce=n)}if(Object.keys(e.attributes).forEach((function(r){t.setAttribute(r,e.attributes[r])})),"function"==typeof e.insert)e.insert(t);else{var i=s(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function h(e,t,r){var n=r.css,i=r.media,o=r.sourceMap;if(i&&e.setAttribute("media",i),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,g=0;function y(e,t){var r,n,i;if(t.singleton){var o=g++;r=f||(f=l(t)),n=p.bind(null,r,o,!1),i=p.bind(null,r,o,!0)}else r=l(t),n=h.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o());var r=a(e,t);return c(r,t),function(e){for(var n=[],o=0;o<r.length;o++){var s=r[o],l=i[s.id];l&&(l.refs--,n.push(l))}e&&c(a(e,t),t);for(var u=0;u<n.length;u++){var d=n[u];if(0===d.refs){for(var p=0;p<d.parts.length;p++)d.parts[p]();delete i[d.id]}}}}},function(e,t,r){(function(e,r){var n=200,i="__lodash_hash_undefined__",o=1,s=2,a=9007199254740991,c="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",d="[object Boolean]",p="[object Date]",h="[object Error]",f="[object Function]",g="[object GeneratorFunction]",y="[object Map]",m="[object Number]",v="[object Null]",b="[object Object]",w="[object Proxy]",S="[object RegExp]",k="[object Set]",E="[object String]",_="[object Symbol]",C="[object Undefined]",M="[object ArrayBuffer]",x="[object DataView]",O=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[c]=T[l]=T[M]=T[d]=T[x]=T[p]=T[h]=T[f]=T[y]=T[m]=T[b]=T[S]=T[k]=T[E]=T["[object WeakMap]"]=!1;var I="object"==typeof e&&e&&e.Object===Object&&e,P="object"==typeof self&&self&&self.Object===Object&&self,A=I||P||Function("return this")(),B=t&&!t.nodeType&&t,L=B&&"object"==typeof r&&r&&!r.nodeType&&r,U=L&&L.exports===B,D=U&&I.process,F=function(){try{return D&&D.binding&&D.binding("util")}catch(e){}}(),j=F&&F.isTypedArray;function $(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function N(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function W(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var z,H,V,G=Array.prototype,q=Function.prototype,K=Object.prototype,J=A["__core-js_shared__"],Y=q.toString,X=K.hasOwnProperty,Q=(z=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",Z=K.toString,ee=RegExp("^"+Y.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=U?A.Buffer:void 0,re=A.Symbol,ne=A.Uint8Array,ie=K.propertyIsEnumerable,oe=G.splice,se=re?re.toStringTag:void 0,ae=Object.getOwnPropertySymbols,ce=te?te.isBuffer:void 0,le=(H=Object.keys,V=Object,function(e){return H(V(e))}),ue=Fe(A,"DataView"),de=Fe(A,"Map"),pe=Fe(A,"Promise"),he=Fe(A,"Set"),fe=Fe(A,"WeakMap"),ge=Fe(Object,"create"),ye=We(ue),me=We(de),ve=We(pe),be=We(he),we=We(fe),Se=re?re.prototype:void 0,ke=Se?Se.valueOf:void 0;function Ee(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function _e(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Me(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ce;++t<r;)this.add(e[t])}function xe(e){var t=this.__data__=new _e(e);this.size=t.size}function Oe(e,t){var r=Ve(e),n=!r&&He(e),i=!r&&!n&&Ge(e),o=!r&&!n&&!i&&Xe(e),s=r||n||i||o,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var l in e)!t&&!X.call(e,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ne(l,c))||a.push(l);return a}function Re(e,t){for(var r=e.length;r--;)if(ze(e[r][0],t))return r;return-1}function Te(e){return null==e?void 0===e?C:v:se&&se in Object(e)?function(e){var t=X.call(e,se),r=e[se];try{e[se]=void 0;var n=!0}catch(e){}var i=Z.call(e);n&&(t?e[se]=r:delete e[se]);return i}(e):function(e){return Z.call(e)}(e)}function Ie(e){return Ye(e)&&Te(e)==c}function Pe(e,t,r,n,i){return e===t||(null==e||null==t||!Ye(e)&&!Ye(t)?e!=e&&t!=t:function(e,t,r,n,i,a){var u=Ve(e),f=Ve(t),g=u?l:$e(e),v=f?l:$e(t),w=(g=g==c?b:g)==b,C=(v=v==c?b:v)==b,O=g==v;if(O&&Ge(e)){if(!Ge(t))return!1;u=!0,w=!1}if(O&&!w)return a||(a=new xe),u||Xe(e)?Le(e,t,r,n,i,a):function(e,t,r,n,i,a,c){switch(r){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!a(new ne(e),new ne(t)));case d:case p:case m:return ze(+e,+t);case h:return e.name==t.name&&e.message==t.message;case S:case E:return e==t+"";case y:var l=N;case k:var u=n&o;if(l||(l=W),e.size!=t.size&&!u)return!1;var f=c.get(e);if(f)return f==t;n|=s,c.set(e,t);var g=Le(l(e),l(t),n,i,a,c);return c.delete(e),g;case _:if(ke)return ke.call(e)==ke.call(t)}return!1}(e,t,g,r,n,i,a);if(!(r&o)){var R=w&&X.call(e,"__wrapped__"),T=C&&X.call(t,"__wrapped__");if(R||T){var I=R?e.value():e,P=T?t.value():t;return a||(a=new xe),i(I,P,r,n,a)}}if(!O)return!1;return a||(a=new xe),function(e,t,r,n,i,s){var a=r&o,c=Ue(e),l=c.length,u=Ue(t).length;if(l!=u&&!a)return!1;var d=l;for(;d--;){var p=c[d];if(!(a?p in t:X.call(t,p)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var f=!0;s.set(e,t),s.set(t,e);var g=a;for(;++d<l;){p=c[d];var y=e[p],m=t[p];if(n)var v=a?n(m,y,p,t,e,s):n(y,m,p,e,t,s);if(!(void 0===v?y===m||i(y,m,r,n,s):v)){f=!1;break}g||(g="constructor"==p)}if(f&&!g){var b=e.constructor,w=t.constructor;b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(f=!1)}return s.delete(e),s.delete(t),f}(e,t,r,n,i,a)}(e,t,r,n,Pe,i))}function Ae(e){return!(!Je(e)||function(e){return!!Q&&Q in e}(e))&&(qe(e)?ee:O).test(We(e))}function Be(e){if(!function(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||K;return e===r}(e))return le(e);var t=[];for(var r in Object(e))X.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Le(e,t,r,n,i,a){var c=r&o,l=e.length,u=t.length;if(l!=u&&!(c&&u>l))return!1;var d=a.get(e);if(d&&a.get(t))return d==t;var p=-1,h=!0,f=r&s?new Me:void 0;for(a.set(e,t),a.set(t,e);++p<l;){var g=e[p],y=t[p];if(n)var m=c?n(y,g,p,t,e,a):n(g,y,p,e,t,a);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!$(t,(function(e,t){if(o=t,!f.has(o)&&(g===e||i(g,e,r,n,a)))return f.push(t);var o}))){h=!1;break}}else if(g!==y&&!i(g,y,r,n,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function Ue(e){return function(e,t,r){var n=t(e);return Ve(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,Qe,je)}function De(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Fe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ae(r)?r:void 0}Ee.prototype.clear=function(){this.__data__=ge?ge(null):{},this.size=0},Ee.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ee.prototype.get=function(e){var t=this.__data__;if(ge){var r=t[e];return r===i?void 0:r}return X.call(t,e)?t[e]:void 0},Ee.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:X.call(t,e)},Ee.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ge&&void 0===t?i:t,this},_e.prototype.clear=function(){this.__data__=[],this.size=0},_e.prototype.delete=function(e){var t=this.__data__,r=Re(t,e);return!(r<0)&&(r==t.length-1?t.pop():oe.call(t,r,1),--this.size,!0)},_e.prototype.get=function(e){var t=this.__data__,r=Re(t,e);return r<0?void 0:t[r][1]},_e.prototype.has=function(e){return Re(this.__data__,e)>-1},_e.prototype.set=function(e,t){var r=this.__data__,n=Re(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Ce.prototype.clear=function(){this.size=0,this.__data__={hash:new Ee,map:new(de||_e),string:new Ee}},Ce.prototype.delete=function(e){var t=De(this,e).delete(e);return this.size-=t?1:0,t},Ce.prototype.get=function(e){return De(this,e).get(e)},Ce.prototype.has=function(e){return De(this,e).has(e)},Ce.prototype.set=function(e,t){var r=De(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Me.prototype.add=Me.prototype.push=function(e){return this.__data__.set(e,i),this},Me.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.clear=function(){this.__data__=new _e,this.size=0},xe.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},xe.prototype.get=function(e){return this.__data__.get(e)},xe.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof _e){var i=r.__data__;if(!de||i.length<n-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ce(i)}return r.set(e,t),this.size=r.size,this};var je=ae?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}(ae(e),(function(t){return ie.call(e,t)})))}:function(){return[]},$e=Te;function Ne(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function We(e){if(null!=e){try{return Y.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ze(e,t){return e===t||e!=e&&t!=t}(ue&&$e(new ue(new ArrayBuffer(1)))!=x||de&&$e(new de)!=y||pe&&"[object Promise]"!=$e(pe.resolve())||he&&$e(new he)!=k||fe&&"[object WeakMap]"!=$e(new fe))&&($e=function(e){var t=Te(e),r=t==b?e.constructor:void 0,n=r?We(r):"";if(n)switch(n){case ye:return x;case me:return y;case ve:return"[object Promise]";case be:return k;case we:return"[object WeakMap]"}return t});var He=Ie(function(){return arguments}())?Ie:function(e){return Ye(e)&&X.call(e,"callee")&&!ie.call(e,"callee")},Ve=Array.isArray;var Ge=ce||function(){return!1};function qe(e){if(!Je(e))return!1;var t=Te(e);return t==f||t==g||t==u||t==w}function Ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Je(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ye(e){return null!=e&&"object"==typeof e}var Xe=j?function(e){return function(t){return e(t)}}(j):function(e){return Ye(e)&&Ke(e.length)&&!!T[Te(e)]};function Qe(e){return null!=(t=e)&&Ke(t.length)&&!qe(t)?Oe(e):Be(e);var t}r.exports=function(e,t){return Pe(e,t)}}).call(this,r(6),r(16)(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.editorOptions=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"];t.editorEvents=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"];t.getAceInstance=function(){var e;return window.ace?(e=window.ace).acequire=window.ace.require||window.ace.acequire:e=r(38),e};t.debounce=function(e,t){var r=null;return function(){var n=this,i=arguments;clearTimeout(r),r=setTimeout((function(){e.apply(n,i)}),t)}}},function(e,t,r){(function(e){!function(){var e=function(){return this}();e||"undefined"==typeof window||(e=window);var t=function(e,r,n){"string"==typeof e?(2==arguments.length&&(n=r),t.modules[e]||(t.payloads[e]=n,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};t.modules={},t.payloads={};var r,n,i=function(e,t,r){if("string"==typeof t){var n=a(e,t);if(null!=n)return r&&r(),n}else if("[object Array]"===Object.prototype.toString.call(t)){for(var i=[],s=0,c=t.length;s<c;++s){var l=a(e,t[s]);if(null==l&&o.original)return;i.push(l)}return r&&r.apply(null,i)||!0}},o=function(e,t){var r=i("",e,t);return null==r&&o.original?o.original.apply(this,arguments):r},s=function(e,t){if(-1!==t.indexOf("!")){var r=t.split("!");return s(e,r[0])+"!"+s(e,r[1])}if("."==t.charAt(0))for(t=e.split("/").slice(0,-1).join("/")+"/"+t;-1!==t.indexOf(".")&&n!=t;){var n=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return t},a=function(e,r){r=s(e,r);var n=t.modules[r];if(!n){if("function"==typeof(n=t.payloads[r])){var o={},a={id:r,uri:"",exports:o,packaged:!0};o=n((function(e,t){return i(r,e,t)}),o,a)||a.exports,t.modules[r]=o,delete t.payloads[r]}n=t.modules[r]=o||n}return n};n=e,(r="ace")&&(e[r]||(e[r]={}),n=e[r]),n.define&&n.define.packaged||(t.original=n.define,n.define=t,n.define.packaged=!0),n.require&&n.require.packaged||(o.original=n.require,n.require=o,n.require.packaged=!0)}(),ace.define("ace/lib/regexp",["require","exports","module"],(function(e,t,r){"use strict";var n,i={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},o=void 0===i.exec.call(/()??/,"")[1],s=(n=/^/g,i.test.call(n,""),!n.lastIndex);function a(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function c(e,t,r){if(Array.prototype.indexOf)return e.indexOf(t,r);for(var n=r||0;n<e.length;n++)if(e[n]===t)return n;return-1}s&&o||(RegExp.prototype.exec=function(e){var t,r,n=i.exec.apply(this,arguments);if("string"==typeof e&&n){if(!o&&n.length>1&&c(n,"")>-1&&(r=RegExp(this.source,i.replace.call(a(this),"g","")),i.replace.call(e.slice(n.index),r,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(n[e]=void 0)}))),this._xregexp&&this._xregexp.captureNames)for(var l=1;l<n.length;l++)(t=this._xregexp.captureNames[l-1])&&(n[t]=n[l]);!s&&this.global&&!n[0].length&&this.lastIndex>n.index&&this.lastIndex--}return n},s||(RegExp.prototype.test=function(e){var t=i.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))})),ace.define("ace/lib/es5-shim",["require","exports","module"],(function(e,t,r){function n(){}Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError("Function.prototype.bind called on incompatible "+t);var r=p.call(arguments,1),i=function(){if(this instanceof i){var n=t.apply(this,r.concat(p.call(arguments)));return Object(n)===n?n:this}return t.apply(e,r.concat(p.call(arguments)))};return t.prototype&&(n.prototype=t.prototype,i.prototype=new n,n.prototype=null),i});var i,o,s,a,c,l=Function.prototype.call,u=Array.prototype,d=Object.prototype,p=u.slice,h=l.bind(d.toString),f=l.bind(d.hasOwnProperty);if((c=f(d,"__defineGetter__"))&&(i=l.bind(d.__defineGetter__),o=l.bind(d.__defineSetter__),s=l.bind(d.__lookupGetter__),a=l.bind(d.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t,r=[];if(r.splice.apply(r,e(20)),r.splice.apply(r,e(26)),t=r.length,r.splice(5,0,"XXX"),r.length,t+1==r.length)return!0}()){var g=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?g.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(p.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var r=this.length;e>0?e>r&&(e=r):null==e?e=0:e<0&&(e=Math.max(r+e,0)),e+t<r||(t=r-e);var n=this.slice(e,e+t),i=p.call(arguments,2),o=i.length;if(e===r)o&&this.push.apply(this,i);else{var s=Math.min(t,r-e),a=e+s,c=a+o-s,l=r-a,u=r-s;if(c<a)for(var d=0;d<l;++d)this[c+d]=this[a+d];else if(c>a)for(d=l;d--;)this[c+d]=this[a+d];if(o&&e===u)this.length=u,this.push.apply(this,i);else for(this.length=u+o,d=0;d<o;++d)this[e+d]=i[d]}return n};Array.isArray||(Array.isArray=function(e){return"[object Array]"==h(e)});var y,m,v=Object("a"),b="a"!=v[0]||!(0 in v);if(Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=P(this),r=b&&"[object String]"==h(this)?this.split(""):t,n=arguments[1],i=-1,o=r.length>>>0;if("[object Function]"!=h(e))throw new TypeError;for(;++i<o;)i in r&&e.call(n,r[i],i,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=P(this),r=b&&"[object String]"==h(this)?this.split(""):t,n=r.length>>>0,i=Array(n),o=arguments[1];if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");for(var s=0;s<n;s++)s in r&&(i[s]=e.call(o,r[s],s,t));return i}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,r=P(this),n=b&&"[object String]"==h(this)?this.split(""):r,i=n.length>>>0,o=[],s=arguments[1];if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");for(var a=0;a<i;a++)a in n&&(t=n[a],e.call(s,t,a,r)&&o.push(t));return o}),Array.prototype.every||(Array.prototype.every=function(e){var t=P(this),r=b&&"[object String]"==h(this)?this.split(""):t,n=r.length>>>0,i=arguments[1];if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");for(var o=0;o<n;o++)if(o in r&&!e.call(i,r[o],o,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=P(this),r=b&&"[object String]"==h(this)?this.split(""):t,n=r.length>>>0,i=arguments[1];if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");for(var o=0;o<n;o++)if(o in r&&e.call(i,r[o],o,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=P(this),r=b&&"[object String]"==h(this)?this.split(""):t,n=r.length>>>0;if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in r){i=r[o++];break}if(++o>=n)throw new TypeError("reduce of empty array with no initial value")}for(;o<n;o++)o in r&&(i=e.call(void 0,i,r[o],o,t));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=P(this),r=b&&"[object String]"==h(this)?this.split(""):t,n=r.length>>>0;if("[object Function]"!=h(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,o=n-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in r){i=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do{o in this&&(i=e.call(void 0,i,r[o],o,t))}while(o--);return i}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var t=b&&"[object String]"==h(this)?this.split(""):P(this),r=t.length>>>0;if(!r)return-1;var n=0;for(arguments.length>1&&(n=I(arguments[1])),n=n>=0?n:Math.max(0,r+n);n<r;n++)if(n in t&&t[n]===e)return n;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var t=b&&"[object String]"==h(this)?this.split(""):P(this),r=t.length>>>0;if(!r)return-1;var n=r-1;for(arguments.length>1&&(n=Math.min(n,I(arguments[1]))),n=n>=0?n:r-Math.abs(n);n>=0;n--)if(n in t&&e===t[n])return n;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:d)}),!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(f(e,t)){var r;if(r={enumerable:!0,configurable:!0},c){var n=e.__proto__;e.__proto__=d;var i=s(e,t),o=a(e,t);if(e.__proto__=n,i||o)return i&&(r.get=i),o&&(r.set=o),r}return r.value=e[t],r}}}(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),Object.create)||(y=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(e,t){var r;if(null===e)r=y();else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var n=function(){};n.prototype=e,(r=new n).__proto__=e}return void 0!==t&&Object.defineProperties(r,t),r});function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(e){}}if(Object.defineProperty){var S=w({}),k="undefined"==typeof document||w(document.createElement("div"));if(!S||!k)var E=Object.defineProperty}if(!Object.defineProperty||E){Object.defineProperty=function(e,t,r){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.defineProperty called on non-object: "+e);if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError("Property description must be an object: "+r);if(E)try{return E.call(Object,e,t,r)}catch(e){}if(f(r,"value"))if(c&&(s(e,t)||a(e,t))){var n=e.__proto__;e.__proto__=d,delete e[t],e[t]=r.value,e.__proto__=n}else e[t]=r.value;else{if(!c)throw new TypeError("getters & setters can not be defined on this javascript engine");f(r,"get")&&i(e,t,r.get),f(r,"set")&&o(e,t,r.set)}return e}}Object.defineProperties||(Object.defineProperties=function(e,t){for(var r in t)f(t,r)&&Object.defineProperty(e,r,t[r]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze((function(){}))}catch(e){Object.freeze=(m=Object.freeze,function(e){return"function"==typeof e?e:m(e)})}if(Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(e){return!1}),Object.isFrozen||(Object.isFrozen=function(e){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)===e)throw new TypeError;for(var t="";f(e,t);)t+="?";e[t]=!0;var r=f(e,t);return delete e[t],r}),!Object.keys){var _=!0,C=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],M=C.length;for(var x in{toString:null})_=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var t=[];for(var r in e)f(e,r)&&t.push(r);if(_)for(var n=0,i=M;n<i;n++){var o=C[n];f(e,o)&&t.push(o)}return t}}Date.now||(Date.now=function(){return(new Date).getTime()});var O="\t\n\v\f\r \u2028\u2029\ufeff";if(!String.prototype.trim){O="["+O+"]";var R=new RegExp("^"+O+O+"*"),T=new RegExp(O+O+"*$");String.prototype.trim=function(){return String(this).replace(R,"").replace(T,"")}}function I(e){return(e=+e)!=e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}var P=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}})),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],(function(e,t,r){"use strict";e("./regexp"),e("./es5-shim"),"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})),ace.define("ace/lib/useragent",["require","exports","module"],(function(e,t,r){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var n="object"==typeof navigator?navigator:{},i=(/mac|win|linux/i.exec(n.platform)||["other"])[0].toLowerCase(),o=n.userAgent||"",s=n.appName||"";t.isWin="win"==i,t.isMac="mac"==i,t.isLinux="linux"==i,t.isIE="Microsoft Internet Explorer"==s||s.indexOf("MSAppHost")>=0?parseFloat((o.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((o.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=o.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(o.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(o.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(o.split(" Edge/")[1])||void 0,t.isAIR=o.indexOf("AdobeAIR")>=0,t.isAndroid=o.indexOf("Android")>=0,t.isChromeOS=o.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(o)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(e,t,r){"use strict";var n=e("./useragent");if(t.buildDom=function e(t,r,n){if("string"==typeof t&&t){var i=document.createTextNode(t);return r&&r.appendChild(i),i}if(!Array.isArray(t))return t;if("string"!=typeof t[0]||!t[0]){for(var o=[],s=0;s<t.length;s++){var a=e(t[s],r,n);a&&o.push(a)}return o}var c=document.createElement(t[0]),l=t[1],u=1;l&&"object"==typeof l&&!Array.isArray(l)&&(u=2);for(s=u;s<t.length;s++)e(t[s],c,n);return 2==u&&Object.keys(l).forEach((function(e){var t=l[e];"class"===e?c.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e?c[e]=t:"ref"===e?n&&(n[t]=c):null!=t&&c.setAttribute(e,t)})),r&&r.appendChild(c),c},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},t.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,r){t.hasCssClass(e,r)||(e.className+=" "+r)},t.removeCssClass=function(e,t){for(var r=e.className.split(/\s+/g);;){var n=r.indexOf(t);if(-1==n)break;r.splice(n,1)}e.className=r.join(" ")},t.toggleCssClass=function(e,t){for(var r=e.className.split(/\s+/g),n=!0;;){var i=r.indexOf(t);if(-1==i)break;n=!1,r.splice(i,1)}return n&&r.push(t),e.className=r.join(" "),n},t.setCssClass=function(e,r,n){n?t.addCssClass(e,r):t.removeCssClass(e,r)},t.hasCssString=function(e,t){var r,n=0;if(r=(t=t||document).querySelectorAll("style"))for(;n<r.length;)if(r[n++].id===e)return!0},t.importCssString=function(e,r,n){var i=n;n&&n.getRootNode&&(i=n.getRootNode())&&i!=n||(i=document);var o=i.ownerDocument||i;if(r&&t.hasCssString(r,i))return null;r&&(e+="\n/*# sourceURL=ace/css/"+r+" */");var s=t.createElement("style");s.appendChild(o.createTextNode(e)),r&&(s.id=r),i==o&&(i=t.getDocumentHead(o)),i.insertBefore(s,i.firstChild)},t.importCssStylsheet=function(e,r){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(r))},t.scrollbarWidth=function(e){var r=t.createElement("ace_inner");r.style.width="100%",r.style.minWidth="0px",r.style.height="200px",r.style.display="block";var n=t.createElement("ace_outer"),i=n.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",n.appendChild(r);var o=e.documentElement;o.appendChild(n);var s=r.offsetWidth;i.overflow="scroll";var a=r.offsetWidth;return s==a&&(a=n.clientWidth),o.removeChild(n),s-a},"undefined"==typeof document&&(t.importCssString=function(){}),t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,r){e[t]!==r&&(e[t]=r)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=!n.isWin||"undefined"!=typeof window&&window.devicePixelRatio>=1.5,"undefined"!=typeof document){var i=document.createElement("div");t.HI_DPI&&void 0!==i.style.transform&&(t.HAS_CSS_TRANSFORMS=!0),n.isEdge||void 0===i.style.animationName||(t.HAS_CSS_ANIMATION=!0),i=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,r){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(r)+"px)"}:t.translate=function(e,t,r){e.style.top=Math.round(r)+"px",e.style.left=Math.round(t)+"px"}})),ace.define("ace/lib/oop",["require","exports","module"],(function(e,t,r){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var r in t)e[r]=t[r];return e},t.implement=function(e,r){t.mixin(e,r)}})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(e,t,r){"use strict";var n=e("./oop"),i=function(){var e,t,r={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in r.FUNCTION_KEYS)e=r.FUNCTION_KEYS[t].toLowerCase(),r[e]=parseInt(t,10);for(t in r.PRINTABLE_KEYS)e=r.PRINTABLE_KEYS[t].toLowerCase(),r[e]=parseInt(t,10);return n.mixin(r,r.MODIFIER_KEYS),n.mixin(r,r.PRINTABLE_KEYS),n.mixin(r,r.FUNCTION_KEYS),r.enter=r.return,r.escape=r.esc,r.del=r.delete,r[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)r.KEY_MODS[t]=e.filter((function(e){return t&r.KEY_MODS[e]})).join("-")+"-"}(),r.KEY_MODS[0]="",r.KEY_MODS[-1]="input-",r}();n.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,r){"use strict";var n=e("./keys"),i=e("./useragent"),o=null,s=0;t.addListener=function(e,t,r){if(e.addEventListener)return e.addEventListener(t,r,!1);if(e.attachEvent){var n=function(){r.call(e,window.event)};r._wrapper=n,e.attachEvent("on"+t,n)}},t.removeListener=function(e,t,r){if(e.removeEventListener)return e.removeEventListener(t,r,!1);e.detachEvent&&e.detachEvent("on"+t,r._wrapper||r)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||i.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,r,n){function i(e){r&&r(e),n&&n(e),t.removeListener(document,"mousemove",r,!0),t.removeListener(document,"mouseup",i,!0),t.removeListener(document,"dragstart",i,!0)}return t.addListener(document,"mousemove",r,!0),t.addListener(document,"mouseup",i,!0),t.addListener(document,"dragstart",i,!0),i},t.addMouseWheelListener=function(e,r){"onmousewheel"in e?t.addListener(e,"mousewheel",(function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),r(e)})):"onwheel"in e?t.addListener(e,"wheel",(function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}r(e)})):t.addListener(e,"DOMMouseScroll",(function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),r(e)}))},t.addMultiMouseDownListener=function(e,r,n,o){var s,a,c,l=0,u={2:"dblclick",3:"tripleclick",4:"quadclick"};function d(e){if(0!==t.getButton(e)?l=0:e.detail>1?++l>4&&(l=1):l=1,i.isIE){var d=Math.abs(e.clientX-s)>5||Math.abs(e.clientY-a)>5;c&&!d||(l=1),c&&clearTimeout(c),c=setTimeout((function(){c=null}),r[l-1]||600),1==l&&(s=e.clientX,a=e.clientY)}if(e._clicks=l,n[o]("mousedown",e),l>4)l=0;else if(l>1)return n[o](u[l],e)}function p(e){l=2,c&&clearTimeout(c),c=setTimeout((function(){c=null}),r[l-1]||600),n[o]("mousedown",e),n[o](u[l],e)}Array.isArray(e)||(e=[e]),e.forEach((function(e){t.addListener(e,"mousedown",d),i.isOldIE&&t.addListener(e,"dblclick",p)}))};var a=!i.isMac||!i.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};function c(e,t,r){var c=a(t);if(!i.isMac&&o){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(c|=8),o.altGr){if(3==(3&c))return;o.altGr=0}if(18===r||17===r){var l="location"in t?t.location:t.keyLocation;if(17===r&&1===l)1==o[r]&&(s=t.timeStamp);else if(18===r&&3===c&&2===l){t.timeStamp-s<50&&(o.altGr=!0)}}}if((r in n.MODIFIER_KEYS&&(r=-1),!c&&13===r)&&(3===(l="location"in t?t.location:t.keyLocation)&&(e(t,c,-r),t.defaultPrevented)))return;if(i.isChromeOS&&8&c){if(e(t,c,r),t.defaultPrevented)return;c&=-9}return!!(c||r in n.FUNCTION_KEYS||r in n.PRINTABLE_KEYS)&&e(t,c,r)}function l(){o=Object.create(null)}if(t.getModifierString=function(e){return n.KEY_MODS[a(e)]},t.addCommandKeyListener=function(e,r){var n=t.addListener;if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var s=null;n(e,"keydown",(function(e){s=e.keyCode})),n(e,"keypress",(function(e){return c(r,e,s)}))}else{var a=null;n(e,"keydown",(function(e){o[e.keyCode]=(o[e.keyCode]||0)+1;var t=c(r,e,e.keyCode);return a=e.defaultPrevented,t})),n(e,"keypress",(function(e){a&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),a=null)})),n(e,"keyup",(function(e){o[e.keyCode]=null})),o||(l(),n(window,"focus",l))}},"object"==typeof window&&window.postMessage&&!i.isOldIE){var u=1;t.nextTick=function(e,r){r=r||window;var n="zero-timeout-message-"+u++,i=function(o){o.data==n&&(t.stopPropagation(o),t.removeListener(r,"message",i),e())};t.addListener(r,"message",i),r.postMessage(n,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,r){return setTimeout((function r(){t.$idleBlocked?setTimeout(r,100):e()}),r)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout((function(){t.$idleBlocked=!1}),e||100)},t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}})),ace.define("ace/range",["require","exports","module"],(function(e,t,r){"use strict";var n=function(e,t,r,n){this.start={row:e,column:t},this.end={row:r,column:n}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,r=e.end,n=e.start;return 1==(t=this.compare(r.row,r.column))?1==(t=this.compare(n.row,n.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(n.row,n.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var r={row:t+1,column:0};else if(this.end.row<e)r={row:e,column:0};if(this.start.row>t)var i={row:t+1,column:0};else if(this.start.row<e)i={row:e,column:0};return n.fromPoints(i||this.start,r||this.end)},this.extend=function(e,t){var r=this.compare(e,t);if(0==r)return this;if(-1==r)var i={row:e,column:t};else var o={row:e,column:t};return n.fromPoints(i||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return n.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new n(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new n(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),r=e.documentToScreenPosition(this.end);return new n(t.row,t.column,r.row,r.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(n.prototype),n.fromPoints=function(e,t){return new n(e.row,e.column,t.row,t.column)},n.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},n.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=n})),ace.define("ace/lib/lang",["require","exports","module"],(function(e,t,r){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>=1)&&(e+=e);return r};var n=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(n,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var r in e)t[r]=e[r];return t},t.copyArray=function(e){for(var t=[],r=0,n=e.length;r<n;r++)e[r]&&"object"==typeof e[r]?t[r]=this.copyObject(e[r]):t[r]=e[r];return t},t.deepCopy=function e(t){if("object"!=typeof t||!t)return t;var r;if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n]);return r}if("[object Object]"!==Object.prototype.toString.call(t))return t;for(var n in r={},t)r[n]=e(t[n]);return r},t.arrayToMap=function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var r in e)t[r]=e[r];return t},t.arrayRemove=function(e,t){for(var r=0;r<=e.length;r++)t===e[r]&&e.splice(r,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var r=[];return e.replace(t,(function(e){r.push({offset:arguments[arguments.length-2],length:e.length})})),r},t.deferredCall=function(e){var t=null,r=function(){t=null,e()},n=function(e){return n.cancel(),t=setTimeout(r,e||0),n};return n.schedule=n,n.call=function(){return this.cancel(),e(),n},n.cancel=function(){return clearTimeout(t),t=null,n},n.isPending=function(){return t},n},t.delayedCall=function(e,t){var r=null,n=function(){r=null,e()},i=function(e){null==r&&(r=setTimeout(n,e||t))};return i.delay=function(e){r&&clearTimeout(r),r=setTimeout(n,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){r&&clearTimeout(r),r=null},i.isPending=function(){return r},i}})),ace.define("ace/clipboard",["require","exports","module"],(function(e,t,r){"use strict";var n;r.exports={lineMode:!1,pasteCancelled:function(){return!!(n&&n>Date.now()-50)||(n=!1)},cancel:function(){n=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(e,t,r){"use strict";var n=e("../lib/event"),i=e("../lib/useragent"),o=e("../lib/dom"),s=e("../lib/lang"),a=e("../clipboard"),c=i.isChrome<18,l=i.isIE,u=i.isChrome>63,d=e("../lib/keys"),p=d.KEY_MODS,h=i.isIOS,f=h?/\s/:/\n/;t.TextInput=function(e,t){var r=o.createElement("textarea");r.className="ace_text-input",r.setAttribute("wrap","off"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck",!1),r.style.opacity="0",e.insertBefore(r,e.firstChild);var g=!1,y=!1,m=!1,v=!1,b="";i.isMobile||(r.style.fontSize="1px");var w=!1,S=!1,k="",E=0,_=0,C=0;try{var M=document.activeElement===r}catch(e){}n.addListener(r,"blur",(function(e){S||(t.onBlur(e),M=!1)})),n.addListener(r,"focus",(function(e){if(!S){if(M=!0,i.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),i.isEdge?setTimeout(x):x()}})),this.$focusScroll=!1,this.focus=function(){if(b||u||"browser"==this.$focusScroll)return r.focus({preventScroll:!0});var e=r.style.top;r.style.position="fixed",r.style.top="0px";try{var t=0!=r.getBoundingClientRect().top}catch(e){return}var n=[];if(t)for(var i=r.parentElement;i&&1==i.nodeType;)n.push(i),i.setAttribute("ace_nocontext",!0),i=!i.parentElement&&i.getRootNode?i.getRootNode().host:i.parentElement;r.focus({preventScroll:!0}),t&&n.forEach((function(e){e.removeAttribute("ace_nocontext")})),setTimeout((function(){r.style.position="","0px"==r.style.top&&(r.style.top=e)}),0)},this.blur=function(){r.blur()},this.isFocused=function(){return M},t.on("beforeEndOperation",(function(){t.curOp&&"insertstring"==t.curOp.command.name||(m&&(k=r.value="",F()),x())}));var x=h?function(e){if(M&&(!g||e)&&!v){e||(e="");var n="\n ab"+e+"cde fg\n";n!=r.value&&(r.value=k=n);var i=4+(e.length||(t.selection.isEmpty()?0:1));4==E&&_==i||r.setSelectionRange(4,i),E=4,_=i}}:function(){if(!m&&!v&&(M||R)){m=!0;var e=t.selection,n=e.getRange(),i=e.cursor.row,o=n.start.column,s=n.end.column,a=t.session.getLine(i);if(n.start.row!=i){var c=t.session.getLine(i-1);o=n.start.row<i-1?0:o,s+=c.length+1,a=c+"\n"+a}else if(n.end.row!=i){var l=t.session.getLine(i+1);s=n.end.row>i+1?l.length:s,s+=a.length+1,a=a+"\n"+l}a.length>400&&(o<400&&s<400?a=a.slice(0,400):(a="\n",o=0,s=1));var u=a+"\n\n";if(u!=k&&(r.value=k=u,E=_=u.length),R&&(E=r.selectionStart,_=r.selectionEnd),_!=s||E!=o||r.selectionEnd!=_)try{r.setSelectionRange(o,s),E=o,_=s}catch(e){}m=!1}};M&&t.onFocus();var O=null;this.setInputHandler=function(e){O=e},this.getInputHandler=function(){return O};var R=!1,T=function(e,n){if(R&&(R=!1),y)return x(),e&&t.onPaste(e),y=!1,"";for(var i=r.selectionStart,o=r.selectionEnd,s=E,a=k.length-_,c=e,l=e.length-i,u=e.length-o,d=0;s>0&&k[d]==e[d];)d++,s--;for(c=c.slice(d),d=1;a>0&&k.length-d>E-1&&k[k.length-d]==e[e.length-d];)d++,a--;l-=d-1,u-=d-1;var p=c.length-d+1;return p<0&&(s=-p,p=0),c=c.slice(0,p),n||c||l||s||a||u?(v=!0,c&&!s&&!a&&!l&&!u||w?t.onTextInput(c):t.onTextInput(c,{extendLeft:s,extendRight:a,restoreStart:l,restoreEnd:u}),v=!1,k=e,E=i,_=o,C=u,c):""},I=function(e){if(m)return D();if(e&&e.inputType){if("historyUndo"==e.inputType)return t.execCommand("undo");if("historyRedo"==e.inputType)return t.execCommand("redo")}var n=r.value,i=T(n,!0);(n.length>500||f.test(i))&&x()},P=function(e,t,r){var n=e.clipboardData||window.clipboardData;if(n&&!c){var i=l||r?"Text":"text/plain";try{return t?!1!==n.setData(i,t):n.getData(i)}catch(e){if(!r)return P(e,t,!0)}}},A=function(e,i){var o=t.getCopyText();if(!o)return n.preventDefault(e);P(e,o)?(h&&(x(o),g=o,setTimeout((function(){g=!1}),10)),i?t.onCut():t.onCopy(),n.preventDefault(e)):(g=!0,r.value=o,r.select(),setTimeout((function(){g=!1,x(),i?t.onCut():t.onCopy()})))},B=function(e){A(e,!0)},L=function(e){A(e,!1)},U=function(e){var o=P(e);a.pasteCancelled()||("string"==typeof o?(o&&t.onPaste(o,e),i.isIE&&setTimeout(x),n.preventDefault(e)):(r.value="",y=!0))};n.addCommandKeyListener(r,t.onCommandKey.bind(t)),n.addListener(r,"select",(function(e){m||(g?g=!1:function(e){return 0===e.selectionStart&&e.selectionEnd>=k.length&&e.value===k&&k&&e.selectionEnd!==_}(r)&&(t.selectAll(),x()))})),n.addListener(r,"input",I),n.addListener(r,"cut",B),n.addListener(r,"copy",L),n.addListener(r,"paste",U),"oncut"in r&&"oncopy"in r&&"onpaste"in r||n.addListener(e,"keydown",(function(e){if((!i.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:L(e);break;case 86:U(e);break;case 88:B(e)}}));var D=function(){if(m&&t.onCompositionUpdate&&!t.$readOnly){if(w)return j();if(m.useTextareaForIME)t.onCompositionUpdate(r.value);else{var e=r.value;T(e),m.markerRange&&(m.context&&(m.markerRange.start.column=m.selectionStart=m.context.compositionStartOffset),m.markerRange.end.column=m.markerRange.start.column+_-m.selectionStart+C)}}},F=function(e){t.onCompositionEnd&&!t.$readOnly&&(m=!1,t.onCompositionEnd(),t.off("mousedown",j),e&&I())};function j(){S=!0,r.blur(),r.focus(),S=!1}var $,N=s.delayedCall(D,50).schedule.bind(null,null);function W(){clearTimeout($),$=setTimeout((function(){b&&(r.style.cssText=b,b=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()}),0)}n.addListener(r,"compositionstart",(function(e){if(!m&&t.onCompositionStart&&!t.$readOnly&&(m={},!w)){setTimeout(D,0),t.on("mousedown",j);var n=t.getSelectionRange();n.end.row=n.start.row,n.end.column=n.start.column,m.markerRange=n,m.selectionStart=E,t.onCompositionStart(m),m.useTextareaForIME?(r.value="",k="",E=0,_=0):(r.msGetInputContext&&(m.context=r.msGetInputContext()),r.getInputContext&&(m.context=r.getInputContext()))}})),n.addListener(r,"compositionupdate",D),n.addListener(r,"keyup",(function(e){27==e.keyCode&&r.value.length<r.selectionStart&&(m||(k=r.value),E=_=-1,x()),N()})),n.addListener(r,"keydown",N),n.addListener(r,"compositionend",F),this.getElement=function(){return r},this.setCommandMode=function(e){w=e,r.readOnly=!1},this.setReadOnly=function(e){w||(r.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){R=!0,x(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,s){b||(b=r.style.cssText),r.style.cssText=(s?"z-index:100000;":"")+(i.isIE?"opacity:0.1;":"")+"text-indent: -"+(E+_)*t.renderer.characterWidth*.5+"px;";var a=t.container.getBoundingClientRect(),c=o.computedStyle(t.container),l=a.top+(parseInt(c.borderTopWidth)||0),u=a.left+(parseInt(a.borderLeftWidth)||0),d=a.bottom-l-r.clientHeight-2,p=function(e){o.translate(r,e.clientX-u-2,Math.min(e.clientY-l-2,d))};p(e),"mousedown"==e.type&&(t.renderer.$isMousePressed=!0,clearTimeout($),i.isWin&&n.capture(t.container,p,W))},this.onContextMenuClose=W;var z=function(e){t.textInput.onContextMenu(e),W()};n.addListener(r,"mouseup",z),n.addListener(r,"mousedown",(function(e){e.preventDefault(),W()})),n.addListener(t.renderer.scroller,"contextmenu",z),n.addListener(r,"contextmenu",z),h&&function(e,t,r){var n=null,i=!1;r.addEventListener("keydown",(function(e){n&&clearTimeout(n),i=!0}),!0),r.addEventListener("keyup",(function(e){n=setTimeout((function(){i=!1}),100)}),!0);var o=function(e){if(document.activeElement===r&&!(i||m||t.$mouseHandler.isMousePressed||g)){var n=r.selectionStart,o=r.selectionEnd,s=null,a=0;if(0==n?s=d.up:1==n?s=d.home:o>_&&"\n"==k[o]?s=d.end:n<E&&" "==k[n-1]?(s=d.left,a=p.option):n<E||n==E&&_!=E&&n==o?s=d.left:o>_&&k.slice(0,o).split("\n").length>2?s=d.down:o>_&&" "==k[o-1]?(s=d.right,a=p.option):(o>_||o==_&&_!=E&&n==o)&&(s=d.right),n!==o&&(a|=p.shift),s){if(!t.onCommandKey({},a,s)&&t.commands){s=d.keyCodeToString(s);var c=t.commands.findKeyCommand(a,s);c&&t.execCommand(c)}E=n,_=o,x("")}}};document.addEventListener("selectionchange",o),t.on("destroy",(function(){document.removeEventListener("selectionchange",o)}))}(0,t,r)}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(e,t,r){"use strict";var n=e("../lib/useragent");function i(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(t){e[t]=this[t]}),this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function o(e,t){if(e.start.row==e.end.row)var r=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)r=2*t.row-e.start.row-e.end.row;else var r=t.column-4;return r<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}(function(){this.onMouseDown=function(e){var t=e.inSelection(),r=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,o=e.getButton();return 0!==o?((i.getSelectionRange().isEmpty()||1==o)&&i.selection.moveToPosition(r),void(2==o&&(i.textInput.onContextMenu(e.domEvent),n.isMozilla||e.preventDefault()))):(this.mousedownEvent.time=Date.now(),!t||i.isFocused()||(i.focus(),!this.$focusTimeout||this.$clickSelection||i.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(r,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var r=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?r.selection.selectToPosition(e):t||r.selection.moveToPosition(e),t||this.select(),r.renderer.scroller.setCapture&&r.renderer.scroller.setCapture(),r.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,t=this.editor,r=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var n=this.$clickSelection.comparePoint(r);if(-1==n)e=this.$clickSelection.end;else if(1==n)e=this.$clickSelection.start;else{var i=o(this.$clickSelection,r);r=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(r),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,r=this.editor,n=r.renderer.screenToTextCoordinates(this.x,this.y),i=r.selection[e](n.row,n.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),a=this.$clickSelection.comparePoint(i.end);if(-1==s&&a<=0)t=this.$clickSelection.end,i.end.row==n.row&&i.end.column==n.column||(n=i.start);else if(1==a&&s>=0)t=this.$clickSelection.start,i.start.row==n.row&&i.start.column==n.column||(n=i.end);else if(-1==s&&1==a)n=i.end,t=i.start;else{var c=o(this.$clickSelection,n);n=c.cursor,t=c.anchor}r.selection.setSelectionAnchor(t.row,t.column)}r.selection.selectToPosition(n),r.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e,t,r,n,i=(e=this.mousedownEvent.x,t=this.mousedownEvent.y,r=this.x,n=this.y,Math.sqrt(Math.pow(r-e,2)+Math.pow(n-t,2))),o=Date.now();(i>0||o-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),r=this.editor,n=r.session.getBracketRange(t);n?(n.isEmpty()&&(n.start.column--,n.end.column++),this.setState("select")):(n=r.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=n,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),r=this.editor;this.setState("selectByLines");var n=r.getSelectionRange();n.isMultiLine()&&n.contains(t.row,t.column)?(this.$clickSelection=r.selection.getLineRange(n.start.row),this.$clickSelection.end=r.selection.getLineRange(n.end.row).end):this.$clickSelection=r.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var r=this.$lastScroll,n=e.domEvent.timeStamp,i=n-r.t,o=i?e.wheelX/i:r.vx,s=i?e.wheelY/i:r.vy;i<550&&(o=(o+r.vx)/2,s=(s+r.vy)/2);var a=Math.abs(o/s),c=!1;if(a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(c=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(c=!0),c)r.allowed=n;else if(n-r.allowed<550){Math.abs(o)<=1.5*Math.abs(r.vx)&&Math.abs(s)<=1.5*Math.abs(r.vy)?(c=!0,r.allowed=n):r.allowed=0}return r.t=n,r.vx=o,r.vy=s,c?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(i.prototype),t.DefaultHandlers=i})),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],(function(e,t,r){"use strict";e("./lib/oop");var n=e("./lib/dom");function i(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}(function(){this.$init=function(){return this.$element=n.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){n.addCssClass(this.getElement(),e)},this.show=function(e,t,r){null!=e&&this.setText(e),null!=t&&null!=r&&this.setPosition(t,r),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(i.prototype),t.Tooltip=i})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],(function(e,t,r){"use strict";var n=e("../lib/dom"),i=e("../lib/oop"),o=e("../lib/event"),s=e("../tooltip").Tooltip;function a(e){s.call(this,e)}i.inherits(a,s),function(){this.setPosition=function(e,t){var r=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),o=this.getHeight();(e+=15)+i>r&&(e-=e+i-r),(t+=15)+o>n&&(t-=20+o),s.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=function(e){var t,r,i,s=e.editor,c=s.renderer.$gutterLayer,l=new a(s.container);function u(){t&&(t=clearTimeout(t)),i&&(l.hide(),i=null,s._signal("hideGutterTooltip",l),s.removeEventListener("mousewheel",u))}function d(e){l.setPosition(e.x,e.y)}e.editor.setDefaultHandler("guttermousedown",(function(t){if(s.isFocused()&&0==t.getButton()&&"foldWidgets"!=c.getRegion(t)){var r=t.getDocumentPosition().row,n=s.session.selection;if(t.getShiftKey())n.selectTo(r,0);else{if(2==t.domEvent.detail)return s.selectAll(),t.preventDefault();e.$clickSelection=s.selection.getLineRange(r)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}})),e.editor.setDefaultHandler("guttermousemove",(function(o){var a=o.domEvent.target||o.domEvent.srcElement;if(n.hasCssClass(a,"ace_fold-widget"))return u();i&&e.$tooltipFollowsMouse&&d(o),r=o,t||(t=setTimeout((function(){t=null,r&&!e.isMousePressed?function(){var t=r.getDocumentPosition().row,n=c.$annotations[t];if(!n)return u();if(t==s.session.getLength()){var o=s.renderer.pixelToScreenCoordinates(0,r.y).row,a=r.$pos;if(o>s.session.documentToScreenRow(a.row,a.column))return u()}if(i!=n)if(i=n.text.join("<br/>"),l.setHtml(i),l.show(),s._signal("showGutterTooltip",l),s.on("mousewheel",u),e.$tooltipFollowsMouse)d(r);else{var p=r.domEvent.target.getBoundingClientRect(),h=l.getElement().style;h.left=p.right+"px",h.top=p.bottom+"px"}}():u()}),50))})),o.addListener(s.renderer.$gutter,"mouseout",(function(e){r=null,i&&!t&&(t=setTimeout((function(){t=null,u()}),50))})),s.on("changeSession",u)}})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,r){"use strict";var n=e("../lib/event"),i=e("../lib/useragent"),o=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){n.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){n.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return n.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(e,t,r){"use strict";var n=e("../lib/dom"),i=e("../lib/event"),o=e("../lib/useragent"),s=200,a=200,c=5;function l(e){var t=e.editor,r=n.createElement("img");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",o.isOpera&&(r.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(t){e[t]=this[t]}),this),t.addEventListener("mousedown",this.onMouseDown.bind(e));var l,d,p,h,f,g,y,m,v,b,w,S=t.container,k=0;function E(){var e=g;(function(e,r){var n=Date.now(),i=!r||e.row!=r.row,o=!r||e.column!=r.column;!b||i||o?(t.moveCursorToPosition(e),b=n,w={x:d,y:p}):u(w.x,w.y,d,p)>c?b=null:n-b>=a&&(t.renderer.scrollCursorIntoView(),b=null)})(g=t.renderer.screenToTextCoordinates(d,p),e),function(e,r){var n=Date.now(),i=t.renderer.layerConfig.lineHeight,o=t.renderer.layerConfig.characterWidth,a=t.renderer.scroller.getBoundingClientRect(),c={x:{left:d-a.left,right:a.right-d},y:{top:p-a.top,bottom:a.bottom-p}},l=Math.min(c.x.left,c.x.right),u=Math.min(c.y.top,c.y.bottom),h={row:e.row,column:e.column};l/o<=2&&(h.column+=c.x.left<c.x.right?-3:2),u/i<=1&&(h.row+=c.y.top<c.y.bottom?-1:1);var f=e.row!=h.row,g=e.column!=h.column,y=!r||e.row!=r.row;f||g&&!y?v?n-v>=s&&t.renderer.scrollCursorIntoView(h):v=n:v=null}(g,e)}function _(){f=t.selection.toOrientedRange(),l=t.session.addMarker(f,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(h),E(),h=setInterval(E,20),k=0,i.addListener(document,"mousemove",x)}function C(){clearInterval(h),t.session.removeMarker(l),l=null,t.selection.fromOrientedRange(f),t.isFocused()&&!m&&t.$resetCursorStyle(),f=null,g=null,k=0,v=null,b=null,i.removeListener(document,"mousemove",x)}this.onDragStart=function(e){if(this.cancelDrag||!S.draggable){var n=this;return setTimeout((function(){n.startSelect(),n.captureMouse(e)}),0),e.preventDefault()}f=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",o.isOpera&&(t.container.appendChild(r),r.scrollTop=0),i.setDragImage&&i.setDragImage(r,0,0),o.isOpera&&t.container.removeChild(r),i.clearData(),i.setData("Text",t.session.getTextRange()),m=!0,this.setState("drag")},this.onDragEnd=function(e){if(S.draggable=!1,m=!1,this.setState(null),!t.getReadOnly()){var r=e.dataTransfer.dropEffect;y||"move"!=r||t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!t.getReadOnly()&&O(e.dataTransfer))return d=e.clientX,p=e.clientY,l||_(),k++,e.dataTransfer.dropEffect=y=R(e),i.preventDefault(e)},this.onDragOver=function(e){if(!t.getReadOnly()&&O(e.dataTransfer))return d=e.clientX,p=e.clientY,l||(_(),k++),null!==M&&(M=null),e.dataTransfer.dropEffect=y=R(e),i.preventDefault(e)},this.onDragLeave=function(e){if(--k<=0&&l)return C(),y=null,i.preventDefault(e)},this.onDrop=function(e){if(g){var r=e.dataTransfer;if(m)switch(y){case"move":f=f.contains(g.row,g.column)?{start:g,end:g}:t.moveText(f,g);break;case"copy":f=t.moveText(f,g,!0)}else{var n=r.getData("Text");f={start:g,end:t.session.insert(g,n)},t.focus(),y=null}return C(),i.preventDefault(e)}},i.addListener(S,"dragstart",this.onDragStart.bind(e)),i.addListener(S,"dragend",this.onDragEnd.bind(e)),i.addListener(S,"dragenter",this.onDragEnter.bind(e)),i.addListener(S,"dragover",this.onDragOver.bind(e)),i.addListener(S,"dragleave",this.onDragLeave.bind(e)),i.addListener(S,"drop",this.onDrop.bind(e));var M=null;function x(){null==M&&(M=setTimeout((function(){null!=M&&l&&C()}),20))}function O(e){var t=e.types;return!t||Array.prototype.some.call(t,(function(e){return"text/plain"==e||"Text"==e}))}function R(e){var t=["copy","copymove","all","uninitialized"],r=o.isMac?e.altKey:e.ctrlKey,n="uninitialized";try{n=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var i="none";return r&&t.indexOf(n)>=0?i="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(n)>=0?i="move":t.indexOf(n)>=0&&(i="copy"),i}}function u(e,t,r,n){return Math.sqrt(Math.pow(r-e,2)+Math.pow(n-t,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=o.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;o.isIE&&"dragReady"==this.state&&(u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop());"dragWait"===this.state&&(u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,r=e.inSelection(),n=e.getButton();if(1===(e.domEvent.detail||1)&&0===n&&r){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var i=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in i&&(i.unselectable="on"),t.getDragDelay()){if(o.isWebKit)this.cancelDrag=!0,t.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(l.prototype),t.DragdropHandler=l})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/dom"],(function(e,t,r){"use strict";var n=e("./mouse_event").MouseEvent,i=e("../lib/dom");t.addTouchListeners=function(e,t){var r,o,s,a,c,l,u,d,p,h="scroll",f=0,g=0,y=0,m=0;function v(){var e=window.navigator&&window.navigator.clipboard,r=!1,n=function(n){var o,s,a=n.target.getAttribute("action");if("more"==a||!r)return r=!r,o=t.getCopyText(),s=t.session.getUndoManager().hasUndo(),void p.replaceChild(i.buildDom(r?["span",!o&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],o&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],o&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],e&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],s&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),p.firstChild);"paste"==a?e.readText().then((function(e){t.execCommand(a,e)})):a&&("cut"!=a&&"copy"!=a||(e?e.writeText(t.getCopyText()):document.execCommand("copy")),t.execCommand(a)),p.firstChild.style.display="none",r=!1,"openCommandPallete"!=a&&t.focus()};p=i.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(e){h="menu",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),n(e)},onclick:n},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],t.container)}function b(){p||v();var e=t.selection.cursor,r=t.renderer.textToScreenCoordinates(e.row,e.column),n=t.container.getBoundingClientRect();p.style.top=r.pageY-n.top-3+"px",p.style.right="10px",p.style.display="",p.firstChild.style.display="none",t.on("input",w)}function w(e){p&&(p.style.display="none"),t.off("input",w)}function S(){c=null,clearTimeout(c);var e=t.selection.getRange(),r=e.contains(u.row,u.column);!e.isEmpty()&&r||(t.selection.moveToPosition(u),t.selection.selectWord()),h="wait",b()}e.addEventListener("contextmenu",(function(e){d&&t.textInput.getElement().focus()})),e.addEventListener("touchstart",(function(e){var i=e.touches;if(c||i.length>1)return clearTimeout(c),c=null,s=-1,void(h="zoom");d=t.$mouseHandler.isMousePressed=!0;var l=t.renderer.layerConfig.lineHeight,p=t.renderer.layerConfig.lineHeight,v=e.timeStamp;a=v;var b=i[0],w=b.clientX,k=b.clientY;Math.abs(r-w)+Math.abs(o-k)>l&&(s=-1),r=e.clientX=w,o=e.clientY=k,y=m=0;var E=new n(e,t);if(u=E.getDocumentPosition(),v-s<500&&1==i.length&&!f)g++,e.preventDefault(),e.button=0,function(){c=null,clearTimeout(c),t.selection.moveToPosition(u);var e=g>=2?t.selection.getLineRange(u.row):t.session.getBracketRange(u);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),h="wait"}();else{g=0;var _=t.selection.cursor,C=t.selection.isEmpty()?_:t.selection.anchor,M=t.renderer.$cursorLayer.getPixelPosition(_,!0),x=t.renderer.$cursorLayer.getPixelPosition(C,!0),O=t.renderer.scroller.getBoundingClientRect(),R=function(e,t){return(e/=p)*e+(t=t/l-.75)*t};if(e.clientX<O.left)return void(h="zoom");var T=R(e.clientX-O.left-M.left,e.clientY-O.top-M.top),I=R(e.clientX-O.left-x.left,e.clientY-O.top-x.top);T<3.5&&I<3.5&&(h=T>I?"cursor":"anchor"),h=I<3.5?"anchor":T<3.5?"cursor":"scroll",c=setTimeout(S,450)}s=v})),e.addEventListener("touchend",(function(e){d=t.$mouseHandler.isMousePressed=!1,l&&clearInterval(l),"zoom"==h?(h="",f=0):c?(t.selection.moveToPosition(u),f=0,b()):"scroll"==h?(f+=60,l=setInterval((function(){f--<=0&&(clearInterval(l),l=null),Math.abs(y)<.01&&(y=0),Math.abs(m)<.01&&(m=0),f<20&&(y*=.9),f<20&&(m*=.9);var e=t.session.getScrollTop();t.renderer.scrollBy(10*y,10*m),e==t.session.getScrollTop()&&(f=0)}),10),e.preventDefault(),w()):b(),clearTimeout(c),c=null})),e.addEventListener("touchmove",(function(e){c&&(clearTimeout(c),c=null);var i=e.touches;if(!(i.length>1||"zoom"==h)){var s=i[0],l=r-s.clientX,u=o-s.clientY;if("wait"==h){if(!(l*l+u*u>4))return e.preventDefault();h="cursor"}r=s.clientX,o=s.clientY,e.clientX=s.clientX,e.clientY=s.clientY;var d=e.timeStamp,p=d-a;if(a=d,"scroll"==h){var f=new n(e,t);f.speed=1,f.wheelX=l,f.wheelY=u,10*Math.abs(l)<Math.abs(u)&&(l=0),10*Math.abs(u)<Math.abs(l)&&(u=0),0!=p&&(y=l/p,m=u/p),t._emit("mousewheel",f),f.propagationStopped||(y=m=0)}else{var g=new n(e,t).getDocumentPosition();"cursor"==h?t.selection.moveCursorToPosition(g):"anchor"==h&&t.selection.setSelectionAnchor(g.row,g.column),t.renderer.scrollCursorIntoView(g),e.preventDefault()}}}))}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(e,t,r){"use strict";var n=e("./dom");t.get=function(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){4===r.readyState&&t(r.responseText)},r.send(null)},t.loadScript=function(e,t){var r=n.getDocumentHead(),i=document.createElement("script");i.src=e,r.appendChild(i),i.onload=i.onreadystatechange=function(e,r){!r&&i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(i=i.onload=i.onreadystatechange=null,r||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(e,t,r){"use strict";var n={},i=function(){this.propagationStopped=!0},o=function(){this.defaultPrevented=!0};n._emit=n._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var r=this._eventRegistry[e]||[],n=this._defaultHandlers[e];if(r.length||n){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=o),r=r.slice();for(var s=0;s<r.length&&(r[s](t,this),!t.propagationStopped);s++);return n&&!t.defaultPrevented?n(t,this):void 0}},n._signal=function(e,t){var r=(this._eventRegistry||{})[e];if(r){r=r.slice();for(var n=0;n<r.length;n++)r[n](t,this)}},n.once=function(e,t){var r=this;if(this.addEventListener(e,(function n(){r.removeEventListener(e,n),t.apply(null,arguments)})),!t)return new Promise((function(e){t=e}))},n.setDefaultHandler=function(e,t){var r=this._defaultHandlers;if(r||(r=this._defaultHandlers={_disabled_:{}}),r[e]){var n=r[e],i=r._disabled_[e];i||(r._disabled_[e]=i=[]),i.push(n);var o=i.indexOf(t);-1!=o&&i.splice(o,1)}r[e]=t},n.removeDefaultHandler=function(e,t){var r=this._defaultHandlers;if(r){var n=r._disabled_[e];if(r[e]==t)n&&this.setDefaultHandler(e,n.pop());else if(n){var i=n.indexOf(t);-1!=i&&n.splice(i,1)}}},n.on=n.addEventListener=function(e,t,r){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];return n||(n=this._eventRegistry[e]=[]),-1==n.indexOf(t)&&n[r?"unshift":"push"](t),t},n.off=n.removeListener=n.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];if(r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}},n.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=n})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,r){var n=e("./oop"),i=e("./event_emitter").EventEmitter,o={setOptions:function(e){Object.keys(e).forEach((function(t){this.setOption(t,e[t])}),this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var r=this.$options;e=Object.keys(r).filter((function(e){return!r[e].hidden}))}return e.forEach((function(e){t[e]=this.getOption(e)}),this),t},setOption:function(e,t){if(this["$"+e]!==t){var r=this.$options[e];if(!r)return s('misspelled option "'+e+'"');if(r.forwardTo)return this[r.forwardTo]&&this[r.forwardTo].setOption(e,t);r.handlesSet||(this["$"+e]=t),r&&r.set&&r.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:s('misspelled option "'+e+'"')}};function s(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function a(e,t){var r=new Error(e);r.data=t,"object"==typeof console&&console.error&&console.error(r),setTimeout((function(){throw r}))}var c=function(){this.$defaultOptions={}};(function(){n.implement(this,i),this.defineOptions=function(e,t,r){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(r).forEach((function(t){var n=r[t];"string"==typeof n&&(n={forwardTo:n}),n.name||(n.name=t),e.$options[n.name]=n,"initialValue"in n&&(e["$"+n.name]=n.initialValue)})),n.implement(e,o),this},this.resetOptions=function(e){Object.keys(e.$options).forEach((function(t){var r=e.$options[t];"value"in r&&e.setOption(t,r.value)}))},this.setDefaultValue=function(e,t,r){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var n=this.$defaultOptions[e]||(this.$defaultOptions[e]={});n[t]&&(n.forwardTo?this.setDefaultValue(n.forwardTo,t,r):n[t].value=r)},this.setDefaultValues=function(e,t){Object.keys(t).forEach((function(r){this.setDefaultValue(e,r,t[r])}),this)},this.warn=s,this.reportError=a}).call(c.prototype),t.AppConfig=c})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],(function(e,t,n){var i=e("./lib/lang"),o=(e("./lib/oop"),e("./lib/net")),s=e("./lib/app_config").AppConfig;n.exports=t=new s;var a=function(){return this||"undefined"!=typeof window&&window}(),c={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};t.get=function(e){if(!c.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return c[e]},t.set=function(e,t){if(c.hasOwnProperty(e))c[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e)},t.all=function(){return i.copyObject(c)},t.$modes={},t.moduleUrl=function(e,t){if(c.$moduleUrls[e])return c.$moduleUrls[e];var r=e.split("/"),n="snippets"==(t=t||r[r.length-2]||"")?"/":"-",i=r[r.length-1];if("worker"==t&&"-"==n){var o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");i=i.replace(o,"")}(!i||i==t)&&r.length>1&&(i=r[r.length-2]);var s=c[t+"Path"];return null==s?s=c.basePath:"/"==n&&(t=n=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+t+n+i+this.get("suffix")},t.setModuleUrl=function(e,t){return c.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(r,n){var i,s;Array.isArray(r)&&(s=r[0],r=r[1]);try{i=e(r)}catch(e){}if(i&&!t.$loading[r])return n&&n(i);if(t.$loading[r]||(t.$loading[r]=[]),t.$loading[r].push(n),!(t.$loading[r].length>1)){var a=function(){e([r],(function(e){t._emit("load.module",{name:r,module:e});var n=t.$loading[r];t.$loading[r]=null,n.forEach((function(t){t&&t(e)}))}))};if(!t.get("packaged"))return a();o.loadScript(t.moduleUrl(r,s),a),l()}};var l=function(){c.basePath||c.workerPath||c.modePath||c.themePath||Object.keys(c.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),l=function(){})};function u(i){if(a&&a.document){c.packaged=i||e.packaged||n.packaged||a.define&&r(39).packaged;for(var o,s={},l="",u=document.currentScript||document._currentScript,d=(u&&u.ownerDocument||document).getElementsByTagName("script"),p=0;p<d.length;p++){var h=d[p],f=h.src||h.getAttribute("src");if(f){for(var g=h.attributes,y=0,m=g.length;y<m;y++){var v=g[y];0===v.name.indexOf("data-ace-")&&(s[(o=v.name.replace(/^data-ace-/,""),o.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=v.value)}var b=f.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);b&&(l=b[1])}}for(var w in l&&(s.base=s.base||l,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base,s)void 0!==s[w]&&t.set(w,s[w])}}u(!0),t.init=u,t.version="1.4.7"})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(e,t,r){"use strict";var n=e("../lib/event"),i=e("../lib/useragent"),o=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,a=e("./mouse_event").MouseEvent,c=e("./dragdrop_handler").DragdropHandler,l=e("./touch_handler").addTouchListeners,u=e("../config"),d=function(e){var t=this;this.editor=e,new o(this),new s(this),new c(this);var r=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus()},a=e.renderer.getMouseEventTarget();n.addListener(a,"click",this.onMouseEvent.bind(this,"click")),n.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove")),n.addMultiMouseDownListener([a,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),n.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel")),l(e.container,e);var u=e.renderer.$gutter;n.addListener(u,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),n.addListener(u,"click",this.onMouseEvent.bind(this,"gutterclick")),n.addListener(u,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),n.addListener(u,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),n.addListener(a,"mousedown",r),n.addListener(u,"mousedown",r),i.isIE&&e.renderer.scrollBarV&&(n.addListener(e.renderer.scrollBarV.element,"mousedown",r),n.addListener(e.renderer.scrollBarH.element,"mousedown",r)),e.on("mousemove",(function(r){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var n=e.renderer.screenToTextCoordinates(r.x,r.y),i=e.session.selection.getRange(),o=e.renderer;!i.isEmpty()&&i.insideStart(n.row,n.column)?o.setCursorStyle("default"):o.setCursorStyle("")}}))};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new a(t,this.editor))},this.onMouseMove=function(e,t){var r=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;r&&r.length&&this.editor._emit(e,new a(t,this.editor))},this.onMouseWheel=function(e,t){var r=new a(t,this.editor);r.speed=2*this.$scrollSpeed,r.wheelX=t.wheelX,r.wheelY=t.wheelY,this.editor._emit(e,r)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var r=this.editor,o=this.editor.renderer;o.$isMousePressed=!0;var s=this,c=function(e){if(e){if(i.isWebKit&&!e.which&&s.releaseMouse)return s.releaseMouse();s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new a(e,s.editor),s.$mouseMoved=!0}},l=function(e){r.off("beforeEndOperation",d),clearInterval(p),u(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",s.isMousePressed=o.$isMousePressed=!1,o.$keepTextAreaAtCursor&&o.$moveTextAreaToCursor(),s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e),r.endOperation()},u=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(i.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout((function(){l(e)}));var d=function(e){s.releaseMouse&&r.curOp.command.name&&r.curOp.selectionChanged&&(s[s.state+"End"]&&s[s.state+"End"](),s.state="",s.releaseMouse())};r.on("beforeEndOperation",d),r.startOperation({command:{name:"mouse"}}),s.$onCaptureMouseMove=c,s.releaseMouse=n.capture(this.editor.container,c,l);var p=setInterval(u,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&n.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(d.prototype),u.defineOptions(d.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=d})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(e,t,r){"use strict";var n=e("../lib/dom");t.FoldHandler=function(e){e.on("click",(function(t){var r=t.getDocumentPosition(),i=e.session,o=i.getFoldAt(r.row,r.column,1);o&&(t.getAccelKey()?i.removeFold(o):i.expandFold(o),t.stop());var s=t.domEvent&&t.domEvent.target;s&&n.hasCssClass(s,"ace_inline_button")&&n.hasCssClass(s,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),e.renderer.scrollCursorIntoView())})),e.on("gutterclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var r=t.getDocumentPosition().row,n=e.session;n.foldWidgets&&n.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}})),e.on("gutterdblclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var r=t.getDocumentPosition().row,n=e.session,i=n.getParentFoldRangeData(r,!0),o=i.range||i.firstRange;if(o){r=o.start.row;var s=n.getFoldAt(r,n.getLine(r).length,1);s?n.removeFold(s):(n.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}}))}})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(e,t,r){"use strict";var n=e("../lib/keys"),i=e("../lib/event"),o=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var r=this.$handlers.indexOf(e);-1!=r&&this.$handlers.splice(r,1),null==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==r&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map((function(r){return r.getStatusText&&r.getStatusText(t,e)||""})).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,r,n){for(var o,s=!1,a=this.$editor.commands,c=this.$handlers.length;c--&&!((o=this.$handlers[c].handleKeyboard(this.$data,e,t,r,n))&&o.command&&((s="null"==o.command||a.exec(o.command,this.$editor,o.args,n))&&n&&-1!=e&&1!=o.passEvent&&1!=o.command.passEvent&&i.stopEvent(n),s)););return s||-1!=e||(o={command:"insertstring"},s=a.exec("insertstring",this.$editor,t)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),s},this.onCommandKey=function(e,t,r){var i=n.keyCodeToString(r);return this.$callKeyboardHandlers(t,i,r,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(o.prototype),t.KeyBinding=o})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(e,t,r){"use strict";var n=0,i=0,o=!1,s=!1,a=!1,c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],l=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u=1,d=0,p=1,h=2,f=3,g=4,y=5,m=6,v=7,b=8,w=9,S=10,k=11,E=12,_=13,C=14,M=15,x=16,O=17,R=18,T=[R,R,R,R,R,R,R,R,R,m,y,m,b,y,R,R,R,R,R,R,R,R,R,R,R,R,R,R,y,y,y,m,b,g,g,k,k,k,g,g,g,g,g,S,w,S,w,w,h,h,h,h,h,h,h,h,h,h,w,g,g,g,g,g,g,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,g,g,g,g,g,g,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,g,g,g,g,R,R,R,R,R,R,y,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,w,g,k,k,k,k,g,g,g,g,d,g,g,R,g,g,k,k,h,h,g,d,g,g,g,h,d,g,g,g,g,g],I=[b,b,b,b,b,b,b,b,b,b,b,R,R,R,d,p,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,b,y,_,C,M,x,O,w,k,k,k,k,k,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,w,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,b];function P(e,t,r){if(!(i<e))if(1!=e||n!=u||s)for(var o,a,c,l,d=r.length,p=0;p<d;){if(t[p]>=e){for(o=p+1;o<d&&t[o]>=e;)o++;for(a=p,c=o-1;a<c;a++,c--)l=r[a],r[a]=r[c],r[c]=l;p=o}p++}else r.reverse()}function A(e,t,r,i){var c,l,u,T,I=t[i];switch(I){case d:case p:o=!1;case g:case f:return I;case h:return o?f:h;case v:return o=!0,!0,p;case b:return g;case w:return i<1||i+1>=t.length||(c=r[i-1])!=h&&c!=f||(l=t[i+1])!=h&&l!=f?g:(o&&(l=f),l==c?l:g);case S:return(c=i>0?r[i-1]:y)==h&&i+1<t.length&&t[i+1]==h?h:g;case k:if(i>0&&r[i-1]==h)return h;if(o)return g;for(T=i+1,u=t.length;T<u&&t[T]==k;)T++;return T<u&&t[T]==h?h:g;case E:for(u=t.length,T=i+1;T<u&&t[T]==E;)T++;if(T<u){var P=e[i],A=P>=1425&&P<=2303||64286==P;if(c=t[T],A&&(c==p||c==v))return p}return i<1||(c=t[i-1])==y?g:r[i-1];case y:return o=!1,s=!0,n;case m:return a=!0,g;case _:case C:case x:case O:case M:o=!1;case R:return g}}function B(e){var t=e.charCodeAt(0),r=t>>8;return 0==r?t>191?d:T[t]:5==r?/[\u0591-\u05f4]/.test(e)?p:d:6==r?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?E:/[\u0660-\u0669\u066b-\u066c]/.test(e)?f:1642==t?k:/[\u06f0-\u06f9]/.test(e)?h:v:32==r&&t<=8287?I[255&t]:254==r&&t>=65136?v:g}t.L=d,t.R=p,t.EN=h,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="",t.doBidiReorder=function(e,r,d){if(e.length<2)return{};var h=e.split(""),w=new Array(h.length),S=new Array(h.length),k=[];n=d?u:0,function(e,t,r,u){var d=n?l:c,p=null,h=null,f=null,g=0,v=null,w=-1,S=null,k=null,E=[];if(!u)for(S=0,u=[];S<r;S++)u[S]=B(e[S]);for(i=n,o=!1,!1,s=!1,a=!1,k=0;k<r;k++){if(p=g,E[k]=h=A(e,u,E,k),v=240&(g=d[p][h]),g&=15,t[k]=f=d[g][5],v>0)if(16==v){for(S=w;S<k;S++)t[S]=1;w=-1}else w=-1;if(d[g][6])-1==w&&(w=k);else if(w>-1){for(S=w;S<k;S++)t[S]=f;w=-1}u[k]==y&&(t[k]=0),i|=f}if(a)for(S=0;S<r;S++)if(u[S]==m){t[S]=n;for(var _=S-1;_>=0&&u[_]==b;_--)t[_]=n}}(h,k,h.length,r);for(var E=0;E<w.length;w[E]=E,E++);P(2,k,w),P(1,k,w);for(E=0;E<w.length-1;E++)r[E]===f?k[E]=t.AN:k[E]===p&&(r[E]>v&&r[E]<_||r[E]===g||r[E]===R)?k[E]=t.ON_R:E>0&&""===h[E-1]&&/\u0622|\u0623|\u0625|\u0627/.test(h[E])&&(k[E-1]=k[E]=t.R_H,E++);h[h.length-1]===t.DOT&&(k[h.length-1]=t.B),""===h[0]&&(k[0]=t.RLE);for(E=0;E<w.length;E++)S[E]=k[w[E]];return{logicalFromVisual:w,bidiLevels:S}},t.hasBidiCharacters=function(e,t){for(var r=!1,n=0;n<e.length;n++)t[n]=B(e.charAt(n)),r||t[n]!=p&&t[n]!=v&&t[n]!=f||(r=!0);return r},t.getVisualFromLogicalIdx=function(e,t){for(var r=0;r<t.logicalFromVisual.length;r++)if(t.logicalFromVisual[r]==e)return r;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(e,t,r){"use strict";var n=e("./lib/bidiutil"),i=e("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=n,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(e.getValue())};(function(){this.isBidiRow=function(e,t,r){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,r),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&o.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var r=this.session.$getRowCacheIndex(t,this.currentRow);r>=0&&(e=this.session.$docRowCache[r])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var r,n=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(r=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===n;)n=r,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var r=e===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var o=this.session.$wrapData[e];o&&(void 0===t&&(t=this.getSplitIndex()),t>0&&o.length?(this.wrapIndent=o.indent,this.wrapOffset=this.wrapIndent*this.charWidths[n.L],this.line=t<o.length?this.line.substring(o[t-1],o[t]):this.line.substring(o[o.length-1])):this.line=this.line.substring(0,o[t])),t==o.length&&(this.line+=this.showInvisibles?r:n.DOT)}else this.line+=this.showInvisibles?r:n.DOT;var s,a=this.session,c=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(e,t){return"\t"===e||a.isFullWidth(e.charCodeAt(0))?(s="\t"===e?a.getScreenTabSize(t+c):2,c+=s-1,i.stringRepeat(n.DOT,s)):e})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==n.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];n.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=n.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,r=e.$measureCharWidth("");this.charWidths[n.L]=this.charWidths[n.EN]=this.charWidths[n.ON_R]=t,this.charWidths[n.R]=this.charWidths[n.AN]=r,this.charWidths[n.R_H]=.45*r,this.charWidths[n.B]=this.charWidths[n.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(null!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var r=e.getCursorPosition(),n=e.selection.getSelectionAnchor().row;n<=r.row;n++)t||e.session.getLine(n).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(n).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:n},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(n,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,r=e>t?this.session.getOverwrite()?e:e-1:t,i=n.getVisualFromLogicalIdx(r,this.bidiMap),o=this.bidiMap.bidiLevels,s=0;!this.session.getOverwrite()&&e<=t&&o[i]%2!=0&&i++;for(var a=0;a<i;a++)s+=this.charWidths[o[a]];return!this.session.getOverwrite()&&e>t&&o[i]%2==0&&(s+=this.charWidths[o[i]]),this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(s+=this.rtlLineOffset),s},this.getSelections=function(e,t){var r,n=this.bidiMap,i=n.bidiLevels,o=[],s=0,a=Math.min(e,t)-this.wrapIndent,c=Math.max(e,t)-this.wrapIndent,l=!1,u=!1,d=0;this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var p,h=0;h<i.length;h++)p=n.logicalFromVisual[h],r=i[h],(l=p>=a&&p<c)&&!u?d=s:!l&&u&&o.push({left:d,width:s-d}),s+=this.charWidths[r],u=l;if(l&&h===i.length&&o.push({left:d,width:s-d}),this.isRtlDir)for(var f=0;f<o.length;f++)o[f].left+=this.rtlLineOffset;return o},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,r=(e=Math.max(e,0),0),n=0,i=this.bidiMap.bidiLevels,o=this.charWidths[i[n]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);e>r+o/2;){if(r+=o,n===i.length-1){o=0;break}o=this.charWidths[i[++n]]}return n>0&&i[n-1]%2!=0&&i[n]%2==0?(e<r&&n--,t=this.bidiMap.logicalFromVisual[n]):n>0&&i[n-1]%2==0&&i[n]%2!=0?t=1+(e>r?this.bidiMap.logicalFromVisual[n]:this.bidiMap.logicalFromVisual[n-1]):this.isRtlDir&&n===i.length-1&&0===o&&i[n-1]%2==0||!this.isRtlDir&&0===n&&i[n]%2!=0?t=1+this.bidiMap.logicalFromVisual[n]:(n>0&&i[n-1]%2!=0&&0!==o&&n--,t=this.bidiMap.logicalFromVisual[n]),0===t&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(s.prototype),t.BidiHandler=s})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(e,t,r){"use strict";var n=e("./lib/oop"),i=e("./lib/lang"),o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",(function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)})),this.anchor.on("change",(function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")}))};(function(){n.implement(this,o),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?s.fromPoints(t,t):this.isBackwards()?s.fromPoints(t,e):s.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var r=t?e.end:e.start,n=t?e.start:e.end;this.$setSelection(r.row,r.column,n.row,n.column)},this.$setSelection=function(e,t,r,n){var i=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(r,n),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||i!=this.$isEmpty||o)&&this._emit("changeSelection")},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection((function(){this.moveCursorTo(e,t)}))},this.selectToPosition=function(e){this.$moveSelection((function(){this.moveCursorToPosition(e)}))},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(void 0===t){var r=e||this.lead;e=r.row,t=r.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var r,n="number"==typeof e?e:this.lead.row,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,!0===t?new s(n,0,r,this.session.getLine(r).length):new s(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,r){var n=e.column,i=e.column+t;return r<0&&(n=e.column-t,i=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(n,i).split(" ").length-1==t},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var r=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,r,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-r):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var r=this.session.getTabSize();t=this.lead;this.wouldMoveIntoSoftTab(t,r,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,r):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,r=this.session.documentToScreenRow(e,t),n=this.session.screenToDocumentPosition(r,0),i=this.session.getDisplayLine(e,null,n.row,n.column).match(/^\s*/);i[0].length==t||this.session.$useEmacsStyleLineStart||(n.column+=i[0].length),this.moveCursorToPosition(n)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var r=this.session.getLine(t.row);if(t.column==r.length){var n=r.search(/\s+$/);n>0&&(t.column=n)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,r=this.doc.getLine(e),n=r.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(e,t,1);if(i)this.moveCursorTo(i.end.row,i.end.column);else{if(this.session.nonTokenRe.exec(n)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,n=r.substring(t)),t>=r.length)return this.moveCursorTo(e,r.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(n)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,r=this.lead.column;if(e=this.session.getFoldAt(t,r,-1))this.moveCursorTo(e.start.row,e.start.column);else{var n=this.session.getFoldStringAt(t,r,-1);null==n&&(n=this.doc.getLine(t).substring(0,r));var o=i.stringReverse(n);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(r-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),r<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(r-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,r)}},this.$shortWordEndIndex=function(e){var t,r=0,n=/\s/,i=this.session.tokenRe;if(i.lastIndex=0,this.session.tokenRe.exec(e))r=this.session.tokenRe.lastIndex;else{for(;(t=e[r])&&n.test(t);)r++;if(r<1)for(i.lastIndex=0;(t=e[r])&&!i.test(t);)if(i.lastIndex=0,r++,n.test(t)){if(r>2){r--;break}for(;(t=e[r])&&n.test(t);)r++;if(r>2)break}}return i.lastIndex=0,r},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,r=this.doc.getLine(e),n=r.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==r.length){var o=this.doc.getLength();do{e++,n=this.doc.getLine(e)}while(e<o&&/^\s*$/.test(n));/^\s+/.test(n)||(n=""),t=0}var s=this.$shortWordEndIndex(n);this.moveCursorTo(e,t+s)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,r=this.lead.column;if(e=this.session.getFoldAt(t,r,-1))return this.moveCursorTo(e.start.row,e.start.column);var n=this.session.getLine(t).substring(0,r);if(0===r){do{t--,n=this.doc.getLine(t)}while(t>0&&/^\s*$/.test(n));r=n.length,/\s+$/.test(n)||(n="")}var o=i.stringReverse(n),s=this.$shortWordEndIndex(o);return this.moveCursorTo(t,r-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var r,n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(n.row,this.lead.row)?(r=this.session.$bidiHandler.getPosLeft(n.column),n.column=Math.round(r/this.session.$bidiHandler.charWidths[0])):r=n.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var i=this.session.screenToDocumentPosition(n.row+e,n.column,r);0!==e&&0===t&&i.row===this.lead.row&&i.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[i.row]&&(i.row>0||e>0)&&i.row++,this.moveCursorTo(i.row,i.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,r){var n=this.session.getFoldAt(e,t,1);n&&(e=n.start.row,t=n.start.column),this.$keepDesiredColumnOnChange=!0;var i=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(i.charAt(t))&&i.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,r||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,r){var n=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(n.row,n.column,r)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var r=this.getCursor();return s.fromPoints(t,r)}catch(e){return s.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map((function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}));else(e=this.getRange()).isBackwards=this.isBackwards();return e},this.fromJSON=function(e){if(null==e.start){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var r=s.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(r.cursor=r.start),this.addRange(r,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(a.prototype),t.Selection=a})),ace.define("ace/tokenizer",["require","exports","module","ace/config"],(function(e,t,r){"use strict";var n=e("./config"),i=2e3,o=function(e){for(var t in this.states=e,this.regExps={},this.matchMappings={},this.states){for(var r=this.states[t],n=[],i=0,o=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],c=0;c<r.length;c++){var l=r[c];if(l.defaultToken&&(o.defaultToken=l.defaultToken),l.caseInsensitive&&(s="gi"),null!=l.regex){l.regex instanceof RegExp&&(l.regex=l.regex.toString().slice(1,-1));var u=l.regex,d=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(l.token)?1==l.token.length||1==d?l.token=l.token[0]:d-1!=l.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:l,groupCount:d-1}),l.token=l.token[0]):(l.tokenArray=l.token,l.token=null,l.onMatch=this.$arrayTokens):"function"!=typeof l.token||l.onMatch||(l.onMatch=d>1?this.$applyToken:l.token),d>1&&(/\\\d/.test(l.regex)?u=l.regex.replace(/\\([0-9]+)/g,(function(e,t){return"\\"+(parseInt(t,10)+i+1)})):(d=1,u=this.removeCapturingGroups(l.regex)),l.splitRegex||"string"==typeof l.token||a.push(l)),o[i]=c,i+=d,n.push(u),l.onMatch||(l.onMatch=null)}}n.length||(o[0]=0,n.push("$")),a.forEach((function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)}),this),this.regExps[t]=new RegExp("("+n.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(e){i=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),r=this.token.apply(this,t);if("string"==typeof r)return[{type:r,value:e}];for(var n=[],i=0,o=r.length;i<o;i++)t[i]&&(n[n.length]={type:r[i],value:t[i]});return n},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var r=[],n=this.tokenArray,i=0,o=n.length;i<o;i++)t[i+1]&&(r[r.length]={type:n[i],value:t[i+1]});return r},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,(function(e,t){return t?"(?:":e}))},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var r=0,n=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(e,t,o,s,a,c){return n?n="]"!=a:a?n=!0:s?(r==i.stack&&(i.end=c+1,i.stack=-1),r--):o&&(r++,1!=o.length&&(i.stack=r,i.start=c)),e})),null!=i.end&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var r=t.slice(0);"#tmp"===(t=r[0])&&(r.shift(),t=r.shift())}else r=[];var n=t||"start",o=this.states[n];o||(n="start",o=this.states[n]);var s=this.matchMappings[n],a=this.regExps[n];a.lastIndex=0;for(var c,l=[],u=0,d=0,p={type:null,value:""};c=a.exec(e);){var h=s.defaultToken,f=null,g=c[0],y=a.lastIndex;if(y-g.length>u){var m=e.substring(u,y-g.length);p.type==h?p.value+=m:(p.type&&l.push(p),p={type:h,value:m})}for(var v=0;v<c.length-2;v++)if(void 0!==c[v+1]){h=(f=o[s[v]]).onMatch?f.onMatch(g,n,r,e):f.token,f.next&&(n="string"==typeof f.next?f.next:f.next(n,r),(o=this.states[n])||(this.reportError("state doesn't exist",n),n="start",o=this.states[n]),s=this.matchMappings[n],u=y,(a=this.regExps[n]).lastIndex=y),f.consumeLineEnd&&(u=y);break}if(g)if("string"==typeof h)f&&!1===f.merge||p.type!==h?(p.type&&l.push(p),p={type:h,value:g}):p.value+=g;else if(h){p.type&&l.push(p),p={type:null,value:""};for(v=0;v<h.length;v++)l.push(h[v])}if(u==e.length)break;if(u=y,d++>i){for(d>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});u<e.length;)p.type&&l.push(p),p={value:e.substring(u,u+=500),type:"overflow"};n="start",r=[];break}}return p.type&&l.push(p),r.length>1&&r[0]!==n&&r.unshift("#tmp",n),{tokens:l,state:r.length?r:n}},this.reportError=n.reportError}).call(o.prototype),t.Tokenizer=o})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],(function(e,t,r){"use strict";var n=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var r in e){for(var n=e[r],i=0;i<n.length;i++){var o=n[i];(o.next||o.onMatch)&&("string"==typeof o.next&&0!==o.next.indexOf(t)&&(o.next=t+o.next),o.nextState&&0!==o.nextState.indexOf(t)&&(o.nextState=t+o.nextState))}this.$rules[t+r]=n}else for(var r in e)this.$rules[r]=e[r]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,r,i,o){var s="function"==typeof e?(new e).getRules():e;if(i)for(var a=0;a<i.length;a++)i[a]=t+i[a];else for(var c in i=[],s)i.push(t+c);if(this.addRules(s,t),r){var l=Array.prototype[o?"push":"unshift"];for(a=0;a<i.length;a++)l.apply(this.$rules[i[a]],n.deepCopy(r))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var r=0,n=this.$rules;Object.keys(n).forEach((function i(o){var s=n[o];s.processed=!0;for(var a=0;a<s.length;a++){var c=s[a],l=null;Array.isArray(c)&&(l=c,c={}),!c.regex&&c.start&&(c.regex=c.start,c.next||(c.next=[]),c.next.push({defaultToken:c.token},{token:c.token+".end",regex:c.end||c.start,next:"pop"}),c.token=c.token+".start",c.push=!0);var u=c.next||c.push;if(u&&Array.isArray(u)){var d=c.stateName;d||("string"!=typeof(d=c.token)&&(d=d[0]||""),n[d]&&(d+=r++)),n[d]=u,c.next=d,i(d)}else"pop"==u&&(c.next=t);if(c.push&&(c.nextState=c.next||c.push,c.next=e,delete c.push),c.rules)for(var p in c.rules)n[p]?n[p].push&&n[p].push.apply(n[p],c.rules[p]):n[p]=c.rules[p];var h="string"==typeof c?c:c.include;if(h&&(l=Array.isArray(h)?h.map((function(e){return n[e]})):n[h]),l){var f=[a,1].concat(l);c.noEscape&&(f=f.filter((function(e){return!e.next}))),s.splice.apply(s,f),a--}c.keywordMap&&(c.token=this.createKeywordMapper(c.keywordMap,c.defaultToken||"text",c.caseInsensitive),delete c.defaultToken)}}),this)},this.createKeywordMapper=function(e,t,r,n){var i=Object.create(null);return Object.keys(e).forEach((function(t){var o=e[t];r&&(o=o.toLowerCase());for(var s=o.split(n||"|"),a=s.length;a--;)i[s[a]]=t})),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),e=null,r?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(e,t,r){"use strict";var n=function(){this.$behaviours={}};(function(){this.add=function(e,t,r){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=r},this.addBehaviours=function(e){for(var t in e)for(var r in e[t])this.add(t,r,e[t][r])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var r=(new e).getBehaviours(t);else r=e.getBehaviours(t);this.addBehaviours(r)},this.getBehaviours=function(e){if(e){for(var t={},r=0;r<e.length;r++)this.$behaviours[e[r]]&&(t[e[r]]=this.$behaviours[e[r]]);return t}return this.$behaviours}}).call(n.prototype),t.Behaviour=n})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(e,t,r){"use strict";var n=e("./range").Range,i=function(e,t,r){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var n=e.getTokenAt(t,r);this.$tokenIndex=n?n.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,r=e[t].start;if(void 0!==r)return r;for(r=0;t>0;)r+=e[t-=1].value.length;return r},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new n(this.$row,t,this.$row,t+e.value.length)}}).call(i.prototype),t.TokenIterator=i})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(e,t,r){"use strict";var n,i=e("../../lib/oop"),o=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),c=["text","paren.rparen","rparen","paren","punctuation.operator"],l=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],u={},d={'"':'"',"'":"'"},p=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,u.rangeCount!=e.multiSelect.rangeCount&&(u={rangeCount:e.multiSelect.rangeCount})),u[t])return n=u[t];n=u[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},h=function(e,t,r,n){var i=e.end.row-e.start.row;return{text:r+t+n,selection:[0,e.start.column+1,i,e.end.column+(i?0:1)]}},f=function(e){this.add("braces","insertion",(function(t,r,i,o,s){var c=i.getCursorPosition(),l=o.doc.getLine(c.row);if("{"==s){p(i);var u=i.getSelectionRange(),d=o.doc.getTextRange(u);if(""!==d&&"{"!==d&&i.getWrapBehavioursEnabled())return h(u,d,"{","}");if(f.isSaneInsertion(i,o))return/[\]\}\)]/.test(l[c.column])||i.inMultiSelectMode||e&&e.braces?(f.recordAutoInsert(i,o,"}"),{text:"{}",selection:[1,1]}):(f.recordMaybeInsert(i,o,"{"),{text:"{",selection:[1,1]})}else if("}"==s){if(p(i),"}"==l.substring(c.column,c.column+1))if(null!==o.$findOpeningBracket("}",{column:c.column+1,row:c.row})&&f.isAutoInsertedClosing(c,l,s))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==s||"\r\n"==s){p(i);var g="";if(f.isMaybeInsertedClosing(c,l)&&(g=a.stringRepeat("}",n.maybeInsertedBrackets),f.clearMaybeInsertedClosing()),"}"===l.substring(c.column,c.column+1)){var y=o.findMatchingBracket({row:c.row,column:c.column+1},"}");if(!y)return null;var m=this.$getIndent(o.getLine(y.row))}else{if(!g)return void f.clearMaybeInsertedClosing();m=this.$getIndent(l)}var v=m+o.getTabString();return{text:"\n"+v+"\n"+m+g,selection:[1,v.length,1,v.length]}}f.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(e,t,r,i,o){var s=i.doc.getTextRange(o);if(!o.isMultiLine()&&"{"==s){if(p(r),"}"==i.doc.getLine(o.start.row).substring(o.end.column,o.end.column+1))return o.end.column++,o;n.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,t,r,n,i){if("("==i){p(r);var o=r.getSelectionRange(),s=n.doc.getTextRange(o);if(""!==s&&r.getWrapBehavioursEnabled())return h(o,s,"(",")");if(f.isSaneInsertion(r,n))return f.recordAutoInsert(r,n,")"),{text:"()",selection:[1,1]}}else if(")"==i){p(r);var a=r.getCursorPosition(),c=n.doc.getLine(a.row);if(")"==c.substring(a.column,a.column+1))if(null!==n.$findOpeningBracket(")",{column:a.column+1,row:a.row})&&f.isAutoInsertedClosing(a,c,i))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(e,t,r,n,i){var o=n.doc.getTextRange(i);if(!i.isMultiLine()&&"("==o&&(p(r),")"==n.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i})),this.add("brackets","insertion",(function(e,t,r,n,i){if("["==i){p(r);var o=r.getSelectionRange(),s=n.doc.getTextRange(o);if(""!==s&&r.getWrapBehavioursEnabled())return h(o,s,"[","]");if(f.isSaneInsertion(r,n))return f.recordAutoInsert(r,n,"]"),{text:"[]",selection:[1,1]}}else if("]"==i){p(r);var a=r.getCursorPosition(),c=n.doc.getLine(a.row);if("]"==c.substring(a.column,a.column+1))if(null!==n.$findOpeningBracket("]",{column:a.column+1,row:a.row})&&f.isAutoInsertedClosing(a,c,i))return f.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(e,t,r,n,i){var o=n.doc.getTextRange(i);if(!i.isMultiLine()&&"["==o&&(p(r),"]"==n.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i})),this.add("string_dquotes","insertion",(function(e,t,r,n,i){var o=n.$mode.$quotes||d;if(1==i.length&&o[i]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(i))return;p(r);var s=i,a=r.getSelectionRange(),c=n.doc.getTextRange(a);if(!(""===c||1==c.length&&o[c])&&r.getWrapBehavioursEnabled())return h(a,c,s,s);if(!c){var l=r.getCursorPosition(),u=n.doc.getLine(l.row),f=u.substring(l.column-1,l.column),g=u.substring(l.column,l.column+1),y=n.getTokenAt(l.row,l.column),m=n.getTokenAt(l.row,l.column+1);if("\\"==f&&y&&/escape/.test(y.type))return null;var v,b=y&&/string|escape/.test(y.type),w=!m||/string|escape/.test(m.type);if(g==s)(v=b!==w)&&/string\.end/.test(m.type)&&(v=!1);else{if(b&&!w)return null;if(b&&w)return null;var S=n.$mode.tokenRe;S.lastIndex=0;var k=S.test(f);S.lastIndex=0;var E=S.test(f);if(k||E)return null;if(g&&!/[\s;,.})\]\\]/.test(g))return null;var _=u[l.column-2];if(f==s&&(_==s||S.test(_)))return null;v=!0}return{text:v?s+s:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(e,t,r,n,i){var o=n.$mode.$quotes||d,s=n.doc.getTextRange(i);if(!i.isMultiLine()&&o.hasOwnProperty(s)&&(p(r),n.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)==s))return i.end.column++,i}))};f.isSaneInsertion=function(e,t){var r=e.getCursorPosition(),n=new s(t,r.row,r.column);if(!this.$matchTokenType(n.getCurrentToken()||"text",c)){if(/[)}\]]/.test(e.session.getLine(r.row)[r.column]))return!0;var i=new s(t,r.row,r.column+1);if(!this.$matchTokenType(i.getCurrentToken()||"text",c))return!1}return n.stepForward(),n.getCurrentTokenRow()!==r.row||this.$matchTokenType(n.getCurrentToken()||"text",l)},f.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},f.recordAutoInsert=function(e,t,r){var i=e.getCursorPosition(),o=t.doc.getLine(i.row);this.isAutoInsertedClosing(i,o,n.autoInsertedLineEnd[0])||(n.autoInsertedBrackets=0),n.autoInsertedRow=i.row,n.autoInsertedLineEnd=r+o.substr(i.column),n.autoInsertedBrackets++},f.recordMaybeInsert=function(e,t,r){var i=e.getCursorPosition(),o=t.doc.getLine(i.row);this.isMaybeInsertedClosing(i,o)||(n.maybeInsertedBrackets=0),n.maybeInsertedRow=i.row,n.maybeInsertedLineStart=o.substr(0,i.column)+r,n.maybeInsertedLineEnd=o.substr(i.column),n.maybeInsertedBrackets++},f.isAutoInsertedClosing=function(e,t,r){return n.autoInsertedBrackets>0&&e.row===n.autoInsertedRow&&r===n.autoInsertedLineEnd[0]&&t.substr(e.column)===n.autoInsertedLineEnd},f.isMaybeInsertedClosing=function(e,t){return n.maybeInsertedBrackets>0&&e.row===n.maybeInsertedRow&&t.substr(e.column)===n.maybeInsertedLineEnd&&t.substr(0,e.column)==n.maybeInsertedLineStart},f.popAutoInsertedClosing=function(){n.autoInsertedLineEnd=n.autoInsertedLineEnd.substr(1),n.autoInsertedBrackets--},f.clearMaybeInsertedClosing=function(){n&&(n.maybeInsertedBrackets=0,n.maybeInsertedRow=-1)},i.inherits(f,o),t.CstyleBehaviour=f})),ace.define("ace/unicode",["require","exports","module"],(function(e,t,r){"use strict";for(var n=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],i=0,o=[],s=0;s<n.length;s+=2)o.push(i+=n[s]),n[s+1]&&o.push(45,i+=n[s+1]);t.wordChars=String.fromCharCode.apply(null,o)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(e,t,r){"use strict";var n=e("../config"),i=e("../tokenizer").Tokenizer,o=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour/cstyle").CstyleBehaviour,a=e("../unicode"),c=e("../lib/lang"),l=e("../token_iterator").TokenIterator,u=e("../range").Range,d=function(){this.HighlightRules=o};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+a.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,r,n){var i=t.doc,o=!0,s=!0,a=1/0,l=t.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))g=this.lineCommentStart.map(c.escapeRegExp).join("|"),h=this.lineCommentStart[0];else g=c.escapeRegExp(this.lineCommentStart),h=this.lineCommentStart;g=new RegExp("^(\\s*)(?:"+g+") ?"),u=t.getUseSoftTabs();v=function(e,t){var r=e.match(g);if(r){var n=r[1].length,o=r[0].length;p(e,n,o)||" "!=r[0][o-1]||o--,i.removeInLine(t,n,o)}};var d=h+" ",p=(m=function(e,t){o&&!/\S/.test(e)||(p(e,a,a)?i.insertInLine({row:t,column:a},d):i.insertInLine({row:t,column:a},h))},b=function(e,t){return g.test(e)},function(e,t,r){for(var n=0;t--&&" "==e.charAt(t);)n++;if(n%l!=0)return!1;for(n=0;" "==e.charAt(r++);)n++;return l>2?n%l!=l-1:n%l==0})}else{if(!this.blockComment)return!1;var h=this.blockComment.start,f=this.blockComment.end,g=new RegExp("^(\\s*)(?:"+c.escapeRegExp(h)+")"),y=new RegExp("(?:"+c.escapeRegExp(f)+")\\s*$"),m=function(e,t){b(e,t)||o&&!/\S/.test(e)||(i.insertInLine({row:t,column:e.length},f),i.insertInLine({row:t,column:a},h))},v=function(e,t){var r;(r=e.match(y))&&i.removeInLine(t,e.length-r[0].length,e.length),(r=e.match(g))&&i.removeInLine(t,r[1].length,r[0].length)},b=function(e,r){if(g.test(e))return!0;for(var n=t.getTokens(r),i=0;i<n.length;i++)if("comment"===n[i].type)return!0}}function w(e){for(var t=r;t<=n;t++)e(i.getLine(t),t)}var S=1/0;w((function(e,t){var r=e.search(/\S/);-1!==r?(r<a&&(a=r),s&&!b(e,t)&&(s=!1)):S>e.length&&(S=e.length)})),a==1/0&&(a=S,o=!1,s=!1),u&&a%l!=0&&(a=Math.floor(a/l)*l),w(s?v:m)},this.toggleBlockComment=function(e,t,r,n){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var o,s,a=(g=new l(t,n.row,n.column)).getCurrentToken(),c=(t.selection,t.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(var d,p;a&&/comment/.test(a.type);){if(-1!=(y=a.value.indexOf(i.start))){var h=g.getCurrentTokenRow(),f=g.getCurrentTokenColumn()+y;d=new u(h,f,h,f+i.start.length);break}a=g.stepBackward()}var g;for(a=(g=new l(t,n.row,n.column)).getCurrentToken();a&&/comment/.test(a.type);){var y;if(-1!=(y=a.value.indexOf(i.end))){h=g.getCurrentTokenRow(),f=g.getCurrentTokenColumn()+y;p=new u(h,f,h,f+i.end.length);break}a=g.stepForward()}p&&t.remove(p),d&&(t.remove(d),o=d.start.row,s=-i.start.length)}else s=i.start.length,o=r.start.row,t.insert(r.end,i.end),t.insert(r.start,i.start);c.start.row==o&&(c.start.column+=s),c.end.row==o&&(c.end.column+=s),t.selection.fromOrientedRange(c)}},this.getNextLineIndent=function(e,t,r){return this.$getIndent(t)},this.checkOutdent=function(e,t,r){return!1},this.autoOutdent=function(e,t,r){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var t in this.$embeds=[],this.$modes={},e)if(e[t]){var r=e[t],i=r.prototype.$id,o=n.$modes[i];o||(n.$modes[i]=o=new r),n.$modes[t]||(n.$modes[t]=o),this.$embeds.push(t),this.$modes[t]=o}var s=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(t=0;t<s.length;t++)!function(e){var r=s[t],n=e[r];e[s[t]]=function(){return this.$delegator(r,arguments,n)}}(this)},this.$delegator=function(e,t,r){var n=t[0]||"start";if("string"!=typeof n){if(Array.isArray(n[2])){var i=n[2][n[2].length-1];if(s=this.$modes[i])return s[e].apply(s,[n[1]].concat([].slice.call(t,1)))}n=n[0]||"start"}for(var o=0;o<this.$embeds.length;o++)if(this.$modes[this.$embeds[o]]){var s,a=n.split(this.$embeds[o]);if(!a[0]&&a[1])return t[0]=a[1],(s=this.$modes[this.$embeds[o]])[e].apply(s,t)}var c=r.apply(this,t);return r?c:void 0},this.transformAction=function(e,t,r,n,i){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var s in o)if(o[s][t]){var a=o[s][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,r=[];for(var n in t)for(var i=t[n],o=0,s=i.length;o<s;o++)if("string"==typeof i[o].token)/keyword|support|storage/.test(i[o].token)&&r.push(i[o].regex);else if("object"==typeof i[o].token)for(var a=0,c=i[o].token.length;a<c;a++)if(/keyword|support|storage/.test(i[o].token[a])){n=i[o].regex.match(/\(.+?\)/g)[a];r.push(n.substr(1,n.length-2))}this.completionKeywords=r}return e?r.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,r,n){return(this.$keywordList||this.$createKeywordList()).map((function(e){return{name:e,value:e,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call(d.prototype),t.Mode=d})),ace.define("ace/apply_delta",["require","exports","module"],(function(e,t,r){"use strict";t.applyDelta=function(e,t,r){var n=t.start.row,i=t.start.column,o=e[n]||"";switch(t.action){case"insert":if(1===t.lines.length)e[n]=o.substring(0,i)+t.lines[0]+o.substring(i);else{var s=[n,1].concat(t.lines);e.splice.apply(e,s),e[n]=o.substring(0,i)+e[n],e[n+t.lines.length-1]+=o.substring(i)}break;case"remove":var a=t.end.column,c=t.end.row;n===c?e[n]=o.substring(0,i)+o.substring(a):e.splice(n,c-n+1,o.substring(0,i)+e[c].substring(a))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,r){"use strict";var n=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,o=t.Anchor=function(e,t,r){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===r?this.setPosition(t.row,t.column):this.setPosition(t,r)};(function(){function e(e,t,r){var n=r?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&n}n.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if(!(t.start.row==t.end.row&&t.start.row!=this.row||t.start.row>this.row)){var r=function(t,r,n){var i="insert"==t.action,o=(i?1:-1)*(t.end.row-t.start.row),s=(i?1:-1)*(t.end.column-t.start.column),a=t.start,c=i?a:t.end;if(e(r,a,n))return{row:r.row,column:r.column};if(e(c,r,!n))return{row:r.row+o,column:r.column+(r.row==c.row?s:0)};return{row:a.row,column:a.column}}(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(r.row,r.column,!0)}},this.setPosition=function(e,t,r){var n;if(n=r?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=n.row||this.column!=n.column){var i={row:this.row,column:this.column};this.row=n.row,this.column=n.column,this._signal("change",{old:i,value:n})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var r={};return e>=this.document.getLength()?(r.row=Math.max(0,this.document.getLength()-1),r.column=this.document.getLine(r.row).length):e<0?(r.row=0,r.column=0):(r.row=e,r.column=Math.min(this.document.getLine(r.row).length,Math.max(0,t))),t<0&&(r.column=0),r}}).call(o.prototype)})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(e,t,r){"use strict";var n=e("./lib/oop"),i=e("./apply_delta").applyDelta,o=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=e("./anchor").Anchor,c=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){n.implement(this,o),this.setValue=function(e){var t=this.getLength()-1;this.remove(new s(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new a(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var r=t.length-1;e.end.row-e.start.row==r&&(t[r]=t[r].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var r=this.clippedPos(e.row,e.column),n=this.pos(e.row,e.column+t.length);return this.applyDelta({start:r,end:n,action:"insert",lines:[t]},!0),this.clonePos(n)},this.clippedPos=function(e,t){var r=this.getLength();void 0===e?e=r:e<0?e=0:e>=r&&(e=r-1,t=void 0);var n=this.getLine(e);return null==t&&(t=n.length),{row:e,column:t=Math.min(Math.max(t,0),n.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var r=0;(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),r=0):(t=[""].concat(t),e--,r=this.$lines[e].length),this.insertMergedLines({row:e,column:r},t)},this.insertMergedLines=function(e,t){var r=this.clippedPos(e.row,e.column),n={row:r.row+t.length-1,column:(1==t.length?r.column:0)+t[t.length-1].length};return this.applyDelta({start:r,end:n,action:"insert",lines:t}),this.clonePos(n)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),r=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:r,action:"remove",lines:this.getLinesForRange({start:t,end:r})}),this.clonePos(t)},this.removeInLine=function(e,t,r){var n=this.clippedPos(e,t),i=this.clippedPos(e,r);return this.applyDelta({start:n,end:i,action:"remove",lines:this.getLinesForRange({start:n,end:i})},!0),this.clonePos(n)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var r=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&e>0,n=t<this.getLength()-1,i=r?e-1:e,o=r?this.getLine(i).length:0,a=n?t+1:t,c=n?0:this.getLine(a).length,l=new s(i,o,a,c),u=this.$lines.slice(e,t+1);return this.applyDelta({start:l.start,end:l.end,action:"remove",lines:this.getLinesForRange(l)}),u},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){return e instanceof s||(e=s.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var r="insert"==e.action;(r?e.lines.length<=1&&!e.lines[0]:!s.comparePoints(e.start,e.end))||(r&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(i(this.$lines,e,t),this._signal("change",e)))},this.$splitAndapplyLargeDelta=function(e,t){for(var r=e.lines,n=r.length-t+1,i=e.start.row,o=e.start.column,s=0,a=0;s<n;s=a){a+=t-1;var c=r.slice(s,a);c.push(""),this.applyDelta({start:this.pos(i+s,o),end:this.pos(i+a,o=0),action:e.action,lines:c},!0)}e.lines=r.slice(s),e.start.row=i+s,e.start.column=o,this.applyDelta(e,!0)},this.revertDelta=function(e){this.applyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var r=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,i=t||0,o=r.length;i<o;i++)if((e-=r[i].length+n)<0)return{row:i,column:e+r[i].length+n};return{row:o-1,column:e+r[o-1].length+n}},this.positionToIndex=function(e,t){for(var r=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,i=0,o=Math.min(e.row,r.length),s=t||0;s<o;++s)i+=r[s].length+n;return i+e.column}}).call(c.prototype),t.Document=c})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,r){"use strict";var n=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,o=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var r=this;this.$worker=function(){if(r.running){for(var e=new Date,t=r.currentLine,n=-1,i=r.doc,o=t;r.lines[t];)t++;var s=i.getLength(),a=0;for(r.running=!1;t<s;){r.$tokenizeRow(t),n=t;do{t++}while(r.lines[t]);if(++a%5==0&&new Date-e>20){r.running=setTimeout(r.$worker,20);break}}r.currentLine=t,-1==n&&(n=t),o<=n&&r.fireUpdateEvent(o,n)}}};(function(){n.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var r={first:e,last:t};this._signal("update",{data:r})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,r=e.end.row-t;if(0===r)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,r+1,null),this.states.splice(t,r+1,null);else{var n=Array(r+1);n.unshift(t,1),this.lines.splice.apply(this.lines,n),this.states.splice.apply(this.states,n)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),r=this.states[e-1],n=this.tokenizer.getLineTokens(t,r,e);return this.states[e]+""!=n.state+""?(this.states[e]=n.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=n.tokens}}).call(o.prototype),t.BackgroundTokenizer=o})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(e,t,r){"use strict";var n=e("./lib/lang"),i=(e("./lib/oop"),e("./range").Range),o=function(e,t,r){this.setRegexp(e),this.clazz=t,this.type=r||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,r,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,c=s;c<=a;c++){var l=this.cache[c];null==l&&((l=n.getMatchOffsets(r.getLine(c),this.regExp)).length>this.MAX_RANGES&&(l=l.slice(0,this.MAX_RANGES)),l=l.map((function(e){return new i(c,e.offset,c,e.offset+e.length)})),this.cache[c]=l.length?l:"");for(var u=l.length;u--;)t.drawSingleLineMarker(e,l[u].toScreenRange(r),this.clazz,o)}}}).call(o.prototype),t.SearchHighlight=o})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(e,t,r){"use strict";var n=e("../range").Range;function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var r=t[t.length-1];this.range=new n(t[0].start.row,t[0].start.column,r.end.row,r.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(e){e.setFoldLine(this)}),this)}(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach((function(t){t.start.row+=e,t.end.row+=e}))},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort((function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)})),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,r){var n,i,o=0,s=this.folds,a=!0;null==t&&(t=this.end.row,r=this.end.column);for(var c=0;c<s.length;c++){if(-1==(i=(n=s[c]).range.compareStart(t,r)))return void e(null,t,r,o,a);if(!e(null,n.start.row,n.start.column,o,a)&&e(n.placeholder,n.start.row,n.start.column,o)||0===i)return;a=!n.sameRow,o=n.end.column}e(null,t,r,o,a)},this.getNextFoldTo=function(e,t){for(var r,n,i=0;i<this.folds.length;i++){if(-1==(n=(r=this.folds[i]).range.compareEnd(e,t)))return{fold:r,kind:"after"};if(0===n)return{fold:r,kind:"inside"}}return null},this.addRemoveChars=function(e,t,r){var n,i,o=this.getNextFoldTo(e,t);if(o)if(n=o.fold,"inside"==o.kind&&n.start.column!=t&&n.start.row!=e)window.console&&window.console.log(e,t,n);else if(n.start.row==e){var s=(i=this.folds).indexOf(n);for(0===s&&(this.start.column+=r);s<i.length;s++){if((n=i[s]).start.column+=r,!n.sameRow)return;n.end.column+=r}this.end.column+=r}},this.split=function(e,t){var r=this.getNextFoldTo(e,t);if(!r||"inside"==r.kind)return null;var n=r.fold,o=this.folds,s=this.foldData,a=o.indexOf(n),c=o[a-1];this.end.row=c.end.row,this.end.column=c.end.column;var l=new i(s,o=o.splice(a,o.length-a));return s.splice(s.indexOf(this)+1,0,l),l},this.merge=function(e){for(var t=e.folds,r=0;r<t.length;r++)this.addFold(t[r]);var n=this.foldData;n.splice(n.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach((function(t){e.push("  "+t.toString())})),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,r=0;r<this.folds.length;r++){var n=this.folds[r];if((e-=n.start.column-t)<0)return{row:n.start.row,column:n.start.column+e};if((e-=n.placeholder.length)<0)return n.start;t=n.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(e,t,r){"use strict";var n=e("./range").Range.comparePoints,i=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=n,this.pointIndex=function(e,t,r){for(var i=this.ranges,o=r||0;o<i.length;o++){var s=i[o],a=n(e,s.end);if(!(a>0)){var c=n(e,s.start);return 0===a?t&&0!==c?-o-2:o:c>0||0===c&&!t?o:-o-1}}return-o-1},this.add=function(e){var t=!e.isEmpty(),r=this.pointIndex(e.start,t);r<0&&(r=-r-1);var n=this.pointIndex(e.end,t,r);return n<0?n=-n-1:n++,this.ranges.splice(r,n-r,e)},this.addList=function(e){for(var t=[],r=e.length;r--;)t.push.apply(t,this.add(e[r]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){for(var e,t=[],r=this.ranges,i=(r=r.sort((function(e,t){return n(e.start,t.start)})))[0],o=1;o<r.length;o++){e=i,i=r[o];var s=n(e.end,i.start);s<0||(0!=s||e.isEmpty()||i.isEmpty())&&(n(e.end,i.end)<0&&(e.end.row=i.end.row,e.end.column=i.end.column),r.splice(o,1),t.push(i),i=e,o--)}return this.ranges=r,t},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var r=this.ranges;if(r[0].start.row>t||r[r.length-1].start.row<e)return[];var n=this.pointIndex({row:e,column:0});n<0&&(n=-n-1);var i=this.pointIndex({row:t,column:0},n);i<0&&(i=-i-1);for(var o=[],s=n;s<i;s++)o.push(r[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,r=e.end,n=t.row,i=r.row,o=this.ranges,s=0,a=o.length;s<a;s++){if((u=o[s]).end.row>=n)break}if("insert"==e.action)for(var c=i-n,l=-t.column+r.column;s<a;s++){if((u=o[s]).start.row>n)break;if(u.start.row==n&&u.start.column>=t.column&&(u.start.column==t.column&&this.$bias<=0||(u.start.column+=l,u.start.row+=c)),u.end.row==n&&u.end.column>=t.column){if(u.end.column==t.column&&this.$bias<0)continue;u.end.column==t.column&&l>0&&s<a-1&&u.end.column>u.start.column&&u.end.column==o[s+1].start.column&&(u.end.column-=l),u.end.column+=l,u.end.row+=c}}else for(c=n-i,l=t.column-r.column;s<a;s++){if((u=o[s]).start.row>i)break;u.end.row<i&&(n<u.end.row||n==u.end.row&&t.column<u.end.column)?(u.end.row=n,u.end.column=t.column):u.end.row==i?u.end.column<=r.column?(c||u.end.column>t.column)&&(u.end.column=t.column,u.end.row=t.row):(u.end.column+=l,u.end.row+=c):u.end.row>i&&(u.end.row+=c),u.start.row<i&&(n<u.start.row||n==u.start.row&&t.column<u.start.column)?(u.start.row=n,u.start.column=t.column):u.start.row==i?u.start.column<=r.column?(c||u.start.column>t.column)&&(u.start.column=t.column,u.start.row=t.row):(u.start.column+=l,u.start.row+=c):u.start.row>i&&(u.start.row+=c)}if(0!=c&&s<a)for(;s<a;s++){var u;(u=o[s]).start.row+=c,u.end.row+=c}}}).call(i.prototype),t.RangeList=i})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],(function(e,t,r){"use strict";var n=e("../range_list").RangeList,i=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};function s(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function a(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}i.inherits(o,n),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach((function(t){t.setFoldLine(e)}))},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach((function(e){t.subFolds.push(e.clone())})),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){var t,r;t=e,r=this.start,s(t.start,r),s(t.end,r);for(var n=e.start.row,i=e.start.column,o=0,a=-1;o<this.subFolds.length&&1==(a=this.subFolds[o].range.compare(n,i));o++);var c=this.subFolds[o],l=0;if(0==a){if(c.range.containsRange(e))return c.addSubFold(e);l=1}n=e.range.end.row,i=e.range.end.column;var u=o;for(a=-1;u<this.subFolds.length&&1==(a=this.subFolds[u].range.compare(n,i));u++);0==a&&u++;for(var d=this.subFolds.splice(o,u-o,e),p=0==a?d.length-1:d.length,h=l;h<p;h++)e.addSubFold(d[h]);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return function(e,t){a(e.start,t),a(e.end,t)}(e,this.start)}}.call(o.prototype)})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],(function(e,t,r){"use strict";var n=e("../range").Range,i=e("./fold_line").FoldLine,o=e("./fold").Fold,s=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,r){var n=this.getFoldLine(e);if(!n)return null;for(var i=n.folds,o=0;o<i.length;o++){var s=i[o].range;if(s.contains(e,t)){if(1==r&&s.isEnd(e,t)&&!s.isEmpty())continue;if(-1==r&&s.isStart(e,t)&&!s.isEmpty())continue;return i[o]}}},this.getFoldsInRange=function(e){var t=e.start,r=e.end,n=this.$foldData,i=[];t.column+=1,r.column-=1;for(var o=0;o<n.length;o++){var s=n[o].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=n[o].folds,c=0;c<a.length;c++){var l=a[c];if(-2==(s=l.range.compareRange(e)))break;if(2!=s){if(42==s)break;i.push(l)}}}}return t.column-=1,r.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach((function(e){t=t.concat(this.getFoldsInRange(e))}),this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,r=0;r<t.length;r++)for(var n=0;n<t[r].folds.length;n++)e.push(t[r].folds[n]);return e},this.getFoldStringAt=function(e,t,r,n){if(!(n=n||this.getFoldLine(e)))return null;for(var i,o,s={end:{column:0}},a=0;a<n.folds.length;a++){var c=(o=n.folds[a]).range.compareEnd(e,t);if(-1==c){i=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===c)return null;s=o}return i||(i=this.getLine(o.start.row).substring(s.end.column)),-1==r?i.substring(0,t-s.end.column):1==r?i.substring(t-s.end.column):i},this.getFoldLine=function(e,t){var r=this.$foldData,n=0;for(t&&(n=r.indexOf(t)),-1==n&&(n=0);n<r.length;n++){var i=r[n];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var r=this.$foldData,n=0;for(t&&(n=r.indexOf(t)),-1==n&&(n=0);n<r.length;n++){var i=r[n];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){for(var r=this.$foldData,n=t-e+1,i=0;i<r.length;i++){var o=r[i],s=o.end.row,a=o.start.row;if(s>=t){a<t&&(a>=e?n-=t-a:n=0);break}s>=e&&(n-=a>=e?s-a:s-e+1)}return n},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort((function(e,t){return e.start.row-t.start.row})),e},this.addFold=function(e,t){var r,n=this.$foldData,s=!1;e instanceof o?r=e:(r=new o(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(r.range);var a=r.start.row,c=r.start.column,l=r.end.row,u=r.end.column,d=this.getFoldAt(a,c,1),p=this.getFoldAt(l,u,-1);if(d&&p==d)return d.addSubFold(r);d&&!d.range.isStart(a,c)&&this.removeFold(d),p&&!p.range.isEnd(l,u)&&this.removeFold(p);var h=this.getFoldsInRange(r.range);h.length>0&&(this.removeFolds(h),h.forEach((function(e){r.addSubFold(e)})));for(var f=0;f<n.length;f++){var g=n[f];if(l==g.start.row){g.addFold(r),s=!0;break}if(a==g.end.row){if(g.addFold(r),s=!0,!r.sameRow){var y=n[f+1];if(y&&y.start.row==l){g.merge(y);break}}break}if(l<=g.start.row)break}return s||(g=this.$addFoldLine(new i(this.$foldData,r))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:r,action:"add"}),r},this.addFolds=function(e){e.forEach((function(e){this.addFold(e)}),this)},this.removeFold=function(e){var t=e.foldLine,r=t.start.row,n=t.end.row,i=this.$foldData,o=t.folds;if(1==o.length)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))o.pop(),t.end.row=o[o.length-1].end.row,t.end.column=o[o.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))o.shift(),t.start.row=o[0].start.row,t.start.column=o[0].start.column;else if(e.sameRow)o.splice(o.indexOf(e),1);else{var s=t.split(e.start.row,e.start.column);(o=s.folds).shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(r,n):this.$updateRowLengthCache(r,n)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);t.forEach((function(e){this.removeFold(e)}),this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach((function(t){e.restoreRange(t),this.addFold(t)}),this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach((function(e){this.expandFold(e)}),this)},this.unfold=function(e,t){var r,i;if(null==e?(r=new n(0,0,this.getLength(),0),t=!0):r="number"==typeof e?new n(e,0,e,this.getLine(e).length):"row"in e?n.fromPoints(e,e):e,i=this.getFoldsInRangeList(r),t)this.removeFolds(i);else for(var o=i;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(r);if(i.length)return i},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var r=this.getFoldLine(e,t);return r?r.end.row:e},this.getRowFoldStart=function(e,t){var r=this.getFoldLine(e,t);return r?r.start.row:e},this.getFoldDisplayLine=function(e,t,r,n,i){null==n&&(n=e.start.row),null==i&&(i=0),null==t&&(t=e.end.row),null==r&&(r=this.getLine(t).length);var o=this.doc,s="";return e.walk((function(e,t,r,a){if(!(t<n)){if(t==n){if(r<i)return;a=Math.max(i,a)}s+=null!=e?e:o.getLine(t).substring(a,r)}}),t,r),s},this.getDisplayLine=function(e,t,r,n){var i,o=this.getFoldLine(e);return o?this.getFoldDisplayLine(o,e,t,r,n):(i=this.doc.getLine(e)).substring(n||0,t||i.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map((function(t){var r=t.folds.map((function(e){return e.clone()}));return new i(e,r)}))},this.toggleFold=function(e){var t,r,n=this.selection.getRange();if(n.isEmpty()){var i=n.start;if(t=this.getFoldAt(i.row,i.column))return void this.expandFold(t);(r=this.findMatchingBracket(i))?1==n.comparePoint(r)?n.end=r:(n.start=r,n.start.column++,n.end.column--):(r=this.findMatchingBracket({row:i.row,column:i.column+1}))?(1==n.comparePoint(r)?n.end=r:n.start=r,n.start.column++):n=this.getCommentFoldRange(i.row,i.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length)return void this.expandFolds(o);1==o.length&&(t=o[0])}if(t||(t=this.getFoldAt(n.start.row,n.start.column)),t&&t.range.toString()==n.toString())this.expandFold(t);else{var s="...";if(!n.isMultiLine()){if((s=this.getTextRange(n)).length<4)return;s=s.trim().substring(0,2)+".."}this.addFold(s,n)}},this.getCommentFoldRange=function(e,t,r){var i=new s(this,e,t),o=i.getCurrentToken(),a=o.type;if(o&&/^comment|string/.test(a)){"comment"==(a=a.match(/comment|string/)[0])&&(a+="|doc-start");var c=new RegExp(a),l=new n;if(1!=r){do{o=i.stepBackward()}while(o&&c.test(o.type));i.stepForward()}if(l.start.row=i.getCurrentTokenRow(),l.start.column=i.getCurrentTokenColumn()+2,i=new s(this,e,t),-1!=r){var u=-1;do{if(o=i.stepForward(),-1==u){var d=this.getState(i.$row);c.test(d)||(u=i.$row)}else if(i.$row>u)break}while(o&&c.test(o.type));o=i.stepBackward()}else o=i.getCurrentToken();return l.end.row=i.getCurrentTokenRow(),l.end.column=i.getCurrentTokenColumn()+o.value.length-2,l}},this.foldAll=function(e,t,r){null==r&&(r=1e5);var n=this.foldWidgets;if(n){t=t||this.getLength();for(var i=e=e||0;i<t;i++)if(null==n[i]&&(n[i]=this.getFoldWidget(i)),"start"==n[i]){var o=this.getFoldWidgetRange(i);if(o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e){i=o.end.row;try{var s=this.addFold("...",o);s&&(s.collapseChildren=r)}catch(e){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var r=this.foldWidgets;if(!r||t&&r[e])return{};for(var n,i=e-1;i>=0;){var o=r[i];if(null==o&&(o=r[i]=this.getFoldWidget(i)),"start"==o){var s=this.getFoldWidgetRange(i);if(n||(n=s),s&&s.end.row>=e)break}i--}return{range:-1!==i&&s,firstRange:n}},this.onFoldWidgetClick=function(e,t){var r={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,r)){var n=t.target||t.srcElement;n&&/ace_fold-widget/.test(n.className)&&(n.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var r=this.getFoldWidget(e),n=this.getLine(e),i="end"===r?-1:1,o=this.getFoldAt(e,-1===i?0:n.length,i);if(o)return t.children||t.all?this.removeFold(o):this.expandFold(o),o;var s=this.getFoldWidgetRange(e,!0);if(s&&!s.isMultiLine()&&(o=this.getFoldAt(s.start.row,s.start.column,1))&&s.isEqual(o.range))return this.removeFold(o),o;if(t.siblings){var a=this.getParentFoldRangeData(e);if(a.range)var c=a.range.start.row+1,l=a.range.end.row;this.foldAll(c,l,t.all?1e4:0)}else t.children?(l=s?s.end.row:this.getLength(),this.foldAll(e+1,l,t.all?1e4:0)):s&&(t.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var r=this.$toggleFoldWidget(t,{});if(!r){var n=this.getParentFoldRangeData(t,!0);if(r=n.range||n.firstRange){t=r.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold("...",r)}}},this.updateFoldWidgets=function(e){var t=e.start.row,r=e.end.row-t;if(0===r)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,r+1,null);else{var n=Array(r+1);n.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,n)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(e,t,r){"use strict";var n=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var r=t||this.getLine(e.row).charAt(e.column-1);if(""==r)return null;var n=r.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],e):this.$findOpeningBracket(n[2],e):null},this.getBracketRange=function(e){var t,r=this.getLine(e.row),n=!0,o=r.charAt(e.column-1),s=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(s||(o=r.charAt(e.column),e={row:e.row,column:e.column+1},s=o&&o.match(/([\(\[\{])|([\)\]\}])/),n=!1),!s)return null;if(s[1]){if(!(a=this.$findClosingBracket(s[1],e)))return null;t=i.fromPoints(e,a),n||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a;if(!(a=this.$findOpeningBracket(s[2],e)))return null;t=i.fromPoints(a,e),n||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,r){var i=this.$brackets[e],o=1,s=new n(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){r||(r=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var c=t.column-s.getCurrentTokenColumn()-2,l=a.value;;){for(;c>=0;){var u=l.charAt(c);if(u==i){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:c+s.getCurrentTokenColumn()}}else u==e&&(o+=1);c-=1}do{a=s.stepBackward()}while(a&&!r.test(a.type));if(null==a)break;c=(l=a.value).length-1}return null}},this.$findClosingBracket=function(e,t,r){var i=this.$brackets[e],o=1,s=new n(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){r||(r=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var c=t.column-s.getCurrentTokenColumn();;){for(var l=a.value,u=l.length;c<u;){var d=l.charAt(c);if(d==i){if(0==(o-=1))return{row:s.getCurrentTokenRow(),column:c+s.getCurrentTokenColumn()}}else d==e&&(o+=1);c+=1}do{a=s.stepForward()}while(a&&!r.test(a.type));if(null==a)break;c=0}return null}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(e,t,r){"use strict";var n=e("./lib/oop"),i=e("./lib/lang"),o=e("./bidihandler").BidiHandler,s=e("./config"),a=e("./lib/event_emitter").EventEmitter,c=e("./selection").Selection,l=e("./mode/text").Mode,u=e("./range").Range,d=e("./document").Document,p=e("./background_tokenizer").BackgroundTokenizer,h=e("./search_highlight").SearchHighlight,f=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++f.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new d(e)),this.setDocument(e),this.selection=new c(this),this.$bidiHandler=new o(this),s.resetOptions(this),this.setMode(t),s._signal("session",this)};f.$uid=0,function(){n.implement(this,a),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,r=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>r&&(this.$docRowCache.splice(r,t),this.$screenRowCache.splice(r,t))},this.$getRowCacheIndex=function(e,t){for(var r=0,n=e.length-1;r<=n;){var i=r+n>>1,o=e[i];if(t>o)r=i+1;else{if(!(t<o))return i;n=i-1}}return r-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var r,n=this.bgTokenizer.getTokens(e),i=0;if(null==t){var o=n.length-1;i=this.getLine(e).length}else for(o=0;o<n.length&&!((i+=n[o].value.length)>=t);o++);return(r=n[o])?(r.index=o,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,r,n){var i=this.$markerId++,o={range:e,type:r||"line",renderer:"function"==typeof r?r:null,clazz:t,inFront:!!n,id:i};return n?(this.$frontMarkers[i]=o,this._signal("changeFrontMarker")):(this.$backMarkers[i]=o,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(e.update){var r=this.$markerId++;return e.id=r,e.inFront=!!t,t?(this.$frontMarkers[r]=e,this._signal("changeFrontMarker")):(this.$backMarkers[r]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new h(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,r,n){"number"!=typeof t&&(r=t,t=e),r||(r="ace_step");var i=new u(e,0,t,1/0);return i.id=this.addMarker(i,r,"fullLine",n),i},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var r=this.getLine(e),n=!1;if(t>0&&(n=!!r.charAt(t-1).match(this.tokenRe)),n||(n=!!r.charAt(t).match(this.tokenRe)),n)var i=this.tokenRe;else if(/^\s+$/.test(r.slice(t-1,t+1)))i=/\s/;else i=this.nonTokenRe;var o=t;if(o>0){do{o--}while(o>=0&&r.charAt(o).match(i));o++}for(var s=t;s<r.length&&r.charAt(s).match(i);)s++;return new u(e,o,e,s)},this.getAWordRange=function(e,t){for(var r=this.getWordRange(e,t),n=this.getLine(r.end.row);n.charAt(r.end.column).match(/[ \t]/);)r.end.column+=1;return r},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=s.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var r=e,n=r.path}else n=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new l),this.$modes[n]&&!r)return this.$onChangeMode(this.$modes[n]),void(t&&t());this.$modeId=n,s.loadModule(["mode",n],function(e){if(this.$modeId!==n)return t&&t();this.$modes[n]&&!r?this.$onChangeMode(this.$modes[n]):e&&e.Mode&&(e=new e.Mode(r),r||(this.$modes[n]=e,e.$id=n),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var r=e.getTokenizer();if(void 0!==r.addEventListener){var n=this.onReloadTokenizer.bind(this);r.addEventListener("update",n)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(r);else{this.bgTokenizer=new p(r);var i=this;this.bgTokenizer.addEventListener("update",(function(e){i._signal("tokenizerUpdate",e)}))}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){s.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach((function(t){t&&t.screenWidth>e&&(e=t.screenWidth)})),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),r=this.$rowLengthCache,n=0,i=0,o=this.$foldData[i],s=o?o.start.row:1/0,a=t.length,c=0;c<a;c++){if(c>s){if((c=o.end.row+1)>=a)break;s=(o=this.$foldData[i++])?o.start.row:1/0}null==r[c]&&(r[c]=this.$getStringScreenWidth(t[c])[0]),r[c]>n&&(n=r[c])}this.screenWidth=n}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var r=e.length-1;-1!=r;r--){var n=e[r];"insert"==n.action||"remove"==n.action?this.doc.revertDelta(n):n.folds&&this.addFolds(n.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var r=0;r<e.length;r++){var n=e[r];"insert"!=n.action&&"remove"!=n.action||this.doc.applyDelta(n)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function r(e){return t?"insert"!==e.action:"insert"===e.action}for(var n,i,o=0;o<e.length;o++){var s=e[o];s.start&&(n?r(s)?(i=s.start,-1==n.compare(i.row,i.column)&&n.setStart(i),i=s.end,1==n.compare(i.row,i.column)&&n.setEnd(i),!0):(i=s.start,-1==n.compare(i.row,i.column)&&(n=u.fromPoints(s.start,s.start)),!1):r(s)?(n=u.fromPoints(s.start,s.end),!0):(n=u.fromPoints(s.start,s.start),!1))}return n},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,r){var n=this.getTextRange(e),i=this.getFoldsInRange(e),o=u.fromPoints(t,t);if(!r){this.remove(e);var s=e.start.row-e.end.row;(l=s?-e.end.column:e.start.column-e.end.column)&&(o.start.row==e.end.row&&o.start.column>e.end.column&&(o.start.column+=l),o.end.row==e.end.row&&o.end.column>e.end.column&&(o.end.column+=l)),s&&o.start.row>=e.end.row&&(o.start.row+=s,o.end.row+=s)}if(o.end=this.insert(o.start,n),i.length){var a=e.start,c=o.start,l=(s=c.row-a.row,c.column-a.column);this.addFolds(i.map((function(e){return(e=e.clone()).start.row==a.row&&(e.start.column+=l),e.end.row==a.row&&(e.end.column+=l),e.start.row+=s,e.end.row+=s,e})))}return o},this.indentRows=function(e,t,r){r=r.replace(/\t/g,this.getTabString());for(var n=e;n<=t;n++)this.doc.insertInLine({row:n,column:0},r)},this.outdentRows=function(e){for(var t=e.collapseRows(),r=new u(0,0,0,0),n=this.getTabSize(),i=t.start.row;i<=t.end.row;++i){var o=this.getLine(i);r.start.row=i,r.end.row=i;for(var s=0;s<n&&" "==o.charAt(s);++s);s<n&&"\t"==o.charAt(s)?(r.start.column=s,r.end.column=s+1):(r.start.column=0,r.end.column=s),this.remove(r)}},this.$moveLines=function(e,t,r){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),r<0){if((i=this.getRowFoldStart(e+r))<0)return 0;var n=i-e}else if(r>0){var i;if((i=this.getRowFoldEnd(t+r))>this.doc.getLength()-1)return 0;n=i-t}else{e=this.$clipRowToDocument(e);n=(t=this.$clipRowToDocument(t))-e+1}var o=new u(e,0,t,Number.MAX_VALUE),s=this.getFoldsInRange(o).map((function(e){return(e=e.clone()).start.row+=n,e.end.row+=n,e})),a=0==r?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+n,a),s.length&&this.addFolds(s),n},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var r=this.doc.getLength();e>=r?(e=r-1,t=this.doc.getLine(r-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var r=this.$wrapLimitRange;r.max<0&&(r={min:t,max:t});var n=this.$constrainWrapLimit(e,r.min,r.max);return n!=this.$wrapLimit&&n>1&&(this.$wrapLimit=n,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,r){return t&&(e=Math.max(t,e)),r&&(e=Math.min(r,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,r=e.action,n=e.start,i=e.end,o=n.row,s=i.row,a=s-o,c=null;if(this.$updating=!0,0!=a)if("remove"===r){this[t?"$wrapData":"$rowLengthCache"].splice(o,a);var l=this.$foldData;c=this.getFoldsInRange(e),this.removeFolds(c);var u=0;if(g=this.getFoldLine(i.row)){g.addRemoveChars(i.row,i.column,n.column-i.column),g.shiftRow(-a);var d=this.getFoldLine(o);d&&d!==g&&(d.merge(g),g=d),u=l.indexOf(g)+1}for(;u<l.length;u++){(g=l[u]).start.row>=i.row&&g.shiftRow(-a)}s=o}else{var p=Array(a);p.unshift(o,0);var h=t?this.$wrapData:this.$rowLengthCache;h.splice.apply(h,p);l=this.$foldData,u=0;if(g=this.getFoldLine(o)){var f=g.range.compareInside(n.row,n.column);0==f?(g=g.split(n.row,n.column))&&(g.shiftRow(a),g.addRemoveChars(s,0,i.column-n.column)):-1==f&&(g.addRemoveChars(o,0,i.column-n.column),g.shiftRow(a)),u=l.indexOf(g)+1}for(;u<l.length;u++){var g;(g=l[u]).start.row>=o&&g.shiftRow(a)}}else a=Math.abs(e.start.column-e.end.column),"remove"===r&&(c=this.getFoldsInRange(e),this.removeFolds(c),a=-a),(g=this.getFoldLine(o))&&g.addRemoveChars(o,n.column,a);return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(o,s):this.$updateRowLengthCache(o,s),c},this.$updateRowLengthCache=function(e,t,r){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(r,n){var i,o,s=this.doc.getAllLines(),a=this.getTabSize(),c=this.$wrapData,l=this.$wrapLimit,u=r;for(n=Math.min(n,s.length-1);u<=n;)(o=this.getFoldLine(u,o))?(i=[],o.walk(function(r,n,o,a){var c;if(null!=r){(c=this.$getDisplayTokens(r,i.length))[0]=e;for(var l=1;l<c.length;l++)c[l]=t}else c=this.$getDisplayTokens(s[n].substring(a,o),i.length);i=i.concat(c)}.bind(this),o.end.row,s[o.end.row].length+1),c[o.start.row]=this.$computeWrapSplits(i,l,a),u=o.end.row+1):(i=this.$getDisplayTokens(s[u]),c[u]=this.$computeWrapSplits(i,l,a),u++)};var e=3,t=4,r=10,o=11,c=12;function d(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}this.$computeWrapSplits=function(n,i,s){if(0==n.length)return[];var a=[],l=n.length,u=0,d=0,p=this.$wrapAsCode,h=this.$indentedSoftWrap,f=i<=Math.max(2*s,8)||!1===h?0:Math.floor(i/2);function g(e){for(var t=e-u,i=u;i<e;i++){var l=n[i];12!==l&&2!==l||(t-=1)}a.length||(y=function(){var e=0;if(0===f)return e;if(h)for(var t=0;t<n.length;t++){var i=n[t];if(i==r)e+=1;else{if(i!=o){if(i==c)continue;break}e+=s}}return p&&!1!==h&&(e+=s),Math.min(e,f)}(),a.indent=y),d+=t,a.push(d),u=e}for(var y=0;l-u>i-y;){var m=u+i-y;if(n[m-1]>=r&&n[m]>=r)g(m);else if(n[m]!=e&&n[m]!=t){for(var v=Math.max(m-(i-(i>>2)),u-1);m>v&&n[m]<e;)m--;if(p){for(;m>v&&n[m]<e;)m--;for(;m>v&&9==n[m];)m--}else for(;m>v&&n[m]<r;)m--;m>v?g(++m):(2==n[m=u+i]&&m--,g(m-y))}else{for(;m!=u-1&&n[m]!=e;m--);if(m>u){g(m);continue}for(m=u+i;m<n.length&&n[m]==t;m++);if(m==n.length)break;g(m)}}return a},this.$getDisplayTokens=function(e,t){var n,i=[];t=t||0;for(var s=0;s<e.length;s++){var a=e.charCodeAt(s);if(9==a){n=this.getScreenTabSize(i.length+t),i.push(o);for(var l=1;l<n;l++)i.push(c)}else 32==a?i.push(r):a>39&&a<48||a>57&&a<64?i.push(9):a>=4352&&d(a)?i.push(1,2):i.push(1)}return i},this.$getStringScreenWidth=function(e,t,r){if(0==t)return[0,0];var n,i;for(null==t&&(t=1/0),r=r||0,i=0;i<e.length&&(9==(n=e.charCodeAt(i))?r+=this.getScreenTabSize(r):n>=4352&&d(n)?r+=2:r+=1,!(r>t));i++);return[r,i]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),r=this.$wrapData[t.row];return r.length&&r[0]<t.column?r.indent:0}return 0},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var r=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(r)},this.getDocumentLastRowColumnPosition=function(e,t){var r=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(r,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,r){if(e<0)return{row:0,column:0};var n,i,o=0,s=0,a=0,c=0,l=this.$screenRowCache,u=this.$getRowCacheIndex(l,e),d=l.length;if(d&&u>=0){a=l[u],o=this.$docRowCache[u];var p=e>l[d-1]}else p=!d;for(var h=this.getLength()-1,f=this.getNextFoldLine(o),g=f?f.start.row:1/0;a<=e&&!(a+(c=this.getRowLength(o))>e||o>=h);)a+=c,++o>g&&(o=f.end.row+1,g=(f=this.getNextFoldLine(o,f))?f.start.row:1/0),p&&(this.$docRowCache.push(o),this.$screenRowCache.push(a));if(f&&f.start.row<=o)n=this.getFoldDisplayLine(f),o=f.start.row;else{if(a+c<=e||o>h)return{row:h,column:this.getLine(h).length};n=this.getLine(o),f=null}var y=0,m=Math.floor(e-a);if(this.$useWrapMode){var v=this.$wrapData[o];v&&(i=v[m],m>0&&v.length&&(y=v.indent,s=v[m-1]||v[v.length-1],n=n.substring(s)))}return void 0!==r&&this.$bidiHandler.isBidiRow(a+m,o,m)&&(t=this.$bidiHandler.offsetToCol(r)),s+=this.$getStringScreenWidth(n,t-y)[1],this.$useWrapMode&&s>=i&&(s=i-1),f?f.idxToPosition(s):{row:o,column:s}},this.documentToScreenPosition=function(e,t){if(void 0===t)var r=this.$clipPositionToDocument(e.row,e.column);else r=this.$clipPositionToDocument(e,t);e=r.row,t=r.column;var n,i=0,o=null;(n=this.getFoldAt(e,t,1))&&(e=n.start.row,t=n.start.column);var s,a=0,c=this.$docRowCache,l=this.$getRowCacheIndex(c,e),u=c.length;if(u&&l>=0){a=c[l],i=this.$screenRowCache[l];var d=e>c[u-1]}else d=!u;for(var p=this.getNextFoldLine(a),h=p?p.start.row:1/0;a<e;){if(a>=h){if((s=p.end.row+1)>e)break;h=(p=this.getNextFoldLine(s,p))?p.start.row:1/0}else s=a+1;i+=this.getRowLength(a),a=s,d&&(this.$docRowCache.push(a),this.$screenRowCache.push(i))}var f="";p&&a>=h?(f=this.getFoldDisplayLine(p,e,t),o=p.start.row):(f=this.getLine(e).substring(0,t),o=e);var g=0;if(this.$useWrapMode){var y=this.$wrapData[o];if(y){for(var m=0;f.length>=y[m];)i++,m++;f=f.substring(y[m-1]||0,f.length),g=m>0?y.indent:0}}return{row:i,column:g+this.$getStringScreenWidth(f)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var r=this.$wrapData.length,n=0,i=(a=0,(t=this.$foldData[a++])?t.start.row:1/0);n<r;){var o=this.$wrapData[n];e+=o?o.length+1:1,++n>i&&(n=t.end.row+1,i=(t=this.$foldData[a++])?t.start.row:1/0)}else{e=this.getLength();for(var s=this.$foldData,a=0;a<s.length;a++)e-=(t=s[a]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,r,n){if(0===r)return[0,0];var i,o;for(r||(r=1/0),n=n||0,o=0;o<t.length&&!((n+="\t"===(i=t.charAt(o))?this.getScreenTabSize(n):e.getCharacterWidth(i))>r);o++);return[n,o]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()},this.isFullWidth=d}.call(f.prototype),e("./edit_session/folding").Folding.call(f.prototype),e("./edit_session/bracket_match").BracketMatch.call(f.prototype),s.defineOptions(f.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){(e=parseInt(e))>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=f})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(e,t,r){"use strict";var n=e("./lib/lang"),i=e("./lib/oop"),o=e("./range").Range,s=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return n.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$options,r=this.$matchIterator(e,t);if(!r)return!1;var n=null;return r.forEach((function(e,r,i,s){return n=new o(e,r,i,s),!(r==s&&t.start&&t.start.start&&0!=t.skipCurrent&&n.isEqual(t.start))||(n=null,!1)})),n},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var r=t.range,i=r?e.getLines(r.start.row,r.end.row):e.doc.getAllLines(),s=[],a=t.re;if(t.$isMultiLine){var c,l=a.length,u=i.length-l;e:for(var d=a.offset||0;d<=u;d++){for(var p=0;p<l;p++)if(-1==i[d+p].search(a[p]))continue e;var h=i[d],f=i[d+l-1],g=h.length-h.match(a[0])[0].length,y=f.match(a[l-1])[0].length;c&&c.end.row===d&&c.end.column>g||(s.push(c=new o(d,g,d+l-1,y)),l>2&&(d=d+l-2))}}else for(var m=0;m<i.length;m++){var v=n.getMatchOffsets(i[m],a);for(p=0;p<v.length;p++){var b=v[p];s.push(new o(m,b.offset,m,b.offset+b.length))}}if(r){var w=r.start.column,S=r.start.column;for(m=0,p=s.length-1;m<p&&s[m].start.column<w&&s[m].start.row==r.start.row;)m++;for(;m<p&&s[p].end.column>S&&s[p].end.row==r.end.row;)p--;for(s=s.slice(m,p+1),m=0,p=s.length;m<p;m++)s[m].start.row+=r.start.row,s[m].end.row+=r.start.row}return s},this.replace=function(e,t){var r=this.$options,n=this.$assembleRegExp(r);if(r.$isMultiLine)return t;if(n){var i=n.exec(e);if(!i||i[0].length!=e.length)return null;if(t=e.replace(n,t),r.preserveCase){t=t.split("");for(var o=Math.min(e.length,e.length);o--;){var s=e[o];s&&s.toLowerCase()!=s?t[o]=t[o].toUpperCase():t[o]=t[o].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var r=e.needle;if(!e.needle)return e.re=!1;e.regExp||(r=n.escapeRegExp(r)),e.wholeWord&&(r=function(e,t){function r(e){return/\w/.test(e)||t.regExp?"\\b":""}return r(e[0])+e+r(e[e.length-1])}(r,e));var i=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(r),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(r,i);try{var o=new RegExp(r,i)}catch(e){o=!1}return e.re=o},this.$assembleMultilineRegExp=function(e,t){for(var r=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),n=[],i=0;i<r.length;i++)try{n.push(new RegExp(r[i],t))}catch(e){return!1}return n},this.$matchIterator=function(e,t){var r=this.$assembleRegExp(t);if(!r)return!1;var n=1==t.backwards,i=0!=t.skipCurrent,o=t.range,s=t.start;s||(s=o?o[n?"end":"start"]:e.selection.getRange()),s.start&&(s=s[i!=n?"end":"start"]);var a=o?o.start.row:0,c=o?o.end.row:e.getLength()-1;if(n)var l=function(e){var r=s.row;if(!d(r,s.column,e)){for(r--;r>=a;r--)if(d(r,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(r=c,a=s.row;r>=a;r--)if(d(r,Number.MAX_VALUE,e))return}};else l=function(e){var r=s.row;if(!d(r,s.column,e)){for(r+=1;r<=c;r++)if(d(r,0,e))return;if(0!=t.wrap)for(r=a,c=s.row;r<=c;r++)if(d(r,0,e))return}};if(t.$isMultiLine)var u=r.length,d=function(t,i,o){var s=n?t-u+1:t;if(!(s<0)){var a=e.getLine(s),c=a.search(r[0]);if(!(!n&&c<i||-1===c)){for(var l=1;l<u;l++)if(-1==(a=e.getLine(s+l)).search(r[l]))return;var d=a.match(r[u-1])[0].length;if(!(n&&d>i))return!!o(s,c,s+u-1,d)||void 0}}};else if(n)d=function(t,n,i){var o,s=e.getLine(t),a=[],c=0;for(r.lastIndex=0;o=r.exec(s);){var l=o[0].length;if(c=o.index,!l){if(c>=s.length)break;r.lastIndex=c+=1}if(o.index+l>n)break;a.push(o.index,l)}for(var u=a.length-1;u>=0;u-=2){var d=a[u-1];if(i(t,d,t,d+(l=a[u])))return!0}};else d=function(t,n,i){var o,s,a=e.getLine(t);for(r.lastIndex=n;s=r.exec(a);){var c=s[0].length;if(i(t,o=s.index,t,o+c))return!0;if(!c&&(r.lastIndex=o+=1,o>=a.length))return!1}};return{forEach:l}}}).call(s.prototype),t.Search=s})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,r){"use strict";var n=e("../lib/keys"),i=e("../lib/useragent"),o=n.KEY_MODS;function s(e,t){this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function a(e,t){s.call(this,e,t),this.$singleCommand=!1}a.prototype=s.prototype,function(){function e(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var r=e&&("string"==typeof e?e:e.name);e=this.commands[r],t||delete this.commands[r];var n=this.commandKeyBinding;for(var i in n){var o=n[i];if(o==e)delete n[i];else if(Array.isArray(o)){var s=o.indexOf(e);-1!=s&&(o.splice(s,1),1==o.length&&(n[i]=o[0]))}}},this.bindKey=function(e,t,r){if("object"==typeof e&&e&&(null==r&&(r=e.position),e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach((function(e){var n="";if(-1!=e.indexOf(" ")){var i=e.split(/\s+/);e=i.pop(),i.forEach((function(e){var t=this.parseKeys(e),r=o[t.hashId]+t.key;n+=(n?" ":"")+r,this._addCommandToBinding(n,"chainKeys")}),this),n+=" "}var s=this.parseKeys(e),a=o[s.hashId]+s.key;this._addCommandToBinding(n+a,t,r)}),this)},this._addCommandToBinding=function(t,r,n){var i,o=this.commandKeyBinding;if(r)if(!o[t]||this.$singleCommand)o[t]=r;else{Array.isArray(o[t])?-1!=(i=o[t].indexOf(r))&&o[t].splice(i,1):o[t]=[o[t]],"number"!=typeof n&&(n=e(r));var s=o[t];for(i=0;i<s.length;i++){if(e(s[i])>n)break}s.splice(i,0,r)}else delete o[t]},this.addCommands=function(e){e&&Object.keys(e).forEach((function(t){var r=e[t];if(r){if("string"==typeof r)return this.bindKey(r,t);"function"==typeof r&&(r={exec:r}),"object"==typeof r&&(r.name||(r.name=t),this.addCommand(r))}}),this)},this.removeCommands=function(e){Object.keys(e).forEach((function(t){this.removeCommand(e[t])}),this)},this.bindKeys=function(e){Object.keys(e).forEach((function(t){this.bindKey(t,e[t])}),this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(e){return e})),r=t.pop(),i=n[r];if(n.FUNCTION_KEYS[i])r=n.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:r,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:r.toUpperCase(),hashId:-1}}for(var o=0,s=t.length;s--;){var a=n.KEY_MODS[t[s]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+t[s]+" in "+e),!1;o|=a}return{key:r,hashId:o}},this.findKeyCommand=function(e,t){var r=o[e]+t;return this.commandKeyBinding[r]},this.handleKeyboard=function(e,t,r,n){if(!(n<0)){var i=o[t]+r,s=this.commandKeyBinding[i];return e.$keyChain&&(e.$keyChain+=" "+i,s=this.commandKeyBinding[e.$keyChain]||s),!s||"chainKeys"!=s&&"chainKeys"!=s[s.length-1]?(e.$keyChain&&(t&&4!=t||1!=r.length?(-1==t||n>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-i.length-1)),{command:s}):(e.$keyChain=e.$keyChain||i,{command:"null"})}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(s.prototype),t.HashHandler=s,t.MultiHashHandler=a})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(e,t,r){"use strict";var n=e("../lib/oop"),i=e("../keyboard/hash_handler").MultiHashHandler,o=e("../lib/event_emitter").EventEmitter,s=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",(function(e){return e.command.exec(e.editor,e.args||{})}))};n.inherits(s,i),function(){n.implement(this,o),this.exec=function(e,t,r){if(Array.isArray(e)){for(var n=e.length;n--;)if(this.exec(e[n],t,r))return!0;return!1}if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var i={editor:t,command:e,args:r};return i.returnValue=this._emit("exec",i),this._signal("afterExec",i),!1!==i.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach((function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])}),this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map((function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e}))}}.call(s.prototype),t.CommandManager=s})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(e,t,r){"use strict";var n=e("../lib/lang"),i=e("../config"),o=e("../range").Range;function s(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",bindKey:s("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",(function(t){t.init(e),e.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",bindKey:s("Alt-E","F4"),exec:function(e){i.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(e){i.loadModule("./ext/error_marker",(function(t){t.showErrorMarker(e,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(e,t){"number"!=typeof t||isNaN(t)||e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:s("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:s("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",(function(t){t.Search(e)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",(function(t){t.Search(e,!0)}))}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(n.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(e){for(var t=e.selection.isBackwards(),r=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),s=e.session.doc.getLine(r.row).length,a=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,c=e.session.doc.getLine(r.row),l=r.row+1;l<=i.row+1;l++){var u=n.stringTrimLeft(n.stringTrimRight(e.session.doc.getLine(l)));0!==u.length&&(u=" "+u),c+=u}i.row+1<e.session.doc.getLength()-1&&(c+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new o(r.row,0,i.row+2,0),c),a>0?(e.selection.moveCursorTo(r.row,r.column),e.selection.selectTo(r.row,r.column+a)):(s=e.session.doc.getLine(r.row).length>s?s+1:s,e.selection.moveCursorTo(r.row,s))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(e){var t=e.session.doc.getLength()-1,r=e.session.doc.getLine(t).length,n=e.selection.rangeList.ranges,i=[];n.length<1&&(n=[e.selection.getRange()]);for(var s=0;s<n.length;s++)s==n.length-1&&(n[s].end.row===t&&n[s].end.column===r||i.push(new o(n[s].end.row,n[s].end.column,t,r))),0===s?0===n[s].start.row&&0===n[s].start.column||i.push(new o(0,0,n[s].start.row,n[s].start.column)):i.push(new o(n[s-1].end.row,n[s-1].end.column,n[s].start.row,n[s].start.column));e.exitMultiSelectMode(),e.clearSelection();for(s=0;s<i.length;s++)e.selection.addRange(i[s],!1)},readOnly:!0,scrollIntoView:"none"},{name:"openCommandPallete",description:"Open command pallete",bindKey:s("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}]})),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],(function(e,t,r){"use strict";e("./lib/fixoldbrowsers");var n=e("./lib/oop"),i=e("./lib/dom"),o=e("./lib/lang"),s=e("./lib/useragent"),a=e("./keyboard/textinput").TextInput,c=e("./mouse/mouse_handler").MouseHandler,l=e("./mouse/fold_handler").FoldHandler,u=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,p=e("./search").Search,h=e("./range").Range,f=e("./lib/event_emitter").EventEmitter,g=e("./commands/command_manager").CommandManager,y=e("./commands/default_commands").commands,m=e("./config"),v=e("./token_iterator").TokenIterator,b=e("./clipboard"),w=function(e,t,r){var n=e.getContainerElement();this.container=n,this.renderer=e,this.id="editor"+ ++w.$uid,this.commands=new g(s.isMac?"mac":"win",y),"object"==typeof document&&(this.textInput=new a(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new c(this),new l(this)),this.keyBinding=new u(this),this.$search=(new p).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(e,t){t._$emitInputEvent.schedule(31)})),this.setSession(t||r&&r.session||new d("")),m.resetOptions(this),r&&this.setOptions(r),m._signal("editor",this)};w.$uid=0,function(){n.implement(this,f),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp){if(e&&!1===e.returnValue)return this.curOp=null;if(1==e&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var t=this.curOp.command,r=t&&t.scrollIntoView;if(r){switch(r){case"center-animate":r="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var n=this.selection.getRange(),i=this.renderer.layerConfig;(n.start.row>=i.lastRow||n.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==r&&this.renderer.animateScrolling(this.curOp.scrollTop)}var o=this.selection.toJSON();this.curOp.selectionAfter=o,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(o),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,r=this.$mergeableCommands,n=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var i=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),n=n&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else n=n&&-1!==r.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(n=!1),n?this.session.mergeUndoDeltas=!0:-1!==r.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"==typeof e&&"ace"!=e){this.$keybindingId=e;var r=this;m.loadModule(["keybinding",e],(function(n){r.$keybindingId==e&&r.keyBinding.setKeyboardHandler(n&&n.handler),t&&t()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var r=this.session.getSelection();r.off("changeCursor",this.$onCursorChange),r.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout((function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){var r=t.findMatchingBracket(e.getCursorPosition());if(r)var n=new h(r.row,r.column,r.row,r.column+1);else if(t.$mode.getMatching)n=t.$mode.getMatching(e.session);n&&(t.$bracketHighlight=t.addMarker(n,"ace_bracket","text"))}}),50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout((function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var r=e.getCursorPosition(),n=new v(e.session,r.row,r.column),i=n.getCurrentToken();if(!i||!/\b(?:tag-open|tag-name)/.test(i.type))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);if(-1==i.type.indexOf("tag-open")||(i=n.stepForward())){var o=i.value,s=0,a=n.stepBackward();if("<"==a.value)do{a=i,(i=n.stepForward())&&i.value===o&&-1!==i.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(i&&s>=0);else{do{i=a,a=n.stepBackward(),i&&i.value===o&&-1!==i.type.indexOf("tag-name")&&("<"===a.value?s++:"</"===a.value&&s--)}while(a&&s<=0);n.stepForward()}if(!i)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var c=n.getCurrentTokenRow(),l=n.getCurrentTokenColumn(),u=new h(c,l,c,l+i.value.length),d=t.$backMarkers[t.$tagHighlight];t.$tagHighlight&&null!=d&&0!==u.compareRange(d.range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),t.$tagHighlight||(t.$tagHighlight=t.addMarker(u,"ace_bracket","text"))}}}),50)}},this.focus=function(){var e=this;setTimeout((function(){e.isFocused()||e.textInput.focus()})),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,r=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,r,t),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var r=new h(e.row,e.column,e.row,1/0);r.id=t.addMarker(r,"ace_active-line","screenLine"),t.$highlightLineMarker=r}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var r=this.selection.getRange(),n=this.getSelectionStyle();t.$selectionMarker=t.addMarker(r,"ace_selection",n)}var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var r=t.start.column,n=t.end.column,i=e.getLine(t.start.row),o=i.substring(r,n);if(!(o.length>5e3)&&/[\w\d]/.test(o)){var s=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o}),a=i.substring(r-1,n+1);if(s.test(a))return s}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),r=!1;if(!e&&this.$copyWithEmptySelection){r=!0;for(var n=this.selection.getAllRanges(),i=0;i<n.length;i++){var o=n[i];i&&n[i-1].start.row==o.start.row||(e+=this.session.getLine(o.start.row)+t)}}var s={text:e};return this._signal("copy",s),b.lineMode=r?s.text:"",s.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){var r={text:e,event:t};this.commands.exec("paste",this,r)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,r=t==b.lineMode,n=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)r?n.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(r)this.selection.rangeList.ranges.forEach((function(e){n.insert({row:e.start.row,column:0},t)}));else{var i=t.split(/\r\n|\r|\n/),o=this.selection.rangeList.ranges,s=!(2!=i.length||i[0]&&i[1]);if(i.length!=o.length||s)return this.commands.exec("insertstring",this,t);for(var a=o.length;a--;){var c=o[a];c.isEmpty()||n.remove(c),n.insert(c.start,i[a])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var r=this.session,n=r.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var o=n.transformAction(r.getState(i.row),"insertion",this,r,e);o&&(e!==o.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=o.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==e.indexOf("\n")){(s=new h.fromPoints(i,i)).end.column+=e.length,this.session.remove(s)}}else{var s=this.getSelectionRange();i=this.session.remove(s),this.clearSelection()}if("\n"==e||"\r\n"==e){var a=r.getLine(i.row);if(i.column>a.search(/\S|$/)){var c=a.substr(i.column).search(/\S|$/);r.doc.removeInLine(i.row,i.column,i.column+c)}}this.clearSelection();var l=i.column,u=r.getState(i.row),d=(a=r.getLine(i.row),n.checkOutdent(u,a,e));if(r.insert(i,e),o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new h(i.row,l+o.selection[0],i.row,l+o.selection[1])):this.selection.setSelectionRange(new h(i.row+o.selection[0],o.selection[1],i.row+o.selection[2],o.selection[3]))),r.getDocument().isNewLine(e)){var p=n.getNextLineIndent(u,a.slice(0,i.column),r.getTabString());r.insert({row:i.row+1,column:0},p)}d&&n.autoOutdent(u,r,i.row)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var r=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(r):r(),this.endOperation()},this.applyComposition=function(e,t){var r;(t.extendLeft||t.extendRight)&&((r=this.selection.getRange()).start.column-=t.extendLeft,r.end.column+=t.extendRight,this.selection.setRange(r),e||r.isEmpty()||this.remove());(!e&&this.selection.isEmpty()||this.insert(e,!0),t.restoreStart||t.restoreEnd)&&((r=this.selection.getRange()).start.column-=t.restoreStart,r.end.column-=t.restoreEnd,this.selection.setRange(r))},this.onCommandKey=function(e,t,r){return this.keyBinding.onCommandKey(e,t,r)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var r=this.session,n=r.getState(t.start.row),i=r.getMode().transformAction(n,"deletion",this,r,t);if(0===t.end.column){var o=r.getTextRange(t);if("\n"==o[o.length-1]){var s=r.getLine(t.end.row);/^\s+$/.test(s)&&(t.end.column=s.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var r,n,i=this.session.getLine(e.row);t<i.length?(r=i.charAt(t)+i.charAt(t-1),n=new h(e.row,t-1,e.row,t+1)):(r=i.charAt(t-1)+i.charAt(t-2),n=new h(e.row,t-2,e.row,t)),this.session.replace(n,r),this.session.selection.moveToPosition(n.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),r=this.session.getTextRange(t);this.session.replace(t,r.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),r=this.session.getTextRange(t);this.session.replace(t,r.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){u=this.$getSelectedRows();return void e.indentRows(u.first,u.last,"\t")}}var n=e.getLine(t.start.row),i=t.start,s=e.getTabSize(),a=e.documentToScreenColumn(i.row,i.column);if(this.session.getUseSoftTabs())var c=s-a%s,l=o.stringRepeat(" ",c);else{for(c=a%s;" "==n[t.start.column-1]&&c;)t.start.column--,c--;this.selection.setSelectionRange(t),l="\t"}return this.insert(l)}var u=this.$getSelectedRows();e.indentRows(u.first,u.last,"\t")},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,r=[],n=e.first;n<=e.last;n++)r.push(t.getLine(n));r.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}));var i=new h(0,0,0,0);for(n=e.first;n<=e.last;n++){var o=t.getLine(n);i.start.row=n,i.end.row=n,i.end.column=o.length,t.replace(i,r[n-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),r=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,r,e)},this.getNumberAt=function(e,t){var r=/[\-]?[0-9]+(?:\.[0-9]+)?/g;r.lastIndex=0;for(var n=this.session.getLine(e);r.lastIndex<t;){var i=r.exec(n);if(i.index<=t&&i.index+i[0].length>=t)return{value:i[0],start:i.index,end:i.index+i[0].length}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,r=this.selection.getCursor().column,n=new h(t,r-1,t,r),i=this.session.getTextRange(n);if(!isNaN(parseFloat(i))&&isFinite(i)){var o=this.getNumberAt(t,r);if(o){var s=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-s,c=parseFloat(o.value);c*=Math.pow(10,a),s!==o.end&&r<s?e*=Math.pow(10,o.end-r-1):e*=Math.pow(10,o.end-r),c+=e;var l=(c/=Math.pow(10,a)).toFixed(a),u=new h(t,o.start,t,o.end);this.session.replace(u,l),this.moveCursorTo(t,Math.max(o.start+1,r+l.length-o.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var r=this.getSelectedText(),n=this.selection.getWordRange().start.column,i=r.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),s=t-n-1;s<0&&(s=0);var a=0,c=0,l=this;r.match(/[A-Za-z0-9_]+/)&&i.forEach((function(t,i){c=a+t.length,s>=a&&s<=c&&(r=t,l.selection.clearSelection(),l.moveCursorTo(e,a+n),l.selection.selectTo(e,c+n)),a=c}));for(var u,d=this.$toggleWordPairs,p=0;p<d.length;p++)for(var h=d[p],f=0;f<=1;f++){var g=+!f,y=r.match(new RegExp("^\\s?_?("+o.escapeRegExp(h[f])+")\\s?$","i"));if(y)r.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(y[1])+")($|\\s)","g"))&&(u=r.replace(new RegExp(o.escapeRegExp(h[f]),"i"),(function(e){var t=h[g];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+h[g].charAt(0).toUpperCase()+t.substr(1)),t})),this.insert(u),u="")}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,r=e.getRange(),n=e.isBackwards();if(r.isEmpty()){var i=r.start.row;t.duplicateLines(i,i)}else{var o=n?r.start:r.end,s=t.insert(o,t.getTextRange(r),!1);r.start=o,r.end=s,e.setSelectionRange(r,n)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,r){return this.session.moveText(e,t,r)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var r,n,i=this.selection;if(!i.inMultiSelectMode||this.inVirtualSelectionMode){var o=i.toOrientedRange();r=this.$getSelectedRows(o),n=this.session.$moveLines(r.first,r.last,t?0:e),t&&-1==e&&(n=0),o.moveBy(n,0),i.fromOrientedRange(o)}else{var s=i.rangeList.ranges;i.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,c=0,l=s.length,u=0;u<l;u++){var d=u;s[u].moveBy(a,0);for(var p=(r=this.$getSelectedRows(s[u])).first,h=r.last;++u<l;){c&&s[u].moveBy(c,0);var f=this.$getSelectedRows(s[u]);if(t&&f.first!=h)break;if(!t&&f.first>h+1)break;h=f.last}for(u--,a=this.session.$moveLines(p,h,t?0:e),t&&-1==e&&(d=u+1);d<=u;)s[d].moveBy(a,0),d++;t||(a=0),c+=a}i.fromOrientedRange(i.ranges[0]),i.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var r=this.renderer,n=this.renderer.layerConfig,i=e*Math.floor(n.height/n.lineHeight);!0===t?this.selection.$moveSelection((function(){this.moveCursorBy(i,0)})):!1===t&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection());var o=r.scrollTop;r.scrollBy(0,i*n.lineHeight),null!=t&&r.scrollCursorIntoView(null,.5),r.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,r,n){this.renderer.scrollToLine(e,t,r,n)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var r=this.getCursorPosition(),n=new v(this.session,r.row,r.column),i=n.getCurrentToken(),o=i||n.stepForward();if(o){var s,a,c=!1,l={},u=r.column-o.start,d={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;u<o.value.length&&!c;u++)if(d[o.value[u]])switch(a=d[o.value[u]]+"."+o.type.replace("rparen","lparen"),isNaN(l[a])&&(l[a]=0),o.value[u]){case"(":case"[":case"{":l[a]++;break;case")":case"]":case"}":l[a]--,-1===l[a]&&(s="bracket",c=!0)}}else-1!==o.type.indexOf("tag-name")&&(isNaN(l[o.value])&&(l[o.value]=0),"<"===i.value?l[o.value]++:"</"===i.value&&l[o.value]--,-1===l[o.value]&&(s="tag",c=!0));c||(i=o,o=n.stepForward(),u=0)}while(o&&!c);if(s){var p,f;if("bracket"===s)(p=this.session.getBracketRange(r))||(f=(p=new h(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+u-1,n.getCurrentTokenRow(),n.getCurrentTokenColumn()+u-1)).start,(t||f.row===r.row&&Math.abs(f.column-r.column)<2)&&(p=this.session.getBracketRange(f)));else if("tag"===s){if(!o||-1===o.type.indexOf("tag-name"))return;var g=o.value;if(0===(p=new h(n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2,n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2)).compare(r.row,r.column)){c=!1;do{o=i,(i=n.stepBackward())&&(-1!==i.type.indexOf("tag-close")&&p.setEnd(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1),o.value===g&&-1!==o.type.indexOf("tag-name")&&("<"===i.value?l[g]++:"</"===i.value&&l[g]--,0===l[g]&&(c=!0)))}while(i&&!c)}o&&o.type.indexOf("tag-name")&&(f=p.start).row==r.row&&Math.abs(f.column-r.column)<2&&(f=p.end)}(f=p&&p.cursor||f)&&(e?p&&t?this.selection.setRange(p):p&&p.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(f.row,f.column):this.selection.moveTo(f.row,f.column))}}},this.gotoLine=function(e,t,r){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,r)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var r=this.$search.find(this.session),n=0;return r?(this.$tryReplace(r,e)&&(n=1),this.selection.setSelectionRange(r),this.renderer.scrollSelectionIntoView(r.start,r.end),n):n},this.replaceAll=function(e,t){t&&this.$search.set(t);var r=this.$search.findAll(this.session),n=0;if(!r.length)return n;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=r.length-1;o>=0;--o)this.$tryReplace(r[o],e)&&n++;return this.selection.setSelectionRange(i),n},this.$tryReplace=function(e,t){var r=this.session.getTextRange(e);return null!==(t=this.$search.replace(r,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,r){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&n.mixin(t,e);var i=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(i)||this.$search.$options.needle)||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var o=this.$search.find(this.session);return t.preventScroll?o:o?(this.revealRange(o,r),o):(t.backwards?i.start=i.end:i.end=i.start,void this.selection.setRange(i))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var r=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(r)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,r=this,n=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var o=this.on("changeSelection",(function(){n=!0})),s=this.renderer.on("beforeRender",(function(){n&&(t=r.renderer.container.getBoundingClientRect())})),a=this.renderer.on("afterRender",(function(){if(n&&t&&(r.isFocused()||r.searchBox&&r.searchBox.isFocused())){var e=r.renderer,o=e.$cursorLayer.$pixelPos,s=e.layerConfig,a=o.top-s.offset;null!=(n=o.top>=0&&a+t.top<0||!(o.top<s.height&&o.top+t.top+s.lineHeight>window.innerHeight)&&null)&&(i.style.top=a+"px",i.style.left=o.left+"px",i.style.height=s.lineHeight+"px",i.scrollIntoView(n)),n=t=null}}));this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",o),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",s))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,i.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},this.prompt=function(e,t,r){var n=this;m.loadModule("./ext/prompt",(function(i){i.prompt(n,e,t,r)}))}}.call(w.prototype),m.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?S.attach(this):S.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?S.attach(this):S.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.renderer.$composition||this.getValue();if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),i.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!e&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),i.addCssClass(this.container,"ace_hasPlaceholder");var t=i.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var S={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"":""))+""},getWidth:function(e,t,r){return Math.max(t.toString().length,(r.lastRow+1).toString().length,2)*r.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=w})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(e,t,r){"use strict";var n=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,r){this.$fromUndo||e!=this.$lastDelta&&(!1!==t&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev),"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e),this.lastDeltas.push(e))},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var r=this.$undoStack,n=r.length;n--;){var i=r[n][0];if(i.id<=e)break;i.id<t&&(i.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var r=this.selections,n=r.length;n--;){var i=r[n];if(i.rev<e)return t&&(i=r[n+1]),i}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var r=this.$undoStack,n=null,i=0,o=r.length;o--;){var s=r[o][0];if(s.id<t&&!n&&(n=o+1),s.id<=e){i=o+1;break}}return r.slice(i,n)},this.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},this.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var r=this.$undoStack;if(function(e,t){for(var r=t;r--;){var n=e[r];if(n&&!n[0].ignore){for(;r<t-1;){var i=u(e[r],e[r+1]);e[r]=i[0],e[r+1]=i[1],r++}return!0}}}(r,r.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var n=r.pop(),i=null;return n&&n.length&&(i=e.undoChanges(n,t),this.$redoStack.push(n),this.$syncRev()),this.$fromUndo=!1,i}},this.redo=function(e,t){if(this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var r=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(e,t){for(var r=0;r<t.length;r++)for(var n=t[r],i=0;i<n.length;i++)g(e,n[i])}(this.$redoStack,r),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(e){e[0].id=++this.$maxRev}),this)}var n=this.$redoStack.pop(),i=null;return n&&(i=e.redoChanges(n,t),this.$undoStack.push(n),this.$syncRev()),this.$fromUndo=!1,i},this.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],r=t&&t[0].id||0;this.$redoStackBaseRev=r,this.$rev=r},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(e){null==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?a(e):a(this.$undoStack)+"\n---\n"+a(this.$redoStack)}}).call(n.prototype);var i=e("./range").Range,o=i.comparePoints;i.comparePoints;function s(e){return{row:e.row,column:e.column}}function a(e){if(e=e||this,Array.isArray(e))return e.map(a).join("\n");var t="";return e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(c).join("\n"):c(e.value)),e.start&&(t+=c(e)),(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")"),t}function c(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function l(e,t){var r="insert"==e.action,n="insert"==t.action;if(r&&n)if(o(t.start,e.end)>=0)p(t,e,-1);else{if(!(o(t.start,e.start)<=0))return null;p(e,t,1)}else if(r&&!n)if(o(t.start,e.end)>=0)p(t,e,-1);else{if(!(o(t.end,e.start)<=0))return null;p(e,t,-1)}else if(!r&&n)if(o(t.start,e.start)>=0)p(t,e,1);else{if(!(o(t.start,e.start)<=0))return null;p(e,t,1)}else if(!r&&!n)if(o(t.start,e.start)>=0)p(t,e,1);else{if(!(o(t.end,e.start)<=0))return null;p(e,t,-1)}return[t,e]}function u(e,t){for(var r=e.length;r--;)for(var n=0;n<t.length;n++)if(!l(e[r],t[n])){for(;r<e.length;){for(;n--;)l(t[n],e[r]);n=t.length,r++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function d(e,t){var r="insert"==e.action,n="insert"==t.action;if(r&&n)o(e.start,t.start)<0?p(t,e,1):p(e,t,1);else if(r&&!n)o(e.start,t.end)>=0?p(e,t,-1):o(e.start,t.start)<=0?p(t,e,1):(p(e,i.fromPoints(t.start,e.start),-1),p(t,e,1));else if(!r&&n)o(t.start,e.end)>=0?p(t,e,-1):o(t.start,e.start)<=0?p(e,t,1):(p(t,i.fromPoints(e.start,t.start),-1),p(e,t,1));else if(!r&&!n)if(o(t.start,e.end)>=0)p(t,e,-1);else{var s,a;if(!(o(t.end,e.start)<=0))return o(e.start,t.start)<0&&(s=e,e=f(e,t.start)),o(e.end,t.end)>0&&(a=f(e,t.end)),h(t.end,e.start,e.end,-1),a&&!s&&(e.lines=a.lines,e.start=a.start,e.end=a.end,a=e),[t,s,a].filter(Boolean);p(e,t,-1)}return[t,e]}function p(e,t,r){h(e.start,t.start,t.end,r),h(e.end,t.start,t.end,r)}function h(e,t,r,n){e.row==(1==n?t:r).row&&(e.column+=n*(r.column-t.column)),e.row+=n*(r.row-t.row)}function f(e,t){var r=e.lines,n=e.end;e.end=s(t);var i=e.end.row-e.start.row,o=r.splice(i,r.length),a=i?t.column:t.column-e.start.column;return r.push(o[0].substring(0,a)),o[0]=o[0].substr(a),{start:s(t),end:n,lines:o,action:e.action}}function g(e,t){t=function(e){return{start:s(e.start),end:s(e.end),action:e.action,lines:e.lines.slice()}}(t);for(var r=e.length;r--;){for(var n=e[r],i=0;i<n.length;i++){var o=d(n[i],t);t=o[0],2!=o.length&&(o[2]?(n.splice(i+1,1,o[1],o[2]),i++):o[1]||(n.splice(i,1),i--))}n.length||e.splice(r,1)}return e}t.UndoManager=n})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(e,t,r){"use strict";var n=e("../lib/dom"),i=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){n.translate(this.element,0,-e.firstRowScreen*e.lineHeight%this.canvasHeight-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,r){var n=t.firstRowScreen*t.lineHeight,i=Math.floor(n/this.canvasHeight);return r.documentToScreenRow(e,0)*t.lineHeight-i*this.canvasHeight},this.computeLineHeight=function(e,t,r){return t.lineHeight*r.getRowLength(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=n.createFragment(this.element),r=0;r<e.length;r++)t.appendChild(e[r].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=n.createFragment(this.element),r=0;r<e.length;r++)t.appendChild(e[r].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,r,i){var o=this.cellCache.pop();if(!o){var s=n.createElement("div");i&&i(s),this.element.appendChild(s),o={element:s,text:"",row:e}}return o.row=e,o}}).call(i.prototype),t.Lines=i})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],(function(e,t,r){"use strict";var n=e("../lib/dom"),i=e("../lib/oop"),o=e("../lib/lang"),s=e("../lib/event_emitter").EventEmitter,a=e("./lines").Lines,c=function(e){this.element=n.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new a(this.element),this.$lines.$offsetCoefficient=1};function l(e){var t=document.createTextNode("");e.appendChild(t);var r=n.createElement("span");return e.appendChild(r),e}(function(){i.implement(this,s),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var r=e[t],n=r.row,i=this.$annotations[n];i||(i=this.$annotations[n]={text:[]});var s=r.text;s=s?o.escapeHTML(s):r.html||"",-1===i.text.indexOf(s)&&i.text.push(s);var a=r.type;"error"==a?i.className=" ace_error":"warning"==a&&" ace_error"!=i.className?i.className=" ace_warning":"info"!=a||i.className||(i.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,r=e.end.row-t;if(0===r);else if("remove"==e.action)this.$annotations.splice(t,r+1,null);else{var n=new Array(r+1);n.unshift(t,1),this.$annotations.splice.apply(this.$annotations,n)}}},this.update=function(e){this.config=e;var t=this.session,r=e.firstRow,n=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=n,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var i=t.getNextFoldLine(r),o=i?i.start.row:1/0,s=null,a=-1,c=r;;){if(c>o&&(c=i.end.row+1,o=(i=t.getNextFoldLine(c,i))?i.start.row:1/0),c>n){for(;this.$lines.getLength()>a+1;)this.$lines.pop();break}(s=this.$lines.get(++a))?s.row=c:(s=this.$lines.createCell(c,e,this.session,l),this.$lines.push(s)),this.$renderCell(s,e,i,c),c++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,r=t.gutterRenderer||this.$renderer,n=t.$firstLineNumber,i=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(i=t.getLength()+n-1);var o=r?r.getWidth(t,i,e):i.toString().length*e.characterWidth,s=this.$padding||this.$computePadding();(o+=s.left+s.right)===this.gutterWidth||isNaN(o)||(this.gutterWidth=o,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",o))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var r=0;r<t.length;r++){var n=t[r];if(n.row>=this.$cursorRow){if(n.row>this.$cursorRow){var i=this.session.getFoldLine(this.$cursorRow);if(!(r>0&&i&&i.start.row==t[r-1].row))break;n=t[r-1]}n.element.className="ace_gutter-active-line "+n.element.className,this.$cursorCell=n;break}}}}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var r=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),n=this.oldLastRow;if(this.oldLastRow=r,!t||n<e.firstRow)return this.update(e);if(r<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(n>r)for(i=this.session.getFoldedRowCount(r+1,n);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),r>n&&this.$lines.push(this.$renderLines(e,n+1,r)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,r){for(var n=[],i=t,o=this.session.getNextFoldLine(i),s=o?o.start.row:1/0;i>s&&(i=o.end.row+1,s=(o=this.session.getNextFoldLine(i,o))?o.start.row:1/0),!(i>r);){var a=this.$lines.createCell(i,e,this.session,l);this.$renderCell(a,e,o,i),n.push(a),i++}return n},this.$renderCell=function(e,t,r,i){var o=e.element,s=this.session,a=o.childNodes[0],c=o.childNodes[1],l=s.$firstLineNumber,u=s.$breakpoints,d=s.$decorations,p=s.gutterRenderer||this.$renderer,h=this.$showFoldWidgets&&s.foldWidgets,f=r?r.start.row:Number.MAX_VALUE,g="ace_gutter-cell ";if(this.$highlightGutterLine&&(i==this.$cursorRow||r&&i<this.$cursorRow&&i>=f&&this.$cursorRow<=r.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),u[i]&&(g+=u[i]),d[i]&&(g+=d[i]),this.$annotations[i]&&(g+=this.$annotations[i].className),o.className!=g&&(o.className=g),h){var y=h[i];null==y&&(y=h[i]=s.getFoldWidget(i))}if(y){g="ace_fold-widget ace_"+y;"start"==y&&i==f&&i<r.end.row?g+=" ace_closed":g+=" ace_open",c.className!=g&&(c.className=g);var m=t.lineHeight+"px";n.setStyle(c.style,"height",m),n.setStyle(c.style,"display","inline-block")}else c&&n.setStyle(c.style,"display","none");var v=(p?p.getText(s,i):i+l).toString();return v!==a.data&&(a.data=v),n.setStyle(e.element.style,"height",this.$lines.computeLineHeight(i,t,s)+"px"),n.setStyle(e.element.style,"top",this.$lines.computeLineTop(i,t,s)+"px"),e.text=v,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?n.addCssClass(this.element,"ace_folding-enabled"):n.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=n.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),r=this.element.getBoundingClientRect();return e.x<t.left+r.left?"markers":this.$showFoldWidgets&&e.x>r.right-t.right?"foldWidgets":void 0}}).call(c.prototype),t.Gutter=c})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(e,t,r){"use strict";var n=e("../range").Range,i=e("../lib/dom"),o=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var r=-1!=this.i&&this.element.childNodes[this.i];r?this.i++:(r=document.createElement("div"),this.element.appendChild(r),this.i=-1),r.style.cssText=t,r.className=e},this.update=function(e){if(e){var t;for(var r in this.config=e,this.i=0,this.markers){var n=this.markers[r];if(n.range){var i=n.range.clipRows(e.firstRow,e.lastRow);if(!i.isEmpty())if(i=i.toScreenRange(this.session),n.renderer){var o=this.$getTop(i.start.row,e),s=this.$padding+i.start.column*e.characterWidth;n.renderer(t,i,s,o,e)}else"fullLine"==n.type?this.drawFullLineMarker(t,i,n.clazz,e):"screenLine"==n.type?this.drawScreenLineMarker(t,i,n.clazz,e):i.isMultiLine()?"text"==n.type?this.drawTextMarker(t,i,n.clazz,e):this.drawMultiLineMarker(t,i,n.clazz,e):this.drawSingleLineMarker(t,i,n.clazz+" ace_start ace_br15",e)}else n.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,r,i,o){for(var s=this.session,a=t.start.row,c=t.end.row,l=a,u=0,d=0,p=s.getScreenLastRowColumn(l),h=new n(l,t.start.column,l,d);l<=c;l++)h.start.row=h.end.row=l,h.start.column=l==a?t.start.column:s.getRowWrapIndent(l),h.end.column=p,u=d,d=p,p=l+1<c?s.getScreenLastRowColumn(l+1):l==c?0:t.end.column,this.drawSingleLineMarker(e,h,r+(l==a?" ace_start":"")+" ace_br"+((l==a||l==a+1&&t.start.column?1:0)|(u<d?2:0)|(d>p?4:0)|(l==c?8:0)),i,l==c?0:1,o)},this.drawMultiLineMarker=function(e,t,r,n,i){var o=this.$padding,s=n.lineHeight,a=this.$getTop(t.start.row,n),c=o+t.start.column*n.characterWidth;(i=i||"",this.session.$bidiHandler.isBidiRow(t.start.row))?((l=t.clone()).end.row=l.start.row,l.end.column=this.session.getLine(l.start.row).length,this.drawBidiSingleLineMarker(e,l,r+" ace_br1 ace_start",n,null,i)):this.elt(r+" ace_br1 ace_start","height:"+s+"px;right:0;top:"+a+"px;left:"+c+"px;"+(i||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var l;(l=t.clone()).start.row=l.end.row,l.start.column=0,this.drawBidiSingleLineMarker(e,l,r+" ace_br12",n,null,i)}else{a=this.$getTop(t.end.row,n);var u=t.end.column*n.characterWidth;this.elt(r+" ace_br12","height:"+s+"px;width:"+u+"px;top:"+a+"px;left:"+o+"px;"+(i||""))}if(!((s=(t.end.row-t.start.row-1)*n.lineHeight)<=0)){a=this.$getTop(t.start.row+1,n);var d=(t.start.column?1:0)|(t.end.column?0:8);this.elt(r+(d?" ace_br"+d:""),"height:"+s+"px;right:0;top:"+a+"px;left:"+o+"px;"+(i||""))}},this.drawSingleLineMarker=function(e,t,r,n,i,o){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,r,n,i,o);var s=n.lineHeight,a=(t.end.column+(i||0)-t.start.column)*n.characterWidth,c=this.$getTop(t.start.row,n),l=this.$padding+t.start.column*n.characterWidth;this.elt(r,"height:"+s+"px;width:"+a+"px;top:"+c+"px;left:"+l+"px;"+(o||""))},this.drawBidiSingleLineMarker=function(e,t,r,n,i,o){var s=n.lineHeight,a=this.$getTop(t.start.row,n),c=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach((function(e){this.elt(r,"height:"+s+"px;width:"+e.width+(i||0)+"px;top:"+a+"px;left:"+(c+e.left)+"px;"+(o||""))}),this)},this.drawFullLineMarker=function(e,t,r,n,i){var o=this.$getTop(t.start.row,n),s=n.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,n)-o),this.elt(r,"height:"+s+"px;top:"+o+"px;left:0;right:0;"+(i||""))},this.drawScreenLineMarker=function(e,t,r,n,i){var o=this.$getTop(t.start.row,n),s=n.lineHeight;this.elt(r,"height:"+s+"px;top:"+o+"px;left:0;right:0;"+(i||""))}}).call(o.prototype),t.Marker=o})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],(function(e,t,r){"use strict";var n=e("../lib/oop"),i=e("../lib/dom"),o=e("../lib/lang"),s=e("./lines").Lines,a=e("../lib/event_emitter").EventEmitter,c=function(e){this.dom=i,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)};(function(){n.implement(this,a),this.EOF_CHAR="",this.EOL_CHAR_LF="",this.EOL_CHAR_CRLF="",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="",this.SPACE_CHAR="",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,t="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],r=1;r<e+1;r++){if(this.showInvisibles)(n=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",n.textContent=o.stringRepeat(this.TAB_CHAR,r),t.push(n);else t.push(this.dom.createTextNode(o.stringRepeat(" ",r),this.element))}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var n,i="ace_indent-guide",s="",a="";if(this.showInvisibles){i+=" ace_invisible",s=" ace_invisible_space",a=" ace_invisible_tab";var c=o.stringRepeat(this.SPACE_CHAR,this.tabSize),l=o.stringRepeat(this.TAB_CHAR,this.tabSize)}else l=c=o.stringRepeat(" ",this.tabSize);(n=this.dom.createElement("span")).className=i+s,n.textContent=c,this.$tabStrings[" "]=n,(n=this.dom.createElement("span")).className=i+a,n.textContent=l,this.$tabStrings["\t"]=n}},this.updateLines=function(e,t,r){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var n=Math.max(t,e.firstRow),i=Math.min(r,e.lastRow),o=this.element.childNodes,s=0,a=e.firstRow;a<n;a++){if(c=this.session.getFoldLine(a)){if(c.containsRow(n)){n=c.start.row;break}a=c.end.row}s++}for(var c,l=!1,u=(a=n,(c=this.session.getNextFoldLine(a))?c.start.row:1/0);a>u&&(a=c.end.row+1,u=(c=this.session.getNextFoldLine(a,c))?c.start.row:1/0),!(a>i);){var d=o[s++];if(d){this.dom.removeChildren(d),this.$renderLine(d,a,a==u&&c),l&&(d.style.top=this.$lines.computeLineTop(a,e,this.session)+"px");var p=e.lineHeight*this.session.getRowLength(a)+"px";d.style.height!=p&&(l=!0,d.style.height=p)}a++}if(l)for(;s<this.$lines.cells.length;){var h=this.$lines.cells[s++];h.element.style.top=this.$lines.computeLineTop(h.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var r=e.lastRow,n=t?t.lastRow:-1;if(!t||n<e.firstRow)return this.update(e);if(r<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)this.$lines.shift();if(t.lastRow>e.lastRow)for(i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,r){for(var n=[],o=t,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;o>a&&(o=s.end.row+1,a=(s=this.session.getNextFoldLine(o,s))?s.start.row:1/0),!(o>r);){var c=this.$lines.createCell(o,e,this.session),l=c.element;this.dom.removeChildren(l),i.setStyle(l.style,"height",this.$lines.computeLineHeight(o,e,this.session)+"px"),i.setStyle(l.style,"top",this.$lines.computeLineTop(o,e,this.session)+"px"),this.$renderLine(l,o,o==a&&s),this.$useLineGroups()?l.className="ace_line_group":l.className="ace_line",n.push(c),o++}return n},this.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,r=e.lastRow,n=this.$lines;n.getLength();)n.pop();n.push(this.$renderLinesFragment(e,t,r))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,r,n){for(var i,s=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,a=this.dom.createFragment(this.element),c=0;i=s.exec(n);){var l=i[1],u=i[2],d=i[3],p=i[4],h=i[5];if(this.showInvisibles||!u){var f=c!=i.index?n.slice(c,i.index):"";if(c=i.index+i[0].length,f&&a.appendChild(this.dom.createTextNode(f,this.element)),l){var g=this.session.getScreenTabSize(t+i.index);a.appendChild(this.$tabStrings[g].cloneNode(!0)),t+=g-1}else if(u){if(this.showInvisibles)(m=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",m.textContent=o.stringRepeat(this.SPACE_CHAR,u.length),a.appendChild(m);else a.appendChild(this.com.createTextNode(u,this.element))}else if(d){(m=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",m.textContent=o.stringRepeat(this.SPACE_CHAR,d.length),a.appendChild(m)}else if(p){t+=1,(m=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",m.className=this.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",m.textContent=this.showInvisibles?this.SPACE_CHAR:p,a.appendChild(m)}else if(h){t+=1,(m=this.dom.createElement("span")).style.width=2*this.config.characterWidth+"px",m.className="ace_cjk",m.textContent=h,a.appendChild(m)}}}if(a.appendChild(this.dom.createTextNode(c?n.slice(c):n,this.element)),this.$textToken[r.type])e.appendChild(a);else{var y="ace_"+r.type.replace(/\./g," ace_"),m=this.dom.createElement("span");"fold"==r.type&&(m.style.width=r.value.length*this.config.characterWidth+"px"),m.className=y,m.appendChild(a),e.appendChild(m)}return t+n.length},this.renderIndentGuide=function(e,t,r){var n=t.search(this.$indentGuideRe);if(n<=0||n>=r)return t;if(" "==t[0]){for(var i=(n-=n%this.tabSize)/this.tabSize,o=0;o<i;o++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(n)}if("\t"==t[0]){for(o=0;o<n;o++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return t.substr(n)}return t},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,r){var n=0,i=0,s=r[0],a=0,c=this.$createLineElement();e.appendChild(c);for(var l=0;l<t.length;l++){var u=t[l],d=u.value;if(0==l&&this.displayIndentGuides){if(n=d.length,!(d=this.renderIndentGuide(c,d,s)))continue;n-=d.length}if(n+d.length<s)a=this.$renderToken(c,a,u,d),n+=d.length;else{for(;n+d.length>=s;)a=this.$renderToken(c,a,u,d.substring(0,s-n)),d=d.substring(s-n),n=s,c=this.$createLineElement(),e.appendChild(c),c.appendChild(this.dom.createTextNode(o.stringRepeat("",r.indent),this.element)),a=0,s=r[++i]||Number.MAX_VALUE;0!=d.length&&(n+=d.length,a=this.$renderToken(c,a,u,d))}}r[r.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(c,a,null,"",!0)},this.$renderSimpleLine=function(e,t){var r=0,n=t[0],i=n.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(r=this.$renderToken(e,r,n,i));for(var o=1;o<t.length;o++){if(r+(i=(n=t[o]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,r,n,i);r=this.$renderToken(e,r,n,i)}},this.$renderOverflowMessage=function(e,t,r,n,i){r&&this.$renderToken(e,t,r,n.slice(0,this.MAX_LINE_LENGTH-t));var o=this.dom.createElement("span");o.className="ace_inline_button ace_keyword ace_toggle_wrap",o.textContent=i?"<hide>":"<click to see more...>",e.appendChild(o)},this.$renderLine=function(e,t,r){if(r||0==r||(r=this.session.getFoldLine(t)),r)var n=this.$getFoldLineTokens(t,r);else n=this.session.getTokens(t);var i=e;if(n.length){var o=this.session.getRowSplitData(t);if(o&&o.length){this.$renderWrappedLine(e,n,o);i=e.lastChild}else{i=e;this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i)),this.$renderSimpleLine(i,n)}}else this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i));if(this.showInvisibles&&i){r&&(t=r.end.row);var s=this.dom.createElement("span");s.className="ace_invisible ace_invisible_eol",s.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,i.appendChild(s)}},this.$getFoldLineTokens=function(e,t){var r=this.session,n=[];var i=r.getTokens(e);return t.walk((function(e,t,o,s,a){null!=e?n.push({type:"fold",value:e}):(a&&(i=r.getTokens(t)),i.length&&function(e,t,r){for(var i=0,o=0;o+e[i].value.length<t;)if(o+=e[i].value.length,++i==e.length)return;for(o!=t&&((s=e[i].value.substring(t-o)).length>r-t&&(s=s.substring(0,r-t)),n.push({type:e[i].type,value:s}),o=t+s.length,i+=1);o<r&&i<e.length;){var s;(s=e[i].value).length+o>r?n.push({type:e[i].type,value:s.substring(0,r-o)}):n.push(e[i]),o+=s.length,i+=1}}(i,s,o))}),t.end.row,this.session.getLine(t.end.row).length),n},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(c.prototype),t.Text=c})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(e,t,r){"use strict";var n=e("../lib/dom"),i=function(e){this.element=n.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),n.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){for(var t=this.cursors,r=t.length;r--;)n.setStyle(t[r].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){n.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){n.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,n.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=n.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,n.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,n.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&n.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&setTimeout(function(){n.addCssClass(this.element,"ace_smooth-blinking")}.bind(this)),n.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout((function(){e(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){e(!0),t()}),this.blinkInterval),t()}else this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var r=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(r.row,e.row)?this.session.$bidiHandler.getPosLeft(r.column):r.column*this.config.characterWidth),top:(r.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,r=0,i=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);r=0;for(var o=t.length;r<o;r++){var s=this.getPixelPosition(t[r].cursor,!0);if(!((s.top>e.height+e.offset||s.top<0)&&r>1)){var a=this.cursors[i++]||this.addCursor(),c=a.style;this.drawCursor?this.drawCursor(a,s,e,t[r],this.session):this.isCursorInView(s,e)?(n.setStyle(c,"display","block"),n.translate(a,s.left,s.top),n.setStyle(c,"width",Math.round(e.characterWidth)+"px"),n.setStyle(c,"height",e.lineHeight+"px")):n.setStyle(c,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var l=this.session.getOverwrite();this.$setOverwrite(l),this.$pixelPos=s,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?n.addCssClass(this.element,"ace_overwrite-cursors"):n.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(i.prototype),t.Cursor=i})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(e,t,r){"use strict";var n=e("./lib/oop"),i=e("./lib/dom"),o=e("./lib/event"),s=e("./lib/event_emitter").EventEmitter,a=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)};(function(){n.implement(this,s),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(a.prototype);var c=function(e,t){a.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};n.inherits(c,a),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){this.scrollHeight=e,e>32768?(this.coeff=32768/e,e=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(c.prototype);var l=function(e,t){a.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};n.inherits(l,a),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(l.prototype),t.ScrollBar=c,t.ScrollBarV=c,t.ScrollBarH=l,t.VScrollBar=c,t.HScrollBar=l})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(e,t,r){"use strict";var n=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var r=this;this._flush=function(e){r.pending=!1;var t=r.changes;if(t&&(n.blockIdle(100),r.changes=0,r.onRender(t)),r.changes){if(r.$recursionLimit--<0)return;r.schedule()}else r.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(n.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(i.prototype),t.RenderLoop=i})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(e,t,r){var n=e("../lib/oop"),i=e("../lib/dom"),o=e("../lib/lang"),s=e("../lib/event"),a=e("../lib/useragent"),c=e("../lib/event_emitter").EventEmitter,l="function"==typeof ResizeObserver,u=200,d=t.FontMetrics=function(e){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.innerHTML=o.stringRepeat("X",256),this.$characterSize={width:0,height:0},l?this.$addObserver():this.checkForSizeChanges()};(function(){n.implement(this,c),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",a.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){if(void 0===e&&(e=this.$measureSizes()),e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver((function(t){var r=t[0].contentRect;e.checkForSizeChanges({height:r.height,width:r.width/256})})),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=s.onIdle((function t(){e.checkForSizeChanges(),s.onIdle(t,500)}),500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/256};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.innerHTML=o.stringRepeat(e,256),this.$main.getBoundingClientRect().width/256},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=i.buildDom([e(0,0),e(u,0),e(0,u),e(u,u)],this.el)},this.transformCoordinates=function(e,t){e&&(e=o(1/this.$getZoom(this.el),e));function r(e,t,r){var n=e[1]*t[0]-e[0]*t[1];return[(-t[1]*r[0]+t[0]*r[1])/n,(+e[1]*r[0]-e[0]*r[1])/n]}function n(e,t){return[e[0]-t[0],e[1]-t[1]]}function i(e,t){return[e[0]+t[0],e[1]+t[1]]}function o(e,t){return[e*t[0],e*t[1]]}function s(e){var t=e.getBoundingClientRect();return[t.left,t.top]}this.els||this.$initTransformMeasureNodes();var a=s(this.els[0]),c=s(this.els[1]),l=s(this.els[2]),d=s(this.els[3]),p=r(n(d,c),n(d,l),n(i(c,l),i(d,a))),h=o(1+p[0],n(c,a)),f=o(1+p[1],n(l,a));if(t){var g=t,y=p[0]*g[0]/u+p[1]*g[1]/u+1,m=i(o(g[0],h),o(g[1],f));return i(o(1/y/u,m),a)}var v=n(e,a),b=r(n(h,o(p[0],v)),n(f,o(p[1],v)),v);return o(u,b)}}).call(d.prototype)})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],(function(e,t,r){"use strict";var n=e("./lib/oop"),i=e("./lib/dom"),o=e("./config"),s=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,c=e("./layer/text").Text,l=e("./layer/cursor").Cursor,u=e("./scrollbar").HScrollBar,d=e("./scrollbar").VScrollBar,p=e("./renderloop").RenderLoop,h=e("./layer/font_metrics").FontMetrics,f=e("./lib/event_emitter").EventEmitter,g='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;perspective: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);opacity: 0.7;transform-origin: left;text-indent: 10px;}',y=e("./lib/useragent"),m=y.isIE;i.importCssString(g,"ace_editor.css");var v=function(e,t){var r=this;this.container=e||i.createElement("div"),i.addCssClass(this.container,"ace_editor"),i.HI_DPI&&i.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var n=this.$textLayer=new c(this.content);this.canvas=n.element,this.$markerFront=new a(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.addEventListener("scroll",(function(e){r.$scrollAnimation||r.session.setScrollTop(e.data-r.scrollMargin.top)})),this.scrollBarH.addEventListener("scroll",(function(e){r.$scrollAnimation||r.session.setScrollLeft(e.data-r.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new h(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",(function(e){r.updateCharacterSize(),r.onResize(!0,r.gutterWidth,r.$size.width,r.$size.height),r._signal("changeCharacterSize",e)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!y.isIOS,this.$loop=new p(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),o.resetOptions(this),o._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,n.implement(this,f),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),i.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,r){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!r)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,r,n){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;n||(n=i.clientHeight||i.scrollHeight),r||(r=i.clientWidth||i.scrollWidth);var o=this.$updateCachedSize(e,t,r,n);if(!this.$size.scrollerHeight||!r&&!n)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,r,n){n-=this.$extraHeight||0;var o=0,s=this.$size,a={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};if(n&&(e||s.height!=n)&&(s.height=n,o|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",o|=this.CHANGE_SCROLL),r&&(e||s.width!=r)){o|=this.CHANGE_SIZE,s.width=r,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,i.setStyle(this.scrollBarH.element.style,"left",t+"px"),i.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),s.scrollerWidth=Math.max(0,r-t-this.scrollBarV.getWidth()-this.margin.h),i.setStyle(this.$gutter.style,"left",this.margin.left+"px");var c=this.scrollBarV.getWidth()+"px";i.setStyle(this.scrollBarH.element.style,"right",c),i.setStyle(this.scroller.style,"right",c),i.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(o|=this.CHANGE_FULL)}return s.$dirty=!r||!n,o&&this._signal("resize",a),o},this.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(this.$keepTextAreaAtCursor||t){var r=this.$cursorLayer.$pixelPos;if(r){t&&t.markerRange&&(r=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var n=this.layerConfig,o=r.top,s=r.left;o-=n.offset;var a=t&&t.useTextareaForIME?this.lineHeight:m?0:1;if(o<0||o>n.height-a)i.translate(this.textarea,0,0);else{var c=1,l=this.$size.height-a;if(t)if(t.useTextareaForIME){var u=this.textarea.value;c=this.characterWidth*this.session.$getStringScreenWidth(u)[0]}else o+=this.lineHeight+2;else o+=this.lineHeight;(s-=this.scrollLeft)>this.$size.scrollerWidth-c&&(s=this.$size.scrollerWidth-c),s+=this.gutterWidth+this.margin.left,i.setStyle(e,"height",a+"px"),i.setStyle(e,"width",c+"px"),i.translate(this.textarea,Math.min(s,this.$size.scrollerWidth-c),Math.min(o,l))}}}else i.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,r,n){var i=this.scrollMargin;i.top=0|e,i.bottom=0|t,i.right=0|n,i.left=0|r,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.setMargin=function(e,t,r,n){var i=this.margin;i.top=0|e,i.bottom=0|t,i.right=0|n,i.left=0|r,i.v=i.top+i.bottom,i.h=i.left+i.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender"),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var r=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig()|this.$loop.clear(),r.firstRow!=this.layerConfig.firstRow&&r.firstRowScreen==this.layerConfig.firstRowScreen){var n=this.scrollTop+(r.firstRow-this.layerConfig.firstRow)*this.lineHeight;n>0&&(this.scrollTop=n,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}r=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),i.translate(this.content,-this.scrollLeft,-r.offset);var o=r.width+2*this.$padding+"px",s=r.minHeight+"px";i.setStyle(this.content.style,"width",o),i.setStyle(this.content.style,"height",s)}if(e&this.CHANGE_H_SCROLL&&(i.translate(this.content,-this.scrollLeft,-r.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(r),this.$showGutter&&this.$gutterLayer.update(r),this.$markerBack.update(r),this.$markerFront.update(r),this.$cursorLayer.update(r),this.$moveTextAreaToCursor(),void this._signal("afterRender");if(e&this.CHANGE_SCROLL)return this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(r):this.$textLayer.scrollLines(r),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(r):this.$gutterLayer.scrollLines(r)),this.$markerBack.update(r),this.$markerFront.update(r),this.$cursorLayer.update(r),this.$moveTextAreaToCursor(),void this._signal("afterRender");e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(r),this.$showGutter&&this.$gutterLayer.update(r)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(r):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(r):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(r),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(r),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(r),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(r),this._signal("afterRender")}else this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,r=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(r+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&r>this.$maxPixelHeight&&(r=this.$maxPixelHeight);var n=!(r<=2*this.lineHeight)&&e>t;if(r!=this.desiredHeight||this.$size.height!=this.desiredHeight||n!=this.$vScroll){n!=this.$vScroll&&(this.$vScroll=n,this.scrollBarV.setVisible(n));var i=this.container.clientWidth;this.container.style.height=r+"px",this.$updateCachedSize(!0,this.$gutterWidth,i,r),this.desiredHeight=r,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,r=t.height<=2*this.lineHeight,n=this.session.getScreenLength()*this.lineHeight,i=this.$getLongestLine(),o=!r&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-i-2*this.$padding<0),s=this.$horizScroll!==o;s&&(this.$horizScroll=o,this.scrollBarH.setVisible(o));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var c=t.scrollerHeight+this.lineHeight,l=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;n+=l;var u=this.scrollMargin;this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,n-t.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,i+2*this.$padding-t.scrollerWidth+u.right)));var d=!r&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-n+l<0||this.scrollTop>u.top),p=a!==d;p&&(this.$vScroll=d,this.scrollBarV.setVisible(d));var h,f,g=this.scrollTop%this.lineHeight,y=Math.ceil(c/this.lineHeight)-1,m=Math.max(0,Math.round((this.scrollTop-g)/this.lineHeight)),v=m+y,b=this.lineHeight;m=e.screenToDocumentRow(m,0);var w=e.getFoldLine(m);w&&(m=w.start.row),h=e.documentToScreenRow(m,0),f=e.getRowLength(m)*b,v=Math.min(e.screenToDocumentRow(v,0),e.getLength()-1),c=t.scrollerHeight+e.getRowLength(v)*b+f,g=this.scrollTop-h*b;var S=0;return(this.layerConfig.width!=i||s)&&(S=this.CHANGE_H_SCROLL),(s||p)&&(S|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),p&&(i=this.$getLongestLine())),this.layerConfig={width:i,padding:this.$padding,firstRow:m,firstRowScreen:h,lastRow:v,lineHeight:b,characterWidth:this.characterWidth,minHeight:c,maxHeight:n,offset:g,gutterOffset:b?Math.max(0,Math.ceil((g+t.height-t.scrollerHeight)/b)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(i-this.$padding),S},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var r=this.layerConfig;if(!(e>r.lastRow+1||t<r.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(r),void this.$textLayer.update(r)):(this.$textLayer.updateLines(r,e,t),!0)}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,r){this.scrollCursorIntoView(e,r),this.scrollCursorIntoView(t,r)},this.scrollCursorIntoView=function(e,t,r){if(0!==this.$size.scrollerHeight){var n=this.$cursorLayer.getPixelPosition(e),i=n.left,o=n.top,s=r&&r.top||0,a=r&&r.bottom||0,c=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;c+s>o?(t&&c+s>o+this.lineHeight&&(o-=t*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):c+this.$size.scrollerHeight-a<o+this.lineHeight&&(t&&c+this.$size.scrollerHeight-a<o-this.lineHeight&&(o+=t*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight+a-this.$size.scrollerHeight));var l=this.scrollLeft;l>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):l+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):l<=this.$padding&&i-l<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var r=this.$cursorLayer.getPixelPosition(e),n=this.$size.scrollerHeight-this.lineHeight,i=r.top-n*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var r,n,i=0,o=this.STEPS,s=[];for(i=0;i<o;++i)s.push((r=i/this.STEPS,n=e,(t-e)*(Math.pow(r-1,3)+1)+n));return s},this.scrollToLine=function(e,t,r,n){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(i-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(i),!1!==r&&this.animateScrolling(o,n)},this.animateScrolling=function(e,t){var r=this.scrollTop;if(this.$animatedScroll){var n=this;if(e!=r){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(e=i[0])==r)return}var o=n.$calcSteps(e,r);this.$scrollAnimation={from:e,to:r,steps:o},clearInterval(this.$timer),n.session.setScrollTop(o.shift()),n.session.$scrollTop=r,this.$timer=setInterval((function(){o.length?(n.session.setScrollTop(o.shift()),n.session.$scrollTop=r):null!=r?(n.session.$scrollTop=-1,n.session.setScrollTop(r),r=null):(n.$timer=clearInterval(n.$timer),n.$scrollAnimation=null,t&&t())}),10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var r;if(this.$hasCssTransforms){r={top:0,left:0};var n=this.$fontMetrics.transformCoordinates([e,t]);e=n[1]-this.gutterWidth-this.margin.left,t=n[0]}else r=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-r.left-this.$padding,o=i/this.characterWidth,s=Math.floor((t+this.scrollTop-r.top)/this.lineHeight),a=this.$blockCursor?Math.floor(o):Math.round(o);return{row:s,column:a,side:o-a>0?1:-1,offsetX:i}},this.screenToTextCoordinates=function(e,t){var r;if(this.$hasCssTransforms){r={top:0,left:0};var n=this.$fontMetrics.transformCoordinates([e,t]);e=n[1]-this.gutterWidth-this.margin.left,t=n[0]}else r=this.scroller.getBoundingClientRect();var i=e+this.scrollLeft-r.left-this.$padding,o=i/this.characterWidth,s=this.$blockCursor?Math.floor(o):Math.round(o),a=Math.floor((t+this.scrollTop-r.top)/this.lineHeight);return this.session.screenToDocumentPosition(a,Math.max(s,0),i)},this.textToScreenCoordinates=function(e,t){var r=this.scroller.getBoundingClientRect(),n=this.session.documentToScreenPosition(e,t),i=this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e)?this.session.$bidiHandler.getPosLeft(n.column):Math.round(n.column*this.characterWidth)),o=n.row*this.lineHeight;return{pageX:r.left+i-this.scrollLeft,pageY:r.top+o-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),e.useTextareaForIME=this.$useTextareaForIME,this.$useTextareaForIME?(i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),i.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,this.$composition=null,this.$cursorLayer.element.style.display="")},this.addToken=function(e,t,r,n){var i=this.session;i.bgTokenizer.lines[r]=null;var o={type:t,value:e},s=i.getTokens(r);if(null==n)s.push(o);else for(var a=0,c=0;c<s.length;c++){var l=s[c];if(n<=(a+=l.value.length)){var u=l.value.length-(a-n),d=l.value.slice(0,u),p=l.value.slice(u);s.splice(c,1,{type:l.type,value:d},o,{type:l.type,value:p});break}}this.updateLines(r,r)},this.setTheme=function(e,t){var r=this;if(this.$themeId=e,r._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)s(e);else{var n=e||this.$options.theme.initialValue;o.loadModule(["theme",n],s)}function s(n){if(r.$themeId!=e)return t&&t();if(!n||!n.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");n.$id&&(r.$themeId=n.$id),i.importCssString(n.cssText,n.cssClass,r.container),r.theme&&i.removeCssClass(r.container,r.theme.cssClass);var o="padding"in n?n.padding:"padding"in(r.theme||{})?4:r.$padding;r.$padding&&o!=r.$padding&&r.setPadding(o),r.$theme=n.cssClass,r.theme=n,i.addCssClass(r.container,n.cssClass),i.setCssClass(r.container,"ace_dark",n.isDark),r.$size&&(r.$size.width=0,r.$updateSizeAsync()),r._dispatchEvent("themeLoaded",{theme:n}),t&&t()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){i.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){i.importCssString(g,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy()}}).call(v.prototype),o.defineOptions(v.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!y.isMobile&&!y.isIE}}),t.VirtualRenderer=v})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(e,t,r){"use strict";var n=e("../lib/oop"),i=e("../lib/net"),o=e("../lib/event_emitter").EventEmitter,s=e("../config");function a(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var t=function(e){var t="importScripts('"+i.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(e){var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return r.append(t),r.getBlob("application/javascript")}}(e),r=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(r)}return new Worker(e)}var c=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){n.implement(this,o),this.$createWorkerFromOldConfig=function(t,r,n,i,o){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),s.get("packaged")||!e.toUrl)i=i||s.moduleUrl(r,"worker");else{var c=this.$normalizePath;i=i||c(e.toUrl("ace/worker/worker.js",null,"_"));var l={};t.forEach((function(t){l[t]=c(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=a(i),o&&this.send("importScripts",o),this.$worker.postMessage({init:!0,tlns:l,module:r,classname:n}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var r=this.callbacks[t.id];r&&(r(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return i.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,r){if(r){var n=this.callbackId++;this.callbacks[n]=r,t.push(n)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(c.prototype);t.UIWorkerClient=function(e,t,r){var n=null,i=!1,a=Object.create(o),l=[],u=new c({messageBuffer:l,terminate:function(){},postMessage:function(e){l.push(e),n&&(i?setTimeout(d):d())}});u.setEmitSync=function(e){i=e};var d=function(){var e=l.shift();e.command?n[e.command].apply(n,e.args):e.event&&a._signal(e.event,e.data)};return a.postMessage=function(e){u.onMessage({data:e})},a.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},a.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},s.loadModule(["worker",t],(function(e){for(n=new e[r](a);l.length;)d()})),u},t.WorkerClient=c,t.createWorker=a})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(e,t,r){"use strict";var n=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,o=e("./lib/oop"),s=function(e,t,r,n,i,o){var s=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=n,this.$onCursorChange=function(){setTimeout((function(){s.onCursorChange()}))},this.$pos=r;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){o.implement(this,i),this.setup=function(){var e=this,t=this.doc,r=this.session;this.selectionBefore=r.selection.toJSON(),r.selection.inMultiSelectMode&&r.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var i=this.pos;i.$insertRight=!0,i.detach(),i.markerId=r.addMarker(new n(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(r){var n=t.createAnchor(r.row,r.column);n.$insertRight=!0,n.detach(),e.others.push(n)})),r.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach((function(r){r.markerId=e.addMarker(new n(r.row,r.column,r.row,r.column+t.length),t.othersClass,null,!1)}))}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var r="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,i=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,o=t.start.column-this.pos.column;if(this.updateAnchors(e),i&&(this.length+=r),i&&!this.session.$fromUndo)if("insert"===e.action)for(var s=this.others.length-1;s>=0;s--){var a={row:(c=this.others[s]).row,column:c.column+o};this.doc.insertMergedLines(a,e.lines)}else if("remove"===e.action)for(s=this.others.length-1;s>=0;s--){var c;a={row:(c=this.others[s]).row,column:c.column+o};this.doc.remove(new n(a.row,a.column,a.row,a.column-r))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,r=function(r,i){t.removeMarker(r.markerId),r.markerId=t.addMarker(new n(r.row,r.column,r.row,r.column+e.length),i,null,!1)};r(this.pos,this.mainClass);for(var i=this.others.length;i--;)r(this.others[i],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,r=0;r<t;r++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),t.PlaceHolder=s})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,r){var n=e("../lib/event"),i=e("../lib/useragent");function o(e,t){return e.row==t.row&&e.column==t.column}t.onMouseDown=function(e){var t=e.domEvent,r=t.altKey,s=t.shiftKey,a=t.ctrlKey,c=e.getAccelKey(),l=e.getButton();if(a&&i.isMac&&(l=t.button),e.editor.inMultiSelectMode&&2==l)e.editor.textInput.onContextMenu(e.domEvent);else if(a||r||c){if(0===l){var u,d=e.editor,p=d.selection,h=d.inMultiSelectMode,f=e.getDocumentPosition(),g=p.getCursor(),y=e.inSelection()||p.isEmpty()&&o(f,g),m=e.x,v=e.y,b=d.session,w=d.renderer.pixelToScreenCoordinates(m,v),S=w;if(d.$mouseHandler.$enableJumpToDef)a&&r||c&&r?u=s?"block":"add":r&&d.$blockSelectEnabled&&(u="block");else if(c&&!r){if(u="add",!h&&s)return}else r&&d.$blockSelectEnabled&&(u="block");if(u&&i.isMac&&t.ctrlKey&&d.$mouseHandler.cancelContextMenu(),"add"==u){if(!h&&y)return;if(!h){var k=p.toOrientedRange();d.addSelectionMarker(k)}var E=p.rangeList.rangeAtPoint(f);d.inVirtualSelectionMode=!0,s&&(E=null,k=p.ranges[0]||k,d.removeSelectionMarker(k)),d.once("mouseup",(function(){var e=p.toOrientedRange();E&&e.isEmpty()&&o(E.cursor,e.cursor)?p.substractPoint(e.cursor):(s?p.substractPoint(k.cursor):k&&(d.removeSelectionMarker(k),p.addRange(k)),p.addRange(e)),d.inVirtualSelectionMode=!1}))}else if("block"==u){var _;e.stop(),d.inVirtualSelectionMode=!0;var C=[],M=function(){var e=d.renderer.pixelToScreenCoordinates(m,v),t=b.screenToDocumentPosition(e.row,e.column,e.offsetX);o(S,e)&&o(t,p.lead)||(S=e,d.selection.moveToPosition(t),d.renderer.scrollCursorIntoView(),d.removeSelectionMarkers(C),C=p.rectangularRangeBlock(S,w),d.$mouseHandler.$clickSelection&&1==C.length&&C[0].isEmpty()&&(C[0]=d.$mouseHandler.$clickSelection.clone()),C.forEach(d.addSelectionMarker,d),d.updateSelectionMarkers())};h&&!c?p.toSingleRange():!h&&c&&(_=p.toOrientedRange(),d.addSelectionMarker(_)),s?w=b.documentToScreenPosition(p.lead):p.moveToPosition(f),S={row:-1,column:-1};var x=M;n.capture(d.container,(function(e){m=e.clientX,v=e.clientY}),(function(e){M(),clearInterval(O),d.removeSelectionMarkers(C),C.length||(C=[p.toOrientedRange()]),_&&(d.removeSelectionMarker(_),p.toSingleRange(_));for(var t=0;t<C.length;t++)p.addRange(C[t]);d.inVirtualSelectionMode=!1,d.$mouseHandler.$clickSelection=null}));var O=setInterval((function(){x()}),20);return e.preventDefault()}}}else 0===l&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(e,t,r){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"splitIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var n=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new n(t.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(e,t,r){var n=e("./range_list").RangeList,i=e("./range").Range,o=e("./selection").Selection,s=e("./mouse/multi_select_handler").onMouseDown,a=e("./lib/event"),c=e("./lib/lang"),l=e("./commands/multi_select_commands");t.commands=l.defaultCommands.concat(l.multiSelectCommands);var u=new(0,e("./search").Search);var d=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(d.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var r=this.toOrientedRange();if(this.rangeList.add(r),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(r),this.$onAddRange(r)}e.cursor||(e.cursor=e.end);var n=this.rangeList.add(e);return this.$onAddRange(e),n.length&&this.$onRemoveRange(n),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var r=e.length;r--;){var n=this.ranges.indexOf(e[r]);this.ranges.splice(n,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new n,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],r=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(r,t.cursor==t.start)}else{r=this.getRange();var n=this.isBackwards(),o=r.start.row,s=r.end.row;if(o==s){if(n)var a=r.end,c=r.start;else a=r.start,c=r.end;return this.addRange(i.fromPoints(c,c)),void this.addRange(i.fromPoints(a,a))}var l=[],u=this.getLineRange(o,!0);u.start.column=r.start.column,l.push(u);for(var d=o+1;d<s;d++)l.push(this.getLineRange(d,!0));(u=this.getLineRange(s,!0)).end.column=r.end.column,l.push(u),l.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],r=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(r,t.cursor==t.start)}else{var n=this.session.documentToScreenPosition(this.cursor),o=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(n,o).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,r){var n=[],o=e.column<t.column;if(o)var s=e.column,a=t.column,c=e.offsetX,l=t.offsetX;else s=t.column,a=e.column,c=t.offsetX,l=e.offsetX;var u,d,p,h=e.row<t.row;if(h)var f=e.row,g=t.row;else f=t.row,g=e.row;s<0&&(s=0),f<0&&(f=0),f==g&&(r=!0);for(var y=f;y<=g;y++){var m=i.fromPoints(this.session.screenToDocumentPosition(y,s,c),this.session.screenToDocumentPosition(y,a,l));if(m.isEmpty()){if(u&&(d=m.end,p=u,d.row==p.row&&d.column==p.column))break;u=m.end}m.cursor=o?m.start:m.end,n.push(m)}if(h&&n.reverse(),!r){for(var v=n.length-1;n[v].isEmpty()&&v>0;)v--;if(v>0)for(var b=0;n[b].isEmpty();)b++;for(var w=v;w>=b;w--)n[w].isEmpty()&&n.splice(w,1)}return n}}.call(o.prototype);var p=e("./editor").Editor;function h(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",s),e.commands.addCommands(l.defaultCommands),function(e){if(!e.textInput)return;var t=e.textInput.getElement(),r=!1;function n(t){r&&(e.renderer.setMouseCursor(""),r=!1)}a.addListener(t,"keydown",(function(t){var i=18==t.keyCode&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&i?r||(e.renderer.setMouseCursor("crosshair"),r=!0):r&&n()})),a.addListener(t,"keyup",n),a.addListener(t,"blur",n)}(e))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,r=e.length;r--;){var n=e[r];if(n.marker){this.session.removeMarker(n.marker);var i=t.indexOf(n);-1!=i&&t.splice(i,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(l.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(l.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,r=e.editor;if(r.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?n=r.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?n=r.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(r.exitMultiSelectMode(),n=t.exec(r,e.args||{})):n=t.multiSelectAction(r,e.args||{});else{var n=t.exec(r,e.args||{});r.multiSelect.addRange(r.multiSelect.toOrientedRange()),r.multiSelect.mergeOverlappingRanges()}return n}},this.forEachSelection=function(e,t,r){if(!this.inVirtualSelectionMode){var n,i=r&&r.keepOrder,s=1==r||r&&r.$byLines,a=this.session,c=this.selection,l=c.rangeList,u=(i?c:l).ranges;if(!u.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var d=c._eventRegistry;c._eventRegistry={};var p=new o(a);this.inVirtualSelectionMode=!0;for(var h=u.length;h--;){if(s)for(;h>0&&u[h].start.row==u[h-1].end.row;)h--;p.fromOrientedRange(u[h]),p.index=h,this.selection=a.selection=p;var f=e.exec?e.exec(this,t||{}):e(this,t||{});n||void 0===f||(n=f),p.toOrientedRange(u[h])}p.detach(),this.selection=a.selection=c,this.inVirtualSelectionMode=!1,c._eventRegistry=d,c.mergeOverlappingRanges(),c.ranges[0]&&c.fromOrientedRange(c.ranges[0]);var g=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),g&&g.from==g.to&&this.renderer.animateScrolling(g.from),n}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,r=[],n=0;n<t.length;n++)r.push(this.session.getTextRange(t[n]));var i=this.session.getDocument().getNewLineCharacter();(e=r.join(i)).length==(r.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var r=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var n=t==this.multiSelect.anchor?r.cursor==r.start?r.end:r.start:r.cursor;n.row!=t.row||this.session.$clipPositionToDocument(n.row,n.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,r){if((t=t||{}).needle=e||t.needle,null==t.needle){var n=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(n)}this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;var o=this.multiSelect;r||o.toSingleRange(i[0]);for(var s=i.length;s--;)o.addRange(i[s],!0);return n&&o.rangeList.rangeAtPoint(n.start)&&o.addRange(n,!0),i.length},this.selectMoreLines=function(e,t){var r=this.selection.toOrientedRange(),n=r.cursor==r.end,o=this.session.documentToScreenPosition(r.cursor);this.selection.$desiredColumn&&(o.column=this.selection.$desiredColumn);var s,a=this.session.screenToDocumentPosition(o.row+e,o.column);if(r.isEmpty())l=a;else var c=this.session.documentToScreenPosition(n?r.end:r.start),l=this.session.screenToDocumentPosition(c.row+e,c.column);n?(s=i.fromPoints(a,l)).cursor=s.start:(s=i.fromPoints(l,a)).cursor=s.end;if(s.desiredColumn=o.column,this.selection.inMultiSelectMode){if(t)var u=r.cursor}else this.selection.addRange(r);this.selection.addRange(s),u&&this.selection.substractPoint(u)},this.transposeSelections=function(e){for(var t=this.session,r=t.multiSelect,n=r.ranges,i=n.length;i--;){if((a=n[i]).isEmpty()){var o=t.getWordRange(a.start.row,a.start.column);a.start.row=o.start.row,a.start.column=o.start.column,a.end.row=o.end.row,a.end.column=o.end.column}}r.mergeOverlappingRanges();var s=[];for(i=n.length;i--;){var a=n[i];s.unshift(t.getTextRange(a))}e<0?s.unshift(s.pop()):s.push(s.shift());for(i=n.length;i--;){o=(a=n[i]).clone();t.replace(a,s[i]),a.start.row=o.start.row,a.start.column=o.start.column}r.fromOrientedRange(r.ranges[0])},this.selectMore=function(e,t,r){var n=this.session,i=n.multiSelect.toOrientedRange();if(!i.isEmpty()||((i=n.getWordRange(i.start.row,i.start.column)).cursor=-1==e?i.start:i.end,this.multiSelect.addRange(i),!r)){var o=n.getTextRange(i),s=function(e,t,r){return u.$options.wrap=!0,u.$options.needle=t,u.$options.backwards=-1==r,u.find(e)}(n,o,e);s&&(s.cursor=-1==e?s.start:s.end,this.session.unfold(s),this.multiSelect.addRange(s),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(i.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,r=t.ranges,n=-1,o=r.filter((function(e){if(e.cursor.row==n)return!0;n=e.cursor.row}));if(r.length&&o.length!=r.length-1){o.forEach((function(e){t.substractPoint(e.cursor)}));var s=0,a=1/0,l=r.map((function(t){var r=t.cursor,n=e.getLine(r.row).substr(r.column).search(/\S/g);return-1==n&&(n=0),r.column>s&&(s=r.column),n<a&&(a=n),n}));r.forEach((function(t,r){var n=t.cursor,o=s-n.column,u=l[r]-a;o>u?e.insert(n,c.stringRepeat(" ",o-u)):e.remove(new i(n.row,n.column,n.row,n.column-o+u)),t.start.column=t.end.column=s,t.start.row=t.end.row=n.row,t.cursor=t.end})),t.fromOrientedRange(r[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var u=this.selection.getRange(),d=u.start.row,p=u.end.row,h=d==p;if(h){var f,g=this.session.getLength();do{f=this.session.getLine(p)}while(/[=:]/.test(f)&&++p<g);do{f=this.session.getLine(d)}while(/[=:]/.test(f)&&--d>0);d<0&&(d=0),p>=g&&(p=g-1)}var y=this.session.removeFullLines(d,p);y=this.$reAlignText(y,h),this.session.insert({row:d,column:0},y.join("\n")+"\n"),h||(u.start.column=0,u.end.column=y[y.length-1].length),this.selection.setRange(u)}},this.$reAlignText=function(e,t){var r,n,i,o=!0,s=!0;return e.map((function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==r?(r=t[1].length,n=t[2].length,i=t[3].length,t):(r+n+i!=t[1].length+t[2].length+t[3].length&&(s=!1),r!=t[1].length&&(o=!1),r>t[1].length&&(r=t[1].length),n<t[2].length&&(n=t[2].length),i>t[3].length&&(i=t[3].length),t):[e]})).map(t?l:o?s?function(e){return e[2]?a(r+n-e[2].length)+e[2]+a(i)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:l:function(e){return e[2]?a(r)+e[2]+a(i)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]});function a(e){return c.stringRepeat(" ",e)}function l(e){return e[2]?a(r)+e[2]+a(n-e[2].length+i)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}}}).call(p.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var r=e.oldSession;r&&(r.multiSelect.off("addRange",this.$onAddRange),r.multiSelect.off("removeRange",this.$onRemoveRange),r.multiSelect.off("multiSelect",this.$onMultiSelect),r.multiSelect.off("singleSelect",this.$onSingleSelect),r.multiSelect.lead.off("change",this.$checkMultiselectChange),r.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=h,e("./config").defineOptions(p.prototype,"editor",{enableMultiselect:{set:function(e){h(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",s)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",s))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(e,t,r){"use strict";var n=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,r){var n=e.getLine(r);return this.foldingStartMarker.test(n)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(n)?"end":""},this.getFoldWidgetRange=function(e,t,r){return null},this.indentationBlock=function(e,t,r){var i=/\S/,o=e.getLine(t),s=o.search(i);if(-1!=s){for(var a=r||o.length,c=e.getLength(),l=t,u=t;++t<c;){var d=e.getLine(t).search(i);if(-1!=d){if(d<=s){var p=e.getTokenAt(t,0);if(!p||"string"!==p.type)break}u=t}}if(u>l){var h=e.getLine(u).length;return new n(l,a,u,h)}}},this.openingBracketBlock=function(e,t,r,i,o){var s={row:r,column:i+1},a=e.$findClosingBracket(t,s,o);if(a){var c=e.foldWidgets[a.row];return null==c&&(c=e.getFoldWidget(a.row)),"start"==c&&a.row>s.row&&(a.row--,a.column=e.getLine(a.row).length),n.fromPoints(s,a)}},this.closingBracketBlock=function(e,t,r,i,o){var s={row:r,column:i},a=e.$findOpeningBracket(t,s);if(a)return a.column++,s.column--,n.fromPoints(a,s)}}).call(i.prototype)})),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],(function(e,t,r){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate",e("../lib/dom").importCssString(t.cssText,t.cssClass)})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],(function(e,t,r){"use strict";e("./lib/oop");var n=e("./lib/dom");e("./range").Range;function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach((function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)})),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var r=this.session.lineWidgets;r&&r.forEach((function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))}))}},this.updateOnFold=function(e,t){var r=t.lineWidgets;if(r&&e.action){for(var n=e.data,i=n.start.row,o=n.end.row,s="add"==e.action,a=i+1;a<o;a++)r[a]&&(r[a].hidden=s);r[o]&&(s?r[i]?r[o].hidden=s:r[i]=r[o]:(r[i]==r[o]&&(r[i]=void 0),r[o].hidden=s))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var r=e.start.row,n=e.end.row-r;if(0===n);else if("remove"==e.action){t.splice(r+1,n).forEach((function(e){e&&this.removeLineWidget(e)}),this),this.$updateRows()}else{var i=new Array(n);i.unshift(r,0),t.splice.apply(t,i),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach((function(e,r){if(e)for(t=!1,e.row=r;e.$oldWidget;)e.$oldWidget.row=r,e=e.$oldWidget})),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e.session=this.session;var r=this.editor.renderer;e.html&&!e.el&&(e.el=n.createElement("div"),e.el.innerHTML=e.html),e.el&&(n.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,r.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/r.layerConfig.lineHeight);var i=this.session.getFoldAt(e.row,0);if(e.$fold=i,i){var o=this.session.lineWidgets;e.row!=i.end.row||o[i.start.row]?e.hidden=!0:o[i.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,r),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,r=t&&t[e],n=[];r;)n.push(r),r=r.$oldWidget;return n},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var r=this.session._changedWidgets,n=t.layerConfig;if(r&&r.length){for(var i=1/0,o=0;o<r.length;o++){var s=r[o];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,t.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/n.characterWidth));var a=s.h/n.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row))<0&&(a=0),s.rowCount!=a&&(s.rowCount=a,s.row<i&&(i=s.row))}}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var r=t.layerConfig,n=this.session.lineWidgets;if(n){for(var i=Math.min(this.firstRow,r.firstRow),o=Math.max(this.lastRow,r.lastRow,n.length);i>0&&!n[i];)i--;this.firstRow=r.firstRow,this.lastRow=r.lastRow,t.$cursorLayer.config=r;for(var s=i;s<=o;s++){var a=n[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var c=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(c+=r.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=c-r.offset+"px";var l=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(l-=t.scrollLeft),a.el.style.left=l+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=r.width+2*r.padding+"px"),a.fixedWidth?a.el.style.right=t.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(i.prototype),t.LineWidgets=i})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],(function(e,t,r){"use strict";var n=e("../line_widgets").LineWidgets,i=e("../lib/dom"),o=e("../range").Range;t.showErrorMarker=function(e,t){var r=e.session;r.widgetManager||(r.widgetManager=new n(r),r.widgetManager.attach(e));var s=e.getCursorPosition(),a=s.row,c=r.widgetManager.getWidgetsAtRow(a).filter((function(e){return"errorMarker"==e.type}))[0];c?c.destroy():a-=t;var l,u=function(e,t,r){var n=e.getAnnotations().sort(o.comparePoints);if(n.length){var i=function(e,t,r){for(var n=0,i=e.length-1;n<=i;){var o=n+i>>1,s=r(t,e[o]);if(s>0)n=o+1;else{if(!(s<0))return o;i=o-1}}return-(n+1)}(n,{row:t,column:-1},o.comparePoints);i<0&&(i=-i-1),i>=n.length?i=r>0?0:n.length-1:0===i&&r<0&&(i=n.length-1);var s=n[i];if(s&&r){if(s.row===t){do{s=n[i+=r]}while(s&&s.row===t);if(!s)return n.slice()}var a=[];t=s.row;do{a[r<0?"unshift":"push"](s),s=n[i+=r]}while(s&&s.row==t);return a.length&&a}}}(r,a,t);if(u){var d=u[0];s.column=(d.pos&&"number"!=typeof d.column?d.pos.sc:d.column)||0,s.row=d.row,l=e.renderer.$gutterLayer.$annotations[s.row]}else{if(c)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var p={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div"),type:"errorMarker"},h=p.el.appendChild(i.createElement("div")),f=p.el.appendChild(i.createElement("div"));f.className="error_widget_arrow "+l.className;var g=e.renderer.$cursorLayer.getPixelPosition(s).left;f.style.left=g+e.renderer.gutterWidth-5+"px",p.el.className="error_widget_wrapper",h.className="error_widget "+l.className,h.innerHTML=l.text.join("<br>"),h.appendChild(i.createElement("div"));var y=function(e,t,r){if(0===t&&("esc"===r||"return"===r))return p.destroy(),{command:"null"}};p.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(y),r.widgetManager.removeLineWidget(p),e.off("changeSelection",p.destroy),e.off("changeSession",p.destroy),e.off("mouseup",p.destroy),e.off("change",p.destroy))},e.keyBinding.addKeyboardHandler(y),e.on("changeSelection",p.destroy),e.on("changeSession",p.destroy),e.on("mouseup",p.destroy),e.on("change",p.destroy),e.session.widgetManager.addLineWidget(p),p.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:p.el.offsetHeight})},i.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")})),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],(function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/dom"),o=e("./lib/event"),s=e("./range").Range,a=e("./editor").Editor,c=e("./edit_session").EditSession,l=e("./undomanager").UndoManager,u=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.define=r(39),t.edit=function(e,r){if("string"==typeof e){var n=e;if(!(e=document.getElementById(n)))throw new Error("ace.edit can't find div #"+n)}if(e&&e.env&&e.env.editor instanceof a)return e.env.editor;var s="";if(e&&/input|textarea/i.test(e.tagName)){var c=e;s=c.value,e=i.createElement("pre"),c.parentNode.replaceChild(e,c)}else e&&(s=e.textContent,e.innerHTML="");var l=t.createEditSession(s),d=new a(new u(e),l,r),p={document:l,editor:d,onResize:d.resize.bind(d,null)};return c&&(p.textarea=c),o.addListener(window,"resize",p.onResize),d.on("destroy",(function(){o.removeListener(window,"resize",p.onResize),p.editor.container.env=null})),d.container.env=d.env=p,d},t.createEditSession=function(e,t){var r=new c(e,t);return r.setUndoManager(new l),r},t.Range=s,t.Editor=a,t.EditSession=c,t.UndoManager=l,t.VirtualRenderer=u,t.version=t.config.version})),ace.require(["ace/ace"],(function(t){for(var r in t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t),t)t.hasOwnProperty(r)&&(window.ace[r]=t[r]);window.ace.default=window.ace,e&&(e.exports=window.ace)}))}).call(this,r(16)(e))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=r(37),a=s.getAceInstance(),c=r(38),l=r(86),u=r(15),d=r(1),p=r(36),h=r(87),f=function(e){function t(t){var r=e.call(this,t)||this;return s.editorEvents.forEach((function(e){r[e]=r[e].bind(r)})),r.debounce=s.debounce,r}return i(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,r=t.className,n=t.onBeforeLoad,i=t.mode,o=t.focus,c=t.theme,u=t.fontSize,d=t.value,p=t.defaultValue,f=t.cursorStart,g=t.showGutter,y=t.wrapEnabled,m=t.showPrintMargin,v=t.scrollMargin,b=void 0===v?[0,0,0,0]:v,w=t.keyboardHandler,S=t.onLoad,k=t.commands,E=t.annotations,_=t.markers,C=t.splits;this.editor=a.edit(this.refEditor),n&&n(a);var M=Object.keys(this.props.editorProps),x=new l.Split(this.editor.container,"ace/theme/"+c,C);this.editor.env.split=x,this.splitEditor=x.getEditor(0),this.split=x,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var O=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),x.forEach((function(t,r){for(var n=0;n<M.length;n++)t[M[n]]=e.props.editorProps[M[n]];var o=h(p,r),l=h(d,r,"");t.session.setUndoManager(new a.UndoManager),t.setTheme("ace/theme/"+c),t.renderer.setScrollMargin(b[0],b[1],b[2],b[3]),t.getSession().setMode("ace/mode/"+i),t.setFontSize(u),t.renderer.setShowGutter(g),t.getSession().setUseWrapMode(y),t.setShowPrintMargin(m),t.on("focus",e.onFocus),t.on("blur",e.onBlur),t.on("input",e.onInput),t.on("copy",e.onCopy),t.on("paste",e.onPaste),t.on("change",e.onChange),t.getSession().selection.on("changeSelection",e.onSelectionChange),t.getSession().selection.on("changeCursor",e.onCursorChange),t.session.on("changeScrollTop",e.onScroll),t.setValue(void 0===o?l:o,f);var v=h(E,r,[]),S=h(_,r,[]);t.getSession().setAnnotations(v),S&&S.length>0&&e.handleMarkers(S,t);for(n=0;n<s.editorOptions.length;n++){var C=s.editorOptions[n];O.hasOwnProperty(C)?t.setOption(C,e.props[C]):e.props[C]&&console.warn("ReaceAce: editor option "+C+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")}e.handleOptions(e.props,t),Array.isArray(k)&&k.forEach((function(e){"string"==typeof e.exec?t.commands.bindKey(e.bindKey,e.exec):t.commands.addCommand(e)})),w&&t.setKeyboardHandler("ace/keyboard/"+w)})),r&&(this.refEditor.className+=" "+r),o&&this.splitEditor.focus();var R=this.editor.env.split;R.setOrientation("below"===this.props.orientation?R.BELOW:R.BESIDE),R.resize(!0),S&&S(R)},t.prototype.componentDidUpdate=function(e){var t=this,r=e,n=this.props,i=this.editor.env.split;if(n.splits!==r.splits&&i.setSplits(n.splits),n.orientation!==r.orientation&&i.setOrientation("below"===n.orientation?i.BELOW:i.BESIDE),i.forEach((function(e,i){n.mode!==r.mode&&e.getSession().setMode("ace/mode/"+n.mode),n.keyboardHandler!==r.keyboardHandler&&(n.keyboardHandler?e.setKeyboardHandler("ace/keyboard/"+n.keyboardHandler):e.setKeyboardHandler(null)),n.fontSize!==r.fontSize&&e.setFontSize(n.fontSize),n.wrapEnabled!==r.wrapEnabled&&e.getSession().setUseWrapMode(n.wrapEnabled),n.showPrintMargin!==r.showPrintMargin&&e.setShowPrintMargin(n.showPrintMargin),n.showGutter!==r.showGutter&&e.renderer.setShowGutter(n.showGutter);for(var o=0;o<s.editorOptions.length;o++){var a=s.editorOptions[o];n[a]!==r[a]&&e.setOption(a,n[a])}p(n.setOptions,r.setOptions)||t.handleOptions(n,e);var c=h(n.value,i,"");if(e.getValue()!==c){t.silent=!0;var l=e.session.selection.toJSON();e.setValue(c,n.cursorStart),e.session.selection.fromJSON(l),t.silent=!1}var u=h(n.annotations,i,[]),d=h(r.annotations,i,[]);p(u,d)||e.getSession().setAnnotations(u);var f=h(n.markers,i,[]),g=h(r.markers,i,[]);!p(f,g)&&Array.isArray(f)&&t.handleMarkers(f,e)})),n.className!==r.className){var o=this.refEditor.className.trim().split(" ");r.className.trim().split(" ").forEach((function(e){var t=o.indexOf(e);o.splice(t,1)})),this.refEditor.className=" "+n.className+" "+o.join(" ")}n.theme!==r.theme&&i.setTheme("ace/theme/"+n.theme),n.focus&&!r.focus&&this.splitEditor.focus(),n.height===this.props.height&&n.width===this.props.width||this.editor.resize()},t.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getValue())})),this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getSelection())})),this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getSelection())})),this.props.onCursorChange(t,e)}},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e)},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e)},t.prototype.onCopy=function(e){this.props.onCopy&&this.props.onCopy(e)},t.prototype.onPaste=function(e){this.props.onPaste&&this.props.onPaste(e)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e,t){for(var r=Object.keys(e.setOptions),n=0;n<r.length;n++)t.setOption(r[n],e.setOptions[r[n]])},t.prototype.handleMarkers=function(e,t){var r=t.getSession().getMarkers(!0);for(var n in r)r.hasOwnProperty(n)&&t.getSession().removeMarker(r[n].id);for(var n in r=t.getSession().getMarkers(!1))r.hasOwnProperty(n)&&t.getSession().removeMarker(r[n].id);e.forEach((function(e){var r=e.startRow,n=e.startCol,i=e.endRow,o=e.endCol,s=e.className,a=e.type,l=e.inFront,u=void 0!==l&&l,d=new c.Range(r,n,i,o);t.getSession().addMarker(d,s,a,u)}))},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,r=e.width,n=e.height,i=e.style,s=o({width:r,height:n},i);return d.createElement("div",{ref:this.updateRef,id:t,style:s})},t.propTypes={className:u.string,debounceChangePeriod:u.number,defaultValue:u.arrayOf(u.string),focus:u.bool,fontSize:u.oneOfType([u.number,u.string]),height:u.string,mode:u.string,name:u.string,onBlur:u.func,onChange:u.func,onCopy:u.func,onFocus:u.func,onInput:u.func,onLoad:u.func,onPaste:u.func,onScroll:u.func,orientation:u.string,showGutter:u.bool,splits:u.number,theme:u.string,value:u.arrayOf(u.string),width:u.string,onSelectionChange:u.func,onCursorChange:u.func,onBeforeLoad:u.func,minLines:u.number,maxLines:u.number,readOnly:u.bool,highlightActiveLine:u.bool,tabSize:u.number,showPrintMargin:u.bool,cursorStart:u.number,editorProps:u.object,setOptions:u.object,style:u.object,scrollMargin:u.array,annotations:u.array,markers:u.array,keyboardHandler:u.string,wrapEnabled:u.bool,enableBasicAutocompletion:u.oneOfType([u.bool,u.array]),enableLiveAutocompletion:u.oneOfType([u.bool,u.array]),commands:u.array},t.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},t}(d.Component);t.default=f},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}},function(e,t,r){"use strict";var n={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},n.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},n.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},n.parseIceOptions=function(e){return e.substr(14).split(" ")},n.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.numChannels=3===t.length?parseInt(t[2],10):1,r},n.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},n.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},n.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},n.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r[(t=n[i].trim().split("="))[0].trim()]=t[1];return r},n.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach((function(t){n.push(t+"="+e.parameters[t])})),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},n.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},n.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},n.getMid=function(e){var t=n.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:n.matchPrefix(e+t,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),r},n.getIceParameters=function(e,t){var r=n.splitLines(e);return{usernameFragment:(r=r.concat(n.splitLines(t))).filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:r.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)}},n.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],s=n.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=n.parseRtpMap(s),c=n.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?n.parseFmtp(c[0]):{},a.rtcpFeedback=n.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(n.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return n.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(n.parseExtmap(e))})),t},n.writeRtpDescription=function(e,t){var r="";r+="m="+e+" ",r+=t.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),r+="a=rtcp-mux\r\n",t.headerExtensions.forEach((function(e){r+=n.writeExtmap(e)})),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,l=n.matchPrefix(e,"a=ssrc-group:FID").map((function(e){var t=e.split(" ");return t.shift(),t.map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===c&&(t=l[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{ssrc:t}};r.push(n),o&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:t,mechanism:s?"red+ulpfec":"red"},r.push(n))}})),0===r.length&&c&&r.push({ssrc:c});var u=n.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=u}))),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var i=n.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=n.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(t=r[0].substr(7).split(" "))[0],track:t[1]};var i=n.matchPrefix(e,"a=ssrc:").map((function(e){return n.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t){var r=void 0!==t?t:2;return"v=0\r\no=thisisadapterortc "+(e||n.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},n.writeMediaSection=function(e,t,r,i){var o=n.writeRtpDescription(e.kind,t);if(o+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),o},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return t?n.getDirection(t):"sendrecv"},n.getKind=function(e){return n.splitLines(e)[0].split(" ")[0].substr(2)},n.isRejected=function(e){return"0"===e.split(" ",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},n.parseOLine=function(e){var t=n.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},e.exports=n},function(e,t,r){const n=r(119),{serializeOperation:i,deserializeOperation:o,serializeRemotePosition:s,deserializeRemotePosition:a}=r(122);e.exports={Document:n,serializeOperation:i,deserializeOperation:o,serializeRemotePosition:s,deserializeRemotePosition:a}},function(e,t){e.exports=class{splayNode(e){if(e)for(;;)if(this.isNodeLeftChild(this.getParent(e))&&this.isNodeRightChild(e))this.rotateNodeLeft(e),this.rotateNodeRight(e);else if(this.isNodeRightChild(this.getParent(e))&&this.isNodeLeftChild(e))this.rotateNodeRight(e),this.rotateNodeLeft(e);else if(this.isNodeLeftChild(this.getParent(e))&&this.isNodeLeftChild(e))this.rotateNodeRight(this.getParent(e)),this.rotateNodeRight(e);else{if(!this.isNodeRightChild(this.getParent(e))||!this.isNodeRightChild(e))return void(this.isNodeLeftChild(e)?this.rotateNodeRight(e):this.isNodeRightChild(e)&&this.rotateNodeLeft(e));this.rotateNodeLeft(this.getParent(e)),this.rotateNodeLeft(e)}}rotateNodeLeft(e){const t=this.getParent(e);this.getParent(t)?t===this.getLeft(this.getParent(t))?this.setLeft(this.getParent(t),e):this.setRight(this.getParent(t),e):this.root=e,this.setParent(e,this.getParent(t)),this.setRight(t,this.getLeft(e)),this.getRight(t)&&this.setParent(this.getRight(t),t),this.setLeft(e,t),this.setParent(this.getLeft(e),e),this.updateSubtreeExtent(t),this.updateSubtreeExtent(e)}rotateNodeRight(e){const t=this.getParent(e);this.getParent(t)?t===this.getLeft(this.getParent(t))?this.setLeft(this.getParent(t),e):this.setRight(this.getParent(t),e):this.root=e,this.setParent(e,this.getParent(t)),this.setLeft(t,this.getRight(e)),this.getLeft(t)&&this.setParent(this.getLeft(t),t),this.setRight(e,t),this.setParent(this.getRight(e),e),this.updateSubtreeExtent(t),this.updateSubtreeExtent(e)}isNodeLeftChild(e){return null!=e&&null!=this.getParent(e)&&this.getLeft(this.getParent(e))===e}isNodeRightChild(e){return null!=e&&null!=this.getParent(e)&&this.getRight(this.getParent(e))===e}getSuccessor(e){if(this.getRight(e))for(e=this.getRight(e);this.getLeft(e);)e=this.getLeft(e);else{for(;this.getParent(e)&&this.getRight(this.getParent(e))===e;)e=this.getParent(e);e=this.getParent(e)}return e}}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=r(10),s=r(2).CompositeDisposable,a=function(){};e.exports=function(){function e(t){var r=t.id,n=t.bufferProxyId,i=t.bufferProxyURI,o=(t.siteId,t.router),c=t.didDispose;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=r,this.bufferProxyId=n,this.bufferProxyURI=i,this.subscriptions=new s,this.didDispose=c||a,c&&(this.subscriptions.add(o.onNotification("/buffers/".concat(r),this.receiveBufferUpdate.bind(this))),this.subscriptions.add(o.onNotification("/editors/".concat(r,"/disposal"),this.dispose.bind(this))))}return i(e,null,[{key:"deserialize",value:function(t,r){return new e(Object.assign({id:t.getId(),bufferProxyId:t.getBufferProxyId(),bufferProxyURI:t.getBufferProxyUri()},r))}}]),i(e,[{key:"dispose",value:function(){this.subscriptions.dispose(),this.didDispose()}},{key:"serialize",value:function(){var e=new o.EditorProxyMetadata;return e.setId(this.id),e.setBufferProxyId(this.bufferProxyId),e.setBufferProxyUri(this.bufferProxyURI),e}},{key:"receiveBufferUpdate",value:function(e){var t=e.body,r=o.BufferProxyUpdate.deserializeBinary(t);r.hasUriUpdate()&&(this.bufferProxyURI=r.getUriUpdate().getUri())}}]),e}()},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i;function o(e){if(null==i&&(i=r(22)),!i.isDisposable(e))throw new TypeError("Arguments to CompositeDisposable.add must have a .dispose() method")}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.disposed=!1,this.disposables=new Set;var t=!0,r=!1,n=void 0;try{for(var i,o=arguments[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;this.add(s)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}}var t,r,i;return t=e,(r=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposables.forEach((function(e){return e.dispose()})),this.disposables=null)}},{key:"add",value:function(){if(!this.disposed){var e=!0,t=!1,r=void 0;try{for(var n,i=arguments[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var s=n.value;o(s),this.disposables.add(s)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}}},{key:"remove",value:function(e){this.disposed||this.disposables.delete(e)}},{key:"delete",value:function(e){this.remove(e)}},{key:"clear",value:function(){this.disposed||this.disposables.clear()}}])&&n(t.prototype,r),i&&n(t,i),e}()},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var s=r.exec(e||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=i&&-1!=o&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(t){e.exports=function(e){return r&&t.isBuffer(e)||n&&(e instanceof ArrayBuffer||i(e))};var r="function"==typeof t&&"function"==typeof t.isBuffer,n="function"==typeof ArrayBuffer,i=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}).call(this,r(7).Buffer)},function(e,t,r){var n=r(141),i=r(57),o=r(58),s=r(23),a=r(59),c=r(60),l=r(5)("socket.io-client:manager"),u=r(56),d=r(156),p=Object.prototype.hasOwnProperty;function h(e,t){if(!(this instanceof h))return new h(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||s;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=h,h.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},h.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},h.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},o(h.prototype),h.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},h.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},h.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=n(this.uri,this.opts);var r=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=a(r,"open",(function(){i.onopen(),e&&e()})),s=a(r,"error",(function(t){if(l("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c);var u=setTimeout((function(){l("connect attempt timed out after %d",c),o.destroy(),r.close(),r.emit("error","timeout"),i.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(s),this},h.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"ping",c(this,"onping"))),this.subs.push(a(e,"pong",c(this,"onpong"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(e){this.decoder.add(e)},h.prototype.ondecoded=function(e){this.emit("packet",e)},h.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},h.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new i(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",o),r.on("connect",(function(){r.id=n.generateId(e)})),this.autoConnect&&o()}function o(){~u(n.connecting,r)||n.connecting.push(r)}return r},h.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},h.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()})))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},h.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}},h.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,r){var n=r(24),i=r(144),o=r(152),s=r(153);t.polling=function(e){var t=!1,r=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,r=e.secure!==a}if(e.xdomain=t,e.xscheme=r,"open"in new n(e)&&!e.forceJSONP)return new i(e);if(!s)throw new Error("JSONP disabled");return new o(e)},t.websocket=s},function(e,t,r){var n=r(25),i=r(13),o=r(11),s=r(14),a=r(55),c=r(5)("engine.io-client:polling");e.exports=u;var l=null!=new(r(24))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),n.call(this,e)}s(u,n),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function r(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(c("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--n||r()}))),this.writable||(c("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){c("pre-pause writing complete"),--n||r()})))}else r()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;c("polling got data %s",e);o.decodePayload(e,this.socket.binaryType,(function(e,r,n){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};o.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,r)}))},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e}},function(e,t,r){(function(t){var n=r(146),i=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(r){if(!r||"object"!=typeof r)return!1;if(n(r)){for(var i=0,a=r.length;i<a;i++)if(e(r[i]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(r)||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||o&&r instanceof Blob||s&&r instanceof File)return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return e(r.toJSON(),!0);for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)&&e(r[c]))return!0;return!1}}).call(this,r(7).Buffer)},function(e,t,r){"use strict";var n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,c=0;function l(e){var t="";do{t=i[e%o]+t,e=Math.floor(e/o)}while(e>0);return t}function u(){var e=l(+new Date);return e!==n?(a=0,n=e):e+"."+l(a++)}for(;c<o;c++)s[i[c]]=c;u.encode=l,u.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*o+s[e.charAt(c)];return t},e.exports=u},function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t,r){var n=r(23),i=r(58),o=r(155),s=r(59),a=r(60),c=r(5)("socket.io-client:socket"),l=r(13),u=r(54);e.exports=h;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=i.prototype.emit;function h(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}i(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},h.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},h.prototype.emit=function(e){if(d.hasOwnProperty(e))return p.apply(this,arguments),this;var t=o(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?n.BINARY_EVENT:n.EVENT,data:t,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},h.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},h.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:n.CONNECT,query:e})}else this.packet({type:n.CONNECT})},h.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},h.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===n.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},h.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},h.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var i=o(arguments);c("sending ack %j",i),t.packet({type:u(i)?n.BINARY_ACK:n.ACK,id:e,data:i})}}},h.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(e){return this.flags.compress=e,this},h.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}},function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t),r.d(t,"TextBuffer",(function(){return d}));var i=r(0),o=i.Disposable,s=i.Emitter,a=r(62),c=a.Range,l=a.Point,u=/\n/g,d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.emitter=new s,this.app=t}var t,r,i;return t=e,(r=[{key:"setDelegate",value:function(e){alert("setDelegate! wew!"),console.log("todo: setDelegate (bufferPRoxy, guest-portal-binding@findOrCreateBufferForBufferProxy)")}},{key:"onDidChangePath",value:function(e){return new o((function(e){console.log("todo! buffer.onDidChangePath"),e()}))}},{key:"setFile",value:function(e){console.log("implement buffer.setFile")}},{key:"getPath",value:function(){return console.log("implement buffer.getPath"),"/blah/bloop.js"}},{key:"getHistory",value:function(){return console.log("implement buffer.getHistory"),{baseText:"",nextCheckpointId:0,undoStack:[],redoStack:[]}}},{key:"setHistoryProvider",value:function(e){console.log("thanks for the history provider! i appreciate it"),this.historyProvider=e}},{key:"onDidDestroy",value:function(e){return new o((function(e){console.log("i did destroy!"),e()}))}},{key:"restoreDefaultHistoryProvider",value:function(){console.log("great, ill restore my default history provider."),console.log("todo: implement buffer.restoreDefaultHistoryProvider")}},{key:"getPath",value:function(){return console.log("implement buffer.getPath"),"/blah/bloop.js"}},{key:"getHistory",value:function(){return console.log("implement buffer.getHistory"),{baseText:"",nextCheckpointId:0,undoStack:[],redoStack:[]}}},{key:"getRange",value:function(){return window.app.aceEditorRef.current.editor,{start:{row:0,column:0},end:{row:0,column:0}}}},{key:"getFirstPosition",value:function(){return new l(0,0)}},{key:"getEndPosition",value:function(){var e=window.app.aceEditorRef.current.editor,t=e.session.getLength()-1,r=e.session.getDocument().$lines[t].length;return new l(t,r)}},{key:"getLastRow",value:function(){return window.app.aceEditorRef.current.editor.session.getLength()-1}},{key:"lineLengthForRow",value:function(e){return window.app.aceEditorRef.current.editor.session.getDocument().$lines[e].length}},{key:"clipPosition",value:function(e,t){var r=e.row,n=e.column;if(r<0)return this.getFirstPosition();if(r>this.getLastRow())return this.getEndPosition();if(n<0)return l(r,0);var i=this.lineLengthForRow(r);return n>=i&&r<this.getLastRow()&&t&&"forward"===t.clipDirection?new l(r+1,0):n>i?new l(r,i):e}},{key:"clipRange",value:function(e){e=new c(e.start,e.end);var t=this.clipPosition(e.start),r=this.clipPosition(e.end);return e.start.isEqual(t)&&e.end.isEqual(r)?e:new c(t,r)}},{key:"traverse",value:function(e,t){return 0===t.row?new l(e.row,e.column+t.column):new l(e.row+t.row,t.column)}},{key:"traversal",value:function(e,t){return e.row===t.row?new l(0,e.column-t.column):new l(e.row-t.row,e.column)}},{key:"extentForText",value:function(e){var t=0,r=0;for(u.lastIndex=0;u.exec(e);)r++,t=u.lastIndex;return{row:r,column:e.length-t}}},{key:"traverse",value:function(e,t){return 0===t.row?new l(e.row,e.column+t.column):new l(e.row+t.row,t.column)}},{key:"getTextInRange",value:function(e){return window.app.aceEditorRef.current.editor.session.getTextRange(e)}},{key:"lineEndingForRow",value:function(e){return e===this.getLastRow()?"":"\n"}},{key:"setTextInRange",value:function(e,t,r){var n,i;console.log("once i learn how to set text, i will set text..."),r&&(n=r.normalizeLineEndings,i=r.undo),null==n&&(n=!0);var o=this.clipRange(e),s=this.getTextInRange(o);if(n){var a=this.preferredLineEnding||this.lineEndingForRow(o.start.row)||this.lineEndingForRow(o.start.row-1);a&&(t=t.replace(/\n/,a))}var c={oldStart:o.start,oldEnd:o.end,newStart:o.start,newEnd:this.traverse(o.start,this.extentForText(t)),oldText:s,newText:t},l=this.applyChange(c,!0);return"skip"===i&&this.groupLastChanges(),l}},{key:"onDidChange",value:function(e){return this.emitter.on("did-change",e)}},{key:"insertText",value:function(e){this.historyProvider&&this.historyProvider.pushChange(e)}},{key:"applyChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.newStart,n=e.newEnd,i=e.oldStart,o=e.oldEnd,s=e.oldText,a=e.newText,l=this.traversal(o,i),u=new c(r,this.traverse(r,l));u.freeze();var d=this.traversal(n,r),p=new c(r,this.traverse(r,d));p.freeze(),t&&(e.oldExtent||(e.oldExtent=l),e.newExtent||(e.newExtent=d),this.historyProvider&&this.historyProvider.pushChange(e));var h={oldRange:u,newRange:p,oldText:s,newText:a};for(var f in this.displayLayers){var g=this.displayLayers[f];g.bufferWillChange(h)}this.emitWillChangeEvent();var y=window.app.aceEditorRef.current.editor;if(y.session.getDocument().replace(u,a),this.markerLayers)for(var m in this.markerLayers){var v=this.markerLayers[m];v.splice(u.start,l,d),this.markerLayersWithPendingUpdateEvents.add(v)}return this.cachedText=null,this.emitDidChangeEvent(h),p}},{key:"emitWillChangeEvent",value:function(){this.emitter.emit("will-change")}},{key:"emitDidChangeEvent",value:function(e){this.emitter.emit("did-change",e)}}])&&n(t.prototype,r),i&&n(t,i),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}r.r(t),r.d(t,"Point",(function(){return s})),r.d(t,"Range",(function(){return a}));var s=function(){function e(t,r){n(this,e),this.row=t,this.column=r}return o(e,[{key:"isEqual",value:function(e){return this.row===e.row&&this.colum===e.column}},{key:"freeze",value:function(){return Object.freeze(this)}}]),e}(),a=function(){function e(t,r){n(this,e),this.start=new s(t.row,t.column),this.end=new s(r.row,r.column)}return o(e,[{key:"fromObject",value:function(t){if(t.instanceof(e))return t;this.start=new s(t.start.row,t.start.column),this.end=new s(t.end.row,t.end.column)}},{key:"freeze",value:function(){return this.start.freeze(),this.end.freeze(),Object.freeze(this)}}]),e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"TextEditor",(function(){return o}));var n=r(0);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){var r=t.buffer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buffer=r,this.element=document.createElement("div"),this.element.onDidChangeScrollTop=function(e){return new n.Disposable((function(e){console.log("implement editor.element.onDidChangeScrollTop"),e()}))},this.element.onDidChangeScrollLeft=function(e){return new n.Disposable((function(e){console.log("implement editor.element.onDidChangeScrollLeft"),e()}))},this.buffer=r,this.selectionsMarkerLayer={bufferMarkerLayer:{onDidCreateMarker:function(e){return new n.Disposable((function(e){console.log("implement editor.selectionsMarkerLayer.bufferMarkerLayer.onDidCreateMarker"),e()}))},getMarkers:function(){return console.log("implement editor.selectionsMarkerLayer.bufferMarkerLayer.getMarkers!"),[]}}}}var t,r,o;return t=e,(r=[{key:"getBuffer",value:function(){return this.buffer}},{key:"setDelegate",value:function(){console.log("todo: editor.setDelegate"),console.log(arguments)}},{key:"onDidDestroy",value:function(e){return new n.Disposable((function(e){console.log("implement editor.onDidDestroy"),e()}))}},{key:"editorDidResize",value:function(e){return new n.Disposable((function(e){console.log("implement editor.editorDidResize"),e()}))}},{key:"decorateMarkerLayer",value:function(e,t){var r=arguments;return console.log("implement editor.decorateMarkerLayer"),{setProperties:function(){console.log("implement editor.decorateMarkerLayer.setProperties. it had these args:"),console.log(r)}}}},{key:"addMarkerLayer",value:function(){return console.log("todo: TextEditor.addMarkerLayer"),console.log(arguments),{destroy:function(){}}}}])&&i(t.prototype,r),o&&i(t,o),e}()},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var s=r(0),a=s.Emitter,c=s.CompositeDisposable,l=r(62),u=l.Range,d=(l.Point,r(65)),p=r(27);function h(){}e.exports=function(){function e(t){var r=t.buffer,i=t.isHost,o=t.didDispose;n(this,e),this.buffer=r,this.saveBuffer=function(){console.log("implement buffer-binding.saveBuffer")},this.isHost=i,this.emitDidDispose=o||h,this.pendingChanges=[],this.disposed=!1,this.disableHistory=!1,this.subscriptions=new c,i&&this.subscriptions.add(r.onDidChangePath(this.relayURIChange.bind(this)))}return o(e,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.subscriptions.dispose(),this.buffer.restoreDefaultHistoryProvider(this.bufferProxy.getHistory(this.buffer.maxUndoEntries)),this.buffer=null,this.bufferDestroySubscription&&this.bufferDestroySubscription.dispose(),this.remoteFile&&this.remoteFile.dispose(),this.emitDidDispose())}},{key:"setBufferProxy",value:function(e){var t=this;for(this.bufferProxy=e,this.buffer.setHistoryProvider(this);this.pendingChanges.length>0;)this.pushChange(this.pendingChanges.shift());this.pendingChanges=null,this.isHost||(this.remoteFile=new f({uri:e.uri}),this.buffer.setFile(this.remoteFile)),this.bufferDestroySubscription=this.buffer.onDidDestroy((function(){t.isHost?e.dispose():t.dispose()}))}},{key:"setText",value:function(e){this.disableHistory=!0,this.buffer.setTextInRange(this.buffer.getRange(),e),this.disableHistory=!1}},{key:"pushChange",value:function(e){if(!this.disableHistory)if(this.bufferProxy){var t=e.oldStart,r=e.oldEnd,n=e.newText;this.bufferProxy.setTextInRange(t,r,n)}else this.pendingChanges.push(e)}},{key:"pushChanges",value:function(e){if(!this.disableHistory)for(var t=e.length-1;t>=0;t--)this.pushChange(e[t])}},{key:"updateText",value:function(e){for(var t=e.length-1;t>=0;t--){var r=e[t],n=r.oldStart,i=r.oldEnd,o=r.newText;this.disableHistory=!0,this.buffer.setTextInRange(new u(n,i),o),this.disableHistory=!1}}},{key:"undo",value:function(){var e=this.bufferProxy.undo();return e?(this.convertMarkerRanges(e.markers),e):null}},{key:"redo",value:function(){var e=this.bufferProxy.redo();return e?(this.convertMarkerRanges(e.markers),e):null}},{key:"convertMarkerRanges",value:function(e){for(var t in e){var r=e[t];for(var n in r){var i=r[n];i.range=u.fromObject(i.range)}}}},{key:"getChangesSinceCheckpoint",value:function(e){return this.bufferProxy.getChangesSinceCheckpoint(e)}},{key:"createCheckpoint",value:function(e){if(!this.disableHistory)return this.bufferProxy.createCheckpoint(e)}},{key:"groupChangesSinceCheckpoint",value:function(e,t){if(!this.disableHistory)return this.bufferProxy.groupChangesSinceCheckpoint(e,t)}},{key:"revertToCheckpoint",value:function(e,t){if(!this.disableHistory){var r=this.bufferProxy.revertToCheckpoint(e,t);return!!r&&(this.convertMarkerRanges(r.markers),r)}}},{key:"groupLastChanges",value:function(){if(!this.disableHistory)return this.bufferProxy.groupLastChanges()}},{key:"applyGroupingInterval",value:function(e){this.disableHistory||this.bufferProxy.applyGroupingInterval(e)}},{key:"enforceUndoStackSizeLimit",value:function(){}},{key:"save",value:function(){if(this.buffer.getPath())return this.saveBuffer()}},{key:"relayURIChange",value:function(){this.bufferProxy.setURI(this.getBufferProxyURI())}},{key:"didChangeURI",value:function(e){this.remoteFile&&this.remoteFile.setURI(e)}},{key:"getBufferProxyURI",value:function(){if(!this.buffer.getPath())return"untitled";var e=p.basename("TODO(getBufferProxyURI)");return p.join(e,"TODO(getBufferProxyURI)")}},{key:"serialize",value:function(e){return this.serializeUsingDefaultHistoryProviderFormat(e)}},{key:"serializeUsingDefaultHistoryProviderFormat",value:function(e){var t=this.buffer.maxUndoEntries;this.buffer.restoreDefaultHistoryProvider(this.bufferProxy.getHistory(t));var r=this.buffer.historyProvider.serialize(e);return this.buffer.setHistoryProvider(this),r}}]),e}();var f=function(){function e(t){var r=t.uri;n(this,e),this.uri=r,this.emitter=new a}return o(e,[{key:"dispose",value:function(){this.emitter.dispose()}},{key:"getPath",value:function(){return d(this.uri)}},{key:"setURI",value:function(e){this.uri=e,this.emitter.emit("did-rename")}},{key:"onDidRename",value:function(e){return this.emitter.on("did-rename",e)}},{key:"existsSync",value:function(){return!1}}]),e}()},function(e,t,r){var n=r(27),i=/\\/g,o=/\//g;e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.sep,r="/"===t?i:o;return e.replace(r,t)}},function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(27),s=r(0),a=s.CompositeDisposable,c=s.Disposable,l=s.Emitter,u=r(28).getEditorURI,d=r(12).FollowState;function p(e){return{range:e.getRange(),exclusive:e.isExclusive(),reversed:e.isReversed()}}function h(e){var t="ParticipantCursor--site-"+e;return!1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).blink&&(t+=" non-blinking"),t}e.exports=function(){function e(t){var r=t.editor,n=t.portal,i=t.isHost;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=r,this.portal=n,this.isHost=i,this.emitter=new l,this.selectionsMarkerLayer=this.editor.selectionsMarkerLayer.bufferMarkerLayer,this.markerLayersBySiteId=new Map,this.markersByLayerAndId=new WeakMap,this.subscriptions=new a,this.preserveFollowState=!1,this.positionsBySiteId={}}var t,r,s;return t=e,(r=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.subscriptions.dispose(),this.markerLayersBySiteId.forEach((function(e){return e.destroy()})),this.markerLayersBySiteId.clear(),this.localCursorLayerDecoration&&this.localCursorLayerDecoration.destroy(),this.emitter.emit("did-dispose"),this.emitter.dispose())}},{key:"setEditorProxy",value:function(e){this.editorProxy=e,this.isHost||this.monkeyPatchEditorMethods(this.editor,this.editorProxy),this.localCursorLayerDecoration=this.editor.decorateMarkerLayer(this.selectionsMarkerLayer,{type:"cursor",class:h(e.siteId)});for(var t,r,n,i=this.selectionsMarkerLayer.getMarkers(),o=0;o<i.length;o++)this.observeMarker(i[o],!1);this.subscriptions.add(this.selectionsMarkerLayer.onDidCreateMarker(this.observeMarker.bind(this))),this.subscriptions.add(this.editor.element.onDidChangeScrollTop(this.editorDidChangeScrollTop.bind(this))),this.subscriptions.add(this.editor.element.onDidChangeScrollLeft(this.editorDidChangeScrollLeft.bind(this))),this.subscriptions.add((t=this.editor.element,r=this.editorDidResize.bind(this),(n=new ResizeObserver(r)).observe(t),new c((function(){return n.disconnect()})))),this.relayLocalSelections()}},{key:"monkeyPatchEditorMethods",value:function(e,t){var r=this,n=e.getBuffer(),i=t.bufferProxy,s=this.portal.getSiteIdentity(1),a=s?"@".concat(s.login):"remote";e.getTitle=function(){return"".concat(a,": ").concat(o.basename("TODO monkeyPatchEditorMethods"()))},e.getURI=function(){return u(r.portal.id,t.id)},e.copy=function(){return null},e.serialize=function(){return null},e.isRemote=!0;var c=n.remoteEditorCount||0;n.remoteEditorCount=++c,n.getPath=function(){return"".concat(a,":").concat("TODO monkeyPatchEditorMethods"())},n.save=function(){i.requestSave()},n.isModified=function(){return!1},e.element.classList.add("teletype-RemotePaneItem")}},{key:"observeMarker",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.isDestroyed()){var i=e.onDidChange((function(r){r.textChanged?e.getRange().isEmpty()&&e.clearTail():t.updateSelections(n({},e.id,p(e)))})),o=e.onDidDestroy((function(){i.dispose(),o.dispose(),t.subscriptions.remove(i),t.subscriptions.remove(o),t.updateSelections(n({},e.id,null))}));this.subscriptions.add(i),this.subscriptions.add(o),r&&this.updateSelections(n({},e.id,p(e)))}}},{key:"editorDidChangeScrollTop",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.editor.element,t.next=3,regeneratorRuntime.awrap(e.component.getNextUpdatePromise());case 3:this.editorProxy.didScroll(),this.emitter.emit("did-scroll");case 5:case"end":return t.stop()}}),null,this)}},{key:"editorDidChangeScrollLeft",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.editor.element,t.next=3,regeneratorRuntime.awrap(e.component.getNextUpdatePromise());case 3:this.editorProxy.didScroll(),this.emitter.emit("did-scroll");case 5:case"end":return t.stop()}}),null,this)}},{key:"editorDidResize",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.editor.element,t.next=3,regeneratorRuntime.awrap(e.component.getNextUpdatePromise());case 3:this.emitter.emit("did-resize");case 4:case"end":return t.stop()}}),null,this)}},{key:"onDidDispose",value:function(e){return this.emitter.on("did-dispose",e)}},{key:"onDidScroll",value:function(e){return this.emitter.on("did-scroll",e)}},{key:"onDidResize",value:function(e){return this.emitter.on("did-resize",e)}},{key:"updateSelectionsForSiteId",value:function(e,t){var r=this.markerLayersBySiteId.get(e);r||(r=this.editor.addMarkerLayer(),this.editor.decorateMarkerLayer(r,{type:"cursor",class:h(e,{blink:!1})}),this.editor.decorateMarkerLayer(r,{type:"highlight",class:"selection"}),this.markerLayersBySiteId.set(e,r));var n,i=this.markersByLayerAndId.get(r);i||(i=new Map,this.markersByLayerAndId.set(r,i));var o=function(e){var o=t[e];e=parseInt(e);var a=i.get(e);if(o){n=n?Math.max(n,e):e;var c=o.range,l=c.start,u=c.end,d=Range(l,u);a?a.setBufferRange(d,{reversed:o.reversed}):((a=r.markBufferRange(d,{invalidate:"never",reversed:o.reversed})).bufferMarker.onDidChange((function(e){e.textChanged&&a.getBufferRange().isEmpty()&&a.clearTail()})),i.set(e,a)),d.isEmpty()&&a.clearTail()}else a.destroy(),i.delete(e);s=e};for(var s in t)o(s)}},{key:"isScrollNeededToViewPosition",value:function(e){var t="inside"===this.getDirectionFromViewportToPosition(e);return document.body.contains(this.editor.element)&&!t}},{key:"updateTether",value:function(e,t){var r=this,n={type:"cursor"};e===d.RETRACTED?(this.editor.destroyFoldsIntersectingBufferRange(Range(t,t)),this.batchMarkerUpdates((function(){return r.editor.setCursorBufferPosition(t)})),n.style={opacity:0}):n.class=h(this.editorProxy.siteId),this.localCursorLayerDecoration.setProperties(n)}},{key:"getDirectionFromViewportToPosition",value:function(e){var t=this.editor.element;if(document.contains(t)){var r=this.editor.screenPositionForBufferPosition(e),n=r.row,i=r.column,o=t.component.pixelPositionAfterBlocksForRow(n),s=i*this.editor.getDefaultCharWidth();return o<t.getScrollTop()?"upward":o>=t.getScrollBottom()?"downward":s<t.getScrollLeft()?"leftward":s>=t.getScrollRight()?"rightward":"inside"}}},{key:"clearSelectionsForSiteId",value:function(e){var t=this.markerLayersBySiteId.get(e);null!=t&&t.destroy(),this.markerLayersBySiteId.delete(e),this.markersByLayerAndId.delete(t)}},{key:"relayLocalSelections",value:function(){for(var e={},t=this.selectionsMarkerLayer.getMarkers(),r=0;r<t.length;r++){var n=t[r];e[n.id]=p(n)}this.editorProxy.updateSelections(e,{initialUpdate:!0})}},{key:"batchMarkerUpdates",value:function(e){this.batchedMarkerUpdates={},this.isBatchingMarkerUpdates=!0,e(),this.isBatchingMarkerUpdates=!1,this.editorProxy.updateSelections(this.batchedMarkerUpdates),this.batchedMarkerUpdates=null}},{key:"updateSelections",value:function(e){this.isBatchingMarkerUpdates?Object.assign(this.batchedMarkerUpdates,e):this.editorProxy.updateSelections(e)}},{key:"toggleFollowingForSiteId",value:function(e){e===this.editorProxy.getFollowedSiteId()?this.editorProxy.unfollow():this.editorProxy.follow(e)}}])&&i(t.prototype,r),s&&i(t,s),e}()},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(160),o=i.dom,s=r(12).FollowState;e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props={positionsBySiteId:{}},Object.assign(this.props,t),i.initialize(this)}var t,r,a;return t=e,(r=[{key:"destroy",value:function(){return i.destroy(this)}},{key:"update",value:function(e){return Object.assign(this.props,e),i.update(this)}},{key:"show",value:function(e){e.appendChild(this.element)}},{key:"hide",value:function(){this.element.remove()}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.positionsBySiteId).map((function(e){return parseInt(e)})).filter((function(t){return t!==e.props.portal.siteId}));return o.div({className:"SitePositionsComponent"},t.map((function(t){return e.renderSite(t)})))}},{key:"renderSite",value:function(e){var t=this,r=this.props.portal,n=(r.getSiteIdentity(e).login,this.isCursorVisibleForSite(e)?"color--site-".concat(e):""),i=this.getLocationForSite(e),s="viewing-non-portal-item"===i?function(){}:function(){return t.onSelectSiteId(e)};return o.div({className:"SitePositionsComponent-site site-".concat(e," ").concat(i," ").concat(n)},r.getFollowedSiteId()===e?o.div({className:"icon icon-link"}):null,o.img({src:"TODO",onClick:s}))}},{key:"onSelectSiteId",value:function(e){e===this.props.portal.getFollowedSiteId()?this.props.portal.unfollow():this.props.portal.follow(e)}},{key:"isCursorVisibleForSite",value:function(e){var t=this.props.positionsBySiteId[e].followState;return"viewing-current-editor"===this.getLocationForSite(e)&&(t===s.DISCONNECTED||t===s.EXTENDED)}},{key:"getLocationForSite",value:function(e){var t=this.props,r=t.portal,n=t.positionsBySiteId,i=n[r.siteId],o=i&&i.editorProxy,s=n[e].editorProxy;return null==s?"viewing-non-portal-item":s===o?"viewing-current-editor":"viewing-other-editor"}}])&&n(t.prototype,r),a&&n(t,a),e}()},function(e,t){e.exports={onCopy:"copy",onCut:"cut",onPaste:"paste",onCompositionEnd:"compositionend",onCompositionStart:"compositionstart",onCompositionUpdate:"compositionupdate",onKeyDown:"keydown",onKeyPress:"keypress",onKeyUp:"keyup",onFocus:"focus",onBlur:"blur",onChange:"change",onInput:"input",onSubmit:"submit",onClick:"click",onContextMenu:"contextmenu",onDoubleClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragEnter:"dragenter",onDragExit:"dragexit",onDragLeave:"dragleave",onDragOver:"dragover",onDragStart:"dragstart",onDrop:"drop",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onSelect:"select",onTouchCancel:"touchcancel",onTouchEnd:"touchend",onTouchMove:"touchmove",onTouchStart:"touchstart",onScroll:"scroll",onWheel:"wheel",onAbort:"abort",onCanPlay:"canplay",onCanPlayThrough:"canplaythrough",onDurationChange:"durationchange",onEmptied:"emptied",onEncrypted:"encrypted",onEnded:"ended",onError:"error",onLoadedData:"loadeddata",onLoadedMetadata:"loadedmetadata",onLoadStart:"loadstart",onPause:"pause",onPlay:"play",onPlaying:"playing",onProgress:"progress",onRateChange:"ratechange",onSeeked:"seeked",onSeeking:"seeking",onStalled:"stalled",onSuspend:"suspend",onTimeUpdate:"timeupdate",onVolumeChange:"volumechange",onWaiting:"waiting",onLoad:"load",onAnimationStart:"animationstart",onAnimationEnd:"animationend",onAnimationIteration:"animationiteration",onTransitionEnd:"transitionend"}},function(e,t,r){const n=r(68),i=r(29),o=r(162),s="",a=r(70);function c(e,t,r,n){if(t)for(var i in t)r&&i in r||(n?e[i]=s:delete e[i]);if(r)for(var i in r){const n=t&&t[i],o=r[i];o!==n&&(e[i]=o)}}function l(e,t,r){if(t)for(var n in t)r&&n in r||e.removeAttribute(n);if(r)for(var n in r){const i=t&&t[n],o=r[n];o!==i&&e.setAttribute(n,o)}}e.exports=function(e,t,r,u){const d=t&&t.props,p=r.props;let h,f;u&&(h=u.refs,f=u.listenerContext),function e(t,r,a,u,d){if(a)for(var p in a)"ref"!==p&&"on"!==p&&(p in n||d&&p in d||("dataset"===p?e(t.dataset,null,a&&a.dataset,null,null):"innerHTML"!==p&&r&&i.has(r.tag)?t.removeAttribute(o.get(p)||p):(t[p]=s,delete t[p])));if(d)for(var p in d)if("ref"!==p&&"on"!==p&&!(p in n)){var h=a&&a[p],f=d[p];"dataset"===p?c(t.dataset,h,f,!1):"style"===p&&"string"!=typeof f?("string"==typeof h&&(t.style="",h=null),c(t.style,h,f,!0)):"attributes"===p?l(t,h,f):f!==h&&("innerHTML"!==p&&u&&i.has(u.tag)?t.setAttribute(o.get(p)||p,f):u&&"input"===u.tag&&"value"===p&&t[p]===f||(t[p]=f))}}(e,t,d,r,p),h&&a(e,d&&d.ref,p&&p.ref,h),function(e,t,r,n){const i=t&&t.props&&t.props.on,o=r.props&&r.props.on;for(const r in i)if(!(o&&r in o)){let n;n=t&&t.boundListeners&&t.boundListeners[r]?t.boundListeners[r]:i[r],e.removeEventListener(r,n)}for(const s in o){const a=i&&i[s],c=o[s];if(c!==a){if(a){let r;r=t&&t.boundListeners&&t.boundListeners[s]?t.boundListeners[s]:a,e.removeEventListener(s,r)}if(c){let t;n?(t=c.bind(n),r.boundListeners||(r.boundListeners={}),r.boundListeners[s]=t):t=c,e.addEventListener(s,t)}}}}(e,t,r,f)}},function(e,t){e.exports=function(e,t,r,n){r!==t&&("function"==typeof t?t(null):t&&n[t]===e&&delete n[t],"function"==typeof r?r(e):r&&(n[r]=e))}},function(e,t,r){const n=r(165);let i=null;e.exports.setScheduler=function(e){i=e},e.exports.getScheduler=function(){return i||(i=new n),i}},function(e,t,r){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=r(75)},function(e,t,r){e.exports=r(168)},function(e,t,r){"use strict";
/** @license React v16.12.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(33),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,c=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var f=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var y="function"==typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||v}function S(){}function k(e,t,r){this.props=e,this.context=t,this.refs=b,this.updater=r||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=w.prototype;var E=k.prototype=new S;E.constructor=k,n(E,w.prototype),E.isPureReactComponent=!0;var _={current:null},C={current:null},M=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,r){var n,i={},s=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)M.call(t,n)&&!x.hasOwnProperty(n)&&(i[n]=t[n]);var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===i[n]&&(i[n]=c[n]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:C.current}}function R(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var T=/\/+/g,I=[];function P(e,t,r,n){if(I.length){var i=I.pop();return i.result=e,i.keyPrefix=t,i.func=r,i.context=n,i.count=0,i}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function A(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>I.length&&I.push(e)}function B(e,t,r){return null==e?0:function e(t,r,n,i){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var c=!1;if(null===t)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case o:case s:c=!0}}if(c)return n(i,t,""===r?"."+L(t,0):r),1;if(c=0,r=""===r?".":r+":",Array.isArray(t))for(var l=0;l<t.length;l++){var u=r+L(a=t[l],l);c+=e(a,u,n,i)}else if(null===t||"object"!=typeof t?u=null:u="function"==typeof(u=y&&t[y]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),l=0;!(a=t.next()).done;)c+=e(a=a.value,u=r+L(a,l++),n,i);else if("object"===a)throw n=""+t,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return c}(e,"",t,r)}function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function U(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,r){var n=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,n,r,(function(e){return e})):null!=e&&(R(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(T,"$&/")+"/")+r)),n.push(e))}function F(e,t,r,n,i){var o="";null!=r&&(o=(""+r).replace(T,"$&/")+"/"),B(e,D,t=P(t,o,n,i)),A(t)}function j(){var e=_.current;if(null===e)throw Error(m(321));return e}var $={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return F(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;B(e,U,t=P(null,null,t,r)),A(t)},count:function(e){return B(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!R(e))throw Error(m(143));return e}},createRef:function(){return{current:null}},Component:w,PureComponent:k,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:p,render:e}},lazy:function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return j().useCallback(e,t)},useContext:function(e,t){return j().useContext(e,t)},useEffect:function(e,t){return j().useEffect(e,t)},useImperativeHandle:function(e,t,r){return j().useImperativeHandle(e,t,r)},useDebugValue:function(){},useLayoutEffect:function(e,t){return j().useLayoutEffect(e,t)},useMemo:function(e,t){return j().useMemo(e,t)},useReducer:function(e,t,r){return j().useReducer(e,t,r)},useRef:function(e){return j().useRef(e)},useState:function(e){return j().useState(e)},Fragment:a,Profiler:l,StrictMode:c,Suspense:h,createElement:O,cloneElement:function(e,t,r){if(null==e)throw Error(m(267,e));var i=n({},e.props),s=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=C.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)M.call(t,u)&&!x.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:c}},createFactory:function(e){var t=O.bind(null,e);return t.type=e,t},isValidElement:R,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:_,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:n}},N={default:$},W=N&&$||N;e.exports=W.default||W},function(e,t,r){"use strict";
/** @license React v16.12.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(1),i=r(33),o=r(76);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(s(227));var a=null,c={};function l(){if(a)for(var e in c){var t=c[e],r=a.indexOf(e);if(!(-1<r))throw Error(s(96,e));if(!d[r]){if(!t.extractEvents)throw Error(s(97,e));for(var n in d[r]=t,r=t.eventTypes){var i=void 0,o=r[n],l=t,h=n;if(p.hasOwnProperty(h))throw Error(s(99,h));p[h]=o;var f=o.phasedRegistrationNames;if(f){for(i in f)f.hasOwnProperty(i)&&u(f[i],l,h);i=!0}else o.registrationName?(u(o.registrationName,l,h),i=!0):i=!1;if(!i)throw Error(s(98,n,e))}}}}function u(e,t,r){if(h[e])throw Error(s(100,e));h[e]=t,f[e]=t.eventTypes[r].dependencies}var d=[],p={},h={},f={};function g(e,t,r,n,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(e){this.onError(e)}}var y=!1,m=null,v=!1,b=null,w={onError:function(e){y=!0,m=e}};function S(e,t,r,n,i,o,s,a,c){y=!1,m=null,g.apply(w,arguments)}var k=null,E=null,_=null;function C(e,t,r){var n=e.type||"unknown-event";e.currentTarget=_(r),function(e,t,r,n,i,o,a,c,l){if(S.apply(this,arguments),y){if(!y)throw Error(s(198));var u=m;y=!1,m=null,v||(v=!0,b=u)}}(n,t,void 0,e),e.currentTarget=null}function M(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function x(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var O=null;function R(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)C(e,t[n],r[n]);else t&&C(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function T(e){if(null!==e&&(O=M(O,e)),e=O,O=null,e){if(x(e,R),O)throw Error(s(95));if(v)throw e=b,v=!1,b=null,e}}var I={injectEventPluginOrder:function(e){if(a)throw Error(s(101));a=Array.prototype.slice.call(e),l()},injectEventPluginsByName:function(e){var t,r=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];if(!c.hasOwnProperty(t)||c[t]!==n){if(c[t])throw Error(s(102,t));c[t]=n,r=!0}}r&&l()}};function P(e,t){var r=e.stateNode;if(!r)return null;var n=k(r);if(!n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(s(231,t,typeof r));return r}var A=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;A.hasOwnProperty("ReactCurrentDispatcher")||(A.ReactCurrentDispatcher={current:null}),A.hasOwnProperty("ReactCurrentBatchConfig")||(A.ReactCurrentBatchConfig={suspense:null});var B=/^(.*)[\\\/]/,L="function"==typeof Symbol&&Symbol.for,U=L?Symbol.for("react.element"):60103,D=L?Symbol.for("react.portal"):60106,F=L?Symbol.for("react.fragment"):60107,j=L?Symbol.for("react.strict_mode"):60108,$=L?Symbol.for("react.profiler"):60114,N=L?Symbol.for("react.provider"):60109,W=L?Symbol.for("react.context"):60110,z=L?Symbol.for("react.concurrent_mode"):60111,H=L?Symbol.for("react.forward_ref"):60112,V=L?Symbol.for("react.suspense"):60113,G=L?Symbol.for("react.suspense_list"):60120,q=L?Symbol.for("react.memo"):60115,K=L?Symbol.for("react.lazy"):60116;L&&Symbol.for("react.fundamental"),L&&Symbol.for("react.responder"),L&&Symbol.for("react.scope");var J="function"==typeof Symbol&&Symbol.iterator;function Y(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=J&&e[J]||e["@@iterator"])?e:null}function X(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case F:return"Fragment";case D:return"Portal";case $:return"Profiler";case j:return"StrictMode";case V:return"Suspense";case G:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case W:return"Context.Consumer";case N:return"Context.Provider";case H:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case q:return X(e.type);case K:if(e=1===e._status?e._result:null)return X(e)}return null}function Q(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,i=e._debugSource,o=X(e.type);r=null,n&&(r=X(n.type)),n=o,o="",i?o=" (at "+i.fileName.replace(B,"")+":"+i.lineNumber+")":r&&(o=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+o}t+=r,e=e.return}while(e);return t}var Z=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ee=null,te=null,re=null;function ne(e){if(e=E(e)){if("function"!=typeof ee)throw Error(s(280));var t=k(e.stateNode);ee(e.stateNode,e.type,t)}}function ie(e){te?re?re.push(e):re=[e]:te=e}function oe(){if(te){var e=te,t=re;if(re=te=null,ne(e),t)for(e=0;e<t.length;e++)ne(t[e])}}function se(e,t){return e(t)}function ae(e,t,r,n){return e(t,r,n)}function ce(){}var le=se,ue=!1,de=!1;function pe(){null===te&&null===re||(ce(),oe())}new Map;var he=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fe=Object.prototype.hasOwnProperty,ge={},ye={};function me(e,t,r,n,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ve[e]=new me(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ve[t]=new me(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ve[e]=new me(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ve[e]=new me(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ve[e]=new me(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ve[e]=new me(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){ve[e]=new me(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){ve[e]=new me(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){ve[e]=new me(e,5,!1,e.toLowerCase(),null,!1)}));var be=/[\-:]([a-z])/g;function we(e){return e[1].toUpperCase()}function Se(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ke(e,t,r,n){var i=ve.hasOwnProperty(t)?ve[t]:null;(null!==i?0===i.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!fe.call(ye,e)||!fe.call(ge,e)&&(he.test(e)?ye[e]=!0:(ge[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}function Ee(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function _e(e){e._valueTracker||(e._valueTracker=function(e){var t=Ee(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ce(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ee(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Me(e,t){var r=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function xe(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=Se(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Oe(e,t){null!=(t=t.checked)&&ke(e,"checked",t,!1)}function Re(e,t){Oe(e,t);var r=Se(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ie(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ie(e,t.type,Se(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Te(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function Ie(e,t,r){"number"===t&&e.ownerDocument.activeElement===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Pe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ae(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Se(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Be(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Le(e,t){var r=t.value;if(null==r){if(r=t.defaultValue,null!=(t=t.children)){if(null!=r)throw Error(s(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(s(93));t=t[0]}r=t}null==r&&(r="")}e._wrapperState={initialValue:Se(r)}}function Ue(e,t){var r=Se(t.value),n=Se(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function De(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(be,we);ve[t]=new me(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(be,we);ve[t]=new me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(be,we);ve[t]=new me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){ve[e]=new me(e,1,!1,e.toLowerCase(),null,!1)})),ve.xlinkHref=new me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){ve[e]=new me(e,1,!1,e.toLowerCase(),null,!0)}));var Fe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function je(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?je(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ne,We=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction((function(){return e(t,r)}))}:e}((function(e,t){if(e.namespaceURI!==Fe.svg||"innerHTML"in e)e.innerHTML=t;else{for((Ne=Ne||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ne.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ze(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}function He(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ve={animationend:He("Animation","AnimationEnd"),animationiteration:He("Animation","AnimationIteration"),animationstart:He("Animation","AnimationStart"),transitionend:He("Transition","TransitionEnd")},Ge={},qe={};function Ke(e){if(Ge[e])return Ge[e];if(!Ve[e])return e;var t,r=Ve[e];for(t in r)if(r.hasOwnProperty(t)&&t in qe)return Ge[e]=r[t];return e}Z&&(qe=document.createElement("div").style,"AnimationEvent"in window||(delete Ve.animationend.animation,delete Ve.animationiteration.animation,delete Ve.animationstart.animation),"TransitionEvent"in window||delete Ve.transitionend.transition);var Je=Ke("animationend"),Ye=Ke("animationiteration"),Xe=Ke("animationstart"),Qe=Ke("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function et(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function rt(e){if(et(e)!==e)throw Error(s(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return rt(i),e;if(o===n)return rt(i),t;o=o.sibling}throw Error(s(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,c=i.child;c;){if(c===r){a=!0,r=i,n=o;break}if(c===n){a=!0,n=i,r=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===r){a=!0,r=o,n=i;break}if(c===n){a=!0,n=o,r=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var it,ot,st,at=!1,ct=[],lt=null,ut=null,dt=null,pt=new Map,ht=new Map,ft=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),yt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function mt(e,t,r,n){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|r,nativeEvent:n}}function vt(e,t){switch(e){case"focus":case"blur":lt=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":dt=null;break;case"pointerover":case"pointerout":pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function bt(e,t,r,n,i){return null===e||e.nativeEvent!==i?(e=mt(t,r,n,i),null!==t&&(null!==(t=hn(t))&&ot(t)),e):(e.eventSystemFlags|=n,e)}function wt(e){var t=pn(e.target);if(null!==t){var r=et(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=tt(r)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){st(r)}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function St(e){if(null!==e.blockedOn)return!1;var t=Tr(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null!==t){var r=hn(t);return null!==r&&ot(r),e.blockedOn=t,!1}return!0}function kt(e,t,r){St(e)&&r.delete(t)}function Et(){for(at=!1;0<ct.length;){var e=ct[0];if(null!==e.blockedOn){null!==(e=hn(e.blockedOn))&&it(e);break}var t=Tr(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:ct.shift()}null!==lt&&St(lt)&&(lt=null),null!==ut&&St(ut)&&(ut=null),null!==dt&&St(dt)&&(dt=null),pt.forEach(kt),ht.forEach(kt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Et)))}function Ct(e){function t(t){return _t(t,e)}if(0<ct.length){_t(ct[0],e);for(var r=1;r<ct.length;r++){var n=ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==lt&&_t(lt,e),null!==ut&&_t(ut,e),null!==dt&&_t(dt,e),pt.forEach(t),ht.forEach(t),r=0;r<ft.length;r++)(n=ft[r]).blockedOn===e&&(n.blockedOn=null);for(;0<ft.length&&null===(r=ft[0]).blockedOn;)wt(r),null===r.blockedOn&&ft.shift()}function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function xt(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Ot(e,t,r){(t=P(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=M(r._dispatchListeners,t),r._dispatchInstances=M(r._dispatchInstances,e))}function Rt(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=xt(t);for(t=r.length;0<t--;)Ot(r[t],"captured",e);for(t=0;t<r.length;t++)Ot(r[t],"bubbled",e)}}function Tt(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=P(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=M(r._dispatchListeners,t),r._dispatchInstances=M(r._dispatchInstances,e))}function It(e){e&&e.dispatchConfig.registrationName&&Tt(e._targetInst,null,e)}function Pt(e){x(e,Rt)}function At(){return!0}function Bt(){return!1}function Lt(e,t,r,n){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(r):"target"===i?this.target=n:this[i]=r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?At:Bt,this.isPropagationStopped=Bt,this}function Ut(e,t,r,n){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,r,n),i}return new this(e,t,r,n)}function Dt(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Ft(e){e.eventPool=[],e.getPooled=Ut,e.release=Dt}i(Lt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=At)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=At)},persist:function(){this.isPersistent=At},isPersistent:Bt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Bt,this._dispatchInstances=this._dispatchListeners=null}}),Lt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Lt.extend=function(e){function t(){}function r(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var o=new t;return i(o,r.prototype),r.prototype=o,r.prototype.constructor=r,r.Interface=i({},n.Interface,e),r.extend=n.extend,Ft(r),r},Ft(Lt);var jt=Lt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),$t=Lt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nt=Lt.extend({view:null,detail:null}),Wt=Nt.extend({relatedTarget:null});function zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Ht={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Gt[e])&&!!t[e]}function Kt(){return qt}for(var Jt=Nt.extend({key:function(e){if(e.key){var t=Ht[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Vt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Kt,charCode:function(e){return"keypress"===e.type?zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Yt=0,Xt=0,Qt=!1,Zt=!1,er=Nt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Kt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Yt;return Yt=e.screenX,Qt?"mousemove"===e.type?e.screenX-t:0:(Qt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Xt;return Xt=e.screenY,Zt?"mousemove"===e.type?e.screenY-t:0:(Zt=!0,0)}}),tr=er.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),rr=er.extend({dataTransfer:null}),nr=Nt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Kt}),ir=Lt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),or=er.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),sr=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Je,"animationEnd",2],[Ye,"animationIteration",2],[Xe,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Qe,"transitionEnd",2],["waiting","waiting",2]],ar={},cr={},lr=0;lr<sr.length;lr++){var ur=sr[lr],dr=ur[0],pr=ur[1],hr=ur[2],fr="on"+(pr[0].toUpperCase()+pr.slice(1)),gr={phasedRegistrationNames:{bubbled:fr,captured:fr+"Capture"},dependencies:[dr],eventPriority:hr};ar[pr]=gr,cr[dr]=gr}var yr={eventTypes:ar,getEventPriority:function(e){return void 0!==(e=cr[e])?e.eventPriority:2},extractEvents:function(e,t,r,n){var i=cr[e];if(!i)return null;switch(e){case"keypress":if(0===zt(r))return null;case"keydown":case"keyup":e=Jt;break;case"blur":case"focus":e=Wt;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=er;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=rr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=nr;break;case Je:case Ye:case Xe:e=jt;break;case Qe:e=ir;break;case"scroll":e=Nt;break;case"wheel":e=or;break;case"copy":case"cut":case"paste":e=$t;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=tr;break;default:e=Lt}return Pt(t=e.getPooled(i,t,r,n)),t}},mr=o.unstable_UserBlockingPriority,vr=o.unstable_runWithPriority,br=yr.getEventPriority,wr=10,Sr=[];function kr(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n=r;if(3===n.tag)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=3!==n.tag?null:n.stateNode.containerInfo}if(!n)break;5!==(t=r.tag)&&6!==t||e.ancestors.push(r),r=pn(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var i=Mt(e.nativeEvent);n=e.topLevelType;for(var o=e.nativeEvent,s=e.eventSystemFlags,a=null,c=0;c<d.length;c++){var l=d[c];l&&(l=l.extractEvents(n,t,o,i,s))&&(a=M(a,l))}T(a)}}var Er=!0;function _r(e,t){Cr(t,e,!1)}function Cr(e,t,r){switch(br(t)){case 0:var n=Mr.bind(null,t,1);break;case 1:n=xr.bind(null,t,1);break;default:n=Rr.bind(null,t,1)}r?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function Mr(e,t,r){ue||ce();var n=Rr,i=ue;ue=!0;try{ae(n,e,t,r)}finally{(ue=i)||pe()}}function xr(e,t,r){vr(mr,Rr.bind(null,e,t,r))}function Or(e,t,r,n){if(Sr.length){var i=Sr.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=r,i.targetInst=n,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:r,targetInst:n,ancestors:[]};try{if(t=kr,r=e,de)t(r,void 0);else{de=!0;try{le(t,r,void 0)}finally{de=!1,pe()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,Sr.length<wr&&Sr.push(e)}}function Rr(e,t,r){if(Er)if(0<ct.length&&-1<gt.indexOf(e))e=mt(null,e,t,r),ct.push(e);else{var n=Tr(e,t,r);null===n?vt(e,r):-1<gt.indexOf(e)?(e=mt(n,e,t,r),ct.push(e)):function(e,t,r,n){switch(t){case"focus":return lt=bt(lt,e,t,r,n),!0;case"dragenter":return ut=bt(ut,e,t,r,n),!0;case"mouseover":return dt=bt(dt,e,t,r,n),!0;case"pointerover":var i=n.pointerId;return pt.set(i,bt(pt.get(i)||null,e,t,r,n)),!0;case"gotpointercapture":return i=n.pointerId,ht.set(i,bt(ht.get(i)||null,e,t,r,n)),!0}return!1}(n,e,t,r)||(vt(e,r),Or(e,t,r,null))}}function Tr(e,t,r){var n=Mt(r);if(null!==(n=pn(n))){var i=et(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=tt(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Or(e,t,r,n),null}function Ir(e){if(!Z)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var Pr=new("function"==typeof WeakMap?WeakMap:Map);function Ar(e){var t=Pr.get(e);return void 0===t&&(t=new Set,Pr.set(e,t)),t}function Br(e,t,r){if(!r.has(e)){switch(e){case"scroll":Cr(t,"scroll",!0);break;case"focus":case"blur":Cr(t,"focus",!0),Cr(t,"blur",!0),r.add("blur"),r.add("focus");break;case"cancel":case"close":Ir(e)&&Cr(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&_r(e,t)}r.add(e)}}var Lr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ur=["Webkit","ms","Moz","O"];function Dr(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||Lr.hasOwnProperty(e)&&Lr[e]?(""+t).trim():t+"px"}function Fr(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=Dr(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(Lr).forEach((function(e){Ur.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lr[t]=Lr[e]}))}));var jr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $r(e,t){if(t){if(jr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62,""))}}function Nr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Wr(e,t){var r=Ar(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=f[t];for(var n=0;n<t.length;n++)Br(t[n],e,r)}function zr(){}function Hr(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Vr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gr(e,t){var r,n=Vr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vr(n)}}function qr(){for(var e=window,t=Hr();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=Hr((e=t.contentWindow).document)}return t}function Kr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Jr="$",Yr="/$",Xr="$?",Qr="$!",Zr=null,en=null;function tn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function rn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nn="function"==typeof setTimeout?setTimeout:void 0,on="function"==typeof clearTimeout?clearTimeout:void 0;function sn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function an(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if(r===Jr||r===Qr||r===Xr){if(0===t)return e;t--}else r===Yr&&t++}e=e.previousSibling}return null}var cn=Math.random().toString(36).slice(2),ln="__reactInternalInstance$"+cn,un="__reactEventHandlers$"+cn,dn="__reactContainere$"+cn;function pn(e){var t=e[ln];if(t)return t;for(var r=e.parentNode;r;){if(t=r[dn]||r[ln]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=an(e);null!==e;){if(r=e[ln])return r;e=an(e)}return t}r=(e=r).parentNode}return null}function hn(e){return!(e=e[ln]||e[dn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function fn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function gn(e){return e[un]||null}var yn=null,mn=null,vn=null;function bn(){if(vn)return vn;var e,t,r=mn,n=r.length,i="value"in yn?yn.value:yn.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===i[o-t];t++);return vn=i.slice(e,1<t?1-t:void 0)}var wn=Lt.extend({data:null}),Sn=Lt.extend({data:null}),kn=[9,13,27,32],En=Z&&"CompositionEvent"in window,_n=null;Z&&"documentMode"in document&&(_n=document.documentMode);var Cn=Z&&"TextEvent"in window&&!_n,Mn=Z&&(!En||_n&&8<_n&&11>=_n),xn=String.fromCharCode(32),On={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Rn=!1;function Tn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function In(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var An={eventTypes:On,extractEvents:function(e,t,r,n){var i;if(En)e:{switch(e){case"compositionstart":var o=On.compositionStart;break e;case"compositionend":o=On.compositionEnd;break e;case"compositionupdate":o=On.compositionUpdate;break e}o=void 0}else Pn?Tn(e,r)&&(o=On.compositionEnd):"keydown"===e&&229===r.keyCode&&(o=On.compositionStart);return o?(Mn&&"ko"!==r.locale&&(Pn||o!==On.compositionStart?o===On.compositionEnd&&Pn&&(i=bn()):(mn="value"in(yn=n)?yn.value:yn.textContent,Pn=!0)),o=wn.getPooled(o,t,r,n),i?o.data=i:null!==(i=In(r))&&(o.data=i),Pt(o),i=o):i=null,(e=Cn?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(Rn=!0,xn);case"textInput":return(e=t.data)===xn&&Rn?null:e;default:return null}}(e,r):function(e,t){if(Pn)return"compositionend"===e||!En&&Tn(e,t)?(e=bn(),vn=mn=yn=null,Pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))?((t=Sn.getPooled(On.beforeInput,t,r,n)).data=e,Pt(t)):t=null,null===i?t:null===t?i:[i,t]}},Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}var Un={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Dn(e,t,r){return(e=Lt.getPooled(Un.change,e,t,r)).type="change",ie(r),Pt(e),e}var Fn=null,jn=null;function $n(e){T(e)}function Nn(e){if(Ce(fn(e)))return e}function Wn(e,t){if("change"===e)return t}var zn=!1;function Hn(){Fn&&(Fn.detachEvent("onpropertychange",Vn),jn=Fn=null)}function Vn(e){if("value"===e.propertyName&&Nn(jn))if(e=Dn(jn,e,Mt(e)),ue)T(e);else{ue=!0;try{se($n,e)}finally{ue=!1,pe()}}}function Gn(e,t,r){"focus"===e?(Hn(),jn=r,(Fn=t).attachEvent("onpropertychange",Vn)):"blur"===e&&Hn()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Nn(jn)}function Kn(e,t){if("click"===e)return Nn(t)}function Jn(e,t){if("input"===e||"change"===e)return Nn(t)}Z&&(zn=Ir("input")&&(!document.documentMode||9<document.documentMode));var Yn,Xn={eventTypes:Un,_isInputEventSupported:zn,extractEvents:function(e,t,r,n){var i=t?fn(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=Wn;else if(Ln(i))if(zn)s=Jn;else{s=qn;var a=Gn}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Kn);if(s&&(s=s(e,t)))return Dn(s,r,n);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Ie(i,"number",i.value)}},Qn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Zn={eventTypes:Qn,extractEvents:function(e,t,r,n,i){var o="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(r.relatedTarget||r.fromElement)||!s&&!o)return null;if(i=n.window===n?n:(i=n.ownerDocument)?i.defaultView||i.parentWindow:window,s?(s=t,null!==(t=(t=r.relatedTarget||r.toElement)?pn(t):null)&&(t!==(o=et(t))||5!==t.tag&&6!==t.tag)&&(t=null)):s=null,s===t)return null;if("mouseout"===e||"mouseover"===e)var a=er,c=Qn.mouseLeave,l=Qn.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=tr,c=Qn.pointerLeave,l=Qn.pointerEnter,u="pointer");if(e=null==s?i:fn(s),i=null==t?i:fn(t),(c=a.getPooled(c,s,r,n)).type=u+"leave",c.target=e,c.relatedTarget=i,(n=a.getPooled(l,t,r,n)).type=u+"enter",n.target=i,n.relatedTarget=e,u=t,(a=s)&&u)e:{for(e=u,s=0,t=l=a;t;t=xt(t))s++;for(t=0,i=e;i;i=xt(i))t++;for(;0<s-t;)l=xt(l),s--;for(;0<t-s;)e=xt(e),t--;for(;s--;){if(l===e||l===e.alternate)break e;l=xt(l),e=xt(e)}l=null}else l=null;for(e=l,l=[];a&&a!==e&&(null===(s=a.alternate)||s!==e);)l.push(a),a=xt(a);for(a=[];u&&u!==e&&(null===(s=u.alternate)||s!==e);)a.push(u),u=xt(u);for(u=0;u<l.length;u++)Tt(l[u],"bubbled",c);for(u=a.length;0<u--;)Tt(a[u],"captured",n);return r===Yn?(Yn=null,[c]):(Yn=r,[c,n])}};var ei="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ti=Object.prototype.hasOwnProperty;function ri(e,t){if(ei(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!ti.call(t,r[n])||!ei(e[r[n]],t[r[n]]))return!1;return!0}var ni=Z&&"documentMode"in document&&11>=document.documentMode,ii={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},oi=null,si=null,ai=null,ci=!1;function li(e,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return ci||null==oi||oi!==Hr(r)?null:("selectionStart"in(r=oi)&&Kr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ai&&ri(ai,r)?null:(ai=r,(e=Lt.getPooled(ii.select,si,e,t)).type="select",e.target=oi,Pt(e),e))}var ui={eventTypes:ii,extractEvents:function(e,t,r,n){var i,o=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;if(!(i=!o)){e:{o=Ar(o),i=f.onSelect;for(var s=0;s<i.length;s++)if(!o.has(i[s])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?fn(t):window,e){case"focus":(Ln(o)||"true"===o.contentEditable)&&(oi=o,si=t,ai=null);break;case"blur":ai=si=oi=null;break;case"mousedown":ci=!0;break;case"contextmenu":case"mouseup":case"dragend":return ci=!1,li(r,n);case"selectionchange":if(ni)break;case"keydown":case"keyup":return li(r,n)}return null}};I.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),k=gn,E=hn,_=fn,I.injectEventPluginsByName({SimpleEventPlugin:yr,EnterLeaveEventPlugin:Zn,ChangeEventPlugin:Xn,SelectEventPlugin:ui,BeforeInputEventPlugin:An}),new Set;var di=[],pi=-1;function hi(e){0>pi||(e.current=di[pi],di[pi]=null,pi--)}function fi(e,t){pi++,di[pi]=e.current,e.current=t}var gi={},yi={current:gi},mi={current:!1},vi=gi;function bi(e,t){var r=e.type.contextTypes;if(!r)return gi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function wi(e){return null!=(e=e.childContextTypes)}function Si(e){hi(mi),hi(yi)}function ki(e){hi(mi),hi(yi)}function Ei(e,t,r){if(yi.current!==gi)throw Error(s(168));fi(yi,t),fi(mi,r)}function _i(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var o in n=n.getChildContext())if(!(o in e))throw Error(s(108,X(t)||"Unknown",o));return i({},r,{},n)}function Ci(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||gi,vi=yi.current,fi(yi,t),fi(mi,mi.current),!0}function Mi(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(t=_i(e,t,vi),n.__reactInternalMemoizedMergedChildContext=t,hi(mi),hi(yi),fi(yi,t)):hi(mi),fi(mi,r)}var xi=o.unstable_runWithPriority,Oi=o.unstable_scheduleCallback,Ri=o.unstable_cancelCallback,Ti=o.unstable_shouldYield,Ii=o.unstable_requestPaint,Pi=o.unstable_now,Ai=o.unstable_getCurrentPriorityLevel,Bi=o.unstable_ImmediatePriority,Li=o.unstable_UserBlockingPriority,Ui=o.unstable_NormalPriority,Di=o.unstable_LowPriority,Fi=o.unstable_IdlePriority,ji={},$i=void 0!==Ii?Ii:function(){},Ni=null,Wi=null,zi=!1,Hi=Pi(),Vi=1e4>Hi?Pi:function(){return Pi()-Hi};function Gi(){switch(Ai()){case Bi:return 99;case Li:return 98;case Ui:return 97;case Di:return 96;case Fi:return 95;default:throw Error(s(332))}}function qi(e){switch(e){case 99:return Bi;case 98:return Li;case 97:return Ui;case 96:return Di;case 95:return Fi;default:throw Error(s(332))}}function Ki(e,t){return e=qi(e),xi(e,t)}function Ji(e,t,r){return e=qi(e),Oi(e,t,r)}function Yi(e){return null===Ni?(Ni=[e],Wi=Oi(Bi,Qi)):Ni.push(e),ji}function Xi(){if(null!==Wi){var e=Wi;Wi=null,Ri(e)}Qi()}function Qi(){if(!zi&&null!==Ni){zi=!0;var e=0;try{var t=Ni;Ki(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),Ni=null}catch(t){throw null!==Ni&&(Ni=Ni.slice(e+1)),Oi(Bi,Xi),t}finally{zi=!1}}}var Zi=3;function eo(e,t,r){return 1073741821-(1+((1073741821-e+t/10)/(r/=10)|0))*r}function to(e,t){if(e&&e.defaultProps)for(var r in t=i({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}var ro={current:null},no=null,io=null,oo=null;function so(){oo=io=no=null}function ao(e,t){var r=e.type._context;fi(ro,r._currentValue),r._currentValue=t}function co(e){var t=ro.current;hi(ro),e.type._context._currentValue=t}function lo(e,t){for(;null!==e;){var r=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t);else{if(!(null!==r&&r.childExpirationTime<t))break;r.childExpirationTime=t}e=e.return}}function uo(e,t){no=e,oo=io=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Vs=!0),e.firstContext=null)}function po(e,t){if(oo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(oo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===io){if(null===no)throw Error(s(308));io=t,no.dependencies={expirationTime:0,firstContext:t,responders:null}}else io=io.next=t;return e._currentValue}var ho=!1;function fo(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function go(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function yo(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function mo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function vo(e,t){var r=e.alternate;if(null===r){var n=e.updateQueue,i=null;null===n&&(n=e.updateQueue=fo(e.memoizedState))}else n=e.updateQueue,i=r.updateQueue,null===n?null===i?(n=e.updateQueue=fo(e.memoizedState),i=r.updateQueue=fo(r.memoizedState)):n=e.updateQueue=go(i):null===i&&(i=r.updateQueue=go(n));null===i||n===i?mo(n,t):null===n.lastUpdate||null===i.lastUpdate?(mo(n,t),mo(i,t)):(mo(n,t),i.lastUpdate=t)}function bo(e,t){var r=e.updateQueue;null===(r=null===r?e.updateQueue=fo(e.memoizedState):wo(e,r)).lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=t:(r.lastCapturedUpdate.next=t,r.lastCapturedUpdate=t)}function wo(e,t){var r=e.alternate;return null!==r&&t===r.updateQueue&&(t=e.updateQueue=go(t)),t}function So(e,t,r,n,o,s){switch(r.tag){case 1:return"function"==typeof(e=r.payload)?e.call(s,n,o):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null==(o="function"==typeof(e=r.payload)?e.call(s,n,o):e))break;return i({},n,o);case 2:ho=!0}return n}function ko(e,t,r,n,i){ho=!1;for(var o=(t=wo(e,t)).baseState,s=null,a=0,c=t.firstUpdate,l=o;null!==c;){var u=c.expirationTime;u<i?(null===s&&(s=c,o=l),a<u&&(a=u)):(xc(u,c.suspenseConfig),l=So(e,0,c,l,r,n),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=c:(t.lastEffect.nextEffect=c,t.lastEffect=c))),c=c.next}for(u=null,c=t.firstCapturedUpdate;null!==c;){var d=c.expirationTime;d<i?(null===u&&(u=c,null===s&&(o=l)),a<d&&(a=d)):(l=So(e,0,c,l,r,n),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=c:(t.lastCapturedEffect.nextEffect=c,t.lastCapturedEffect=c))),c=c.next}null===s&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===s&&null===u&&(o=l),t.baseState=o,t.firstUpdate=s,t.firstCapturedUpdate=u,Oc(a),e.expirationTime=a,e.memoizedState=l}function Eo(e,t,r){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),_o(t.firstEffect,r),t.firstEffect=t.lastEffect=null,_o(t.firstCapturedEffect,r),t.firstCapturedEffect=t.lastCapturedEffect=null}function _o(e,t){for(;null!==e;){var r=e.callback;if(null!==r){e.callback=null;var n=t;if("function"!=typeof r)throw Error(s(191,r));r.call(n)}e=e.nextEffect}}var Co=A.ReactCurrentBatchConfig,Mo=(new n.Component).refs;function xo(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:i({},t,r),e.memoizedState=r,null!==(n=e.updateQueue)&&0===e.expirationTime&&(n.baseState=r)}var Oo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=fc(),i=Co.suspense;(i=yo(n=gc(n,e,i),i)).payload=t,null!=r&&(i.callback=r),vo(e,i),yc(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=fc(),i=Co.suspense;(i=yo(n=gc(n,e,i),i)).tag=1,i.payload=t,null!=r&&(i.callback=r),vo(e,i),yc(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=fc(),n=Co.suspense;(n=yo(r=gc(r,e,n),n)).tag=2,null!=t&&(n.callback=t),vo(e,n),yc(e,r)}};function Ro(e,t,r,n,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ri(r,n)||!ri(i,o))}function To(e,t,r){var n=!1,i=gi,o=t.contextType;return"object"==typeof o&&null!==o?o=po(o):(i=wi(t)?vi:yi.current,o=(n=null!=(n=t.contextTypes))?bi(e,i):gi),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Oo,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Io(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Oo.enqueueReplaceState(t,t.state,null)}function Po(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Mo;var o=t.contextType;"object"==typeof o&&null!==o?i.context=po(o):(o=wi(t)?vi:yi.current,i.context=bi(e,o)),null!==(o=e.updateQueue)&&(ko(e,o,r,i,n),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(xo(e,t,o,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Oo.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(ko(e,o,r,i,n),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Ao=Array.isArray;function Bo(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=n.refs;t===Mo&&(t=n.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function Lo(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Uo(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.effectTag=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,r){return(e=Kc(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.effectTag=2,r):n:(t.effectTag=2,r):r}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,r,n){return null===t||6!==t.tag?((t=Xc(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){return null!==t&&t.elementType===r.type?((n=i(t,r.props)).ref=Bo(e,t,r),n.return=e,n):((n=Jc(r.type,r.key,r.props,null,e.mode,n)).ref=Bo(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Qc(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function d(e,t,r,n,o){return null===t||7!==t.tag?((t=Yc(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function p(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=Xc(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case U:return(r=Jc(t.type,t.key,t.props,null,e.mode,r)).ref=Bo(e,null,t),r.return=e,r;case D:return(t=Qc(t,e.mode,r)).return=e,t}if(Ao(t)||Y(t))return(t=Yc(t,e.mode,r,null)).return=e,t;Lo(e,t)}return null}function h(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==i?null:c(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case U:return r.key===i?r.type===F?d(e,t,r.props.children,n,i):l(e,t,r,n):null;case D:return r.key===i?u(e,t,r,n):null}if(Ao(r)||Y(r))return null!==i?null:d(e,t,r,n,null);Lo(e,r)}return null}function f(e,t,r,n,i){if("string"==typeof n||"number"==typeof n)return c(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case U:return e=e.get(null===n.key?r:n.key)||null,n.type===F?d(t,e,n.props.children,i,n.key):l(t,e,n,i);case D:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i)}if(Ao(n)||Y(n))return d(t,e=e.get(r)||null,n,i,null);Lo(t,n)}return null}function g(i,s,a,c){for(var l=null,u=null,d=s,g=s=0,y=null;null!==d&&g<a.length;g++){d.index>g?(y=d,d=null):y=d.sibling;var m=h(i,d,a[g],c);if(null===m){null===d&&(d=y);break}e&&d&&null===m.alternate&&t(i,d),s=o(m,s,g),null===u?l=m:u.sibling=m,u=m,d=y}if(g===a.length)return r(i,d),l;if(null===d){for(;g<a.length;g++)null!==(d=p(i,a[g],c))&&(s=o(d,s,g),null===u?l=d:u.sibling=d,u=d);return l}for(d=n(i,d);g<a.length;g++)null!==(y=f(d,i,g,a[g],c))&&(e&&null!==y.alternate&&d.delete(null===y.key?g:y.key),s=o(y,s,g),null===u?l=y:u.sibling=y,u=y);return e&&d.forEach((function(e){return t(i,e)})),l}function y(i,a,c,l){var u=Y(c);if("function"!=typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var d=u=null,g=a,y=a=0,m=null,v=c.next();null!==g&&!v.done;y++,v=c.next()){g.index>y?(m=g,g=null):m=g.sibling;var b=h(i,g,v.value,l);if(null===b){null===g&&(g=m);break}e&&g&&null===b.alternate&&t(i,g),a=o(b,a,y),null===d?u=b:d.sibling=b,d=b,g=m}if(v.done)return r(i,g),u;if(null===g){for(;!v.done;y++,v=c.next())null!==(v=p(i,v.value,l))&&(a=o(v,a,y),null===d?u=v:d.sibling=v,d=v);return u}for(g=n(i,g);!v.done;y++,v=c.next())null!==(v=f(g,i,y,v.value,l))&&(e&&null!==v.alternate&&g.delete(null===v.key?y:v.key),a=o(v,a,y),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(i,e)})),u}return function(e,n,o,c){var l="object"==typeof o&&null!==o&&o.type===F&&null===o.key;l&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case U:e:{for(u=o.key,l=n;null!==l;){if(l.key===u){if(7===l.tag?o.type===F:l.elementType===o.type){r(e,l.sibling),(n=i(l,o.type===F?o.props.children:o.props)).ref=Bo(e,l,o),n.return=e,e=n;break e}r(e,l);break}t(e,l),l=l.sibling}o.type===F?((n=Yc(o.props.children,e.mode,c,o.key)).return=e,e=n):((c=Jc(o.type,o.key,o.props,null,e.mode,c)).ref=Bo(e,n,o),c.return=e,e=c)}return a(e);case D:e:{for(l=o.key;null!==n;){if(n.key===l){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){r(e,n.sibling),(n=i(n,o.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=Qc(o,e.mode,c)).return=e,e=n}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==n&&6===n.tag?(r(e,n.sibling),(n=i(n,o)).return=e,e=n):(r(e,n),(n=Xc(o,e.mode,c)).return=e,e=n),a(e);if(Ao(o))return g(e,n,o,c);if(Y(o))return y(e,n,o,c);if(u&&Lo(e,o),void 0===o&&!l)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return r(e,n)}}var Do=Uo(!0),Fo=Uo(!1),jo={},$o={current:jo},No={current:jo},Wo={current:jo};function zo(e){if(e===jo)throw Error(s(174));return e}function Ho(e,t){fi(Wo,t),fi(No,e),fi($o,jo);var r=t.nodeType;switch(r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$e(null,"");break;default:t=$e(t=(r=8===r?t.parentNode:t).namespaceURI||null,r=r.tagName)}hi($o),fi($o,t)}function Vo(e){hi($o),hi(No),hi(Wo)}function Go(e){zo(Wo.current);var t=zo($o.current),r=$e(t,e.type);t!==r&&(fi(No,e),fi($o,r))}function qo(e){No.current===e&&(hi($o),hi(No))}var Ko={current:0};function Jo(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||r.data===Xr||r.data===Qr))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Yo(e,t){return{responder:e,props:t}}var Xo=A.ReactCurrentDispatcher,Qo=A.ReactCurrentBatchConfig,Zo=0,es=null,ts=null,rs=null,ns=null,is=null,os=null,ss=0,as=null,cs=0,ls=!1,us=null,ds=0;function ps(){throw Error(s(321))}function hs(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ei(e[r],t[r]))return!1;return!0}function fs(e,t,r,n,i,o){if(Zo=o,es=t,rs=null!==e?e.memoizedState:null,Xo.current=null===rs?As:Bs,t=r(n,i),ls){do{ls=!1,ds+=1,rs=null!==e?e.memoizedState:null,os=ns,as=is=ts=null,Xo.current=Bs,t=r(n,i)}while(ls);us=null,ds=0}if(Xo.current=Ps,(e=es).memoizedState=ns,e.expirationTime=ss,e.updateQueue=as,e.effectTag|=cs,e=null!==ts&&null!==ts.next,Zo=0,os=is=ns=rs=ts=es=null,ss=0,as=null,cs=0,e)throw Error(s(300));return t}function gs(){Xo.current=Ps,Zo=0,os=is=ns=rs=ts=es=null,ss=0,as=null,cs=0,ls=!1,us=null,ds=0}function ys(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===is?ns=is=e:is=is.next=e,is}function ms(){if(null!==os)os=(is=os).next,rs=null!==(ts=rs)?ts.next:null;else{if(null===rs)throw Error(s(310));var e={memoizedState:(ts=rs).memoizedState,baseState:ts.baseState,queue:ts.queue,baseUpdate:ts.baseUpdate,next:null};is=null===is?ns=e:is.next=e,rs=ts.next}return is}function vs(e,t){return"function"==typeof t?t(e):t}function bs(e){var t=ms(),r=t.queue;if(null===r)throw Error(s(311));if(r.lastRenderedReducer=e,0<ds){var n=r.dispatch;if(null!==us){var i=us.get(r);if(void 0!==i){us.delete(r);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return ei(o,t.memoizedState)||(Vs=!0),t.memoizedState=o,t.baseUpdate===r.last&&(t.baseState=o),r.lastRenderedState=o,[o,n]}}return[t.memoizedState,n]}n=r.last;var a=t.baseUpdate;if(o=t.baseState,null!==a?(null!==n&&(n.next=null),n=a.next):n=null!==n?n.next:null,null!==n){var c=i=null,l=n,u=!1;do{var d=l.expirationTime;d<Zo?(u||(u=!0,c=a,i=o),d>ss&&Oc(ss=d)):(xc(d,l.suspenseConfig),o=l.eagerReducer===e?l.eagerState:e(o,l.action)),a=l,l=l.next}while(null!==l&&l!==n);u||(c=a,i=o),ei(o,t.memoizedState)||(Vs=!0),t.memoizedState=o,t.baseUpdate=c,t.baseState=i,r.lastRenderedState=o}return[t.memoizedState,r.dispatch]}function ws(e){var t=ys();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e}).dispatch=Is.bind(null,es,e),[t.memoizedState,e]}function Ss(e){return bs(vs)}function ks(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===as?(as={lastEffect:null}).lastEffect=e.next=e:null===(t=as.lastEffect)?as.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,as.lastEffect=e),e}function Es(e,t,r,n){var i=ys();cs|=e,i.memoizedState=ks(t,r,void 0,void 0===n?null:n)}function _s(e,t,r,n){var i=ms();n=void 0===n?null:n;var o=void 0;if(null!==ts){var s=ts.memoizedState;if(o=s.destroy,null!==n&&hs(n,s.deps))return void ks(0,r,o,n)}cs|=e,i.memoizedState=ks(t,r,o,n)}function Cs(e,t){return Es(516,192,e,t)}function Ms(e,t){return _s(516,192,e,t)}function xs(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Os(){}function Rs(e,t){return ys().memoizedState=[e,void 0===t?null:t],e}function Ts(e,t){var r=ms();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&hs(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Is(e,t,r){if(!(25>ds))throw Error(s(301));var n=e.alternate;if(e===es||null!==n&&n===es)if(ls=!0,e={expirationTime:Zo,suspenseConfig:null,action:r,eagerReducer:null,eagerState:null,next:null},null===us&&(us=new Map),void 0===(r=us.get(t)))us.set(t,e);else{for(t=r;null!==t.next;)t=t.next;t.next=e}else{var i=fc(),o=Co.suspense;o={expirationTime:i=gc(i,e,o),suspenseConfig:o,action:r,eagerReducer:null,eagerState:null,next:null};var a=t.last;if(null===a)o.next=o;else{var c=a.next;null!==c&&(o.next=c),a.next=o}if(t.last=o,0===e.expirationTime&&(null===n||0===n.expirationTime)&&null!==(n=t.lastRenderedReducer))try{var l=t.lastRenderedState,u=n(l,r);if(o.eagerReducer=n,o.eagerState=u,ei(u,l))return}catch(e){}yc(e,i)}}var Ps={readContext:po,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useResponder:ps,useDeferredValue:ps,useTransition:ps},As={readContext:po,useCallback:Rs,useContext:po,useEffect:Cs,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Es(4,36,xs.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Es(4,36,e,t)},useMemo:function(e,t){var r=ys();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ys();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Is.bind(null,es,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:ws,useDebugValue:Os,useResponder:Yo,useDeferredValue:function(e,t){var r=ws(e),n=r[0],i=r[1];return Cs((function(){o.unstable_next((function(){var r=Qo.suspense;Qo.suspense=void 0===t?null:t;try{i(e)}finally{Qo.suspense=r}}))}),[e,t]),n},useTransition:function(e){var t=ws(!1),r=t[0],n=t[1];return[Rs((function(t){n(!0),o.unstable_next((function(){var r=Qo.suspense;Qo.suspense=void 0===e?null:e;try{n(!1),t()}finally{Qo.suspense=r}}))}),[e,r]),r]}},Bs={readContext:po,useCallback:Ts,useContext:po,useEffect:Ms,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,_s(4,36,xs.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _s(4,36,e,t)},useMemo:function(e,t){var r=ms();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&hs(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)},useReducer:bs,useRef:function(){return ms().memoizedState},useState:Ss,useDebugValue:Os,useResponder:Yo,useDeferredValue:function(e,t){var r=Ss(),n=r[0],i=r[1];return Ms((function(){o.unstable_next((function(){var r=Qo.suspense;Qo.suspense=void 0===t?null:t;try{i(e)}finally{Qo.suspense=r}}))}),[e,t]),n},useTransition:function(e){var t=Ss(),r=t[0],n=t[1];return[Ts((function(t){n(!0),o.unstable_next((function(){var r=Qo.suspense;Qo.suspense=void 0===e?null:e;try{n(!1),t()}finally{Qo.suspense=r}}))}),[e,r]),r]}},Ls=null,Us=null,Ds=!1;function Fs(e,t){var r=Gc(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function js(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function $s(e){if(Ds){var t=Us;if(t){var r=t;if(!js(e,t)){if(!(t=sn(r.nextSibling))||!js(e,t))return e.effectTag=-1025&e.effectTag|2,Ds=!1,void(Ls=e);Fs(Ls,r)}Ls=e,Us=sn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Ds=!1,Ls=e}}function Ns(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ls=e}function Ws(e){if(e!==Ls)return!1;if(!Ds)return Ns(e),Ds=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!rn(t,e.memoizedProps))for(t=Us;t;)Fs(e,t),t=sn(t.nextSibling);if(Ns(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if(r===Yr){if(0===t){Us=sn(e.nextSibling);break e}t--}else r!==Jr&&r!==Qr&&r!==Xr||t++}e=e.nextSibling}Us=null}}else Us=Ls?sn(e.stateNode.nextSibling):null;return!0}function zs(){Us=Ls=null,Ds=!1}var Hs=A.ReactCurrentOwner,Vs=!1;function Gs(e,t,r,n){t.child=null===e?Fo(t,null,r,n):Do(t,e.child,r,n)}function qs(e,t,r,n,i){r=r.render;var o=t.ref;return uo(t,i),n=fs(e,t,r,n,o,i),null===e||Vs?(t.effectTag|=1,Gs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ua(e,t,i))}function Ks(e,t,r,n,i,o){if(null===e){var s=r.type;return"function"!=typeof s||qc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Jc(r.type,null,n,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Js(e,t,s,n,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(r=null!==(r=r.compare)?r:ri)(i,n)&&e.ref===t.ref)?ua(e,t,o):(t.effectTag|=1,(e=Kc(s,n)).ref=t.ref,e.return=t,t.child=e)}function Js(e,t,r,n,i,o){return null!==e&&ri(e.memoizedProps,n)&&e.ref===t.ref&&(Vs=!1,i<o)?ua(e,t,o):Xs(e,t,r,n,o)}function Ys(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.effectTag|=128)}function Xs(e,t,r,n,i){var o=wi(r)?vi:yi.current;return o=bi(t,o),uo(t,i),r=fs(e,t,r,n,o,i),null===e||Vs?(t.effectTag|=1,Gs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ua(e,t,i))}function Qs(e,t,r,n,i){if(wi(r)){var o=!0;Ci(t)}else o=!1;if(uo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),To(t,r,n),Po(t,r,n,i),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,l=r.contextType;"object"==typeof l&&null!==l?l=po(l):l=bi(t,l=wi(r)?vi:yi.current);var u=r.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||c!==l)&&Io(t,s,n,l),ho=!1;var p=t.memoizedState;c=s.state=p;var h=t.updateQueue;null!==h&&(ko(t,h,n,s,i),c=t.memoizedState),a!==n||p!==c||mi.current||ho?("function"==typeof u&&(xo(t,r,u,n),c=t.memoizedState),(a=ho||Ro(t,r,a,n,p,c,l))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.effectTag|=4)):("function"==typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=l,n=a):("function"==typeof s.componentDidMount&&(t.effectTag|=4),n=!1)}else s=t.stateNode,a=t.memoizedProps,s.props=t.type===t.elementType?a:to(t.type,a),c=s.context,"object"==typeof(l=r.contextType)&&null!==l?l=po(l):l=bi(t,l=wi(r)?vi:yi.current),(d="function"==typeof(u=r.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||c!==l)&&Io(t,s,n,l),ho=!1,c=t.memoizedState,p=s.state=c,null!==(h=t.updateQueue)&&(ko(t,h,n,s,i),p=t.memoizedState),a!==n||c!==p||mi.current||ho?("function"==typeof u&&(xo(t,r,u,n),p=t.memoizedState),(u=ho||Ro(t,r,a,n,c,p,l))?(d||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(n,p,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof s.componentDidUpdate&&(t.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=p),s.props=n,s.state=p,s.context=l,n=u):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),n=!1);return Zs(e,t,r,n,o,i)}function Zs(e,t,r,n,i,o){Ys(e,t);var s=0!=(64&t.effectTag);if(!n&&!s)return i&&Mi(t,r,!1),ua(e,t,o);n=t.stateNode,Hs.current=t;var a=s&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&s?(t.child=Do(t,e.child,null,o),t.child=Do(t,null,a,o)):Gs(e,t,a,o),t.memoizedState=n.state,i&&Mi(t,r,!0),t.child}function ea(e){var t=e.stateNode;t.pendingContext?Ei(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ei(0,t.context,!1),Ho(e,t.containerInfo)}var ta,ra,na,ia,oa={dehydrated:null,retryTime:0};function sa(e,t,r){var n,i=t.mode,o=t.pendingProps,s=Ko.current,a=!1;if((n=0!=(64&t.effectTag))||(n=0!=(2&s)&&(null===e||null!==e.memoizedState)),n?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),fi(Ko,1&s),null===e){if(void 0!==o.fallback&&$s(t),a){if(a=o.fallback,(o=Yc(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(r=Yc(a,i,r,null)).return=t,o.sibling=r,t.memoizedState=oa,t.child=o,r}return i=o.children,t.memoizedState=null,t.child=Fo(t,null,i,r)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(o=o.fallback,(r=Kc(e,e.pendingProps)).return=t,0==(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(r.child=a;null!==a;)a.return=r,a=a.sibling;return(i=Kc(i,o,i.expirationTime)).return=t,r.sibling=i,r.childExpirationTime=0,t.memoizedState=oa,t.child=r,i}return r=Do(t,e.child,o.children,r),t.memoizedState=null,t.child=r}if(e=e.child,a){if(a=o.fallback,(o=Yc(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(r=Yc(a,i,r,null)).return=t,o.sibling=r,r.effectTag|=2,o.childExpirationTime=0,t.memoizedState=oa,t.child=o,r}return t.memoizedState=null,t.child=Do(t,e,o.children,r)}function aa(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t),lo(e.return,t)}function ca(e,t,r,n,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,last:n,tail:r,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.last=n,s.tail=r,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function la(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(Gs(e,t,n.children,r),0!=(2&(n=Ko.current)))n=1&n|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&aa(e,r);else if(19===e.tag)aa(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(fi(Ko,n),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===Jo(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ca(t,!1,i,r,o,t.lastEffect);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Jo(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}ca(t,!0,r,null,o,t.lastEffect);break;case"together":ca(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ua(e,t,r){null!==e&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(0!==n&&Oc(n),t.childExpirationTime<r)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Kc(e=t.child,e.pendingProps,e.expirationTime),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Kc(e,e.pendingProps,e.expirationTime)).return=t;r.sibling=null}return t.child}function da(e){e.effectTag|=4}function pa(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ha(e){switch(e.tag){case 1:wi(e.type)&&Si();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Vo(),ki(),0!=(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return qo(e),null;case 13:return hi(Ko),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return hi(Ko),null;case 4:return Vo(),null;case 10:return co(e),null;default:return null}}function fa(e,t){return{value:e,source:t,stack:Q(t)}}ta=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ra=function(){},na=function(e,t,r,n,o){var s=e.memoizedProps;if(s!==n){var a,c,l=t.stateNode;switch(zo($o.current),e=null,r){case"input":s=Me(l,s),n=Me(l,n),e=[];break;case"option":s=Pe(l,s),n=Pe(l,n),e=[];break;case"select":s=i({},s,{value:void 0}),n=i({},n,{value:void 0}),e=[];break;case"textarea":s=Be(l,s),n=Be(l,n),e=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(l.onclick=zr)}for(a in $r(r,n),r=null,s)if(!n.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(c in l=s[a])l.hasOwnProperty(c)&&(r||(r={}),r[c]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(h.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in n){var u=n[a];if(l=null!=s?s[a]:void 0,n.hasOwnProperty(a)&&u!==l&&(null!=u||null!=l))if("style"===a)if(l){for(c in l)!l.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||(r||(r={}),r[c]="");for(c in u)u.hasOwnProperty(c)&&l[c]!==u[c]&&(r||(r={}),r[c]=u[c])}else r||(e||(e=[]),e.push(a,r)),r=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(e=e||[]).push(a,""+u)):"children"===a?l===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(h.hasOwnProperty(a)?(null!=u&&Wr(o,a),e||l===u||(e=[])):(e=e||[]).push(a,u))}r&&(e=e||[]).push("style",r),o=e,(t.updateQueue=o)&&da(t)}},ia=function(e,t,r,n){r!==n&&da(t)};var ga="function"==typeof WeakSet?WeakSet:Set;function ya(e,t){var r=t.source,n=t.stack;null===n&&null!==r&&(n=Q(r)),null!==r&&X(r.type),t=t.value,null!==e&&1===e.tag&&X(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ma(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){$c(e,t)}else t.current=null}function va(e,t){switch(t.tag){case 0:case 11:case 15:ba(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var r=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:to(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}function ba(e,t,r){if(null!==(r=null!==(r=r.updateQueue)?r.lastEffect:null)){var n=r=r.next;do{if(0!=(n.tag&e)){var i=n.destroy;n.destroy=void 0,void 0!==i&&i()}0!=(n.tag&t)&&(i=n.create,n.destroy=i()),n=n.next}while(n!==r)}}function wa(e,t,r){switch("function"==typeof Hc&&Hc(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e.next;Ki(97<r?97:r,(function(){var e=n;do{var r=e.destroy;if(void 0!==r){var i=t;try{r()}catch(e){$c(i,e)}}e=e.next}while(e!==n)}))}break;case 1:ma(t),"function"==typeof(r=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){$c(e,t)}}(t,r);break;case 5:ma(t);break;case 4:_a(e,t,r)}}function Sa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,null!==t&&Sa(t)}function ka(e){return 5===e.tag||3===e.tag||4===e.tag}function Ea(e){e:{for(var t=e.return;null!==t;){if(ka(t)){var r=t;break e}t=t.return}throw Error(s(160))}switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(s(161))}16&r.effectTag&&(ze(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||ka(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.effectTag)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.effectTag)){r=r.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var a=o?i.stateNode:i.stateNode.instance;if(r)if(n){var c=a;a=r,8===(o=t).nodeType?o.parentNode.insertBefore(c,a):o.insertBefore(c,a)}else t.insertBefore(a,r);else n?(8===(c=t).nodeType?(o=c.parentNode).insertBefore(a,c):(o=c).appendChild(a),null!=(c=c._reactRootContainer)||null!==o.onclick||(o.onclick=zr)):t.appendChild(a)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function _a(e,t,r){for(var n,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(n=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:n=n.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var c=e,l=o,u=r,d=l;;)if(wa(c,d,u),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===l)break;for(;null===d.sibling;){if(null===d.return||d.return===l)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i?(c=n,l=o.stateNode,8===c.nodeType?c.parentNode.removeChild(l):c.removeChild(l)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(wa(e,o,r),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Ca(e,t){switch(t.tag){case 0:case 11:case 14:case 15:ba(4,8,t);break;case 1:break;case 5:var r=t.stateNode;if(null!=r){var n=t.memoizedProps,i=null!==e?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(r[un]=n,"input"===e&&"radio"===n.type&&null!=n.name&&Oe(r,n),Nr(e,i),t=Nr(e,n),i=0;i<o.length;i+=2){var a=o[i],c=o[i+1];"style"===a?Fr(r,c):"dangerouslySetInnerHTML"===a?We(r,c):"children"===a?ze(r,c):ke(r,a,c,t)}switch(e){case"input":Re(r,n);break;case"textarea":Ue(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(e=n.value)?Ae(r,!!n.multiple,e,!1):t!==!!n.multiple&&(null!=n.defaultValue?Ae(r,!!n.multiple,n.defaultValue,!0):Ae(r,!!n.multiple,n.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(s(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,Ct(t.containerInfo));break;case 12:break;case 13:if(r=t,null===t.memoizedState?n=!1:(n=!0,r=t.child,tc=Vi()),null!==r)e:for(e=r;;){if(5===e.tag)o=e.stateNode,n?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=Dr("display",i));else if(6===e.tag)e.stateNode.nodeValue=n?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===r)break e;for(;null===e.sibling;){if(null===e.return||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}Ma(t);break;case 19:Ma(t);break;case 17:case 20:case 21:break;default:throw Error(s(163))}}function Ma(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new ga),t.forEach((function(t){var n=Wc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}var xa="function"==typeof WeakMap?WeakMap:Map;function Oa(e,t,r){(r=yo(r,null)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ic||(ic=!0,oc=n),ya(e,t)},r}function Ra(e,t,r){(r=yo(r,null)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return ya(e,t),n(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===sc?sc=new Set([this]):sc.add(this),ya(e,t));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})}),r}var Ta,Ia=Math.ceil,Pa=A.ReactCurrentDispatcher,Aa=A.ReactCurrentOwner,Ba=0,La=8,Ua=16,Da=32,Fa=0,ja=1,$a=2,Na=3,Wa=4,za=5,Ha=Ba,Va=null,Ga=null,qa=0,Ka=Fa,Ja=null,Ya=1073741823,Xa=1073741823,Qa=null,Za=0,ec=!1,tc=0,rc=500,nc=null,ic=!1,oc=null,sc=null,ac=!1,cc=null,lc=90,uc=null,dc=0,pc=null,hc=0;function fc(){return(Ha&(Ua|Da))!==Ba?1073741821-(Vi()/10|0):0!==hc?hc:hc=1073741821-(Vi()/10|0)}function gc(e,t,r){if(0==(2&(t=t.mode)))return 1073741823;var n=Gi();if(0==(4&t))return 99===n?1073741823:1073741822;if((Ha&Ua)!==Ba)return qa;if(null!==r)e=eo(e,0|r.timeoutMs||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=eo(e,150,100);break;case 97:case 96:e=eo(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==Va&&e===qa&&--e,e}function yc(e,t){if(50<dc)throw dc=0,pc=null,Error(s(185));if(null!==(e=mc(e,t))){var r=Gi();1073741823===t?(Ha&La)!==Ba&&(Ha&(Ua|Da))===Ba?Sc(e):(bc(e),Ha===Ba&&Xi()):bc(e),(4&Ha)===Ba||98!==r&&99!==r||(null===uc?uc=new Map([[e,t]]):(void 0===(r=uc.get(e))||r>t)&&uc.set(e,t))}}function mc(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,i=null;if(null===n&&3===e.tag)i=e.stateNode;else for(;null!==n;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t),null===n.return&&3===n.tag){i=n.stateNode;break}n=n.return}return null!==i&&(Va===i&&(Oc(t),Ka===Wa&&tl(i,qa)),rl(i,t)),i}function vc(e){var t=e.lastExpiredTime;return 0!==t?t:el(e,t=e.firstPendingTime)?(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e:t}function bc(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Yi(Sc.bind(null,e));else{var t=vc(e),r=e.callbackNode;if(0===t)null!==r&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=fc();if(1073741823===t?n=99:1===t||2===t?n=95:n=0>=(n=10*(1073741821-t)-10*(1073741821-n))?99:250>=n?98:5250>=n?97:95,null!==r){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=n)return;r!==ji&&Ri(r)}e.callbackExpirationTime=t,e.callbackPriority=n,t=1073741823===t?Yi(Sc.bind(null,e)):Ji(n,wc.bind(null,e),{timeout:10*(1073741821-t)-Vi()}),e.callbackNode=t}}}function wc(e,t){if(hc=0,t)return nl(e,t=fc()),bc(e),null;var r=vc(e);if(0!==r){if(t=e.callbackNode,(Ha&(Ua|Da))!==Ba)throw Error(s(327));if(Dc(),e===Va&&r===qa||_c(e,r),null!==Ga){var n=Ha;Ha|=Ua;for(var i=Mc();;)try{Tc();break}catch(t){Cc(e,t)}if(so(),Ha=n,Pa.current=i,Ka===ja)throw t=Ja,_c(e,r),tl(e,r),bc(e),t;if(null===Ga)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=r,n=Ka,Va=null,n){case Fa:case ja:throw Error(s(345));case $a:nl(e,2<r?2:r);break;case Na:if(tl(e,r),r===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ac(i)),1073741823===Ya&&10<(i=tc+rc-Vi())){if(ec){var o=e.lastPingedTime;if(0===o||o>=r){e.lastPingedTime=r,_c(e,r);break}}if(0!==(o=vc(e))&&o!==r)break;if(0!==n&&n!==r){e.lastPingedTime=n;break}e.timeoutHandle=nn(Bc.bind(null,e),i);break}Bc(e);break;case Wa:if(tl(e,r),r===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ac(i)),ec&&(0===(i=e.lastPingedTime)||i>=r)){e.lastPingedTime=r,_c(e,r);break}if(0!==(i=vc(e))&&i!==r)break;if(0!==n&&n!==r){e.lastPingedTime=n;break}if(1073741823!==Xa?n=10*(1073741821-Xa)-Vi():1073741823===Ya?n=0:(n=10*(1073741821-Ya)-5e3,0>(n=(i=Vi())-n)&&(n=0),(r=10*(1073741821-r)-i)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ia(n/1960))-n)&&(n=r)),10<n){e.timeoutHandle=nn(Bc.bind(null,e),n);break}Bc(e);break;case za:if(1073741823!==Ya&&null!==Qa){o=Ya;var a=Qa;if(0>=(n=0|a.busyMinDurationMs)?n=0:(i=0|a.busyDelayMs,n=(o=Vi()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+n-o),10<n){tl(e,r),e.timeoutHandle=nn(Bc.bind(null,e),n);break}}Bc(e);break;default:throw Error(s(329))}if(bc(e),e.callbackNode===t)return wc.bind(null,e)}}return null}function Sc(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)Bc(e);else{if((Ha&(Ua|Da))!==Ba)throw Error(s(327));if(Dc(),e===Va&&t===qa||_c(e,t),null!==Ga){var r=Ha;Ha|=Ua;for(var n=Mc();;)try{Rc();break}catch(t){Cc(e,t)}if(so(),Ha=r,Pa.current=n,Ka===ja)throw r=Ja,_c(e,t),tl(e,t),bc(e),r;if(null!==Ga)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Va=null,Bc(e),bc(e)}}return null}function kc(e,t){var r=Ha;Ha|=1;try{return e(t)}finally{(Ha=r)===Ba&&Xi()}}function Ec(e,t){var r=Ha;Ha&=-2,Ha|=La;try{return e(t)}finally{(Ha=r)===Ba&&Xi()}}function _c(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,on(r)),null!==Ga)for(r=Ga.return;null!==r;){var n=r;switch(n.tag){case 1:var i=n.type.childContextTypes;null!=i&&Si();break;case 3:Vo(),ki();break;case 5:qo(n);break;case 4:Vo();break;case 13:case 19:hi(Ko);break;case 10:co(n)}r=r.return}Va=e,Ga=Kc(e.current,null),qa=t,Ka=Fa,Ja=null,Xa=Ya=1073741823,Qa=null,Za=0,ec=!1}function Cc(e,t){for(;;){try{if(so(),gs(),null===Ga||null===Ga.return)return Ka=ja,Ja=t,null;e:{var r=e,n=Ga.return,i=Ga,o=t;if(t=qa,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var s=o,a=0!=(1&Ko.current),c=n;do{var l;if(l=13===c.tag){var u=c.memoizedState;if(null!==u)l=null!==u.dehydrated;else{var d=c.memoizedProps;l=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!a)}}if(l){var p=c.updateQueue;if(null===p){var h=new Set;h.add(s),c.updateQueue=h}else p.add(s);if(0==(2&c.mode)){if(c.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var f=yo(1073741823,null);f.tag=2,vo(i,f)}i.expirationTime=1073741823;break e}o=void 0,i=t;var g=r.pingCache;if(null===g?(g=r.pingCache=new xa,o=new Set,g.set(s,o)):void 0===(o=g.get(s))&&(o=new Set,g.set(s,o)),!o.has(i)){o.add(i);var y=Nc.bind(null,r,s,i);s.then(y,y)}c.effectTag|=4096,c.expirationTime=t;break e}c=c.return}while(null!==c);o=Error((X(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Q(i))}Ka!==za&&(Ka=$a),o=fa(o,i),c=n;do{switch(c.tag){case 3:s=o,c.effectTag|=4096,c.expirationTime=t,bo(c,Oa(c,s,t));break e;case 1:s=o;var m=c.type,v=c.stateNode;if(0==(64&c.effectTag)&&("function"==typeof m.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===sc||!sc.has(v)))){c.effectTag|=4096,c.expirationTime=t,bo(c,Ra(c,s,t));break e}}c=c.return}while(null!==c)}Ga=Pc(Ga)}catch(e){t=e;continue}break}}function Mc(){var e=Pa.current;return Pa.current=Ps,null===e?Ps:e}function xc(e,t){e<Ya&&2<e&&(Ya=e),null!==t&&e<Xa&&2<e&&(Xa=e,Qa=t)}function Oc(e){e>Za&&(Za=e)}function Rc(){for(;null!==Ga;)Ga=Ic(Ga)}function Tc(){for(;null!==Ga&&!Ti();)Ga=Ic(Ga)}function Ic(e){var t=Ta(e.alternate,e,qa);return e.memoizedProps=e.pendingProps,null===t&&(t=Pc(e)),Aa.current=null,t}function Pc(e){Ga=e;do{var t=Ga.alternate;if(e=Ga.return,0==(2048&Ga.effectTag)){e:{var r=t,n=qa,o=(t=Ga).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:wi(t.type)&&Si();break;case 3:Vo(),ki(),(o=t.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(null===r||null===r.child)&&Ws(t)&&da(t),ra(t);break;case 5:qo(t),n=zo(Wo.current);var a=t.type;if(null!==r&&null!=t.stateNode)na(r,t,a,o,n),r.ref!==t.ref&&(t.effectTag|=128);else if(o){var c=zo($o.current);if(Ws(t)){var l=(o=t).stateNode;r=o.type;var u=o.memoizedProps,d=n;switch(l[ln]=o,l[un]=u,a=void 0,n=l,r){case"iframe":case"object":case"embed":_r("load",n);break;case"video":case"audio":for(l=0;l<Ze.length;l++)_r(Ze[l],n);break;case"source":_r("error",n);break;case"img":case"image":case"link":_r("error",n),_r("load",n);break;case"form":_r("reset",n),_r("submit",n);break;case"details":_r("toggle",n);break;case"input":xe(n,u),_r("invalid",n),Wr(d,"onChange");break;case"select":n._wrapperState={wasMultiple:!!u.multiple},_r("invalid",n),Wr(d,"onChange");break;case"textarea":Le(n,u),_r("invalid",n),Wr(d,"onChange")}for(a in $r(r,u),l=null,u)u.hasOwnProperty(a)&&(c=u[a],"children"===a?"string"==typeof c?n.textContent!==c&&(l=["children",c]):"number"==typeof c&&n.textContent!==""+c&&(l=["children",""+c]):h.hasOwnProperty(a)&&null!=c&&Wr(d,a));switch(r){case"input":_e(n),Te(n,u,!0);break;case"textarea":_e(n),De(n);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(n.onclick=zr)}a=l,o.updateQueue=a,(o=null!==a)&&da(t)}else{r=t,d=a,u=o,l=9===n.nodeType?n:n.ownerDocument,c===Fe.html&&(c=je(d)),c===Fe.html?"script"===d?((u=l.createElement("div")).innerHTML="<script><\/script>",l=u.removeChild(u.firstChild)):"string"==typeof u.is?l=l.createElement(d,{is:u.is}):(l=l.createElement(d),"select"===d&&(d=l,u.multiple?d.multiple=!0:u.size&&(d.size=u.size))):l=l.createElementNS(c,d),(u=l)[ln]=r,u[un]=o,ta(u,t,!1,!1),t.stateNode=u;var p=n,f=Nr(d=a,r=o);switch(d){case"iframe":case"object":case"embed":_r("load",u),n=r;break;case"video":case"audio":for(n=0;n<Ze.length;n++)_r(Ze[n],u);n=r;break;case"source":_r("error",u),n=r;break;case"img":case"image":case"link":_r("error",u),_r("load",u),n=r;break;case"form":_r("reset",u),_r("submit",u),n=r;break;case"details":_r("toggle",u),n=r;break;case"input":xe(u,r),n=Me(u,r),_r("invalid",u),Wr(p,"onChange");break;case"option":n=Pe(u,r);break;case"select":u._wrapperState={wasMultiple:!!r.multiple},n=i({},r,{value:void 0}),_r("invalid",u),Wr(p,"onChange");break;case"textarea":Le(u,r),n=Be(u,r),_r("invalid",u),Wr(p,"onChange");break;default:n=r}$r(d,n),l=void 0,c=d;var g=u,y=n;for(l in y)if(y.hasOwnProperty(l)){var m=y[l];"style"===l?Fr(g,m):"dangerouslySetInnerHTML"===l?null!=(m=m?m.__html:void 0)&&We(g,m):"children"===l?"string"==typeof m?("textarea"!==c||""!==m)&&ze(g,m):"number"==typeof m&&ze(g,""+m):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(h.hasOwnProperty(l)?null!=m&&Wr(p,l):null!=m&&ke(g,l,m,f))}switch(d){case"input":_e(u),Te(u,r,!1);break;case"textarea":_e(u),De(u);break;case"option":null!=r.value&&u.setAttribute("value",""+Se(r.value));break;case"select":(n=u).multiple=!!r.multiple,null!=(u=r.value)?Ae(n,!!r.multiple,u,!1):null!=r.defaultValue&&Ae(n,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof n.onClick&&(u.onclick=zr)}(o=tn(a,o))&&da(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(s(166));break;case 6:if(r&&null!=t.stateNode)ia(r,t,r.memoizedProps,o);else{if("string"!=typeof o&&null===t.stateNode)throw Error(s(166));n=zo(Wo.current),zo($o.current),Ws(t)?(a=(o=t).stateNode,n=o.memoizedProps,a[ln]=o,(o=a.nodeValue!==n)&&da(t)):(a=t,(o=(9===n.nodeType?n:n.ownerDocument).createTextNode(o))[ln]=a,t.stateNode=o)}break;case 11:break;case 13:if(hi(Ko),o=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=n;break e}o=null!==o,a=!1,null===r?void 0!==t.memoizedProps.fallback&&Ws(t):(a=null!==(n=r.memoizedState),o||null===n||null!==(n=r.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=n,n.nextEffect=u):(t.firstEffect=t.lastEffect=n,n.nextEffect=null),n.effectTag=8)),o&&!a&&0!=(2&t.mode)&&(null===r&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ko.current)?Ka===Fa&&(Ka=Na):(Ka!==Fa&&Ka!==Na||(Ka=Wa),0!==Za&&null!==Va&&(tl(Va,qa),rl(Va,Za)))),(o||a)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Vo(),ra(t);break;case 10:co(t);break;case 9:case 14:break;case 17:wi(t.type)&&Si();break;case 19:if(hi(Ko),null===(o=t.memoizedState))break;if(a=0!=(64&t.effectTag),null===(u=o.rendering)){if(a)pa(o,!1);else if(Ka!==Fa||null!==r&&0!=(64&r.effectTag))for(r=t.child;null!==r;){if(null!==(u=Jo(r))){for(t.effectTag|=64,pa(o,!1),null!==(a=u.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===o.lastEffect&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=n,a=t.child;null!==a;)r=o,(n=a).effectTag&=2,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null,null===(u=n.alternate)?(n.childExpirationTime=0,n.expirationTime=r,n.child=null,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null):(n.childExpirationTime=u.childExpirationTime,n.expirationTime=u.expirationTime,n.child=u.child,n.memoizedProps=u.memoizedProps,n.memoizedState=u.memoizedState,n.updateQueue=u.updateQueue,r=u.dependencies,n.dependencies=null===r?null:{expirationTime:r.expirationTime,firstContext:r.firstContext,responders:r.responders}),a=a.sibling;fi(Ko,1&Ko.current|2),t=t.child;break e}r=r.sibling}}else{if(!a)if(null!==(r=Jo(u))){if(t.effectTag|=64,a=!0,null!==(n=r.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),pa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate){null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null);break}}else Vi()>o.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,pa(o,!1),t.expirationTime=t.childExpirationTime=n-1);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=Vi()+500),n=o.tail,o.rendering=n,o.tail=n.sibling,o.lastEffect=t.lastEffect,n.sibling=null,o=Ko.current,fi(Ko,o=a?1&o|2:1&o),t=n;break e}break;case 20:case 21:break;default:throw Error(s(156,t.tag))}t=null}if(o=Ga,1===qa||1!==o.childExpirationTime){for(a=0,n=o.child;null!==n;)(r=n.expirationTime)>a&&(a=r),(u=n.childExpirationTime)>a&&(a=u),n=n.sibling;o.childExpirationTime=a}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ga.firstEffect),null!==Ga.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ga.firstEffect),e.lastEffect=Ga.lastEffect),1<Ga.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ga:e.firstEffect=Ga,e.lastEffect=Ga))}else{if(null!==(t=ha(Ga)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ga.sibling))return t;Ga=e}while(null!==Ga);return Ka===Fa&&(Ka=za),null}function Ac(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Bc(e){var t=Gi();return Ki(99,Lc.bind(null,e,t)),null}function Lc(e,t){do{Dc()}while(null!==cc);if((Ha&(Ua|Da))!==Ba)throw Error(s(327));var r=e.finishedWork,n=e.finishedExpirationTime;if(null===r)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Ac(r);if(e.firstPendingTime=i,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Va&&(Ga=Va=null,qa=0),1<r.effectTag?null!==r.lastEffect?(r.lastEffect.nextEffect=r,i=r.firstEffect):i=r:i=r.firstEffect,null!==i){var o=Ha;Ha|=Da,Aa.current=null,Zr=Er;var a=qr();if(Kr(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{var l=(c=(c=a.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(l&&0!==l.rangeCount){c=l.anchorNode;var u=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{c.nodeType,d.nodeType}catch(e){c=null;break e}var p=0,h=-1,f=-1,g=0,y=0,m=a,v=null;t:for(;;){for(var b;m!==c||0!==u&&3!==m.nodeType||(h=p+u),m!==d||0!==l&&3!==m.nodeType||(f=p+l),3===m.nodeType&&(p+=m.nodeValue.length),null!==(b=m.firstChild);)v=m,m=b;for(;;){if(m===a)break t;if(v===c&&++g===u&&(h=p),v===d&&++y===l&&(f=p),null!==(b=m.nextSibling))break;v=(m=v).parentNode}m=b}c=-1===h||-1===f?null:{start:h,end:f}}else c=null}c=c||{start:0,end:0}}else c=null;en={focusedElem:a,selectionRange:c},Er=!1,nc=i;do{try{Uc()}catch(e){if(null===nc)throw Error(s(330));$c(nc,e),nc=nc.nextEffect}}while(null!==nc);nc=i;do{try{for(a=e,c=t;null!==nc;){var w=nc.effectTag;if(16&w&&ze(nc.stateNode,""),128&w){var S=nc.alternate;if(null!==S){var k=S.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&w){case 2:Ea(nc),nc.effectTag&=-3;break;case 6:Ea(nc),nc.effectTag&=-3,Ca(nc.alternate,nc);break;case 1024:nc.effectTag&=-1025;break;case 1028:nc.effectTag&=-1025,Ca(nc.alternate,nc);break;case 4:Ca(nc.alternate,nc);break;case 8:_a(a,u=nc,c),Sa(u)}nc=nc.nextEffect}}catch(e){if(null===nc)throw Error(s(330));$c(nc,e),nc=nc.nextEffect}}while(null!==nc);if(k=en,S=qr(),w=k.focusedElem,c=k.selectionRange,S!==w&&w&&w.ownerDocument&&function e(t,r){return!(!t||!r)&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(w.ownerDocument.documentElement,w)){null!==c&&Kr(w)&&(S=c.start,void 0===(k=c.end)&&(k=S),"selectionStart"in w?(w.selectionStart=S,w.selectionEnd=Math.min(k,w.value.length)):(k=(S=w.ownerDocument||document)&&S.defaultView||window).getSelection&&(k=k.getSelection(),u=w.textContent.length,a=Math.min(c.start,u),c=void 0===c.end?a:Math.min(c.end,u),!k.extend&&a>c&&(u=c,c=a,a=u),u=Gr(w,a),d=Gr(w,c),u&&d&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==d.node||k.focusOffset!==d.offset)&&((S=S.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),a>c?(k.addRange(S),k.extend(d.node,d.offset)):(S.setEnd(d.node,d.offset),k.addRange(S))))),S=[];for(k=w;k=k.parentNode;)1===k.nodeType&&S.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<S.length;w++)(k=S[w]).element.scrollLeft=k.left,k.element.scrollTop=k.top}en=null,Er=!!Zr,Zr=null,e.current=r,nc=i;do{try{for(w=n;null!==nc;){var E=nc.effectTag;if(36&E){var _=nc.alternate;switch(k=w,(S=nc).tag){case 0:case 11:case 15:ba(16,32,S);break;case 1:var C=S.stateNode;if(4&S.effectTag)if(null===_)C.componentDidMount();else{var M=S.elementType===S.type?_.memoizedProps:to(S.type,_.memoizedProps);C.componentDidUpdate(M,_.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var x=S.updateQueue;null!==x&&Eo(0,x,C);break;case 3:var O=S.updateQueue;if(null!==O){if(a=null,null!==S.child)switch(S.child.tag){case 5:a=S.child.stateNode;break;case 1:a=S.child.stateNode}Eo(0,O,a)}break;case 5:var R=S.stateNode;null===_&&4&S.effectTag&&tn(S.type,S.memoizedProps)&&R.focus();break;case 6:case 4:case 12:break;case 13:if(null===S.memoizedState){var T=S.alternate;if(null!==T){var I=T.memoizedState;if(null!==I){var P=I.dehydrated;null!==P&&Ct(P)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(s(163))}}if(128&E){S=void 0;var A=nc.ref;if(null!==A){var B=nc.stateNode;switch(nc.tag){case 5:S=B;break;default:S=B}"function"==typeof A?A(S):A.current=S}}nc=nc.nextEffect}}catch(e){if(null===nc)throw Error(s(330));$c(nc,e),nc=nc.nextEffect}}while(null!==nc);nc=null,$i(),Ha=o}else e.current=r;if(ac)ac=!1,cc=e,lc=t;else for(nc=i;null!==nc;)t=nc.nextEffect,nc.nextEffect=null,nc=t;if(0===(t=e.firstPendingTime)&&(sc=null),1073741823===t?e===pc?dc++:(dc=0,pc=e):dc=0,"function"==typeof zc&&zc(r.stateNode,n),bc(e),ic)throw ic=!1,e=oc,oc=null,e;return(Ha&La)!==Ba?null:(Xi(),null)}function Uc(){for(;null!==nc;){var e=nc.effectTag;0!=(256&e)&&va(nc.alternate,nc),0==(512&e)||ac||(ac=!0,Ji(97,(function(){return Dc(),null}))),nc=nc.nextEffect}}function Dc(){if(90!==lc){var e=97<lc?97:lc;return lc=90,Ki(e,Fc)}}function Fc(){if(null===cc)return!1;var e=cc;if(cc=null,(Ha&(Ua|Da))!==Ba)throw Error(s(331));var t=Ha;for(Ha|=Da,e=e.current.firstEffect;null!==e;){try{var r=e;if(0!=(512&r.effectTag))switch(r.tag){case 0:case 11:case 15:ba(128,0,r),ba(0,64,r)}}catch(t){if(null===e)throw Error(s(330));$c(e,t)}r=e.nextEffect,e.nextEffect=null,e=r}return Ha=t,Xi(),!0}function jc(e,t,r){vo(e,t=Oa(e,t=fa(r,t),1073741823)),null!==(e=mc(e,1073741823))&&bc(e)}function $c(e,t){if(3===e.tag)jc(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){jc(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===sc||!sc.has(n))){vo(r,e=Ra(r,e=fa(t,e),1073741823)),null!==(r=mc(r,1073741823))&&bc(r);break}}r=r.return}}function Nc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),Va===e&&qa===r?Ka===Wa||Ka===Na&&1073741823===Ya&&Vi()-tc<rc?_c(e,qa):ec=!0:el(e,r)&&(0!==(t=e.lastPingedTime)&&t<r||(e.lastPingedTime=r,e.finishedExpirationTime===r&&(e.finishedExpirationTime=0,e.finishedWork=null),bc(e)))}function Wc(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(t=gc(t=fc(),e,null)),null!==(e=mc(e,t))&&bc(e)}Ta=function(e,t,r){var n=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||mi.current)Vs=!0;else{if(n<r){switch(Vs=!1,t.tag){case 3:ea(t),zs();break;case 5:if(Go(t),4&t.mode&&1!==r&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:wi(t.type)&&Ci(t);break;case 4:Ho(t,t.stateNode.containerInfo);break;case 10:ao(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=r?sa(e,t,r):(fi(Ko,1&Ko.current),null!==(t=ua(e,t,r))?t.sibling:null);fi(Ko,1&Ko.current);break;case 19:if(n=t.childExpirationTime>=r,0!=(64&e.effectTag)){if(n)return la(e,t,r);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),fi(Ko,Ko.current),!n)return null}return ua(e,t,r)}Vs=!1}}else Vs=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,yi.current),uo(t,r),i=fs(null,t,n,e,i,r),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,gs(),wi(n)){var o=!0;Ci(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=n.getDerivedStateFromProps;"function"==typeof a&&xo(t,n,a,e),i.updater=Oo,t.stateNode=i,i._reactInternalFiber=t,Po(t,n,e,r),t=Zs(null,t,n,!0,o,r)}else t.tag=0,Gs(null,t,i,r),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return qc(e)?1:0;if(null!=e){if((e=e.$$typeof)===H)return 11;if(e===q)return 14}return 2}(i),e=to(i,e),o){case 0:t=Xs(null,t,i,e,r);break;case 1:t=Qs(null,t,i,e,r);break;case 11:t=qs(null,t,i,e,r);break;case 14:t=Ks(null,t,i,to(i.type,e),n,r);break;default:throw Error(s(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,Xs(e,t,n,i=t.elementType===n?i:to(n,i),r);case 1:return n=t.type,i=t.pendingProps,Qs(e,t,n,i=t.elementType===n?i:to(n,i),r);case 3:if(ea(t),null===(n=t.updateQueue))throw Error(s(282));if(i=null!==(i=t.memoizedState)?i.element:null,ko(t,n,t.pendingProps,null,r),(n=t.memoizedState.element)===i)zs(),t=ua(e,t,r);else{if((i=t.stateNode.hydrate)&&(Us=sn(t.stateNode.containerInfo.firstChild),Ls=t,i=Ds=!0),i)for(r=Fo(t,null,n,r),t.child=r;r;)r.effectTag=-3&r.effectTag|1024,r=r.sibling;else Gs(e,t,n,r),zs();t=t.child}return t;case 5:return Go(t),null===e&&$s(t),n=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,rn(n,i)?a=null:null!==o&&rn(n,o)&&(t.effectTag|=16),Ys(e,t),4&t.mode&&1!==r&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Gs(e,t,a,r),t=t.child),t;case 6:return null===e&&$s(t),null;case 13:return sa(e,t,r);case 4:return Ho(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Do(t,null,n,r):Gs(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,qs(e,t,n,i=t.elementType===n?i:to(n,i),r);case 7:return Gs(e,t,t.pendingProps,r),t.child;case 8:case 12:return Gs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,ao(t,o=i.value),null!==a){var c=a.value;if(0===(o=ei(c,o)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(c,o):1073741823))){if(a.children===i.children&&!mi.current){t=ua(e,t,r);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){a=c.child;for(var u=l.firstContext;null!==u;){if(u.context===n&&0!=(u.observedBits&o)){1===c.tag&&((u=yo(r,null)).tag=2,vo(c,u)),c.expirationTime<r&&(c.expirationTime=r),null!==(u=c.alternate)&&u.expirationTime<r&&(u.expirationTime=r),lo(c.return,r),l.expirationTime<r&&(l.expirationTime=r);break}u=u.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}}Gs(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=(o=t.pendingProps).children,uo(t,r),n=n(i=po(i,o.unstable_observedBits)),t.effectTag|=1,Gs(e,t,n,r),t.child;case 14:return o=to(i=t.type,t.pendingProps),Ks(e,t,i,o=to(i.type,o),n,r);case 15:return Js(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:to(n,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,wi(n)?(e=!0,Ci(t)):e=!1,uo(t,r),To(t,n,i),Po(t,n,i,r),Zs(null,t,n,!0,e,r);case 19:return la(e,t,r)}throw Error(s(156,t.tag))};var zc=null,Hc=null;function Vc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Gc(e,t,r,n){return new Vc(e,t,r,n)}function qc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Kc(e,t){var r=e.alternate;return null===r?((r=Gc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Jc(e,t,r,n,i,o){var a=2;if(n=e,"function"==typeof e)qc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case F:return Yc(r.children,i,o,t);case z:a=8,i|=7;break;case j:a=8,i|=1;break;case $:return(e=Gc(12,r,t,8|i)).elementType=$,e.type=$,e.expirationTime=o,e;case V:return(e=Gc(13,r,t,i)).type=V,e.elementType=V,e.expirationTime=o,e;case G:return(e=Gc(19,r,t,i)).elementType=G,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case W:a=9;break e;case H:a=11;break e;case q:a=14;break e;case K:a=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Gc(a,r,t,i)).elementType=e,t.type=n,t.expirationTime=o,t}function Yc(e,t,r,n){return(e=Gc(7,e,n,t)).expirationTime=r,e}function Xc(e,t,r){return(e=Gc(6,e,null,t)).expirationTime=r,e}function Qc(e,t,r){return(t=Gc(4,null!==e.children?e.children:[],e.key,t)).expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zc(e,t,r){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function el(e,t){var r=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==r&&r>=t&&e<=t}function tl(e,t){var r=e.firstSuspendedTime,n=e.lastSuspendedTime;r<t&&(e.firstSuspendedTime=t),(n>t||0===r)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function rl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var r=e.firstSuspendedTime;0!==r&&(t>=r?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function nl(e,t){var r=e.lastExpiredTime;(0===r||r>t)&&(e.lastExpiredTime=t)}function il(e,t,r,n){var i=t.current,o=fc(),a=Co.suspense;o=gc(o,i,a);e:if(r){t:{if(et(r=r._reactInternalFiber)!==r||1!==r.tag)throw Error(s(170));var c=r;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(wi(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(s(171))}if(1===r.tag){var l=r.type;if(wi(l)){r=_i(r,l,c);break e}}r=c}else r=gi;return null===t.context?t.context=r:t.pendingContext=r,(t=yo(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),vo(i,t),yc(i,o),o}function ol(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function sl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function al(e,t){sl(e,t),(e=e.alternate)&&sl(e,t)}function cl(e,t,r){var n=new Zc(e,t,r=null!=r&&!0===r.hydrate),i=Gc(3,null,null,2===t?7:1===t?3:0);n.current=i,i.stateNode=n,e[dn]=n.current,r&&0!==t&&function(e){var t=Ar(e);gt.forEach((function(r){Br(r,e,t)})),yt.forEach((function(r){Br(r,e,t)}))}(9===e.nodeType?e:e.ownerDocument),this._internalRoot=n}function ll(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ul(e,t,r,n,i){var o=r._reactRootContainer;if(o){var s=o._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=ol(s);a.call(e)}}il(t,s,e,i)}else{if(o=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new cl(e,0,t?{hydrate:!0}:void 0)}(r,n),s=o._internalRoot,"function"==typeof i){var c=i;i=function(){var e=ol(s);c.call(e)}}Ec((function(){il(t,s,e,i)}))}return ol(s)}function dl(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ll(t))throw Error(s(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:D,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)}cl.prototype.render=function(e,t){il(e,this._internalRoot,null,void 0===t?null:t)},cl.prototype.unmount=function(e){var t=this._internalRoot,r=void 0===e?null:e,n=t.containerInfo;il(null,t,null,(function(){n[dn]=null,null!==r&&r()}))},it=function(e){if(13===e.tag){var t=eo(fc(),150,100);yc(e,t),al(e,t)}},ot=function(e){if(13===e.tag){fc();var t=Zi++;yc(e,t),al(e,t)}},st=function(e){if(13===e.tag){var t=fc();yc(e,t=gc(t,e,null)),al(e,t)}},ee=function(e,t,r){switch(t){case"input":if(Re(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=gn(n);if(!i)throw Error(s(90));Ce(n),Re(n,i)}}}break;case"textarea":Ue(e,r);break;case"select":null!=(t=r.value)&&Ae(e,!!r.multiple,t,!1)}},se=kc,ae=function(e,t,r,n){var i=Ha;Ha|=4;try{return Ki(98,e.bind(null,t,r,n))}finally{(Ha=i)===Ba&&Xi()}},ce=function(){(Ha&(1|Ua|Da))===Ba&&(function(){if(null!==uc){var e=uc;uc=null,e.forEach((function(e,t){nl(t,e),bc(t)})),Xi()}}(),Dc())},le=function(e,t){var r=Ha;Ha|=2;try{return e(t)}finally{(Ha=r)===Ba&&Xi()}};var pl,hl,fl={createPortal:dl,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},hydrate:function(e,t,r){if(!ll(t))throw Error(s(200));return ul(null,e,t,!0,r)},render:function(e,t,r){if(!ll(t))throw Error(s(200));return ul(null,e,t,!1,r)},unstable_renderSubtreeIntoContainer:function(e,t,r,n){if(!ll(r))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return ul(e,t,r,!1,n)},unmountComponentAtNode:function(e){if(!ll(e))throw Error(s(40));return!!e._reactRootContainer&&(Ec((function(){ul(null,null,e,!1,(function(){e._reactRootContainer=null,e[dn]=null}))})),!0)},unstable_createPortal:function(){return dl.apply(void 0,arguments)},unstable_batchedUpdates:kc,flushSync:function(e,t){if((Ha&(Ua|Da))!==Ba)throw Error(s(187));var r=Ha;Ha|=1;try{return Ki(99,e.bind(null,t))}finally{Ha=r,Xi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[hn,fn,gn,I.injectEventPluginsByName,p,Pt,function(e){x(e,It)},ie,oe,Rr,T,Dc,{current:!1}]}};hl=(pl={findFiberByHostInstance:pn,bundleType:0,version:"16.12.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);zc=function(e){try{t.onCommitFiberRoot(r,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Hc=function(e){try{t.onCommitFiberUnmount(r,e)}catch(e){}}}catch(e){}}(i({},pl,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return hl?hl(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var gl={default:fl},yl=gl&&fl||gl;e.exports=yl.default||yl},function(e,t,r){"use strict";e.exports=r(77)},function(e,t,r){"use strict";
/** @license React v0.18.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n,i,o,s,a;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,l=null,u=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(u,0),e}},d=Date.now();t.unstable_now=function(){return Date.now()-d},n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(u,0))},i=function(e,t){l=setTimeout(e,t)},o=function(){clearTimeout(l)},s=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var p=window.performance,h=window.Date,f=window.setTimeout,g=window.clearTimeout;if("undefined"!=typeof console){var y=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof p&&"function"==typeof p.now)t.unstable_now=function(){return p.now()};else{var m=h.now();t.unstable_now=function(){return h.now()-m}}var v=!1,b=null,w=-1,S=5,k=0;s=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):S=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,_=E.port2;E.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();k=e+S;try{b(!0,e)?_.postMessage(null):(v=!1,b=null)}catch(e){throw _.postMessage(null),e}}else v=!1},n=function(e){b=e,v||(v=!0,_.postMessage(null))},i=function(e,r){w=f((function(){e(t.unstable_now())}),r)},o=function(){g(w),w=-1}}function C(e,t){var r=e.length;e.push(t);e:for(;;){var n=Math.floor((r-1)/2),i=e[n];if(!(void 0!==i&&0<O(i,t)))break e;e[n]=t,e[r]=i,r=n}}function M(e){return void 0===(e=e[0])?null:e}function x(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length;n<i;){var o=2*(n+1)-1,s=e[o],a=o+1,c=e[a];if(void 0!==s&&0>O(s,r))void 0!==c&&0>O(c,s)?(e[n]=c,e[a]=r,n=a):(e[n]=s,e[o]=r,n=o);else{if(!(void 0!==c&&0>O(c,r)))break e;e[n]=c,e[a]=r,n=a}}}return t}return null}function O(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var R=[],T=[],I=1,P=null,A=3,B=!1,L=!1,U=!1;function D(e){for(var t=M(T);null!==t;){if(null===t.callback)x(T);else{if(!(t.startTime<=e))break;x(T),t.sortIndex=t.expirationTime,C(R,t)}t=M(T)}}function F(e){if(U=!1,D(e),!L)if(null!==M(R))L=!0,n(j);else{var t=M(T);null!==t&&i(F,t.startTime-e)}}function j(e,r){L=!1,U&&(U=!1,o()),B=!0;var n=A;try{for(D(r),P=M(R);null!==P&&(!(P.expirationTime>r)||e&&!s());){var a=P.callback;if(null!==a){P.callback=null,A=P.priorityLevel;var c=a(P.expirationTime<=r);r=t.unstable_now(),"function"==typeof c?P.callback=c:P===M(R)&&x(R),D(r)}else x(R);P=M(R)}if(null!==P)var l=!0;else{var u=M(T);null!==u&&i(F,u.startTime-r),l=!1}return l}finally{P=null,A=n,B=!1}}function $(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var N=a;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=A;A=e;try{return t()}finally{A=r}},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var r=A;A=t;try{return e()}finally{A=r}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();if("object"==typeof s&&null!==s){var c=s.delay;c="number"==typeof c&&0<c?a+c:a,s="number"==typeof s.timeout?s.timeout:$(e)}else s=$(e),c=a;return e={id:I++,callback:r,priorityLevel:e,startTime:c,expirationTime:s=c+s,sortIndex:-1},c>a?(e.sortIndex=c,C(T,e),null===M(R)&&e===M(T)&&(U?o():U=!0,i(F,c-a))):(e.sortIndex=s,C(R,e),L||B||(L=!0,n(j))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=A;return function(){var r=A;A=t;try{return e.apply(this,arguments)}finally{A=r}}},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_shouldYield=function(){var e=t.unstable_now();D(e);var r=M(R);return r!==P&&null!==P&&null!==r&&null!==r.callback&&r.startTime<=e&&r.expirationTime<P.expirationTime||s()},t.unstable_requestPaint=N,t.unstable_continueExecution=function(){L||B||(L=!0,n(j))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return M(R)},t.unstable_Profiling=null},function(e,t,r){var n=r(79);"string"==typeof n&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(35)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(34)(!1)).push([e.i,'body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",\n    monospace;\n}\n',""])},function(e,t,r){var n=r(81);"string"==typeof n&&(n=[[e.i,n,""]]);var i={insert:"head",singleton:!1};r(35)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(34)(!1)).push([e.i,"#root {\n    display: flex;\n}\n\n.App {\n    text-align: center;\n    flex: 1 1;\n    width: 50%;\n}\n\n.App-logo {\n    height: 40vmin;\n}\n\n.App-header {\n    background-color: #282c34;\n    min-height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: white;\n}\n\n.App-link {\n    color: #09d3ac;\n}\n\n.cursor {\n    position: absolute;\n    border-radius: 0;\n}\n\n.cursor--0 {\n    border-left: 2px solid #91bd3a;\n}\n\n.cursor--1 {\n    border-left: 2px solid #fa4252;\n}\n\n.cursor--2 {\n    border-left: 2px solid #fe6845;\n}\n\n.cursor--3 {\n    border-left: 2px solid #ffa259;\n}\n",""])},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=r(15),a=r(1),c=r(36),l=r(37),u=l.getAceInstance(),d=u.require("ace/range").Range,p=function(e){function t(t){var r=e.call(this,t)||this;return l.editorEvents.forEach((function(e){r[e]=r[e].bind(r)})),r.debounce=l.debounce,r}return i(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,r=t.className,n=t.onBeforeLoad,i=t.onValidate,o=t.mode,s=t.focus,a=t.theme,c=t.fontSize,d=t.value,p=t.defaultValue,h=t.cursorStart,f=t.showGutter,g=t.wrapEnabled,y=t.showPrintMargin,m=t.scrollMargin,v=void 0===m?[0,0,0,0]:m,b=t.keyboardHandler,w=t.onLoad,S=t.commands,k=t.annotations,E=t.markers,_=t.placeholder;this.editor=u.edit(this.refEditor),n&&n(u);for(var C=Object.keys(this.props.editorProps),M=0;M<C.length;M++)this.editor[C[M]]=this.props.editorProps[C[M]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),this.editor.getSession().setMode("ace/mode/"+o),this.editor.setTheme("ace/theme/"+a),this.editor.setFontSize(c),this.editor.getSession().setValue(p||d,h),this.props.navigateToFileEnd&&this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(f),this.editor.getSession().setUseWrapMode(g),this.editor.setShowPrintMargin(y),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),_&&this.updatePlaceholder(),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),i&&this.editor.getSession().on("changeAnnotation",(function(){var t=e.editor.getSession().getAnnotations();e.props.onValidate(t)})),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(k||[]),E&&E.length>0&&this.handleMarkers(E);var x=this.editor.$options;l.editorOptions.forEach((function(t){x.hasOwnProperty(t)?e.editor.setOption(t,e.props[t]):e.props[t]&&console.warn("ReactAce: editor option "+t+" was activated but not found. Did you need to import a related tool or did you possibly mispell the option?")})),this.handleOptions(this.props),Array.isArray(S)&&S.forEach((function(t){"string"==typeof t.exec?e.editor.commands.bindKey(t.bindKey,t.exec):e.editor.commands.addCommand(t)})),b&&this.editor.setKeyboardHandler("ace/keyboard/"+b),r&&(this.refEditor.className+=" "+r),w&&w(this.editor),this.editor.resize(),s&&this.editor.focus()},t.prototype.componentDidUpdate=function(e){for(var t=e,r=this.props,n=0;n<l.editorOptions.length;n++){var i=l.editorOptions[n];r[i]!==t[i]&&this.editor.setOption(i,r[i])}if(r.className!==t.className){var o=this.refEditor.className.trim().split(" ");t.className.trim().split(" ").forEach((function(e){var t=o.indexOf(e);o.splice(t,1)})),this.refEditor.className=" "+r.className+" "+o.join(" ")}if(this.editor&&this.editor.getValue()!==r.value){this.silent=!0;var s=this.editor.session.selection.toJSON();this.editor.setValue(r.value,r.cursorStart),this.editor.session.selection.fromJSON(s),this.silent=!1}r.placeholder!==t.placeholder&&this.updatePlaceholder(),r.mode!==t.mode&&this.editor.getSession().setMode("ace/mode/"+r.mode),r.theme!==t.theme&&this.editor.setTheme("ace/theme/"+r.theme),r.keyboardHandler!==t.keyboardHandler&&(r.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+r.keyboardHandler):this.editor.setKeyboardHandler(null)),r.fontSize!==t.fontSize&&this.editor.setFontSize(r.fontSize),r.wrapEnabled!==t.wrapEnabled&&this.editor.getSession().setUseWrapMode(r.wrapEnabled),r.showPrintMargin!==t.showPrintMargin&&this.editor.setShowPrintMargin(r.showPrintMargin),r.showGutter!==t.showGutter&&this.editor.renderer.setShowGutter(r.showGutter),c(r.setOptions,t.setOptions)||this.handleOptions(r),c(r.annotations,t.annotations)||this.editor.getSession().setAnnotations(r.annotations||[]),!c(r.markers,t.markers)&&Array.isArray(r.markers)&&this.handleMarkers(r.markers),c(r.scrollMargin,t.scrollMargin)||this.handleScrollMargins(r.scrollMargin),e.height===this.props.height&&e.width===this.props.width||this.editor.resize(),this.props.focus&&!e.focus&&this.editor.focus()},t.prototype.handleScrollMargins=function(e){void 0===e&&(e=[0,0,0,0]),this.editor.renderer.setScrollMargins(e[0],e[1],e[2],e[3])},t.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=this.editor.getValue();this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=this.editor.getSelection();this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=this.editor.getSelection();this.props.onCursorChange(t,e)}},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e),this.props.placeholder&&this.updatePlaceholder()},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e,this.editor)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e,this.editor)},t.prototype.onCopy=function(e){this.props.onCopy&&this.props.onCopy(e)},t.prototype.onPaste=function(e){this.props.onPaste&&this.props.onPaste(e)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e){for(var t=Object.keys(e.setOptions),r=0;r<t.length;r++)this.editor.setOption(t[r],e.setOptions[t[r]])},t.prototype.handleMarkers=function(e){var t=this,r=this.editor.getSession().getMarkers(!0);for(var n in r)r.hasOwnProperty(n)&&this.editor.getSession().removeMarker(r[n].id);for(var n in r=this.editor.getSession().getMarkers(!1))r.hasOwnProperty(n)&&"ace_active-line"!==r[n].clazz&&"ace_selected-word"!==r[n].clazz&&this.editor.getSession().removeMarker(r[n].id);e.forEach((function(e){var r=e.startRow,n=e.startCol,i=e.endRow,o=e.endCol,s=e.className,a=e.type,c=e.inFront,l=void 0!==c&&c,u=new d(r,n,i,o);t.editor.getSession().addMarker(u,s,a,l)}))},t.prototype.updatePlaceholder=function(){var e=this.editor,t=this.props.placeholder,r=!e.session.getValue().length,n=e.renderer.placeholderNode;!r&&n?(e.renderer.scroller.removeChild(e.renderer.placeholderNode),e.renderer.placeholderNode=null):r&&!n?((n=e.renderer.placeholderNode=document.createElement("div")).textContent=t||"",n.className="ace_comment ace_placeholder",n.style.padding="0 9px",n.style.position="absolute",n.style.zIndex="3",e.renderer.scroller.appendChild(n)):r&&n&&(n.textContent=t)},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,r=e.width,n=e.height,i=e.style,s=o({width:r,height:n},i);return a.createElement("div",{ref:this.updateRef,id:t,style:s})},t.propTypes={mode:s.string,focus:s.bool,theme:s.string,name:s.string,className:s.string,height:s.string,width:s.string,fontSize:s.oneOfType([s.number,s.string]),showGutter:s.bool,onChange:s.func,onCopy:s.func,onPaste:s.func,onFocus:s.func,onInput:s.func,onBlur:s.func,onScroll:s.func,value:s.string,defaultValue:s.string,onLoad:s.func,onSelectionChange:s.func,onCursorChange:s.func,onBeforeLoad:s.func,onValidate:s.func,minLines:s.number,maxLines:s.number,readOnly:s.bool,highlightActiveLine:s.bool,tabSize:s.number,showPrintMargin:s.bool,cursorStart:s.number,debounceChangePeriod:s.number,editorProps:s.object,setOptions:s.object,style:s.object,scrollMargin:s.array,annotations:s.array,markers:s.array,keyboardHandler:s.string,wrapEnabled:s.bool,enableSnippets:s.bool,enableBasicAutocompletion:s.oneOfType([s.bool,s.array]),enableLiveAutocompletion:s.oneOfType([s.bool,s.array]),navigateToFileEnd:s.bool,commands:s.array,placeholder:s.string},t.defaultProps={name:"ace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",value:"",fontSize:12,enableSnippets:!1,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,placeholder:null,navigateToFileEnd:!0},t}(a.Component);t.default=p},function(e,t,r){"use strict";var n=r(84);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(15),s=r(1),a=r(40),c=r(88),l=function(e){function t(t){var r=e.call(this,t)||this;return r.state={value:r.props.value},r.onChange=r.onChange.bind(r),r.diff=r.diff.bind(r),r}return i(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.value;e!==this.state.value&&this.setState({value:e})},t.prototype.onChange=function(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)},t.prototype.diff=function(){var e=new c,t=this.state.value[0],r=this.state.value[1];if(0===t.length&&0===r.length)return[];var n=e.diff_main(t,r);e.diff_cleanupSemantic(n);var i=this.generateDiffedLines(n);return this.setCodeMarkers(i)},t.prototype.generateDiffedLines=function(e){var t=0,r=-1,n=1,i={left:[],right:[]},o={left:1,right:1};return e.forEach((function(e){var s=e[0],a=e[1],c=a.split("\n").length-1;if(0!==a.length){var l=a[0],u=a[a.length-1],d=0;switch(s){case t:o.left+=c,o.right+=c;break;case r:"\n"===l&&(o.left++,c--),0===(d=c)&&i.right.push({startLine:o.right,endLine:o.right}),"\n"===u&&(d-=1),i.left.push({startLine:o.left,endLine:o.left+d}),o.left+=c;break;case n:"\n"===l&&(o.right++,c--),0===(d=c)&&i.left.push({startLine:o.left,endLine:o.left}),"\n"===u&&(d-=1),i.right.push({startLine:o.right,endLine:o.right+d}),o.right+=c;break;default:throw new Error("Diff type was not defined.")}}})),i},t.prototype.setCodeMarkers=function(e){void 0===e&&(e={left:[],right:[]});for(var t=[],r={left:[],right:[]},n=0;n<e.left.length;n++){var i={startRow:e.left[n].startLine-1,endRow:e.left[n].endLine,type:"text",className:"codeMarker"};r.left.push(i)}for(n=0;n<e.right.length;n++){i={startRow:e.right[n].startLine-1,endRow:e.right[n].endLine,type:"text",className:"codeMarker"};r.right.push(i)}return t[0]=r.left,t[1]=r.right,t},t.prototype.render=function(){var e=this.diff();return s.createElement(a.default,{name:this.props.name,className:this.props.className,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:e})},t.propTypes={cursorStart:o.number,editorProps:o.object,enableBasicAutocompletion:o.bool,enableLiveAutocompletion:o.bool,focus:o.bool,fontSize:o.number,height:o.string,highlightActiveLine:o.bool,maxLines:o.number,minLines:o.number,mode:o.string,name:o.string,className:o.string,onLoad:o.func,onPaste:o.func,onScroll:o.func,onChange:o.func,orientation:o.string,readOnly:o.bool,scrollMargin:o.array,setOptions:o.object,showGutter:o.bool,showPrintMargin:o.bool,splits:o.number,style:o.object,tabSize:o.number,theme:o.string,value:o.array,width:o.string,wrapEnabled:o.bool},t.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"ace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0},t}(s.Component);t.default=l},function(e,t,r){(function(e){ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],(function(e,t,r){"use strict";var n=e("./lib/oop"),i=(e("./lib/lang"),e("./lib/event_emitter").EventEmitter),o=e("./editor").Editor,s=e("./virtual_renderer").VirtualRenderer,a=e("./edit_session").EditSession,c=function(e,t,r){this.BELOW=1,this.BESIDE=0,this.$container=e,this.$theme=t,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(r||1),this.$cEditor=this.$editors[0],this.on("focus",function(e){this.$cEditor=e}.bind(this))};(function(){n.implement(this,i),this.$createEditor=function(){var e=document.createElement("div");e.className=this.$editorCSS,e.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(e);var t=new o(new s(e,this.$theme));return t.on("focus",function(){this._emit("focus",t)}.bind(this)),this.$editors.push(t),t.setFontSize(this.$fontSize),t},this.setSplits=function(e){var t;if(e<1)throw"The number of splits have to be > 0!";if(e!=this.$splits){if(e>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<e;)t=this.$editors[this.$splits],this.$container.appendChild(t.container),t.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<e;)this.$createEditor(),this.$splits++}else for(;this.$splits>e;)t=this.$editors[this.$splits-1],this.$container.removeChild(t.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(e){return this.$editors[e]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(e){this.$editors.forEach((function(t){t.setTheme(e)}))},this.setKeyboardHandler=function(e){this.$editors.forEach((function(t){t.setKeyboardHandler(e)}))},this.forEach=function(e,t){this.$editors.forEach(e,t)},this.$fontSize="",this.setFontSize=function(e){this.$fontSize=e,this.forEach((function(t){t.setFontSize(e)}))},this.$cloneSession=function(e){var t=new a(e.getDocument(),e.getMode()),r=e.getUndoManager();return t.setUndoManager(r),t.setTabSize(e.getTabSize()),t.setUseSoftTabs(e.getUseSoftTabs()),t.setOverwrite(e.getOverwrite()),t.setBreakpoints(e.getBreakpoints()),t.setUseWrapMode(e.getUseWrapMode()),t.setUseWorker(e.getUseWorker()),t.setWrapLimitRange(e.$wrapLimitRange.min,e.$wrapLimitRange.max),t.$foldData=e.$cloneFoldData(),t},this.setSession=function(e,t){var r;return r=null==t?this.$cEditor:this.$editors[t],this.$editors.some((function(t){return t.session===e}))&&(e=this.$cloneSession(e)),r.setSession(e),e},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(e){this.$orientation!=e&&(this.$orientation=e,this.resize())},this.resize=function(){var e,t=this.$container.clientWidth,r=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var n=t/this.$splits,i=0;i<this.$splits;i++)(e=this.$editors[i]).container.style.width=n+"px",e.container.style.top="0px",e.container.style.left=i*n+"px",e.container.style.height=r+"px",e.resize();else{var o=r/this.$splits;for(i=0;i<this.$splits;i++)(e=this.$editors[i]).container.style.width=t+"px",e.container.style.top=i*o+"px",e.container.style.left="0px",e.container.style.height=o+"px",e.resize()}}}).call(c.prototype),t.Split=c})),ace.define("ace/ext/split",["require","exports","module","ace/split"],(function(e,t,r){"use strict";r.exports=e("../split")})),ace.require(["ace/ext/split"],(function(t){e&&(e.exports=t)}))}).call(this,r(16)(e))},function(e,t,r){(function(t){var r="Expected a function",n="__lodash_hash_undefined__",i=1/0,o="[object Function]",s="[object GeneratorFunction]",a="[object Symbol]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,u=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,f="object"==typeof t&&t&&t.Object===Object&&t,g="object"==typeof self&&self&&self.Object===Object&&self,y=f||g||Function("return this")();var m,v=Array.prototype,b=Function.prototype,w=Object.prototype,S=y["__core-js_shared__"],k=(m=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",E=b.toString,_=w.hasOwnProperty,C=w.toString,M=RegExp("^"+E.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=y.Symbol,O=v.splice,R=$(y,"Map"),T=$(Object,"create"),I=x?x.prototype:void 0,P=I?I.toString:void 0;function A(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function B(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function U(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function D(e,t){for(var r,n=0,i=(t=function(e,t){if(H(e))return!1;var r=typeof e;if("number"==r||"symbol"==r||"boolean"==r||null==e||G(e))return!0;return l.test(e)||!c.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:H(r=t)?r:N(r)).length;null!=e&&n<i;)e=e[W(t[n++])];return n&&n==i?e:void 0}function F(e){return!(!V(e)||(t=e,k&&k in t))&&(function(e){var t=V(e)?C.call(e):"";return t==o||t==s}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?M:h).test(function(e){if(null!=e){try{return E.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function j(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function $(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return F(r)?r:void 0}A.prototype.clear=function(){this.__data__=T?T(null):{}},A.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},A.prototype.get=function(e){var t=this.__data__;if(T){var r=t[e];return r===n?void 0:r}return _.call(t,e)?t[e]:void 0},A.prototype.has=function(e){var t=this.__data__;return T?void 0!==t[e]:_.call(t,e)},A.prototype.set=function(e,t){return this.__data__[e]=T&&void 0===t?n:t,this},B.prototype.clear=function(){this.__data__=[]},B.prototype.delete=function(e){var t=this.__data__,r=U(t,e);return!(r<0)&&(r==t.length-1?t.pop():O.call(t,r,1),!0)},B.prototype.get=function(e){var t=this.__data__,r=U(t,e);return r<0?void 0:t[r][1]},B.prototype.has=function(e){return U(this.__data__,e)>-1},B.prototype.set=function(e,t){var r=this.__data__,n=U(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},L.prototype.clear=function(){this.__data__={hash:new A,map:new(R||B),string:new A}},L.prototype.delete=function(e){return j(this,e).delete(e)},L.prototype.get=function(e){return j(this,e).get(e)},L.prototype.has=function(e){return j(this,e).has(e)},L.prototype.set=function(e,t){return j(this,e).set(e,t),this};var N=z((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(G(e))return P?P.call(e):"";var t=e+"";return"0"==t&&1/e==-i?"-0":t}(t);var r=[];return u.test(e)&&r.push(""),e.replace(d,(function(e,t,n,i){r.push(n?i.replace(p,"$1"):t||e)})),r}));function W(e){if("string"==typeof e||G(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function z(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(z.Cache||L),n}z.Cache=L;var H=Array.isArray;function V(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function G(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&C.call(e)==a}e.exports=function(e,t,r){var n=null==e?void 0:D(e,t);return void 0===n?r:n}}).call(this,r(6))},function(e,t){function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}r.Diff,r.prototype.diff_main=function(e,t,r,n){void 0===n&&(n=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=n;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[0,e]]:[];void 0===r&&(r=!0);var o=r,s=this.diff_commonPrefix(e,t),a=e.substring(0,s);e=e.substring(s),t=t.substring(s),s=this.diff_commonSuffix(e,t);var c=e.substring(e.length-s);e=e.substring(0,e.length-s),t=t.substring(0,t.length-s);var l=this.diff_compute_(e,t,o,i);return a&&l.unshift([0,a]),c&&l.push([0,c]),this.diff_cleanupMerge(l),l},r.prototype.diff_compute_=function(e,t,r,n){var i;if(!e)return[[1,t]];if(!t)return[[-1,e]];var o=e.length>t.length?e:t,s=e.length>t.length?t:e,a=o.indexOf(s);if(-1!=a)return i=[[1,o.substring(0,a)],[0,s],[1,o.substring(a+s.length)]],e.length>t.length&&(i[0][0]=i[2][0]=-1),i;if(1==s.length)return[[-1,e],[1,t]];var c=this.diff_halfMatch_(e,t);if(c){var l=c[0],u=c[1],d=c[2],p=c[3],h=c[4],f=this.diff_main(l,d,r,n),g=this.diff_main(u,p,r,n);return f.concat([[0,h]],g)}return r&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,n):this.diff_bisect_(e,t,n)},r.prototype.diff_lineMode_=function(e,t,r){e=(u=this.diff_linesToChars_(e,t)).chars1,t=u.chars2;var n=u.lineArray,i=this.diff_main(e,t,!1,r);this.diff_charsToLines_(i,n),this.diff_cleanupSemantic(i),i.push([0,""]);for(var o=0,s=0,a=0,c="",l="";o<i.length;){switch(i[o][0]){case 1:a++,l+=i[o][1];break;case-1:s++,c+=i[o][1];break;case 0:if(s>=1&&a>=1){i.splice(o-s-a,s+a),o=o-s-a;for(var u,d=(u=this.diff_main(c,l,!1,r)).length-1;d>=0;d--)i.splice(o,0,u[d]);o+=u.length}a=0,s=0,c="",l=""}o++}return i.pop(),i},r.prototype.diff_bisect_=function(e,t,r){for(var n=e.length,i=t.length,o=Math.ceil((n+i)/2),s=o,a=2*o,c=new Array(a),l=new Array(a),u=0;u<a;u++)c[u]=-1,l[u]=-1;c[s+1]=0,l[s+1]=0;for(var d=n-i,p=d%2!=0,h=0,f=0,g=0,y=0,m=0;m<o&&!((new Date).getTime()>r);m++){for(var v=-m+h;v<=m-f;v+=2){for(var b=s+v,w=(C=v==-m||v!=m&&c[b-1]<c[b+1]?c[b+1]:c[b-1]+1)-v;C<n&&w<i&&e.charAt(C)==t.charAt(w);)C++,w++;if(c[b]=C,C>n)f+=2;else if(w>i)h+=2;else if(p){if((E=s+d-v)>=0&&E<a&&-1!=l[E])if(C>=(k=n-l[E]))return this.diff_bisectSplit_(e,t,C,w,r)}}for(var S=-m+g;S<=m-y;S+=2){for(var k,E=s+S,_=(k=S==-m||S!=m&&l[E-1]<l[E+1]?l[E+1]:l[E-1]+1)-S;k<n&&_<i&&e.charAt(n-k-1)==t.charAt(i-_-1);)k++,_++;if(l[E]=k,k>n)y+=2;else if(_>i)g+=2;else if(!p){if((b=s+d-S)>=0&&b<a&&-1!=c[b]){var C;w=s+(C=c[b])-b;if(C>=(k=n-k))return this.diff_bisectSplit_(e,t,C,w,r)}}}}return[[-1,e],[1,t]]},r.prototype.diff_bisectSplit_=function(e,t,r,n,i){var o=e.substring(0,r),s=t.substring(0,n),a=e.substring(r),c=t.substring(n),l=this.diff_main(o,s,!1,i),u=this.diff_main(a,c,!1,i);return l.concat(u)},r.prototype.diff_linesToChars_=function(e,t){var r=[],n={};function i(e){for(var t="",i=0,o=-1,s=r.length;o<e.length-1;){-1==(o=e.indexOf("\n",i))&&(o=e.length-1);var a=e.substring(i,o+1);i=o+1,(n.hasOwnProperty?n.hasOwnProperty(a):void 0!==n[a])?t+=String.fromCharCode(n[a]):(t+=String.fromCharCode(s),n[a]=s,r[s++]=a)}return t}return r[0]="",{chars1:i(e),chars2:i(t),lineArray:r}},r.prototype.diff_charsToLines_=function(e,t){for(var r=0;r<e.length;r++){for(var n=e[r][1],i=[],o=0;o<n.length;o++)i[o]=t[n.charCodeAt(o)];e[r][1]=i.join("")}},r.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,o=0;r<i;)e.substring(o,i)==t.substring(o,i)?o=r=i:n=i,i=Math.floor((n-r)/2+r);return i},r.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,o=0;r<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=r=i:n=i,i=Math.floor((n-r)/2+r);return i},r.prototype.diff_commonOverlap_=function(e,t){var r=e.length,n=t.length;if(0==r||0==n)return 0;r>n?e=e.substring(r-n):r<n&&(t=t.substring(0,r));var i=Math.min(r,n);if(e==t)return i;for(var o=0,s=1;;){var a=e.substring(i-s),c=t.indexOf(a);if(-1==c)return o;s+=c,0!=c&&e.substring(i-s)!=t.substring(0,s)||(o=s,s++)}},r.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;var i=this;function o(e,t,r){for(var n,o,s,a,c=e.substring(r,r+Math.floor(e.length/4)),l=-1,u="";-1!=(l=t.indexOf(c,l+1));){var d=i.diff_commonPrefix(e.substring(r),t.substring(l)),p=i.diff_commonSuffix(e.substring(0,r),t.substring(0,l));u.length<p+d&&(u=t.substring(l-p,l)+t.substring(l,l+d),n=e.substring(0,r-p),o=e.substring(r+d),s=t.substring(0,l-p),a=t.substring(l+d))}return 2*u.length>=e.length?[n,o,s,a,u]:null}var s,a,c,l,u,d=o(r,n,Math.ceil(r.length/4)),p=o(r,n,Math.ceil(r.length/2));return d||p?(s=p?d&&d[4].length>p[4].length?d:p:d,e.length>t.length?(a=s[0],c=s[1],l=s[2],u=s[3]):(l=s[0],u=s[1],a=s[2],c=s[3]),[a,c,l,u,s[4]]):null},r.prototype.diff_cleanupSemantic=function(e){for(var t=!1,r=[],n=0,i=null,o=0,s=0,a=0,c=0,l=0;o<e.length;)0==e[o][0]?(r[n++]=o,s=c,a=l,c=0,l=0,i=e[o][1]):(1==e[o][0]?c+=e[o][1].length:l+=e[o][1].length,i&&i.length<=Math.max(s,a)&&i.length<=Math.max(c,l)&&(e.splice(r[n-1],0,[-1,i]),e[r[n-1]+1][0]=1,n--,o=--n>0?r[n-1]:-1,s=0,a=0,c=0,l=0,i=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(-1==e[o-1][0]&&1==e[o][0]){var u=e[o-1][1],d=e[o][1],p=this.diff_commonOverlap_(u,d),h=this.diff_commonOverlap_(d,u);p>=h?(p>=u.length/2||p>=d.length/2)&&(e.splice(o,0,[0,d.substring(0,p)]),e[o-1][1]=u.substring(0,u.length-p),e[o+1][1]=d.substring(p),o++):(h>=u.length/2||h>=d.length/2)&&(e.splice(o,0,[0,u.substring(0,h)]),e[o-1][0]=1,e[o-1][1]=d.substring(0,d.length-h),e[o+1][0]=-1,e[o+1][1]=u.substring(h),o++),o++}o++}},r.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),i=t.charAt(0),o=n.match(r.nonAlphaNumericRegex_),s=i.match(r.nonAlphaNumericRegex_),a=o&&n.match(r.whitespaceRegex_),c=s&&i.match(r.whitespaceRegex_),l=a&&n.match(r.linebreakRegex_),u=c&&i.match(r.linebreakRegex_),d=l&&e.match(r.blanklineEndRegex_),p=u&&t.match(r.blanklineStartRegex_);return d||p?5:l||u?4:o&&!a&&c?3:a||c?2:o||s?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var i=e[n-1][1],o=e[n][1],s=e[n+1][1],a=this.diff_commonSuffix(i,o);if(a){var c=o.substring(o.length-a);i=i.substring(0,i.length-a),o=c+o.substring(0,o.length-a),s=c+s}for(var l=i,u=o,d=s,p=t(i,o)+t(o,s);o.charAt(0)===s.charAt(0);){i+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var h=t(i,o)+t(o,s);h>=p&&(p=h,l=i,u=o,d=s)}e[n-1][1]!=l&&(l?e[n-1][1]=l:(e.splice(n-1,1),n--),e[n][1]=u,d?e[n+1][1]=d:(e.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,r=[],n=0,i=null,o=0,s=!1,a=!1,c=!1,l=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(c||l)?(r[n++]=o,s=c,a=l,i=e[o][1]):(n=0,i=null),c=l=!1):(-1==e[o][0]?l=!0:c=!0,i&&(s&&a&&c&&l||i.length<this.Diff_EditCost/2&&s+a+c+l==3)&&(e.splice(r[n-1],0,[-1,i]),e[r[n-1]+1][0]=1,n--,i=null,s&&a?(c=l=!0,n=0):(o=--n>0?r[n-1]:-1,c=l=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},r.prototype.diff_cleanupMerge=function(e){e.push([0,""]);for(var t,r=0,n=0,i=0,o="",s="";r<e.length;)switch(e[r][0]){case 1:i++,s+=e[r][1],r++;break;case-1:n++,o+=e[r][1],r++;break;case 0:n+i>1?(0!==n&&0!==i&&(0!==(t=this.diff_commonPrefix(s,o))&&(r-n-i>0&&0==e[r-n-i-1][0]?e[r-n-i-1][1]+=s.substring(0,t):(e.splice(0,0,[0,s.substring(0,t)]),r++),s=s.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(s,o))&&(e[r][1]=s.substring(s.length-t)+e[r][1],s=s.substring(0,s.length-t),o=o.substring(0,o.length-t))),0===n?e.splice(r-i,n+i,[1,s]):0===i?e.splice(r-n,n+i,[-1,o]):e.splice(r-n-i,n+i,[-1,o],[1,s]),r=r-n-i+(n?1:0)+(i?1:0)+1):0!==r&&0==e[r-1][0]?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,i=0,n=0,o="",s=""}""===e[e.length-1][1]&&e.pop();var a=!1;for(r=1;r<e.length-1;)0==e[r-1][0]&&0==e[r+1][0]&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),a=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),a=!0)),r++;a&&this.diff_cleanupMerge(e)},r.prototype.diff_xIndex=function(e,t){var r,n=0,i=0,o=0,s=0;for(r=0;r<e.length&&(1!==e[r][0]&&(n+=e[r][1].length),-1!==e[r][0]&&(i+=e[r][1].length),!(n>t));r++)o=n,s=i;return e.length!=r&&-1===e[r][0]?s:s+(t-o)},r.prototype.diff_prettyHtml=function(e){for(var t=[],r=/&/g,n=/</g,i=/>/g,o=/\n/g,s=0;s<e.length;s++){var a=e[s][0],c=e[s][1].replace(r,"&amp;").replace(n,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(a){case 1:t[s]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case-1:t[s]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[s]="<span>"+c+"</span>"}}return t.join("")},r.prototype.diff_text1=function(e){for(var t=[],r=0;r<e.length;r++)1!==e[r][0]&&(t[r]=e[r][1]);return t.join("")},r.prototype.diff_text2=function(e){for(var t=[],r=0;r<e.length;r++)-1!==e[r][0]&&(t[r]=e[r][1]);return t.join("")},r.prototype.diff_levenshtein=function(e){for(var t=0,r=0,n=0,i=0;i<e.length;i++){var o=e[i][0],s=e[i][1];switch(o){case 1:r+=s.length;break;case-1:n+=s.length;break;case 0:t+=Math.max(r,n),r=0,n=0}}return t+=Math.max(r,n)},r.prototype.diff_toDelta=function(e){for(var t=[],r=0;r<e.length;r++)switch(e[r][0]){case 1:t[r]="+"+encodeURI(e[r][1]);break;case-1:t[r]="-"+e[r][1].length;break;case 0:t[r]="="+e[r][1].length}return t.join("\t").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(e,t){for(var r=[],n=0,i=0,o=t.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{r[n++]=[1,decodeURI(a)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var c=parseInt(a,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+a);var l=e.substring(i,i+=c);"="==o[s].charAt(0)?r[n++]=[0,l]:r[n++]=[-1,l];break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(i!=e.length)throw new Error("Delta length ("+i+") does not equal source text length ("+e.length+").");return r},r.prototype.match_main=function(e,t,r){if(null==e||null==t||null==r)throw new Error("Null input. (match_main)");return r=Math.max(0,Math.min(r,e.length)),e==t?0:e.length?e.substring(r,r+t.length)==t?r:this.match_bitap_(e,t,r):-1},r.prototype.match_bitap_=function(e,t,r){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var n=this.match_alphabet_(t),i=this;function o(e,n){var o=e/t.length,s=Math.abs(r-n);return i.Match_Distance?o+s/i.Match_Distance:s?1:o}var s=this.Match_Threshold,a=e.indexOf(t,r);-1!=a&&(s=Math.min(o(0,a),s),-1!=(a=e.lastIndexOf(t,r+t.length))&&(s=Math.min(o(0,a),s)));var c,l,u=1<<t.length-1;a=-1;for(var d,p=t.length+e.length,h=0;h<t.length;h++){for(c=0,l=p;c<l;)o(h,r+l)<=s?c=l:p=l,l=Math.floor((p-c)/2+c);p=l;var f=Math.max(1,r-l+1),g=Math.min(r+l,e.length)+t.length,y=Array(g+2);y[g+1]=(1<<h)-1;for(var m=g;m>=f;m--){var v=n[e.charAt(m-1)];if(y[m]=0===h?(y[m+1]<<1|1)&v:(y[m+1]<<1|1)&v|(d[m+1]|d[m])<<1|1|d[m+1],y[m]&u){var b=o(h,m-1);if(b<=s){if(s=b,!((a=m-1)>r))break;f=Math.max(1,2*r-a)}}}if(o(h+1,r)>s)break;d=y}return a},r.prototype.match_alphabet_=function(e){for(var t={},r=0;r<e.length;r++)t[e.charAt(r)]=0;for(r=0;r<e.length;r++)t[e.charAt(r)]|=1<<e.length-r-1;return t},r.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var r=t.substring(e.start2,e.start2+e.length1),n=0;t.indexOf(r)!=t.lastIndexOf(r)&&r.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)n+=this.Patch_Margin,r=t.substring(e.start2-n,e.start2+e.length1+n);n+=this.Patch_Margin;var i=t.substring(e.start2-n,e.start2);i&&e.diffs.unshift([0,i]);var o=t.substring(e.start2+e.length1,e.start2+e.length1+n);o&&e.diffs.push([0,o]),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+o.length,e.length2+=i.length+o.length}},r.prototype.patch_make=function(e,t,n){var i,o;if("string"==typeof e&&"string"==typeof t&&void 0===n)i=e,(o=this.diff_main(i,t,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&void 0===t&&void 0===n)o=e,i=this.diff_text1(o);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===n)i=e,o=t;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");i=e,o=n}if(0===o.length)return[];for(var s=[],a=new r.patch_obj,c=0,l=0,u=0,d=i,p=i,h=0;h<o.length;h++){var f=o[h][0],g=o[h][1];switch(c||0===f||(a.start1=l,a.start2=u),f){case 1:a.diffs[c++]=o[h],a.length2+=g.length,p=p.substring(0,u)+g+p.substring(u);break;case-1:a.length1+=g.length,a.diffs[c++]=o[h],p=p.substring(0,u)+p.substring(u+g.length);break;case 0:g.length<=2*this.Patch_Margin&&c&&o.length!=h+1?(a.diffs[c++]=o[h],a.length1+=g.length,a.length2+=g.length):g.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(a,d),s.push(a),a=new r.patch_obj,c=0,d=p,l=u)}1!==f&&(l+=g.length),-1!==f&&(u+=g.length)}return c&&(this.patch_addContext_(a,d),s.push(a)),s},r.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=new r.patch_obj;o.diffs=[];for(var s=0;s<i.diffs.length;s++)o.diffs[s]=i.diffs[s].slice();o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,t[n]=o}return t},r.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);t=r+t+r,this.patch_splitMax(e);for(var n=0,i=[],o=0;o<e.length;o++){var s,a,c=e[o].start2+n,l=this.diff_text1(e[o].diffs),u=-1;if(l.length>this.Match_MaxBits?-1!=(s=this.match_main(t,l.substring(0,this.Match_MaxBits),c))&&(-1==(u=this.match_main(t,l.substring(l.length-this.Match_MaxBits),c+l.length-this.Match_MaxBits))||s>=u)&&(s=-1):s=this.match_main(t,l,c),-1==s)i[o]=!1,n-=e[o].length2-e[o].length1;else if(i[o]=!0,n=s-c,l==(a=-1==u?t.substring(s,s+l.length):t.substring(s,u+this.Match_MaxBits)))t=t.substring(0,s)+this.diff_text2(e[o].diffs)+t.substring(s+l.length);else{var d=this.diff_main(l,a,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(d)/l.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(d);for(var p,h=0,f=0;f<e[o].diffs.length;f++){var g=e[o].diffs[f];0!==g[0]&&(p=this.diff_xIndex(d,h)),1===g[0]?t=t.substring(0,s+p)+g[1]+t.substring(s+p):-1===g[0]&&(t=t.substring(0,s+p)+t.substring(s+this.diff_xIndex(d,h+g[1].length))),-1!==g[0]&&(h+=g[1].length)}}}}return[t=t.substring(r.length,t.length-r.length),i]},r.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,r="",n=1;n<=t;n++)r+=String.fromCharCode(n);for(n=0;n<e.length;n++)e[n].start1+=t,e[n].start2+=t;var i=e[0],o=i.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,r]),i.start1-=t,i.start2-=t,i.length1+=t,i.length2+=t;else if(t>o[0][1].length){var s=t-o[0][1].length;o[0][1]=r.substring(o[0][1].length)+o[0][1],i.start1-=s,i.start2-=s,i.length1+=s,i.length2+=s}if(0==(o=(i=e[e.length-1]).diffs).length||0!=o[o.length-1][0])o.push([0,r]),i.length1+=t,i.length2+=t;else if(t>o[o.length-1][1].length){s=t-o[o.length-1][1].length;o[o.length-1][1]+=r.substring(0,s),i.length1+=s,i.length2+=s}return r},r.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var i=e[n];e.splice(n--,1);for(var o=i.start1,s=i.start2,a="";0!==i.diffs.length;){var c=new r.patch_obj,l=!0;for(c.start1=o-a.length,c.start2=s-a.length,""!==a&&(c.length1=c.length2=a.length,c.diffs.push([0,a]));0!==i.diffs.length&&c.length1<t-this.Patch_Margin;){var u=i.diffs[0][0],d=i.diffs[0][1];1===u?(c.length2+=d.length,s+=d.length,c.diffs.push(i.diffs.shift()),l=!1):-1===u&&1==c.diffs.length&&0==c.diffs[0][0]&&d.length>2*t?(c.length1+=d.length,o+=d.length,l=!1,c.diffs.push([u,d]),i.diffs.shift()):(d=d.substring(0,t-c.length1-this.Patch_Margin),c.length1+=d.length,o+=d.length,0===u?(c.length2+=d.length,s+=d.length):l=!1,c.diffs.push([u,d]),d==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(d.length))}a=(a=this.diff_text2(c.diffs)).substring(a.length-this.Patch_Margin);var p=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==p&&(c.length1+=p.length,c.length2+=p.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=p:c.diffs.push([0,p])),l||e.splice(++n,0,c)}}},r.prototype.patch_toText=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r];return t.join("")},r.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split("\n"),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var s=n[i].match(o);if(!s)throw new Error("Invalid patch string: "+n[i]);var a=new r.patch_obj;for(t.push(a),a.start1=parseInt(s[1],10),""===s[2]?(a.start1--,a.length1=1):"0"==s[2]?a.length1=0:(a.start1--,a.length1=parseInt(s[2],10)),a.start2=parseInt(s[3],10),""===s[4]?(a.start2--,a.length2=1):"0"==s[4]?a.length2=0:(a.start2--,a.length2=parseInt(s[4],10)),i++;i<n.length;){var c=n[i].charAt(0);try{var l=decodeURI(n[i].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==c)a.diffs.push([-1,l]);else if("+"==c)a.diffs.push([1,l]);else if(" "==c)a.diffs.push([0,l]);else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+l)}i++}}return t},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case 1:e="+";break;case-1:e="-";break;case 0:e=" "}t[r+1]=e+encodeURI(this.diffs[r][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=r,e.exports.diff_match_patch=r,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},function(e,t,r){(function(t){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(93),o=r(94),s=r(95),a=r(96),c=r(115),l=r(4),u=r(128),d=r(129),p=r(2).Emitter,h=function(){},f=1e3;e.exports=function(){function e(t){var r=t.restGateway,n=(t.pubSubGateway,t.connectionTimeout),i=t.tetherDisconnectWindow,o=t.testEpoch,s=t.pusherKey,a=t.pusherOptions,c=t.baseURL,l=t.didCreateOrJoinPortal;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.restGateway=r||new u({baseURL:c}),this.pubSubGateway=new d({key:s,options:a}),this.connectionTimeout=n||5e3,this.tetherDisconnectWindow=i||f,this.testEpoch=o,this.didCreateOrJoinPortal=l||h,this.emitter=new p}var r,g,y;return r=e,(g=[{key:"initialize",value:function(){var e,t,r;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.restGateway.get("/protocol-version"));case 2:if(e=n.sent,t=e.ok,r=e.body,!(t&&r.version>9)){n.next=7;break}throw new l.ClientOutOfDateError("This version teletype-client is out of date. The local version is ".concat(9," but the remote version is ").concat(r.version,"."));case 7:case"end":return n.stop()}}),null,this)}},{key:"dispose",value:function(){this.peerPool&&this.peerPool.dispose()}},{key:"signIn",value:function(e){var t,r,n;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return this.restGateway.setOauthToken(e),i.prev=1,i.next=4,regeneratorRuntime.awrap(this.restGateway.get("/identity"));case 4:t=i.sent,i.next=11;break;case 7:throw i.prev=7,i.t0=i.catch(1),r="Authentication failed with message: "+i.t0.message,new l.UnexpectedAuthenticationError(r);case 11:if(!t.ok){i.next=21;break}return this.peerPool=new a({peerId:this.getClientId(),peerIdentity:t.body,restGateway:this.restGateway,pubSubGateway:this.pubSubGateway,fragmentSize:16384,connectionTimeout:this.connectionTimeout,testEpoch:this.testEpoch}),this.peerPool.onError(this.peerPoolDidError.bind(this)),i.next=16,regeneratorRuntime.awrap(this.peerPool.initialize());case 16:return this.signedIn=!0,this.emitter.emit("sign-in-change"),i.abrupt("return",!0);case 21:if(401!==t.status){i.next=25;break}return i.abrupt("return",!1);case 25:throw n="Authentication failed with message: "+t.body.message,new l.UnexpectedAuthenticationError(n);case 27:case"end":return i.stop()}}),null,this,[[1,7]])}},{key:"signOut",value:function(){return this.signedIn&&(this.signedIn=!1,this.restGateway.setOauthToken(null),this.peerPool.dispose(),this.peerPool=null,this.emitter.emit("sign-in-change")),!0}},{key:"isSignedIn",value:function(){return this.signedIn}},{key:"getLocalUserIdentity",value:function(){return this.peerPool?this.peerPool.getLocalPeerIdentity():null}},{key:"createPortal",value:function(){var e,t,r;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(this.restGateway.post("/portals",{hostPeerId:this.getClientId()}));case 3:e=n.sent,n.next=9;break;case 6:throw n.prev=6,n.t0=n.catch(0),new l.PortalCreationError("Could not contact server to create your portal");case 9:if(!e.ok){n.next=18;break}return t=e.body.id,r=new c({id:t,siteId:1,peerPool:this.peerPool,connectionTimeout:this.connectionTimeout,tetherDisconnectWindow:this.tetherDisconnectWindow}),n.next=14,regeneratorRuntime.awrap(r.initialize());case 14:return this.didCreateOrJoinPortal(r),n.abrupt("return",r);case 18:if(401!==e.status){n.next=22;break}this.signOut(),n.next=23;break;case 22:throw new l.PortalCreationError("A server error occurred while creating your portal");case 23:case"end":return n.stop()}}),null,this,[[0,6]])}},{key:"joinPortal",value:function(e){var t,r,n;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,regeneratorRuntime.awrap(this.restGateway.get("/portals/".concat(e)));case 3:t=i.sent,i.next=9;break;case 6:throw i.prev=6,i.t0=i.catch(0),new l.PortalJoinError("Could not contact server to join the portal");case 9:if(!t.ok){i.next=20;break}return r=t.body.hostPeerId,n=new c({id:e,hostPeerId:r,peerPool:this.peerPool,connectionTimeout:this.connectionTimeout,tetherDisconnectWindow:this.tetherDisconnectWindow}),i.next=14,regeneratorRuntime.awrap(n.initialize());case 14:return i.next=16,regeneratorRuntime.awrap(n.join());case 16:return this.didCreateOrJoinPortal(n),i.abrupt("return",n);case 20:if(401!==t.status){i.next=24;break}this.signOut(),i.next=25;break;case 24:throw new l.PortalNotFoundError;case 25:case"end":return i.stop()}}),null,this,[[0,6]])}},{key:"onConnectionError",value:function(e){return this.emitter.on("connection-error",e)}},{key:"onSignInChange",value:function(e){return this.emitter.on("sign-in-change",e)}},{key:"getClientId",value:function(){if(!this.clientId){var e,r=i.networkInterfaces();for(var n in r){var a=r[n][0];if(a&&!a.internal&&"00:00:00:00:00:00"!==a.mac){e=a.mac;break}}if(e){var c=e.split(":").map((function(e){return t.from(e,"hex").readUInt8()}));this.clientId=o({node:c})+"."+s()}else this.clientId=s()+"."+s()}return this.clientId}},{key:"peerPoolDidError",value:function(e){e instanceof l.InvalidAuthenticationTokenError?this.signOut():this.emitter.emit("connection-error",e)}}])&&n(r.prototype,g),y&&n(r,y),e}()}).call(this,r(7).Buffer)},function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=l(e),s=n[0],a=n[1],c=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),u=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[u++]=255&t);1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(u(e,s,s+16383>a?a:s+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,l=c>>1,u=-7,d=r?i-1:0,p=r?-1:1,h=e[t+d];for(d+=p,o=h&(1<<-u)-1,h>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+e[t+d],d+=p,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),o-=l}return(h?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&a,h+=f,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[r+h]=255&s,h+=f,s/=256,l-=8);e[r+h-f]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t,r){var n,i,o=r(41),s=r(42),a=0,c=0;e.exports=function(e,t,r){var l=t&&r||0,u=t||[],d=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==p){var h=o();null==d&&(d=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=i=16383&(h[6]<<8|h[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,y=f-a+(g-c)/1e4;if(y<0&&void 0===e.clockseq&&(p=p+1&16383),(y<0||f>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=g,i=p;var m=(1e4*(268435455&(f+=122192928e5))+g)%4294967296;u[l++]=m>>>24&255,u[l++]=m>>>16&255,u[l++]=m>>>8&255,u[l++]=255&m;var v=f/4294967296*1e4&268435455;u[l++]=v>>>8&255,u[l++]=255&v,u[l++]=v>>>24&15|16,u[l++]=v>>>16&255,u[l++]=p>>>8|128,u[l++]=255&p;for(var b=0;b<6;++b)u[l+b]=d[b];return t||s(u)}},function(e,t,r){var n=r(41),i=r(42);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(8),o=r(2),s=o.CompositeDisposable,a=o.Disposable,c=o.Emitter,l=r(102),u=r(114),d=r(4);e.exports=function(){function e(t){var r=t.peerId,n=t.peerIdentity,i=t.restGateway,o=t.pubSubGateway,a=t.fragmentSize,l=t.connectionTimeout,u=t.testEpoch;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.peerId=r,this.restGateway=i,this.pubSubGateway=o,this.fragmentSize=a,this.connectionTimeout=l||5e3,this.testEpoch=u,this.emitter=new c,this.subscriptions=new s,this.peerConnectionsById=new Map,this.peerIdentitiesById=new Map([[r,n]]),this.disposed=!1,this.listenersCount=0}var t,r,o;return t=e,(r=[{key:"initialize",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.fetchICEServers());case 2:case"end":return e.stop()}}),null,this)}},{key:"listen",value:function(){var e,t,r=this;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("peerpool.listen() called"),this.listenPromise||(e=new d.PubSubConnectionError("Timed out while subscribing to incoming signals"),this.listenPromise=new Promise((function(t,n){var i,o,s;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return i=!1,o=window.setTimeout((function(){r.listenPromise=null,n(e),i=!0}),r.connectionTimeout),a.next=4,regeneratorRuntime.awrap(r.pubSubGateway.subscribe("/peers/".concat(r.peerId),"signal",r.didReceiveSignal.bind(r)));case 4:s=a.sent,i?s.dispose():(window.clearTimeout(o),r.subscriptions.add(s),t(s));case 6:case"end":return a.stop()}}))}))),this.listenersCount++,n.next=5,regeneratorRuntime.awrap(this.listenPromise);case 5:return t=n.sent,n.abrupt("return",new a((function(){r.listenersCount--,0===r.listenersCount&&(r.listenPromise=null,t.dispose())})));case 7:case"end":return n.stop()}}),null,this)}},{key:"dispose",value:function(){this.disposed=!0,this.subscriptions.dispose(),this.peerIdentitiesById.clear(),this.disconnect()}},{key:"fetchICEServers",value:function(){var e,t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.restGateway.get("/ice-servers"));case 2:e=r.sent,t=e.body,e.ok,i(Array.isArray(t),"ICE servers must be an Array"),this.iceServers=t;case 7:case"end":return r.stop()}}),null,this)}},{key:"getLocalPeerIdentity",value:function(){return this.peerIdentitiesById.get(this.peerId)}},{key:"connectTo",value:function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.peerId!==e){r.next=2;break}throw new d.PeerConnectionError("Sorry. You can't connect to yourself this way. Maybe try meditation or a walk in the woods instead?");case 2:return t=this.getPeerConnection(e),r.prev=3,r.next=6,regeneratorRuntime.awrap(t.connect());case 6:r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(3),this.peerConnectionsById.delete(e),r.t0;case 12:case"end":return r.stop()}}),null,this,[[3,8]])}},{key:"getConnectedPromise",value:function(e){return this.getPeerConnection(e).getConnectedPromise()}},{key:"getDisconnectedPromise",value:function(e){return this.peerConnectionsById.has(e)?this.peerConnectionsById.get(e).getDisconnectedPromise():Promise.resolve()}},{key:"disconnect",value:function(){this.peerConnectionsById.forEach((function(e){e.disconnect()})),this.peerConnectionsById.clear()}},{key:"send",value:function(e,t){var r=this.peerConnectionsById.get(e);if(!r)throw new Error("No connection to peer");r.send(t)}},{key:"onDisconnection",value:function(e){return this.emitter.on("disconnection",e)}},{key:"onReceive",value:function(e){return this.emitter.on("receive",e)}},{key:"onError",value:function(e){return this.emitter.on("error",e)}},{key:"isConnectedToPeer",value:function(e){var t=this.peerConnectionsById.get(e);return!!t&&"connected"===t.state}},{key:"getPeerIdentity",value:function(e){return this.peerIdentitiesById.get(e)}},{key:"didReceiveSignal",value:function(e){var t=e.senderId,r=e.senderIdentity;r&&this.peerIdentitiesById.set(t,r),this.getPeerConnection(t).signalingProvider.receiveMessage(e)}},{key:"didDisconnect",value:function(e){this.peerConnectionsById.delete(e),this.emitter.emit("disconnection",{peerId:e})}},{key:"didReceiveMessage",value:function(e){this.emitter.emit("receive",e)}},{key:"peerConnectionDidError",value:function(e){var t=e.peerId,r=e.event;this.didDisconnect(t),this.emitter.emit("error",r)}},{key:"getPeerConnection",value:function(e){var t=this.peerConnectionsById.get(e);return t||(t=new l({localPeerId:this.peerId,remotePeerId:e,fragmentSize:this.fragmentSize,iceServers:this.iceServers,connectionTimeout:this.connectionTimeout,didReceiveMessage:this.didReceiveMessage.bind(this),didDisconnect:this.didDisconnect.bind(this),didError:this.peerConnectionDidError.bind(this),signalingProvider:new u({localPeerId:this.peerId,remotePeerId:e,restGateway:this.restGateway,testEpoch:this.testEpoch})}),this.peerConnectionsById.set(e,t)),t}}])&&n(t.prototype,r),o&&n(t,o),e}()},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<o;c=n[++r])g(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var o,s={};function a(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),u(n,e,n.depth)}function c(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function l(e,t){return e}function u(e,r,n){if(e.customInspect&&r&&E(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return m(i)||(i=u(e,i,n)),i}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,r);if(o)return o;var s=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),k(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(r);if(0===s.length){if(E(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return e.stylize(Date.prototype.toString.call(r),"date");if(k(r))return d(r)}var l,w="",_=!1,C=["{","}"];(h(r)&&(_=!0,C=["[","]"]),E(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(w=" "+RegExp.prototype.toString.call(r)),S(r)&&(w=" "+Date.prototype.toUTCString.call(r)),k(r)&&(w=" "+d(r)),0!==s.length||_&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),l=_?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)O(t,String(s))?o.push(p(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(p(e,t,r,n,i,!0))})),o}(e,r,n,a,s):s.map((function(t){return p(e,r,n,a,t,_)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,w,C)):C[0]+w+C[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),O(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(r)?u(e,c.value,null):u(e,c.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function m(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===_(e)}function w(e){return"object"==typeof e&&null!==e}function S(e){return w(e)&&"[object Date]"===_(e)}function k(e){return w(e)&&("[object Error]"===_(e)||e instanceof Error)}function E(e){return"function"==typeof e}function _(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(v(o)&&(o=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){var n=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else s[r]=function(){};return s[r]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=f,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=w,t.isDate=S,t.isError=k,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(98);var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",x(),t.format.apply(t,arguments))},t.inherits=r(99),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var R="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(R&&e[R]){var t;if("function"!=typeof(t=e[R]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),R&&Object.defineProperty(t,R,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=R,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};t.apply(this,r).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(T,t,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(9))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){(function(){var t;t=r(17),e.exports=function(){function e(){this.clear()}return e.exceptionHandlers=[],e.onEventHandlerException=function(e){return 0===this.exceptionHandlers.length&&(this.dispatch=this.exceptionHandlingDispatch),this.exceptionHandlers.push(e),new t((r=this,function(){if(r.exceptionHandlers.splice(r.exceptionHandlers.indexOf(e),1),0===r.exceptionHandlers.length)return r.dispatch=r.simpleDispatch}));var r},e.simpleDispatch=function(e,t){return e(t)},e.exceptionHandlingDispatch=function(e,t){var r,n,i,o,s,a;try{return e(t)}catch(e){for(r=e,a=[],i=0,o=(s=this.exceptionHandlers).length;i<o;i++)n=s[i],a.push(n(r));return a}},e.dispatch=e.simpleDispatch,e.prototype.disposed=!1,e.prototype.clear=function(){return this.handlersByEventName={}},e.prototype.dispose=function(){return this.handlersByEventName=null,this.disposed=!0},e.prototype.on=function(e,r,n){var i;if(null==n&&(n=!1),this.disposed)throw new Error("Emitter has been disposed");if("function"!=typeof r)throw new Error("Handler must be a function");return(i=this.handlersByEventName[e])?this.handlersByEventName[e]=n?[r].concat(i):i.concat(r):this.handlersByEventName[e]=[r],new t(this.off.bind(this,e,r))},e.prototype.once=function(e,t,r){var n,i;return null==r&&(r=!1),i=function(e){return n.dispose(),t(e)},n=this.on(e,i,r)},e.prototype.preempt=function(e,t){return this.on(e,t,!0)},e.prototype.off=function(e,t){var r,n,i,o,s;if(!this.disposed&&(i=this.handlersByEventName[e])){for(n=[],o=0,s=i.length;o<s;o++)(r=i[o])!==t&&n.push(r);n.length>0?this.handlersByEventName[e]=n:delete this.handlersByEventName[e]}},e.prototype.emit=function(e,t){var r,n,i,o,s;if(n=null!=(s=this.handlersByEventName)?s[e]:void 0)for(i=0,o=n.length;i<o;i++)r=n[i],this.constructor.dispatch(r,t)},e.prototype.emitAsync=function(e,t){var r,n,i,o;return(n=null!=(o=this.handlersByEventName)?o[e]:void 0)?(i=function(){var e,i,o;for(o=[],e=0,i=n.length;e<i;e++)r=n[e],o.push(this.constructor.dispatch(r,t));return o}.call(this),Promise.all(i).then((function(){}))):Promise.resolve()},e.prototype.getEventNames=function(){return Object.keys(this.handlersByEventName)},e.prototype.listenerCountForEventName=function(e){var t,r;return null!=(t=null!=(r=this.handlersByEventName[e])?r.length:void 0)?t:0},e.prototype.getTotalListenerCount=function(){var e,t,r,n,i;for(t=0,r=0,n=(i=Object.keys(this.handlersByEventName)).length;r<n;r++)e=i[r],t+=this.handlersByEventName[e].length;return t},e}()}).call(this)},function(e,t,r){(function(){var t,n;t=null,e.exports=function(){function e(){var e,t,r;for(this.disposables=new Set,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.add(e)}return e.prototype.disposed=!1,e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposables.forEach((function(e){return e.dispose()})),this.disposables=null)},e.prototype.add=function(){var e,t,r;if(!this.disposed)for(t=0,r=arguments.length;t<r;t+=1)e=arguments[t],n(e),this.disposables.add(e)},e.prototype.remove=function(e){this.disposed||this.disposables.delete(e)},e.prototype.delete=function(e){this.remove(e)},e.prototype.clear=function(){this.disposed||this.disposables.clear()},e}(),n=function(e){if(null==t&&(t=r(17)),!t.isDisposable(e))throw new TypeError("Arguments to CompositeDisposable.add must have a .dispose() method")}}).call(this)},function(e,t,r){(function(t,n){function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(103);var o=r(18),s=r(4);e.exports=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.localPeerId,i=t.remotePeerId,o=t.fragmentSize,s=t.iceServers,a=t.connectionTimeout,c=t.signalingProvider,l=t.didReceiveMessage,u=t.didDisconnect,d=t.didError;this.localPeerId=n,this.remotePeerId=i,this.fragmentSize=o,this.iceServers=s,this.connectionTimeout=a,this.signalingProvider=c,this.didReceiveMessage=l,this.didDisconnect=u,this.didError=d,this.receivedSignals={},this.incomingSignalSequenceNumber=0,this.outgoingSignalSequenceNumber=0,this.state="initial",this.initiator=!1,this.signalingProvider.receive=this.receiveSignal.bind(this),this.rtcPeerConnection=new RTCPeerConnection({iceServers:s}),this.rtcPeerConnection.oniceconnectionstatechange=this.handleConnectionStateChange.bind(this),this.rtcPeerConnection.onicecandidate=this.handleICECandidate.bind(this),this.rtcPeerConnection.ondatachannel=this.handleDataChannel.bind(this),this.rtcPeerConnection.onerror=this.handleError.bind(this),this.connectedPromise=new Promise((function(e,t){r.resolveConnectedPromise=e,r.rejectConnectedPromise=t})),this.disconnectedPromise=new Promise((function(e){return r.resolveDisconnectedPromise=e}))}var r,a,c;return r=e,(a=[{key:"connect",value:function(){var e=this;if("initial"===this.state){this.state="connecting",this.initiator=!0,this.rtcPeerConnection.onnegotiationneeded=this.handleNegotiationNeeded.bind(this),this.negotiationNeeded=!0;var t=this.rtcPeerConnection.createDataChannel(null,{ordered:!0});this.handleDataChannel({channel:t});var r=new s.PeerConnectionError("Connecting to peer timed out");setTimeout((function(){"connecting"===e.state&&(e.disconnect(),e.rejectConnectedPromise(r))}),this.connectionTimeout)}return this.getConnectedPromise()}},{key:"getConnectedPromise",value:function(){return this.connectedPromise}},{key:"getDisconnectedPromise",value:function(){return this.disconnectedPromise}},{key:"disconnect",value:function(){var e=this;"disconnected"!==this.state&&(this.state="disconnected",this.didDisconnect(this.remotePeerId),this.resolveDisconnectedPromise(),t.nextTick((function(){if(e.channel)try{e.channel.send(n.alloc(1,2))}catch(e){}finally{e.channel.close()}"closed"!==e.rtcPeerConnection.signalingState&&e.rtcPeerConnection.close()})))}},{key:"handleNegotiationNeeded",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.negotiationNeeded&&"disconnected"!==this.state){t.next=2;break}return t.abrupt("return");case 2:return this.negotiationNeeded=!1,t.next=5,regeneratorRuntime.awrap(this.rtcPeerConnection.createOffer());case 5:return e=t.sent,t.next=8,regeneratorRuntime.awrap(this.rtcPeerConnection.setLocalDescription(e));case 8:return t.prev=8,t.next=11,regeneratorRuntime.awrap(this.sendSignal({offer:e,senderId:this.localPeerId}));case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(8),this.disconnect(),this.rejectConnectedPromise(t.t0);case 17:case"end":return t.stop()}}),null,this,[[8,13]])}},{key:"handleICECandidate",value:function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.candidate,r.prev=1,r.next=4,regeneratorRuntime.awrap(this.sendSignal({candidate:t}));case 4:r.next=10;break;case 6:r.prev=6,r.t0=r.catch(1),this.disconnect(),this.initiator?this.rejectConnectedPromise(r.t0):this.handleError(r.t0);case 10:case"end":return r.stop()}}),null,this,[[1,6]])}},{key:"handleDataChannel",value:function(e){var t=this,r=e.channel;this.channel=r,this.channel.binaryType="arraybuffer",this.channel.onerror=this.handleError.bind(this),this.channel.onmessage=function(e){var r=e.data;return t.receive(n.from(r))},this.channel.onclose=function(){return t.disconnect()},"open"===this.channel.readyState?this.handleConnectionStateChange():this.channel.onopen=this.handleConnectionStateChange.bind(this)}},{key:"handleConnectionStateChange",value:function(){this.isConnectionOpen()&&"connected"!==this.state?(this.state="connected",this.resolveConnectedPromise()):this.isConnectionClosed()&&"disconnected"!==this.state&&this.disconnect()}},{key:"isConnectionOpen",value:function(){var e=this.rtcPeerConnection.iceConnectionState;return("connected"===e||"completed"===e)&&this.channel&&"open"===this.channel.readyState}},{key:"isConnectionClosed",value:function(){var e=this.rtcPeerConnection,t=e.iceConnectionState,r=e.signalingState;return"closed"===t||"failed"===t||"disconnected"===t&&"stable"===r}},{key:"handleError",value:function(e){this.didError({peerId:this.remotePeerId,event:e})}},{key:"sendSignal",value:function(e){if("disconnected"!==this.state)return this.signalingProvider.send(e)}},{key:"receiveSignal",value:function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if("disconnected"!==this.state){r.next=2;break}return r.abrupt("return");case 2:if(!e.offer){r.next=21;break}return r.next=5,regeneratorRuntime.awrap(this.rtcPeerConnection.setRemoteDescription(e.offer));case 5:return r.next=7,regeneratorRuntime.awrap(this.rtcPeerConnection.createAnswer());case 7:return t=r.sent,r.next=10,regeneratorRuntime.awrap(this.rtcPeerConnection.setLocalDescription(t));case 10:return r.prev=10,r.next=13,regeneratorRuntime.awrap(this.sendSignal({answer:t}));case 13:r.next=19;break;case 15:r.prev=15,r.t0=r.catch(10),this.disconnect(),this.handleError(r.t0);case 19:r.next=27;break;case 21:if(!e.answer){r.next=26;break}return r.next=24,regeneratorRuntime.awrap(this.rtcPeerConnection.setRemoteDescription(e.answer));case 24:r.next=27;break;case 26:e.candidate&&this.rtcPeerConnection.addIceCandidate(e.candidate);case 27:case"end":return r.stop()}}),null,this,[[10,15]])}},{key:"send",value:function(e){if("connected"!==this.state)throw new Error("Must be connected to send");var t=0,r=(e=o(e)).length+1;r>this.fragmentSize&&(t=1,r+=4);var i=n.alloc(r),s=0;if(i.writeUInt8(t,s),s++,r>this.fragmentSize&&(i.writeUInt32BE(r,s),s+=4),e.copy(i,s),r>this.fragmentSize)for(var a=0;a<r;)this.channel.send(i.slice(a,a+this.fragmentSize)),a+=this.fragmentSize;else for(var c=0;;)try{this.channel.send(i);break}catch(e){if(5==c++)throw e}}},{key:"receive",value:function(e){if("connected"===this.state)if(this.incomingMultipartEnvelope)e.copy(this.incomingMultipartEnvelope,this.incomingMultipartEnvelopeOffset),this.incomingMultipartEnvelopeOffset+=e.length,this.incomingMultipartEnvelopeOffset===this.incomingMultipartEnvelope.length&&(this.finishReceiving(this.incomingMultipartEnvelope),this.incomingMultipartEnvelope=null,this.incomingMultipartEnvelopeOffset=0);else{var t=e.readUInt8(0);if(1&t){var r=e.readUInt32BE(1);this.incomingMultipartEnvelope=n.alloc(r),e.copy(this.incomingMultipartEnvelope,0),this.incomingMultipartEnvelopeOffset=e.length}else 2&t?this.disconnect():this.finishReceiving(e)}}},{key:"finishReceiving",value:function(e){var t=1&e.readUInt8(0)?5:1,r=o(e.slice(t));this.didReceiveMessage({senderId:this.remotePeerId,message:r})}}])&&i(r.prototype,a),c&&i(r,c),e}()}).call(this,r(9),r(7).Buffer)},function(e,t,r){"use strict";(function(t){var n=r(104);e.exports=n({window:t.window})}).call(this,r(6))},function(e,t,r){"use strict";var n=r(3);e.exports=function(e,t){var i=e&&e.window,o={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);var a=n.log,c=n.detectBrowser(i),l=r(105)||null,u=r(107)||null,d=r(110)||null,p=r(112)||null,h=r(113)||null,f={browserDetails:c,commonShim:h,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings};switch(c.browser){case"chrome":if(!l||!l.shimPeerConnection||!o.shimChrome)return a("Chrome shim is not included in this adapter release."),f;a("adapter.js shimming chrome."),f.browserShim=l,h.shimCreateObjectURL(i),l.shimGetUserMedia(i),l.shimMediaStream(i),l.shimSourceObject(i),l.shimPeerConnection(i),l.shimOnTrack(i),l.shimAddTrackRemoveTrack(i),l.shimGetSendersWithDtmf(i),h.shimRTCIceCandidate(i),h.shimMaxMessageSize(i),h.shimSendThrowTypeError(i);break;case"firefox":if(!d||!d.shimPeerConnection||!o.shimFirefox)return a("Firefox shim is not included in this adapter release."),f;a("adapter.js shimming firefox."),f.browserShim=d,h.shimCreateObjectURL(i),d.shimGetUserMedia(i),d.shimSourceObject(i),d.shimPeerConnection(i),d.shimOnTrack(i),d.shimRemoveStream(i),h.shimRTCIceCandidate(i),h.shimMaxMessageSize(i),h.shimSendThrowTypeError(i);break;case"edge":if(!u||!u.shimPeerConnection||!o.shimEdge)return a("MS edge shim is not included in this adapter release."),f;a("adapter.js shimming edge."),f.browserShim=u,h.shimCreateObjectURL(i),u.shimGetUserMedia(i),u.shimPeerConnection(i),u.shimReplaceTrack(i),h.shimMaxMessageSize(i),h.shimSendThrowTypeError(i);break;case"safari":if(!p||!o.shimSafari)return a("Safari shim is not included in this adapter release."),f;a("adapter.js shimming safari."),f.browserShim=p,h.shimCreateObjectURL(i),p.shimRTCIceServerUrls(i),p.shimCallbacksAPI(i),p.shimLocalStreamsAPI(i),p.shimRemoteStreamsAPI(i),p.shimTrackEventTransceiver(i),p.shimGetUserMedia(i),p.shimCreateOfferLegacy(i),h.shimRTCIceCandidate(i),h.shimMaxMessageSize(i),h.shimSendThrowTypeError(i);break;default:a("Unsupported browser!")}return f}},function(e,t,r){"use strict";var n=r(3),i=n.log;e.exports={shimGetUserMedia:r(106),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)"RTCRtpTransceiver"in e||n.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||(e.transceiver={receiver:e.receiver}),e}));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return r._ontrackpoly||(r._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(n){var i;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.track.id})):{track:n.track};var o=new Event("track");o.track=n.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o)})),t.stream.getTracks().forEach((function(n){var i;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find((function(e){return e.track&&e.track.id===n.id})):{track:n};var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],r.dispatchEvent(o)}))},r.addEventListener("addstream",r._ontrackpoly)),t.apply(r,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=this,o=r.apply(i,arguments);return o||(o=t(i,e),i._senders.push(o)),o};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;n.apply(t,arguments);var r=t._senders.indexOf(e);-1!==r&&t._senders.splice(r,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;r._senders=r._senders||[],i.apply(r,[e]),e.getTracks().forEach((function(e){r._senders.push(t(r,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],o.apply(t,[e]),e.getTracks().forEach((function(e){var r=t._senders.find((function(t){return t.track===e}));r&&t._senders.splice(t._senders.indexOf(r),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(e,[]);return t.forEach((function(t){t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSourceObject:function(e){var t=e&&e.URL;"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var r=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",(function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)})),e.addEventListener("removetrack",(function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)}))):this.src=""}}))},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var n=t.getSenders();r.apply(this,arguments);var i=t.getSenders().filter((function(e){return-1===n.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]})),i.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){var t=n.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return this.shimAddTrackRemoveTrackWithNative(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{},t.getTracks().forEach((function(e){if(r.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!r._reverseStreams[t.id]){var n=new e.MediaStream(t.getTracks());r._streams[t.id]=n,r._reverseStreams[n.id]=t,t=n}i.apply(r,[t])};var o=e.RTCPeerConnection.prototype.removeStream;function s(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}function a(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},o.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var o=n.getSenders().find((function(e){return e.track===t}));if(o)throw new DOMException("Track already exists.","InvalidAccessError");n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{};var s=n._streams[r.id];if(s)s.addTrack(t),Promise.resolve().then((function(){n.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);n._streams[r.id]=a,n._reverseStreams[a.id]=r,n.addStream(a)}return n.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments,n=arguments.length&&"function"==typeof arguments[0];return n?r.apply(e,[function(r){var n=s(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(e,arguments).then((function(t){return s(e,t)}))}}));var c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this;return arguments.length&&arguments[0].type?(arguments[0]=a(e,arguments[0]),c.apply(e,arguments)):c.apply(e,arguments)};var l=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=l.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===r.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===r))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");r._streams=r._streams||{},Object.keys(r._streams).forEach((function(n){r._streams[n].getTracks().find((function(t){return e.track===t}))&&(t=r._streams[n])})),t&&(1===t.getTracks().length?r.removeStream(r._reverseStreams[t.id]):t.removeTrack(e.track),r.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(e){var t=n.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection)e.RTCPeerConnection=function(t,r){return i("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,r)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}});else{var r=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,i.push(s)):i.push(e.iceServers[o])}e.iceServers=i}return new r(e,t)},e.RTCPeerConnection.prototype=r.prototype,Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,r){var n=this,i=arguments;if(arguments.length>0&&"function"==typeof e)return o.apply(this,arguments);if(0===o.length&&(0===arguments.length||"function"!=typeof arguments[0]))return o.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){r[t]=e.stat(t)})),t[r.id]=r})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i[1](a(s(e)))};return o.apply(this,[c,arguments[0]])}return new Promise((function(e,t){o.apply(n,[function(t){e(a(s(t)))},t])})).then(t,r)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,n=new Promise((function(n,i){r.apply(t,[e[0],n,i])}));return e.length<2?n:n.then((function(){e[1].apply(null,[])}),(function(t){e.length>=3&&e[2].apply(null,[t])}))}})),t.version<52&&["createOffer","createAnswer"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var t=1===arguments.length?arguments[0]:void 0;return new Promise((function(n,i){r.apply(e,[n,i,t])}))}return r.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}}));var s=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?s.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}},function(e,t,r){"use strict";var n=r(3),i=n.log;e.exports=function(e){var t=n.detectBrowser(e),r=e&&e.navigator,o=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var o={};"number"==typeof n.ideal?(o[i("min",r)]=n.ideal,t.optional.push(o),(o={})[i("max",r)]=n.ideal,t.optional.push(o)):(o[i("",r)]=n.ideal,t.optional.push(o))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach((function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,n){if(t.version>=61)return n(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var s=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),s(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"==typeof e.video){var a=e.video.facingMode;a=a&&("object"==typeof a?a:{ideal:a});var c,l=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||l))if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?c=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(c=["front"]),c)return r.mediaDevices.enumerateDevices().then((function(t){var r=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return c.some((function(t){return-1!==e.label.toLowerCase().indexOf(t)}))}));return!r&&t.length&&-1!==c.indexOf("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=a.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=o(e.video),i("chrome: "+JSON.stringify(e)),n(e)}));e.video=o(e.video)}return i("chrome: "+JSON.stringify(e)),n(e)},a=function(e){return{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};r.getUserMedia=function(e,t,n){s(e,(function(e){r.webkitGetUserMedia(e,t,(function(e){n&&n(a(e))}))}))};var c=function(e){return new Promise((function(t,n){r.getUserMedia(e,t,n)}))};if(r.mediaDevices||(r.mediaDevices={getUserMedia:c,enumerateDevices:function(){return new Promise((function(t){var r={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources((function(e){t(e.map((function(e){return{label:e.label,kind:r[e.kind],deviceId:e.id,groupId:""}})))}))}))},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),r.mediaDevices.getUserMedia){var l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return l(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}))}}else r.mediaDevices.getUserMedia=function(e){return c(e)};void 0===r.mediaDevices.addEventListener&&(r.mediaDevices.addEventListener=function(){i("Dummy mediaDevices.addEventListener called.")}),void 0===r.mediaDevices.removeEventListener&&(r.mediaDevices.removeEventListener=function(){i("Dummy mediaDevices.removeEventListener called.")})}},function(e,t,r){"use strict";var n=r(3),i=r(108);e.exports={shimGetUserMedia:r(109),shimPeerConnection:function(e){var t=n.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender),e.RTCPeerConnection=i(e,t.version)},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}}},function(e,t,r){"use strict";var n=r(43);function i(e,t,r,i,o){var s=n.writeRtpDescription(e.kind,t);if(s+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+"\r\n"),s}function o(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},i=function(e,t,r,i){var o=n(e.parameters.apt,r),s=n(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(n){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(n.name.toLowerCase()===s.name.toLowerCase()&&n.clockRate===s.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&s.parameters.apt&&!i(n,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(n.numChannels,s.numChannels),r.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}})),r}function s(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function a(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function c(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}e.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function l(t,r,n,i){var o=new Event("track");o.track=r,o.receiver=n,o.transceiver={receiver:n},o.streams=i,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var u=function(r){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=o[e].bind(o)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this.localDescription=null,this.remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof n;return i&&(n=[n]),n=n.filter((function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?(r=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=i?n[0]:n,!!n.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=n.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};u.prototype.onicecandidate=null,u.prototype.onaddstream=null,u.prototype.ontrack=null,u.prototype.onremovestream=null,u.prototype.onsignalingstatechange=null,u.prototype.oniceconnectionstatechange=null,u.prototype.onconnectionstatechange=null,u.prototype.onicegatheringstatechange=null,u.prototype.onnegotiationneeded=null,u.prototype.ondatachannel=null,u.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},u.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},u.prototype.getConfiguration=function(){return this._config},u.prototype.getLocalStreams=function(){return this.localStreams},u.prototype.getRemoteStreams=function(){return this.remoteStreams},u.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(n),n},u.prototype.addTrack=function(t,r){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},u.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var n=e.clone();e.getTracks().forEach((function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),n.getTracks().forEach((function(e){r.addTrack(e,n)}))}},u.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw c("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},u.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},u.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},u.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},u.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;i.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},u.prototype._gather=function(t,r){var i=this,o=this.transceivers[r].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var l=n.writeCandidate(a);s.candidate=Object.assign(s.candidate,n.parseCandidate(l)),s.candidate.candidate=l,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var u=n.getMediaSections(i.localDescription.sdp);u[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i.localDescription.sdp=n.getDescription(i.localDescription.sdp)+u.join("");var d=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",s),d&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){o.onlocalcandidate(e)}))}),0)}},u.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},u.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},u.prototype._transceive=function(e,r,i){var s=o(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:n.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),i&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},u.prototype.setLocalDescription=function(e){var t,r,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=n.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=n.parseRtpParameters(e);i.transceivers[t].localCapabilities=r})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=n.splitSections(i.remoteDescription.sdp),r=t.shift();var a=n.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var s=i.transceivers[t],c=s.iceGatherer,l=s.iceTransport,u=s.dtlsTransport,d=s.localCapabilities,p=s.remoteCapabilities;if(!(n.isRejected(e)&&0===n.matchPrefix(e,"a=bundle-only").length)&&!s.rejected){var h=n.getIceParameters(e,r),f=n.getDtlsParameters(e,r);a&&(f.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===l.state&&l.start(c,h,a?"controlling":"controlled"),"new"===u.state&&u.start(f));var g=o(d,p);i._transceive(s,g.codecs.length>0,!1)}}))}return i.localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},u.prototype.setRemoteDescription=function(i){var o=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!s("setRemoteDescription",i.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+o.signalingState));var u={};o.remoteStreams.forEach((function(e){u[e.id]=e}));var d=[],p=n.splitSections(i.sdp),h=p.shift(),f=n.matchPrefix(h,"a=ice-lite").length>0,g=n.matchPrefix(h,"a=group:BUNDLE ").length>0;o.usingBundle=g;var y=n.matchPrefix(h,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!y&&y.substr(14).split(" ").indexOf("trickle")>=0,p.forEach((function(s,c){var l=n.splitLines(s),p=n.getKind(s),y=n.isRejected(s)&&0===n.matchPrefix(s,"a=bundle-only").length,m=l[0].substr(2).split(" ")[2],v=n.getDirection(s,h),b=n.parseMsid(s),w=n.getMid(s)||n.generateIdentifier();if("application"===p&&"DTLS/SCTP"===m||y)o.transceivers[c]={mid:w,kind:p,rejected:!0};else{var S,k,E,_,C,M,x,O,R;!y&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(p,!0));var T,I,P=n.parseRtpParameters(s);y||(T=n.getIceParameters(s,h),(I=n.getDtlsParameters(s,h)).role="client"),x=n.parseRtpEncodingParameters(s);var A=n.parseRtcpParameters(s),B=n.matchPrefix(s,"a=end-of-candidates",h).length>0,L=n.matchPrefix(s,"a=candidate:").map((function(e){return n.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===i.type||"answer"===i.type)&&!y&&g&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==i.type||y)"answer"!==i.type||y||(k=(S=o.transceivers[c]).iceGatherer,E=S.iceTransport,_=S.dtlsTransport,C=S.rtpReceiver,M=S.sendEncodingParameters,O=S.localCapabilities,o.transceivers[c].recvEncodingParameters=x,o.transceivers[c].remoteCapabilities=P,o.transceivers[c].rtcpParameters=A,L.length&&"new"===E.state&&(!f&&!B||g&&0!==c?L.forEach((function(e){a(S.iceTransport,e)})):E.setRemoteCandidates(L)),g&&0!==c||("new"===E.state&&E.start(k,T,"controlling"),"new"===_.state&&_.start(I)),o._transceive(S,"sendrecv"===v||"recvonly"===v,"sendrecv"===v||"sendonly"===v),!C||"sendrecv"!==v&&"sendonly"!==v?delete S.rtpReceiver:(R=C.track,b?(u[b.stream]||(u[b.stream]=new e.MediaStream),r(R,u[b.stream]),d.push([R,C,u[b.stream]])):(u.default||(u.default=new e.MediaStream),r(R,u.default),d.push([R,C,u.default]))));else{(S=o.transceivers[c]||o._createTransceiver(p)).mid=w,S.iceGatherer||(S.iceGatherer=o._createIceGatherer(c,g)),L.length&&"new"===S.iceTransport.state&&(!B||g&&0!==c?L.forEach((function(e){a(S.iceTransport,e)})):S.iceTransport.setRemoteCandidates(L)),O=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(O.codecs=O.codecs.filter((function(e){return"rtx"!==e.name}))),M=S.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var U,D=!1;if("sendrecv"===v||"sendonly"===v){if(D=!S.rtpReceiver,C=S.rtpReceiver||new e.RTCRtpReceiver(S.dtlsTransport,p),D)R=C.track,b&&"-"===b.stream||(b?(u[b.stream]||(u[b.stream]=new e.MediaStream,Object.defineProperty(u[b.stream],"id",{get:function(){return b.stream}})),Object.defineProperty(R,"id",{get:function(){return b.track}}),U=u[b.stream]):(u.default||(u.default=new e.MediaStream),U=u.default)),U&&(r(R,U),S.associatedRemoteMediaStreams.push(U)),d.push([R,C,U])}else S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===S.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),S.associatedRemoteMediaStreams=[]);S.localCapabilities=O,S.remoteCapabilities=P,S.rtpReceiver=C,S.rtcpParameters=A,S.sendEncodingParameters=M,S.recvEncodingParameters=x,o._transceive(o.transceivers[c],!1,D)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===i.type?"active":"passive"),o.remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(u).forEach((function(t){var r=u[t];if(r.getTracks().length){if(-1===o.remoteStreams.indexOf(r)){o.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){o._dispatchEvent("addstream",n)}))}d.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&l(o,t,n,[r])}))}})),d.forEach((function(e){e[2]||l(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},u.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},u.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},u.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},u.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},u.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},u.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=r.transceivers.filter((function(e){return"audio"===e.kind})).length,s=r.transceivers.filter((function(e){return"video"===e.kind})).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)}));o>0||s>0;)o>0&&(r._createTransceiver("audio"),o--),s>0&&(r._createTransceiver("video"),s--);var l=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(i,o){var s=i.track,a=i.kind,c=i.mid||n.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(o,r.usingBundle));var l=e.RTCRtpSender.getCapabilities(a);t<15019&&(l.codecs=l.codecs.filter((function(e){return"rtx"!==e.name}))),l.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),l.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var u=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=l,i.sendEncodingParameters=u})),"max-compat"!==r._config.bundlePolicy&&(l+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n",r.transceivers.forEach((function(e,t){l+=i(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),l+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,l+="a="+n.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(l+="a=end-of-candidates\r\n"))}));var u=new e.RTCSessionDescription({type:"offer",sdp:l});return Promise.resolve(u)},u.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var s=n.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(s+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n");var a=n.getMediaSections(r.remoteDescription.sdp).length;r.transceivers.forEach((function(e,n){if(!(n+1>a)){if(e.rejected)return"application"===e.kind?s+="m=application 0 DTLS/SCTP 5000\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var l=o(e.localCapabilities,e.remoteCapabilities);!l.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=i(e,l,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}}));var l=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(l)},u.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,o){if(!r.remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var l=0;l<r.transceivers.length;l++)if(r.transceivers[l].mid===e.sdpMid){s=l;break}var u=r.transceivers[s];if(!u)return o(c("OperationError","Can not add ICE candidate"));if(u.rejected)return i();var d=Object.keys(e.candidate).length>0?n.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return i();if(d.component&&1!==d.component)return i();if((0===s||s>0&&u.iceTransport!==r.transceivers[0].iceTransport)&&!a(u.iceTransport,d))return o(c("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(t=n.getMediaSections(r.remoteDescription.sdp))[s]+="a="+(d.type?p:"end-of-candidates")+"\r\n",r.remoteDescription.sdp=n.getDescription(r.remoteDescription.sdp)+t.join("")}else for(var h=0;h<r.transceivers.length&&(r.transceivers[h].rejected||(r.transceivers[h].iceTransport.addRemoteCandidate({}),(t=n.getMediaSections(r.remoteDescription.sdp))[h]+="a=end-of-candidates\r\n",r.remoteDescription.sdp=n.getDescription(r.remoteDescription.sdp)+t.join(""),!r.usingBundle));h++);i()}))},u.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw c("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&n.push(e[t].getStats())}))})),Promise.all(n).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=u.prototype[e];u.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),u}},function(e,t,r){"use strict";e.exports=function(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))}))}}},function(e,t,r){"use strict";var n=r(3);e.exports={shimGetUserMedia:r(111),shimOnTrack:function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.transceiver={receiver:r.receiver},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))}}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(e){var t=n.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(r,n){if(t.version<38&&r&&r.iceServers){for(var i=[],o=0;o<r.iceServers.length;o++){var s=r.iceServers[o];if(s.hasOwnProperty("urls"))for(var a=0;a<s.urls.length;a++){var c={url:s.urls[a]};0===s.urls[a].indexOf("turn")&&(c.username=s.username,c.credential=s.credential),i.push(c)}else i.push(r.iceServers[o])}r.iceServers=i}return new e.mozRTCPeerConnection(r,n)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}}));var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,n){return o.apply(this,[e||null]).then((function(e){if(t.version<48&&(e=function(e){var t=new Map;return Object.keys(e).forEach((function(r){t.set(r,e[r]),t[r]=e[r]})),t}(e)),t.version<53&&!r)try{e.forEach((function(e){e.type=i[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:i[t.type]||t.type}))}))}return e})).then(r,n)}}},shimRemoveStream:function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;n.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(r){r.track&&-1!==e.getTracks().indexOf(r.track)&&t.removeTrack(r)}))})}}},function(e,t,r){"use strict";var n=r(3),i=n.log;e.exports=function(e){var t=n.detectBrowser(e),r=e&&e.navigator,o=e&&e.MediaStreamTrack,s=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},a=function(e,n,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach((function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n=e[r]="object"==typeof e[r]?e[r]:{ideal:e[r]};if(void 0===n.min&&void 0===n.max&&void 0===n.exact||t.push(r),void 0!==n.exact&&("number"==typeof n.exact?n.min=n.max=n.exact:e[r]=n.exact,delete n.exact),void 0!==n.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof n.ideal?i[r]={min:n.ideal,max:n.ideal}:i[r]=n.ideal,e.advanced.push(i),delete n.ideal,Object.keys(n).length||delete e[r]}}})),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(i("spec: "+JSON.stringify(e)),e.audio&&(e.audio=a(e.audio)),e.video&&(e.video=a(e.video)),i("ff37: "+JSON.stringify(e))),r.mozGetUserMedia(e,n,(function(e){o(s(e))}))};if(r.mediaDevices||(r.mediaDevices={getUserMedia:function(e){return new Promise((function(t,r){a(e,t,r)}))},addEventListener:function(){},removeEventListener:function(){}}),r.mediaDevices.enumerateDevices=r.mediaDevices.enumerateDevices||function(){return new Promise((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},t.version<41){var c=r.mediaDevices.enumerateDevices.bind(r.mediaDevices);r.mediaDevices.enumerateDevices=function(){return c().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}if(t.version<49){var l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return l(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("The object can not be found here.","NotFoundError");return t}),(function(e){return Promise.reject(s(e))}))}}if(!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var u=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},d=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),u(e.audio,"autoGainControl","mozAutoGainControl"),u(e.audio,"noiseSuppression","mozNoiseSuppression")),d(e)},o&&o.prototype.getSettings){var p=o.prototype.getSettings;o.prototype.getSettings=function(){var e=p.apply(this,arguments);return u(e,"mozAutoGainControl","autoGainControl"),u(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var h=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),u(e,"autoGainControl","mozAutoGainControl"),u(e,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[e])}}}r.getUserMedia=function(e,i,o){if(t.version<44)return a(e,i,o);n.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(i,o)}}},function(e,t,r){"use strict";var n=r(3);e.exports={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach((function(r){r.id===e&&(t=r)})),this._remoteStreams&&this._remoteStreams.forEach((function(r){r.id===e&&(t=r)})),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var r=this;e.getTracks().forEach((function(n){t.call(r,n,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e,r){return r&&(this._localStreams?-1===this._localStreams.indexOf(r)&&this._localStreams.push(r):this._localStreams=[r]),t.call(this,e,r)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var r=this,n=e.getTracks();this.getSenders().forEach((function(e){-1!==n.indexOf(e.track)&&r.removeTrack(e)}))}})}},shimRemoteStreamsAPI:function(e){"object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),"onaddstream"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!(t._remoteStreams.indexOf(e)>=0)){t._remoteStreams.push(e);var r=new Event("addstream");r.stream=e,t.dispatchEvent(r)}}))})}}))},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};var a=function(e,t,r){var n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=a,a=function(e,t,r){var n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=a,a=function(e,t,r){var n=s.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=a}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(n.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,i.push(s)):i.push(e.iceServers[o])}e.iceServers=i}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var r=this;if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=r.getTransceivers().find((function(e){return e.sender.track&&"audio"===e.sender.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||r.addTransceiver("audio"),void 0!==e.offerToReceiveAudio&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var i=r.getTransceivers().find((function(e){return e.sender.track&&"video"===e.sender.track.kind}));!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection("sendonly"):"recvonly"===i.direction&&i.setDirection("inactive"):!0!==e.offerToReceiveVideo||i||r.addTransceiver("video")}return t.apply(r,arguments)}}}},function(e,t,r){"use strict";var n=r(43),i=r(3);e.exports={shimRTCIceCandidate:function(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),i=n.parseCandidate(e.candidate),o=Object.assign(r,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,i.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var r=t.createObjectURL.bind(t),n=t.revokeObjectURL.bind(t),o=new Map,s=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++s;return o.set(t,e),i.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return r(e)},t.revokeObjectURL=function(e){n(e),o.delete(e)};var a=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return a.get.apply(this)},set:function(e){return this.srcObject=o.get(e)||null,a.set.apply(this,[e])}});var c=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=o.get(arguments[1])||null),c.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=i.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=function(e){var t=n.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=n.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},o=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r},s=function(e){var r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:57===t.version?65535:65536),r},a=function(e,r){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var o=n.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?i=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(i=2147483637),i},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;if(e._sctp=null,r(arguments[0])){var t,n=o(arguments[0]),i=s(n),l=a(arguments[0],n);t=0===i&&0===l?Number.POSITIVE_INFINITY:0===i||0===l?Math.max(i,l):Math.min(i,l);var u={};Object.defineProperty(u,"maxMessageSize",{get:function(){return t}}),e._sctp=u}return c.apply(e,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=this,r=t.apply(e,arguments),n=r.send;return r.send=function(){var t=this,r=arguments[0],i=r.length||r.size||r.byteLength;if(i>e.sctp.maxMessageSize)throw new DOMException("Message too large (can send a maximum of "+e.sctp.maxMessageSize+" bytes)","TypeError");return n.apply(t,arguments)},r}}}}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(4);e.exports=function(){function e(t){var r=t.localPeerId,n=t.remotePeerId,i=t.restGateway,o=t.testEpoch;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.localPeerId=r,this.remotePeerId=n,this.restGateway=i,this.testEpoch=o,this.incomingSequenceNumber=0,this.outgoingSequenceNumber=0,this.incomingSignals={}}var t,r,o;return t=e,(r=[{key:"send",value:function(e){var t,r,n,o,s;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t={senderId:this.localPeerId,sequenceNumber:this.outgoingSequenceNumber++,signal:e},null!=this.testEpoch&&(t.testEpoch=this.testEpoch),a.next=4,regeneratorRuntime.awrap(this.restGateway.post("/peers/".concat(this.remotePeerId,"/signals"),t));case 4:if(r=a.sent,n=r.ok,o=r.status,s=r.body,401!==o){a.next=12;break}throw new i.InvalidAuthenticationTokenError("The provided authentication token is invalid");case 12:if(n){a.next=14;break}throw new i.PubSubConnectionError("Error signalling peer: "+s.message);case 14:case"end":return a.stop()}}),null,this)}},{key:"receiveMessage",value:function(e){var t,r,n,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.testEpoch,r=e.sequenceNumber,n=e.signal,!this.testEpoch||this.testEpoch===t){o.next=3;break}return o.abrupt("return");case 3:if(this.incomingSignals[r]=n,this.receivingSignals){o.next=19;break}this.receivingSignals=!0;case 6:if(!(i=this.incomingSignals[this.incomingSequenceNumber])){o.next=15;break}return delete this.incomingSignals[this.incomingSequenceNumber],o.next=12,regeneratorRuntime.awrap(this.receive(i));case 12:this.incomingSequenceNumber++,o.next=16;break;case 15:return o.abrupt("break",18);case 16:o.next=6;break;case 18:this.receivingSignals=!1;case 19:case"end":return o.stop()}}),null,this)}}])&&n(t.prototype,r),o&&n(t,o),e}()},function(e,t,r){function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r(8);var o=r(2).CompositeDisposable,s=r(116),a=r(118).default,c=r(124).default,l=r(46),u=r(126),d=r(10),p=r(127),h=r(21);function f(e){return 1===e}e.exports=function(){function e(t){var r=t.id,n=t.hostPeerId,i=t.siteId,a=t.peerPool,c=t.connectionTimeout,l=t.tetherDisconnectWindow;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=r,this.hostPeerId=n,this.siteId=i,this.tetherDisconnectWindow=l,this.isHost=f(this.siteId),this.siteIdsByPeerId=new Map,this.peerIdsBySiteId=new Map,this.editorProxiesById=new Map,this.bufferProxiesById=new Map,this.activeEditorProxiesBySiteId=new Map,this.activeEditorProxySubscriptions=new o,this.tethersByFollowerId=new Map,this.disposables=new o,this.disposed=!1,this.delegate=new p,this.peerPool=a,this.network=new u({id:r,isHub:this.isHost,peerPool:a,connectionTimeout:c}),this.router=new s(this.network),this.isHost?(this.bindPeerIdToSiteId(this.network.getPeerId(),this.siteId),this.nextSiteId=2,this.nextBufferId=1,this.nextEditorId=1,this.disposables.add(this.router.onRequest("/portals/".concat(r),this.receiveSubscription.bind(this)))):this.editorProxiesMetadataById=new Map,this.disposables.add(this.router.onNotification("/portals/".concat(r),this.receiveUpdate.bind(this)),this.network.onMemberLeave(this.siteDidLeave.bind(this)))}var t,r,g;return t=e,(r=[{key:"getLocalSiteId",value:function(){return this.siteId}},{key:"dispose",value:function(){this.editorProxiesById.forEach((function(e){e.dispose()})),this.bufferProxiesById.forEach((function(e){e.dispose()})),this.disposables.dispose(),this.router.dispose(),this.network.dispose(),this.delegate.dispose(),this.disposed=!0}},{key:"setDelegate",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.delegate=e||new p,t.next=3,regeneratorRuntime.awrap(this.delegate.updateTether(this.resolveFollowState(),this.getLocalActiveEditorProxy(),this.resolveLeaderPosition()));case 3:case"end":return t.stop()}}),null,this)}},{key:"initialize",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this.disposables,e.next=4,regeneratorRuntime.awrap(this.peerPool.listen());case 4:e.t1=e.sent,e.t0.add.call(e.t0,e.t1),e.next=12;break;case 8:throw e.prev=8,e.t2=e.catch(0),this.dispose(),e.t2;case 12:case"end":return e.stop()}}),null,this,[[0,8]])}},{key:"join",value:function(){var e,t,r,n,i,o,s,a,c,l,u,p=this;return regeneratorRuntime.async((function(h){for(;;)switch(h.prev=h.next){case 0:return h.prev=0,this.networkConnectionPromise=this.network.connectTo(this.hostPeerId),h.next=4,regeneratorRuntime.awrap(this.networkConnectionPromise);case 4:h.next=10;break;case 6:throw h.prev=6,h.t0=h.catch(0),this.dispose(),h.t0;case 10:return h.next=12,regeneratorRuntime.awrap(this.router.request({recipientId:this.hostPeerId,channelId:"/portals/".concat(this.id)}));case 12:for(e=h.sent,(t=d.PortalSubscriptionResponse.deserializeBinary(e.body)).getSiteIdsByPeerIdMap().forEach((function(e,t){p.bindPeerIdToSiteId(t,e)})),this.siteId=this.siteIdsByPeerId.get(this.network.getPeerId()),t.getEditorProxiesMetadataList().forEach((function(e){p.deserializeEditorProxyMetadata(e)})),r=t.getTethersList(),n=0;n<r.length;n++)i=r[n],this.tethersByFollowerId.set(i.getFollowerSiteId(),{leaderId:i.getLeaderSiteId(),state:i.getState()});for(o=t.getActiveBufferProxiesList(),s=0;s<o.length;s++)a=o[s],this.deserializeBufferProxy(a);for(c=t.getActiveEditorProxiesList(),l=0;l<c.length;l++)u=c[l],this.deserializeEditorProxy(u);t.getActiveEditorProxyIdsBySiteIdMap().forEach((function(e,t){var r=p.editorProxiesById.get(e);p.activeEditorProxiesBySiteId.set(t,r)})),this.follow(1);case 25:case"end":return h.stop()}}),null,this,[[0,6]])}},{key:"createBufferProxy",value:function(e){var t=this,r=this.nextBufferId++,n=new a(Object.assign({id:r,hostPeerId:this.hostPeerId,siteId:this.siteId,router:this.router,didDispose:function(){return t.bufferProxiesById.delete(r)}},e));return this.bufferProxiesById.set(r,n),n}},{key:"findOrFetchBufferProxy",value:function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=e){r.next=2;break}return r.abrupt("return");case 2:if((t=this.bufferProxiesById.get(e))||this.isHost){r.next=7;break}return r.next=6,regeneratorRuntime.awrap(this.fetchBufferProxy(e));case 6:t=r.sent;case 7:return r.abrupt("return",t);case 8:case"end":return r.stop()}}),null,this)}},{key:"fetchBufferProxy",value:function(e){var t,r;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.router.request({recipientId:this.hostPeerId,channelId:"/buffers/".concat(e)}));case 2:if(!(t=n.sent).ok){n.next=6;break}return r=d.BufferProxy.deserializeBinary(t.body),n.abrupt("return",this.deserializeBufferProxy(r));case 6:case"end":return n.stop()}}),null,this)}},{key:"deserializeBufferProxy",value:function(e){var t=this,r=a.deserialize(e,{router:this.router,hostPeerId:this.hostPeerId,siteId:this.siteId,didDispose:function(){return t.bufferProxiesById.delete(r.id)}});return this.bufferProxiesById.set(r.id,r),r}},{key:"createEditorProxy",value:function(e){var t=this,r=this.nextEditorId++,n=new c(Object.assign({id:r,siteId:this.siteId,router:this.router,tetherDisconnectWindow:this.tetherDisconnectWindow,didDispose:function(){return t.editorProxiesById.delete(r)},portal:this},e));return this.editorProxiesById.set(r,n),this.broadcastEditorProxyCreation(n),n}},{key:"findOrFetchEditorProxy",value:function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if((t=this.editorProxiesById.get(e))||this.isHost){r.next=5;break}return r.next=4,regeneratorRuntime.awrap(this.fetchEditorProxy(e));case 4:t=r.sent;case 5:return r.abrupt("return",t);case 6:case"end":return r.stop()}}),null,this)}},{key:"fetchEditorProxy",value:function(e){var t,r,n;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(null!=e){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,regeneratorRuntime.awrap(this.router.request({recipientId:this.hostPeerId,channelId:"/editors/".concat(e)}));case 4:if((t=i.sent).ok){i.next=7;break}return i.abrupt("return");case 7:return r=d.EditorProxy.deserializeBinary(t.body),i.next=10,regeneratorRuntime.awrap(this.findOrFetchBufferProxy(r.getBufferProxyId()));case 10:if(!i.sent){i.next=15;break}return(n=this.deserializeEditorProxy(r)).hideSelections(),i.abrupt("return",n);case 15:case"end":return i.stop()}}),null,this)}},{key:"deserializeEditorProxy",value:function(e){var t=this,r=c.deserialize(e,{router:this.router,siteId:this.siteId,bufferProxiesById:this.bufferProxiesById,didDispose:function(){t.delegate.didChangeEditorProxies(),t.editorProxiesById.delete(r.id)},portal:this});this.editorProxiesById.set(r.id,r);var n=this.editorProxiesMetadataById.get(r.id);return n&&n.dispose(),r}},{key:"deserializeEditorProxyMetadata",value:function(e){var t=this,r=l.deserialize(e,{siteId:this.siteId,router:this.router,didDispose:function(){t.editorProxiesById.has(r.id)||t.delegate.didChangeEditorProxies(),t.editorProxiesMetadataById.delete(r.id)}});return this.editorProxiesMetadataById.set(r.id,r),r}},{key:"activateEditorProxy",value:function(e){var t=this.getLocalActiveEditorProxy();e!=t&&(this.unfollow(),t&&t.hideSelections(),e&&e.showSelections(),this.activeEditorProxiesBySiteId.set(this.siteId,e),console.log(e),this.subscribeToEditorProxyChanges(e),this.broadcastEditorProxySwitch(e),this.updateActivePositions())}},{key:"getLocalActiveEditorProxy",value:function(){return this.activeEditorProxyForSiteId(this.siteId)}},{key:"activeEditorProxyForSiteId",value:function(e){var t=this.resolveLeaderSiteId(e);return this.resolveFollowState(e)===h.RETRACTED?this.activeEditorProxiesBySiteId.get(t):this.activeEditorProxiesBySiteId.get(e)}},{key:"getEditorProxiesMetadata",value:function(){var e=[];return this.editorProxiesMetadataById.forEach((function(t){e.push(t)})),this.editorProxiesById.forEach((function(t){e.push(t.getMetadata())})),e}},{key:"getEditorProxyMetadata",value:function(e){var t=this.editorProxiesById.get(e);return t?t.getMetadata():this.editorProxiesMetadataById.get(e)}},{key:"getActiveSiteIds",value:function(){for(var e=this.network.getMemberIds(),t=[],r=0;r<e.length;r++){var n=e[r],i=this.siteIdsByPeerId.get(n);null!=i&&t.push(i)}return t}},{key:"getSiteIdentity",value:function(e){var t=this.peerIdsBySiteId.get(e);return this.network.getMemberIdentity(t)}},{key:"siteDidLeave",value:function(e){var t=e.peerId,r=e.connectionLost,n=this.siteIdsByPeerId.get(t);this.editorProxiesById.forEach((function(e){f(n)?e.hostDidDisconnect():e.siteDidDisconnect(n)})),f(n)?(r?this.delegate.hostDidLoseConnection():this.delegate.hostDidClosePortal(),this.dispose()):this.delegate.siteDidLeave(n);var i=this.tethersByFollowerId.get(this.siteId);i&&n===i.leaderId&&this.unfollow(),this.tethersByFollowerId.delete(n),this.activeEditorProxiesBySiteId.delete(n),this.updateActivePositions()}},{key:"receiveSubscription",value:function(e){var t=e.senderId,r=e.requestId;this.assignNewSiteId(t),this.sendSubscriptionResponse(r),this.delegate.siteDidJoin(this.siteIdsByPeerId.get(t)),this.updateActivePositions()}},{key:"assignNewSiteId",value:function(e){var t=this.nextSiteId++;this.bindPeerIdToSiteId(e,t);var r=new d.PortalUpdate.SiteAssignment;r.setPeerId(e),r.setSiteId(t);var n=new d.PortalUpdate;n.setSiteAssignment(r),this.router.notify({channelId:"/portals/".concat(this.id),body:n.serializeBinary()})}},{key:"sendSubscriptionResponse",value:function(e){var t=new d.PortalSubscriptionResponse;this.siteIdsByPeerId.forEach((function(e,r){t.getSiteIdsByPeerIdMap().set(r,e)}));var r=[];this.editorProxiesById.forEach((function(e){r.push(e.getMetadata().serialize())})),t.setEditorProxiesMetadataList(r);var n=new Map,i=new Map;this.activeEditorProxiesBySiteId.forEach((function(e,r){if(e){var o=e.bufferProxy;n.has(o.id)||n.set(o.id,o.serialize()),i.has(e.id)||i.set(e.id,e.serialize()),t.getActiveEditorProxyIdsBySiteIdMap().set(r,e.id)}})),t.setActiveBufferProxiesList(Array.from(n.values())),t.setActiveEditorProxiesList(Array.from(i.values()));var o=[];this.tethersByFollowerId.forEach((function(e,t){var r=new d.Tether;r.setFollowerSiteId(t),r.setLeaderSiteId(e.leaderId),r.setState(e.state),o.push(r)})),t.setTethersList(o),this.router.respond({requestId:e,body:t.serializeBinary()})}},{key:"receiveUpdate",value:function(e){var t,r,n,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.senderId,r=e.body,!(n=d.PortalUpdate.deserializeBinary(r)).hasEditorProxyCreation()){o.next=6;break}this.receiveEditorProxyCreation(n.getEditorProxyCreation()),o.next=21;break;case 6:if(!n.hasEditorProxySwitch()){o.next=12;break}return i=this.siteIdsByPeerId.get(t),o.next=10,regeneratorRuntime.awrap(this.receiveEditorProxySwitch(i,n.getEditorProxySwitch()));case 10:o.next=21;break;case 12:if(!n.hasSiteAssignment()){o.next=16;break}this.receiveSiteAssignment(n.getSiteAssignment()),o.next=21;break;case 16:if(!n.hasTetherUpdate()){o.next=20;break}this.receiveTetherUpdate(n.getTetherUpdate()),o.next=21;break;case 20:throw new Error("Received unknown update message");case 21:case"end":return o.stop()}}),null,this)}},{key:"receiveEditorProxyCreation",value:function(e){this.deserializeEditorProxyMetadata(e.getEditorProxyMetadata()),this.delegate.didChangeEditorProxies()}},{key:"receiveEditorProxySwitch",value:function(e,t){var r,n;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=t.getEditorProxyId(),i.next=3,regeneratorRuntime.awrap(this.findOrFetchEditorProxy(r));case 3:n=i.sent,this.activeEditorProxiesBySiteId.set(e,n),e===this.resolveLeaderSiteId()&&this.leaderDidUpdate(),this.updateActivePositions();case 7:case"end":return i.stop()}}),null,this)}},{key:"receiveSiteAssignment",value:function(e){var t=e.getSiteId(),r=e.getPeerId();this.bindPeerIdToSiteId(r,t),this.network.getPeerId()!==r&&this.delegate.siteDidJoin(t)}},{key:"receiveTetherUpdate",value:function(e){var t=this.resolveLeaderSiteId(),r=this.resolveFollowState(),n=e.getFollowerSiteId(),i=e.getLeaderSiteId(),o=e.getState();this.tethersByFollowerId.set(n,{leaderId:i,state:o});var s=this.resolveLeaderSiteId(),a=this.resolveFollowState();this.didChangeTetherState({oldResolvedState:r,oldResolvedLeaderId:t,newResolvedState:a,newResolvedLeaderId:s})}},{key:"bindPeerIdToSiteId",value:function(e,t){this.siteIdsByPeerId.set(e,t),this.peerIdsBySiteId.set(t,e)}},{key:"subscribeToEditorProxyChanges",value:function(e){this.activeEditorProxySubscriptions.dispose(),this.activeEditorProxySubscriptions=new o,e&&(this.activeEditorProxySubscriptions.add(e.onDidScroll(this.activeEditorDidScroll.bind(this))),this.activeEditorProxySubscriptions.add(e.onDidUpdateLocalSelections(this.activeEditorDidUpdateLocalSelections.bind(this))),this.activeEditorProxySubscriptions.add(e.onDidUpdateRemoteSelections(this.activeEditorDidUpdateRemoteSelections.bind(this))),this.activeEditorProxySubscriptions.add(e.bufferProxy.onDidUpdateText(this.activeEditorDidUpdateText.bind(this))))}},{key:"activeEditorDidUpdateLocalSelections",value:function(e){var t,r,n=e.initialUpdate;if(this.lastLocalUpdateAt=Date.now(),!n&&this.resolveFollowState()===h.RETRACTED){var i=this.getLocalActiveEditorProxy().cursorPositionForSiteId(this.siteId),o=this.resolveLeaderPosition();i&&o&&(r=o,(t=i).row!==r.row||t.column!==r.column)&&this.extendTether()}this.updateActivePositions()}},{key:"activeEditorDidUpdateRemoteSelections",value:function(e){var t=e.selectionLayerIdsBySiteId,r=e.initialUpdate,n=t.has(this.resolveLeaderSiteId());!r&&n&&this.leaderDidUpdate(),this.updateActivePositions()}},{key:"activeEditorDidUpdateText",value:function(e){var t=e.remote;this.resolveFollowState()===h.RETRACTED&&(t?this.delegate.updateTether(h.RETRACTED,this.getLocalActiveEditorProxy(),this.resolveLeaderPosition()):(this.lastLocalUpdateAt=Date.now(),this.extendTether())),this.updateActivePositions()}},{key:"activeEditorDidScroll",value:function(){var e=this.resolveLeaderPosition();e&&this.getLocalActiveEditorProxy().isScrollNeededToViewPosition(e)&&this.unfollow()}},{key:"follow",value:function(e){this.setFollowState(h.RETRACTED,e)}},{key:"unfollow",value:function(){this.setFollowState(h.DISCONNECTED)}},{key:"extendTether",value:function(){this.setFollowState(h.EXTENDED)}},{key:"retractTether",value:function(){this.setFollowState(h.RETRACTED)}},{key:"getFollowedSiteId",value:function(){return this.resolveFollowState()===h.DISCONNECTED?null:this.tethersByFollowerId.get(this.siteId).leaderId}},{key:"leaderDidUpdate",value:function(){switch(this.resolveFollowState()){case h.RETRACTED:var e=this.getLocalActiveEditorProxy();this.subscribeToEditorProxyChanges(e),this.delegate.updateTether(h.RETRACTED,e,this.resolveLeaderPosition());break;case h.EXTENDED:this.retractOrDisconnectTether()}}},{key:"retractOrDisconnectTether",value:function(){var e=this.resolveLeaderPosition(),t=this.resolveLeaderSiteId(),r=this.getLocalActiveEditorProxy(),n=r!==this.activeEditorProxyForSiteId(t)||e&&r.isScrollNeededToViewPosition(e),i=Date.now()-this.lastLocalUpdateAt<=this.tetherDisconnectWindow;n&&(i?this.unfollow():this.retractTether())}},{key:"setFollowState",value:function(e,t){var r=this.tethersByFollowerId.get(this.siteId),n=r?r.state:null,i=this.resolveFollowState(),o=this.resolveLeaderSiteId(),s=r?r.leaderId:null;if(null!=(t=null==t?s:t)){this.tethersByFollowerId.set(this.siteId,{leaderId:t,state:e});var a=this.resolveFollowState(),c=this.resolveLeaderSiteId();if(this.didChangeTetherState({oldResolvedState:i,oldResolvedLeaderId:o,newResolvedState:a,newResolvedLeaderId:c}),n!==e||s!==t){var l=new d.Tether;l.setFollowerSiteId(this.siteId),l.setLeaderSiteId(t),l.setState(e);var u=new d.PortalUpdate;u.setTetherUpdate(l),this.router.notify({channelId:"/portals/".concat(this.id),body:u.serializeBinary()})}}}},{key:"didChangeTetherState",value:function(e){var t=e.oldResolvedState,r=e.oldResolvedLeaderId,n=e.newResolvedState,i=e.newResolvedLeaderId,o=this.activeEditorProxiesBySiteId.get(r),s=this.activeEditorProxiesBySiteId.get(i);n===h.RETRACTED?(this.editorProxiesById.forEach((function(e){e.hideSelections()})),this.subscribeToEditorProxyChanges(s)):t===h.RETRACTED&&(console.log(o),this.activeEditorProxiesBySiteId.set(this.siteId,o),this.broadcastEditorProxySwitch(o),o&&o.showSelections()),this.delegate.updateTether(n,this.getLocalActiveEditorProxy(),this.resolveLeaderPosition()),this.updateActivePositions()}},{key:"updateActivePositions",value:function(){for(var e={},t=this.getActiveSiteIds(),r=0;r<t.length;r++){var n=t[r],i=this.activeEditorProxyForSiteId(n);if(i){var o=void 0,s=this.resolveFollowState(n);if(s===h.RETRACTED){var a=this.resolveLeaderSiteId(n);o=i.cursorPositionForSiteId(a)}else o=i.cursorPositionForSiteId(n);e[n]={editorProxy:i,position:o,followState:s}}else e[n]={editorProxy:null,position:null,followState:null}}this.delegate.updateActivePositions(e)}},{key:"broadcastEditorProxyCreation",value:function(e){var t=new d.PortalUpdate.EditorProxyCreation;t.setEditorProxyMetadata(e.getMetadata().serialize());var r=new d.PortalUpdate;r.setEditorProxyCreation(t),this.router.notify({channelId:"/portals/".concat(this.id),body:r.serializeBinary()})}},{key:"broadcastEditorProxySwitch",value:function(e){var t=new d.PortalUpdate.EditorProxySwitch;e&&t.setEditorProxyId(e.id);var r=new d.PortalUpdate;r.setEditorProxySwitch(t),this.router.notify({channelId:"/portals/".concat(this.id),body:r.serializeBinary()})}},{key:"resolveLeaderPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.siteId,t=this.resolveLeaderSiteId(e),r=this.getLocalActiveEditorProxy();return r?r.cursorPositionForSiteId(t):null}},{key:"resolveFollowState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.siteId,t=this.resolveLeaderSiteId(e);return e===t?h.DISCONNECTED:this.tethersByFollowerId.get(e).state}},{key:"resolveLeaderSiteId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.siteId,t=this.tethersByFollowerId.get(e);if(!t)return e;for(var r=new Set([e]),i=t.leaderId,o=this.tethersByFollowerId.get(i);o&&o.state===h.RETRACTED;){if(r.has(i)){i=Math.min.apply(Math,n(Array.from(r)));break}r.add(i),i=o.leaderId,o=this.tethersByFollowerId.get(i)}return i}}])&&i(t.prototype,r),g&&i(t,g),e}()},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(2),o=i.CompositeDisposable,s=i.Emitter,a=r(10).RouterMessage,c=r(18);e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.network=t,this.emitter=new s,this.subscriptions=new o,this.subscriptions.add(t.onReceive(this.receive.bind(this))),this.nextRequestId=0,this.requestPromiseResolveCallbacks=new Map,this.peerIdsByRequestId=new Map,this.lastReceivePromise=Promise.resolve()}var t,r,i;return t=e,(r=[{key:"dispose",value:function(){this.subscriptions.dispose()}},{key:"notify",value:function(e){var t=e.recipientId,r=e.channelId,n=e.body;n=c(n);var i=new a.Notification;i.setChannelId(r),null!=n&&i.setBody(n);var o=new a;o.setNotification(i),t?this.network.unicast(t,o.serializeBinary()):this.network.broadcast(o.serializeBinary())}},{key:"request",value:function(e){var t=this,r=e.recipientId,n=e.channelId,i=e.body;i&&(i=c(i));var o=this.nextRequestId++,s=new a.Request;s.setChannelId(n),s.setRequestId(o),i&&s.setBody(i);var l=new a;return l.setRequest(s),this.network.unicast(r,l.serializeBinary()),new Promise((function(e){t.requestPromiseResolveCallbacks.set(o,e)}))}},{key:"respond",value:function(e){var t=e.requestId,r=e.ok,n=e.body,i=this.peerIdsByRequestId.get(t);if(!i)throw new Error("Multiple responses to the same request are not allowed");null==r&&(r=!0),n&&(n=c(n));var o=new a.Response;o.setRequestId(t),o.setOk(r),o.setBody(n);var s=new a;s.setResponse(o),this.peerIdsByRequestId.delete(t),this.network.unicast(i,s.serializeBinary())}},{key:"onNotification",value:function(e,t){return this.emitter.on("notification:"+e,t)}},{key:"onRequest",value:function(e,t){return this.emitter.on("request:"+e,t)}},{key:"receive",value:function(e){var t=e.senderId,r=e.message,n=a.deserializeBinary(r);if(n.hasNotification())this.receiveNotification(t,n.getNotification());else if(n.hasRequest())this.receiveRequest(t,n.getRequest());else{if(!n.hasResponse())throw new Error("Unsupported router message variant");this.receiveResponse(n.getResponse())}}},{key:"receiveNotification",value:function(e,t){var r=this;this.lastReceivePromise=this.lastReceivePromise.then((function(){var n,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=t.getChannelId(),i=c(t.getBody()),o.next=4,regeneratorRuntime.awrap(r.emitter.emitAsync("notification:"+n,{senderId:e,body:i}));case 4:case"end":return o.stop()}}))}))}},{key:"receiveRequest",value:function(e,t){var r=this;this.lastReceivePromise=this.lastReceivePromise.then((function(){var n,i,o,s;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.getChannelId(),i=t.getRequestId(),o="request:"+n,s=c(t.getBody()),r.peerIdsByRequestId.set(i,e),0!==r.emitter.listenerCountForEventName(o)){a.next=9;break}r.respond({requestId:i,ok:!1}),a.next=11;break;case 9:return a.next=11,regeneratorRuntime.awrap(r.emitter.emitAsync(o,{senderId:e,requestId:i,body:s}));case 11:case"end":return a.stop()}}))}))}},{key:"receiveResponse",value:function(e){var t=e.getRequestId();this.requestPromiseResolveCallbacks.get(t)({body:c(e.getBody()),ok:e.getOk()})}}])&&n(t.prototype,r),i&&n(t,i),e}()},function(e,t,r){var n=r(19),i=n,o=Function("return this")();i.exportSymbol("proto.Operation",null,o),i.exportSymbol("proto.Operation.MarkersUpdate",null,o),i.exportSymbol("proto.Operation.MarkersUpdate.LayerOperation",null,o),i.exportSymbol("proto.Operation.MarkersUpdate.LogicalRange",null,o),i.exportSymbol("proto.Operation.MarkersUpdate.MarkerOperation",null,o),i.exportSymbol("proto.Operation.MarkersUpdate.MarkerUpdate",null,o),i.exportSymbol("proto.Operation.Point",null,o),i.exportSymbol("proto.Operation.Splice",null,o),i.exportSymbol("proto.Operation.Splice.Deletion",null,o),i.exportSymbol("proto.Operation.Splice.Insertion",null,o),i.exportSymbol("proto.Operation.SpliceId",null,o),i.exportSymbol("proto.Operation.Undo",null,o),proto.Operation=function(e){n.Message.initialize(this,e,0,-1,null,proto.Operation.oneofGroups_)},i.inherits(proto.Operation,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.displayName="proto.Operation"),proto.Operation.oneofGroups_=[[1,2,3]],proto.Operation.VariantCase={VARIANT_NOT_SET:0,SPLICE:1,UNDO:2,MARKERS_UPDATE:3},proto.Operation.prototype.getVariantCase=function(){return n.Message.computeOneofCase(this,proto.Operation.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.Operation.prototype.toObject=function(e){return proto.Operation.toObject(e,this)},proto.Operation.toObject=function(e,t){var r,n={splice:(r=t.getSplice())&&proto.Operation.Splice.toObject(e,r),undo:(r=t.getUndo())&&proto.Operation.Undo.toObject(e,r),markersUpdate:(r=t.getMarkersUpdate())&&proto.Operation.MarkersUpdate.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation;return proto.Operation.deserializeBinaryFromReader(r,t)},proto.Operation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.Splice;t.readMessage(r,proto.Operation.Splice.deserializeBinaryFromReader),e.setSplice(r);break;case 2:r=new proto.Operation.Undo;t.readMessage(r,proto.Operation.Undo.deserializeBinaryFromReader),e.setUndo(r);break;case 3:r=new proto.Operation.MarkersUpdate;t.readMessage(r,proto.Operation.MarkersUpdate.deserializeBinaryFromReader),e.setMarkersUpdate(r);break;default:t.skipField()}}return e},proto.Operation.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSplice())&&t.writeMessage(1,r,proto.Operation.Splice.serializeBinaryToWriter),null!=(r=e.getUndo())&&t.writeMessage(2,r,proto.Operation.Undo.serializeBinaryToWriter),null!=(r=e.getMarkersUpdate())&&t.writeMessage(3,r,proto.Operation.MarkersUpdate.serializeBinaryToWriter)},proto.Operation.Splice=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Splice,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Splice.displayName="proto.Operation.Splice"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.prototype.toObject=function(e){return proto.Operation.Splice.toObject(e,this)},proto.Operation.Splice.toObject=function(e,t){var r,n={spliceId:(r=t.getSpliceId())&&proto.Operation.SpliceId.toObject(e,r),insertion:(r=t.getInsertion())&&proto.Operation.Splice.Insertion.toObject(e,r),deletion:(r=t.getDeletion())&&proto.Operation.Splice.Deletion.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.Splice.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Splice;return proto.Operation.Splice.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setSpliceId(r);break;case 2:r=new proto.Operation.Splice.Insertion;t.readMessage(r,proto.Operation.Splice.Insertion.deserializeBinaryFromReader),e.setInsertion(r);break;case 3:r=new proto.Operation.Splice.Deletion;t.readMessage(r,proto.Operation.Splice.Deletion.deserializeBinaryFromReader),e.setDeletion(r);break;default:t.skipField()}}return e},proto.Operation.Splice.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Splice.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSpliceId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getInsertion())&&t.writeMessage(2,r,proto.Operation.Splice.Insertion.serializeBinaryToWriter),null!=(r=e.getDeletion())&&t.writeMessage(3,r,proto.Operation.Splice.Deletion.serializeBinaryToWriter)},proto.Operation.Splice.Insertion=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Splice.Insertion,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Splice.Insertion.displayName="proto.Operation.Splice.Insertion"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.Insertion.prototype.toObject=function(e){return proto.Operation.Splice.Insertion.toObject(e,this)},proto.Operation.Splice.Insertion.toObject=function(e,t){var r,i={text:n.Message.getFieldWithDefault(t,2,""),leftDependencyId:(r=t.getLeftDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInLeftDependency:(r=t.getOffsetInLeftDependency())&&proto.Operation.Point.toObject(e,r),rightDependencyId:(r=t.getRightDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInRightDependency:(r=t.getOffsetInRightDependency())&&proto.Operation.Point.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.Splice.Insertion.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Splice.Insertion;return proto.Operation.Splice.Insertion.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.Insertion.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=t.readString();e.setText(r);break;case 3:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setLeftDependencyId(r);break;case 4:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInLeftDependency(r);break;case 5:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setRightDependencyId(r);break;case 6:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInRightDependency(r);break;default:t.skipField()}}return e},proto.Operation.Splice.Insertion.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Splice.Insertion.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.Insertion.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getText()).length>0&&t.writeString(2,r),null!=(r=e.getLeftDependencyId())&&t.writeMessage(3,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInLeftDependency())&&t.writeMessage(4,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getRightDependencyId())&&t.writeMessage(5,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInRightDependency())&&t.writeMessage(6,r,proto.Operation.Point.serializeBinaryToWriter)},proto.Operation.Splice.Insertion.prototype.getText=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.Operation.Splice.Insertion.prototype.setText=function(e){n.Message.setProto3StringField(this,2,e)},proto.Operation.Splice.Insertion.prototype.getLeftDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,3)},proto.Operation.Splice.Insertion.prototype.setLeftDependencyId=function(e){n.Message.setWrapperField(this,3,e)},proto.Operation.Splice.Insertion.prototype.clearLeftDependencyId=function(){this.setLeftDependencyId(void 0)},proto.Operation.Splice.Insertion.prototype.hasLeftDependencyId=function(){return null!=n.Message.getField(this,3)},proto.Operation.Splice.Insertion.prototype.getOffsetInLeftDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,4)},proto.Operation.Splice.Insertion.prototype.setOffsetInLeftDependency=function(e){n.Message.setWrapperField(this,4,e)},proto.Operation.Splice.Insertion.prototype.clearOffsetInLeftDependency=function(){this.setOffsetInLeftDependency(void 0)},proto.Operation.Splice.Insertion.prototype.hasOffsetInLeftDependency=function(){return null!=n.Message.getField(this,4)},proto.Operation.Splice.Insertion.prototype.getRightDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,5)},proto.Operation.Splice.Insertion.prototype.setRightDependencyId=function(e){n.Message.setWrapperField(this,5,e)},proto.Operation.Splice.Insertion.prototype.clearRightDependencyId=function(){this.setRightDependencyId(void 0)},proto.Operation.Splice.Insertion.prototype.hasRightDependencyId=function(){return null!=n.Message.getField(this,5)},proto.Operation.Splice.Insertion.prototype.getOffsetInRightDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,6)},proto.Operation.Splice.Insertion.prototype.setOffsetInRightDependency=function(e){n.Message.setWrapperField(this,6,e)},proto.Operation.Splice.Insertion.prototype.clearOffsetInRightDependency=function(){this.setOffsetInRightDependency(void 0)},proto.Operation.Splice.Insertion.prototype.hasOffsetInRightDependency=function(){return null!=n.Message.getField(this,6)},proto.Operation.Splice.Deletion=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Splice.Deletion,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Splice.Deletion.displayName="proto.Operation.Splice.Deletion"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.Deletion.prototype.toObject=function(e){return proto.Operation.Splice.Deletion.toObject(e,this)},proto.Operation.Splice.Deletion.toObject=function(e,t){var r,n={leftDependencyId:(r=t.getLeftDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInLeftDependency:(r=t.getOffsetInLeftDependency())&&proto.Operation.Point.toObject(e,r),rightDependencyId:(r=t.getRightDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInRightDependency:(r=t.getOffsetInRightDependency())&&proto.Operation.Point.toObject(e,r),maxSeqsBySiteMap:(r=t.getMaxSeqsBySiteMap())?r.toObject(e,void 0):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.Splice.Deletion.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Splice.Deletion;return proto.Operation.Splice.Deletion.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.Deletion.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setLeftDependencyId(r);break;case 3:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInLeftDependency(r);break;case 4:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setRightDependencyId(r);break;case 5:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInRightDependency(r);break;case 6:r=e.getMaxSeqsBySiteMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readUint32,n.BinaryReader.prototype.readUint32)}));break;default:t.skipField()}}return e},proto.Operation.Splice.Deletion.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Splice.Deletion.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.Deletion.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getLeftDependencyId())&&t.writeMessage(2,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInLeftDependency())&&t.writeMessage(3,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getRightDependencyId())&&t.writeMessage(4,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInRightDependency())&&t.writeMessage(5,r,proto.Operation.Point.serializeBinaryToWriter),(r=e.getMaxSeqsBySiteMap(!0))&&r.getLength()>0&&r.serializeBinary(6,t,n.BinaryWriter.prototype.writeUint32,n.BinaryWriter.prototype.writeUint32)},proto.Operation.Splice.Deletion.prototype.getLeftDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,2)},proto.Operation.Splice.Deletion.prototype.setLeftDependencyId=function(e){n.Message.setWrapperField(this,2,e)},proto.Operation.Splice.Deletion.prototype.clearLeftDependencyId=function(){this.setLeftDependencyId(void 0)},proto.Operation.Splice.Deletion.prototype.hasLeftDependencyId=function(){return null!=n.Message.getField(this,2)},proto.Operation.Splice.Deletion.prototype.getOffsetInLeftDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,3)},proto.Operation.Splice.Deletion.prototype.setOffsetInLeftDependency=function(e){n.Message.setWrapperField(this,3,e)},proto.Operation.Splice.Deletion.prototype.clearOffsetInLeftDependency=function(){this.setOffsetInLeftDependency(void 0)},proto.Operation.Splice.Deletion.prototype.hasOffsetInLeftDependency=function(){return null!=n.Message.getField(this,3)},proto.Operation.Splice.Deletion.prototype.getRightDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,4)},proto.Operation.Splice.Deletion.prototype.setRightDependencyId=function(e){n.Message.setWrapperField(this,4,e)},proto.Operation.Splice.Deletion.prototype.clearRightDependencyId=function(){this.setRightDependencyId(void 0)},proto.Operation.Splice.Deletion.prototype.hasRightDependencyId=function(){return null!=n.Message.getField(this,4)},proto.Operation.Splice.Deletion.prototype.getOffsetInRightDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,5)},proto.Operation.Splice.Deletion.prototype.setOffsetInRightDependency=function(e){n.Message.setWrapperField(this,5,e)},proto.Operation.Splice.Deletion.prototype.clearOffsetInRightDependency=function(){this.setOffsetInRightDependency(void 0)},proto.Operation.Splice.Deletion.prototype.hasOffsetInRightDependency=function(){return null!=n.Message.getField(this,5)},proto.Operation.Splice.Deletion.prototype.getMaxSeqsBySiteMap=function(e){return n.Message.getMapField(this,6,e,null)},proto.Operation.Splice.Deletion.prototype.clearMaxSeqsBySiteMap=function(){this.getMaxSeqsBySiteMap().clear()},proto.Operation.Splice.prototype.getSpliceId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.Splice.prototype.setSpliceId=function(e){n.Message.setWrapperField(this,1,e)},proto.Operation.Splice.prototype.clearSpliceId=function(){this.setSpliceId(void 0)},proto.Operation.Splice.prototype.hasSpliceId=function(){return null!=n.Message.getField(this,1)},proto.Operation.Splice.prototype.getInsertion=function(){return n.Message.getWrapperField(this,proto.Operation.Splice.Insertion,2)},proto.Operation.Splice.prototype.setInsertion=function(e){n.Message.setWrapperField(this,2,e)},proto.Operation.Splice.prototype.clearInsertion=function(){this.setInsertion(void 0)},proto.Operation.Splice.prototype.hasInsertion=function(){return null!=n.Message.getField(this,2)},proto.Operation.Splice.prototype.getDeletion=function(){return n.Message.getWrapperField(this,proto.Operation.Splice.Deletion,3)},proto.Operation.Splice.prototype.setDeletion=function(e){n.Message.setWrapperField(this,3,e)},proto.Operation.Splice.prototype.clearDeletion=function(){this.setDeletion(void 0)},proto.Operation.Splice.prototype.hasDeletion=function(){return null!=n.Message.getField(this,3)},proto.Operation.Undo=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Undo,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Undo.displayName="proto.Operation.Undo"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Undo.prototype.toObject=function(e){return proto.Operation.Undo.toObject(e,this)},proto.Operation.Undo.toObject=function(e,t){var r,i={spliceId:(r=t.getSpliceId())&&proto.Operation.SpliceId.toObject(e,r),undoCount:n.Message.getFieldWithDefault(t,2,0)};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.Undo.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Undo;return proto.Operation.Undo.deserializeBinaryFromReader(r,t)},proto.Operation.Undo.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setSpliceId(r);break;case 2:r=t.readUint32();e.setUndoCount(r);break;default:t.skipField()}}return e},proto.Operation.Undo.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Undo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Undo.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSpliceId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),0!==(r=e.getUndoCount())&&t.writeUint32(2,r)},proto.Operation.Undo.prototype.getSpliceId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.Undo.prototype.setSpliceId=function(e){n.Message.setWrapperField(this,1,e)},proto.Operation.Undo.prototype.clearSpliceId=function(){this.setSpliceId(void 0)},proto.Operation.Undo.prototype.hasSpliceId=function(){return null!=n.Message.getField(this,1)},proto.Operation.Undo.prototype.getUndoCount=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.Operation.Undo.prototype.setUndoCount=function(e){n.Message.setProto3IntField(this,2,e)},proto.Operation.MarkersUpdate=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.displayName="proto.Operation.MarkersUpdate"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.toObject(e,this)},proto.Operation.MarkersUpdate.toObject=function(e,t){var r,i={siteId:n.Message.getFieldWithDefault(t,1,0),layerOperationsMap:(r=t.getLayerOperationsMap())?r.toObject(e,proto.Operation.MarkersUpdate.LayerOperation.toObject):[]};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.MarkersUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate;return proto.Operation.MarkersUpdate.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setSiteId(r);break;case 2:r=e.getLayerOperationsMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readUint32,n.BinaryReader.prototype.readMessage,proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getSiteId())&&t.writeUint32(1,r),(r=e.getLayerOperationsMap(!0))&&r.getLength()>0&&r.serializeBinary(2,t,n.BinaryWriter.prototype.writeUint32,n.BinaryWriter.prototype.writeMessage,proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LayerOperation=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate.LayerOperation,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.LayerOperation.displayName="proto.Operation.MarkersUpdate.LayerOperation"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.LayerOperation.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.LayerOperation.toObject(e,this)},proto.Operation.MarkersUpdate.LayerOperation.toObject=function(e,t){var r,i={isDeletion:n.Message.getFieldWithDefault(t,1,!1),markerOperationsMap:(r=t.getMarkerOperationsMap())?r.toObject(e,proto.Operation.MarkersUpdate.MarkerOperation.toObject):[]};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.MarkersUpdate.LayerOperation.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate.LayerOperation;return proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setIsDeletion(r);break;case 2:r=e.getMarkerOperationsMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readUint32,n.BinaryReader.prototype.readMessage,proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.LayerOperation.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIsDeletion())&&t.writeBool(1,r),(r=e.getMarkerOperationsMap(!0))&&r.getLength()>0&&r.serializeBinary(2,t,n.BinaryWriter.prototype.writeUint32,n.BinaryWriter.prototype.writeMessage,proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LayerOperation.prototype.getIsDeletion=function(){return n.Message.getFieldWithDefault(this,1,!1)},proto.Operation.MarkersUpdate.LayerOperation.prototype.setIsDeletion=function(e){n.Message.setProto3BooleanField(this,1,e)},proto.Operation.MarkersUpdate.LayerOperation.prototype.getMarkerOperationsMap=function(e){return n.Message.getMapField(this,2,e,proto.Operation.MarkersUpdate.MarkerOperation)},proto.Operation.MarkersUpdate.LayerOperation.prototype.clearMarkerOperationsMap=function(){this.getMarkerOperationsMap().clear()},proto.Operation.MarkersUpdate.MarkerOperation=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate.MarkerOperation,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.MarkerOperation.displayName="proto.Operation.MarkersUpdate.MarkerOperation"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.MarkerOperation.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.MarkerOperation.toObject(e,this)},proto.Operation.MarkersUpdate.MarkerOperation.toObject=function(e,t){var r,i={isDeletion:n.Message.getFieldWithDefault(t,1,!1),markerUpdate:(r=t.getMarkerUpdate())&&proto.Operation.MarkersUpdate.MarkerUpdate.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate.MarkerOperation;return proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setIsDeletion(r);break;case 2:r=new proto.Operation.MarkersUpdate.MarkerUpdate;t.readMessage(r,proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader),e.setMarkerUpdate(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.MarkerOperation.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIsDeletion())&&t.writeBool(1,r),null!=(r=e.getMarkerUpdate())&&t.writeMessage(2,r,proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.getIsDeletion=function(){return n.Message.getFieldWithDefault(this,1,!1)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.setIsDeletion=function(e){n.Message.setProto3BooleanField(this,1,e)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.getMarkerUpdate=function(){return n.Message.getWrapperField(this,proto.Operation.MarkersUpdate.MarkerUpdate,2)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.setMarkerUpdate=function(e){n.Message.setWrapperField(this,2,e)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.clearMarkerUpdate=function(){this.setMarkerUpdate(void 0)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.hasMarkerUpdate=function(){return null!=n.Message.getField(this,2)},proto.Operation.MarkersUpdate.MarkerUpdate=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate.MarkerUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.MarkerUpdate.displayName="proto.Operation.MarkersUpdate.MarkerUpdate"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.MarkerUpdate.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.MarkerUpdate.toObject(e,this)},proto.Operation.MarkersUpdate.MarkerUpdate.toObject=function(e,t){var r,i={range:(r=t.getRange())&&proto.Operation.MarkersUpdate.LogicalRange.toObject(e,r),exclusive:n.Message.getFieldWithDefault(t,2,!1),reversed:n.Message.getFieldWithDefault(t,3,!1),tailed:n.Message.getFieldWithDefault(t,4,!1)};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate.MarkerUpdate;return proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.MarkersUpdate.LogicalRange;t.readMessage(r,proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader),e.setRange(r);break;case 2:r=t.readBool();e.setExclusive(r);break;case 3:r=t.readBool();e.setReversed(r);break;case 4:r=t.readBool();e.setTailed(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getRange())&&t.writeMessage(1,r,proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter),(r=e.getExclusive())&&t.writeBool(2,r),(r=e.getReversed())&&t.writeBool(3,r),(r=e.getTailed())&&t.writeBool(4,r)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getRange=function(){return n.Message.getWrapperField(this,proto.Operation.MarkersUpdate.LogicalRange,1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setRange=function(e){n.Message.setWrapperField(this,1,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.clearRange=function(){this.setRange(void 0)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.hasRange=function(){return null!=n.Message.getField(this,1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getExclusive=function(){return n.Message.getFieldWithDefault(this,2,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setExclusive=function(e){n.Message.setProto3BooleanField(this,2,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getReversed=function(){return n.Message.getFieldWithDefault(this,3,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setReversed=function(e){n.Message.setProto3BooleanField(this,3,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getTailed=function(){return n.Message.getFieldWithDefault(this,4,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setTailed=function(e){n.Message.setProto3BooleanField(this,4,e)},proto.Operation.MarkersUpdate.LogicalRange=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate.LogicalRange,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.LogicalRange.displayName="proto.Operation.MarkersUpdate.LogicalRange"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.LogicalRange.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.LogicalRange.toObject(e,this)},proto.Operation.MarkersUpdate.LogicalRange.toObject=function(e,t){var r,n={startDependencyId:(r=t.getStartDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInStartDependency:(r=t.getOffsetInStartDependency())&&proto.Operation.Point.toObject(e,r),endDependencyId:(r=t.getEndDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInEndDependency:(r=t.getOffsetInEndDependency())&&proto.Operation.Point.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.LogicalRange.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate.LogicalRange;return proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setStartDependencyId(r);break;case 2:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInStartDependency(r);break;case 3:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setEndDependencyId(r);break;case 4:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInEndDependency(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.LogicalRange.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getStartDependencyId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInStartDependency())&&t.writeMessage(2,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getEndDependencyId())&&t.writeMessage(3,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInEndDependency())&&t.writeMessage(4,r,proto.Operation.Point.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getStartDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setStartDependencyId=function(e){n.Message.setWrapperField(this,1,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearStartDependencyId=function(){this.setStartDependencyId(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasStartDependencyId=function(){return null!=n.Message.getField(this,1)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getOffsetInStartDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,2)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setOffsetInStartDependency=function(e){n.Message.setWrapperField(this,2,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearOffsetInStartDependency=function(){this.setOffsetInStartDependency(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasOffsetInStartDependency=function(){return null!=n.Message.getField(this,2)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getEndDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,3)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setEndDependencyId=function(e){n.Message.setWrapperField(this,3,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearEndDependencyId=function(){this.setEndDependencyId(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasEndDependencyId=function(){return null!=n.Message.getField(this,3)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getOffsetInEndDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,4)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setOffsetInEndDependency=function(e){n.Message.setWrapperField(this,4,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearOffsetInEndDependency=function(){this.setOffsetInEndDependency(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasOffsetInEndDependency=function(){return null!=n.Message.getField(this,4)},proto.Operation.MarkersUpdate.prototype.getSiteId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.Operation.MarkersUpdate.prototype.setSiteId=function(e){n.Message.setProto3IntField(this,1,e)},proto.Operation.MarkersUpdate.prototype.getLayerOperationsMap=function(e){return n.Message.getMapField(this,2,e,proto.Operation.MarkersUpdate.LayerOperation)},proto.Operation.MarkersUpdate.prototype.clearLayerOperationsMap=function(){this.getLayerOperationsMap().clear()},proto.Operation.SpliceId=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.SpliceId,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.SpliceId.displayName="proto.Operation.SpliceId"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.SpliceId.prototype.toObject=function(e){return proto.Operation.SpliceId.toObject(e,this)},proto.Operation.SpliceId.toObject=function(e,t){var r={site:n.Message.getFieldWithDefault(t,1,0),seq:n.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Operation.SpliceId.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.SpliceId;return proto.Operation.SpliceId.deserializeBinaryFromReader(r,t)},proto.Operation.SpliceId.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setSite(r);break;case 2:r=t.readUint32();e.setSeq(r);break;default:t.skipField()}}return e},proto.Operation.SpliceId.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.SpliceId.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.SpliceId.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getSite())&&t.writeUint32(1,r),0!==(r=e.getSeq())&&t.writeUint32(2,r)},proto.Operation.SpliceId.prototype.getSite=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.Operation.SpliceId.prototype.setSite=function(e){n.Message.setProto3IntField(this,1,e)},proto.Operation.SpliceId.prototype.getSeq=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.Operation.SpliceId.prototype.setSeq=function(e){n.Message.setProto3IntField(this,2,e)},proto.Operation.Point=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Point,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Point.displayName="proto.Operation.Point"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Point.prototype.toObject=function(e){return proto.Operation.Point.toObject(e,this)},proto.Operation.Point.toObject=function(e,t){var r={row:n.Message.getFieldWithDefault(t,1,0),column:n.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Operation.Point.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Point;return proto.Operation.Point.deserializeBinaryFromReader(r,t)},proto.Operation.Point.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setRow(r);break;case 2:r=t.readUint32();e.setColumn(r);break;default:t.skipField()}}return e},proto.Operation.Point.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Point.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Point.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getRow())&&t.writeUint32(1,r),0!==(r=e.getColumn())&&t.writeUint32(2,r)},proto.Operation.Point.prototype.getRow=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.Operation.Point.prototype.setRow=function(e){n.Message.setProto3IntField(this,1,e)},proto.Operation.Point.prototype.getColumn=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.Operation.Point.prototype.setColumn=function(e){n.Message.setProto3IntField(this,2,e)},proto.Operation.prototype.getSplice=function(){return n.Message.getWrapperField(this,proto.Operation.Splice,1)},proto.Operation.prototype.setSplice=function(e){n.Message.setOneofWrapperField(this,1,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearSplice=function(){this.setSplice(void 0)},proto.Operation.prototype.hasSplice=function(){return null!=n.Message.getField(this,1)},proto.Operation.prototype.getUndo=function(){return n.Message.getWrapperField(this,proto.Operation.Undo,2)},proto.Operation.prototype.setUndo=function(e){n.Message.setOneofWrapperField(this,2,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearUndo=function(){this.setUndo(void 0)},proto.Operation.prototype.hasUndo=function(){return null!=n.Message.getField(this,2)},proto.Operation.prototype.getMarkersUpdate=function(){return n.Message.getWrapperField(this,proto.Operation.MarkersUpdate,3)},proto.Operation.prototype.setMarkersUpdate=function(e){n.Message.setOneofWrapperField(this,3,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearMarkersUpdate=function(){this.setMarkersUpdate(void 0)},proto.Operation.prototype.hasMarkersUpdate=function(){return null!=n.Message.getField(this,3)},i.object.extend(t,proto)},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}r.r(t),r.d(t,"default",(function(){return p}));var o=r(44),s=r(8),a=r(2),c=a.CompositeDisposable,l=a.Emitter,u=r(10);function d(){}var p=function(){function e(t){var r=t.id,n=t.uri,i=t.text,s=t.history,a=t.operations,u=t.router,p=t.hostPeerId,h=t.siteId,f=t.didDispose;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=r,this.hostPeerId=p,this.siteId=h,this.isHost=1===this.siteId,this.uri=n,this.router=u,this.emitDidDispose=f||d,this.document=new o.Document.default({siteId:h,text:i,history:s}),this.nextMarkerLayerId=1,this.emitter=new l,this.subscriptions=new c,this.subscriptions.add(this.router.onNotification("/buffers/".concat(r),this.receiveUpdate.bind(this))),this.isHost?this.subscriptions.add(this.router.onRequest("/buffers/".concat(r),this.receiveFetch.bind(this)),this.router.onNotification("/buffers/".concat(r,"/save"),this.receiveSave.bind(this))):this.subscriptions.add(this.router.onNotification("/buffers/".concat(r,"/disposal"),this.dispose.bind(this))),a&&this.integrateOperations(a)}return i(e,null,[{key:"deserialize",value:function(t,r){var n=t.getId(),i=t.getUri(),s=t.getOperationsList().map(o.deserializeOperation);return new e(Object.assign({id:n,uri:i,operations:s},r))}}]),i(e,[{key:"dispose",value:function(){this.subscriptions.dispose(),this.delegate&&this.delegate.dispose(),this.isHost&&this.router.notify({channelId:"/buffers/".concat(this.id,"/disposal")}),this.emitDidDispose()}},{key:"serialize",value:function(){var e=new u.BufferProxy;return e.setId(this.id),e.setUri(this.uri),e.setOperationsList(this.document.getOperations().map(o.serializeOperation)),e}},{key:"setDelegate",value:function(e){this.delegate=e,1!==this.siteId&&this.delegate&&this.delegate.setText(this.document.getText())}},{key:"getNextMarkerLayerId",value:function(){return this.nextMarkerLayerId++}},{key:"setTextInRange",value:function(e,t,r){var n=this.document.setTextInRange(e,t,r);this.broadcastOperations(n),this.emitter.emit("did-update-text",{remote:!1})}},{key:"setURI",value:function(e){s(this.isHost,"Only hosts can change the URI"),this.uri=e,this.broadcastURIChange(e)}},{key:"getMarkers",value:function(){return this.document.getMarkers()}},{key:"updateMarkers",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.document.updateMarkers(e);return t&&this.broadcastOperations(r),r}},{key:"onDidUpdateMarkers",value:function(e){return this.emitter.on("did-update-markers",e)}},{key:"onDidUpdateText",value:function(e){return this.emitter.on("did-update-text",e)}},{key:"undo",value:function(){var e=this.document.undo();if(e){var t=e.operations,r=e.textUpdates,n=e.markers;return this.broadcastOperations(t),r.length>0&&this.emitter.emit("did-update-text",{remote:!1}),{textUpdates:r,markers:n}}return null}},{key:"redo",value:function(){var e=this.document.redo();if(e){var t=e.operations,r=e.textUpdates,n=e.markers;return this.broadcastOperations(t),r.length>0&&this.emitter.emit("did-update-text",{remote:!1}),{textUpdates:r,markers:n}}return null}},{key:"createCheckpoint",value:function(e){return this.document.createCheckpoint(e)}},{key:"getChangesSinceCheckpoint",value:function(e){return this.document.getChangesSinceCheckpoint(e)}},{key:"groupChangesSinceCheckpoint",value:function(e,t){return this.document.groupChangesSinceCheckpoint(e,t)}},{key:"groupLastChanges",value:function(){return this.document.groupLastChanges()}},{key:"revertToCheckpoint",value:function(e,t){var r=this.document.revertToCheckpoint(e,t);if(r){var n=r.operations,i=r.textUpdates,o=r.markers;return this.broadcastOperations(n),i.length>0&&this.emitter.emit("did-update-text",{remote:!1}),{textUpdates:i,markers:o}}return!1}},{key:"applyGroupingInterval",value:function(e){this.document.applyGroupingInterval(e)}},{key:"getHistory",value:function(e){return this.document.getHistory(e)}},{key:"requestSave",value:function(){s(!this.isHost,"Only guests can request a save"),this.router.notify({recipientId:this.hostPeerId,channelId:"/buffers/".concat(this.id,"/save")})}},{key:"receiveFetch",value:function(e){var t=e.requestId;this.router.respond({requestId:t,body:this.serialize().serializeBinary()})}},{key:"receiveUpdate",value:function(e){var t=e.body;console.log("received buffer update");var r=u.BufferProxyUpdate.deserializeBinary(t);if(r.hasOperationsUpdate())this.receiveOperationsUpdate(r.getOperationsUpdate());else{if(!r.hasUriUpdate())throw new Error("Received unknown update message");this.receiveURIUpdate(r.getUriUpdate())}}},{key:"receiveOperationsUpdate",value:function(e){var t=e.getOperationsList().map(o.deserializeOperation);this.integrateOperations(t)}},{key:"receiveURIUpdate",value:function(e){this.uri=e.getUri(),this.delegate.didChangeURI(this.uri)}},{key:"receiveSave",value:function(){this.delegate.save()}},{key:"broadcastOperations",value:function(e){var t=new u.BufferProxyUpdate.OperationsUpdate;t.setOperationsList(e.map(o.serializeOperation));var r=new u.BufferProxyUpdate;r.setOperationsUpdate(t),this.broadcastUpdate(r)}},{key:"integrateOperations",value:function(e){var t=this.document.integrateOperations(e),r=t.textUpdates,n=t.markerUpdates;this.delegate&&this.delegate.updateText(r),this.emitter.emit("did-update-markers",n),r.length>0&&this.emitter.emit("did-update-text",{remote:!0})}},{key:"broadcastURIChange",value:function(e){var t=new u.BufferProxyUpdate.URIUpdate;t.setUri(e);var r=new u.BufferProxyUpdate;r.setUriUpdate(t),this.broadcastUpdate(r)}},{key:"broadcastUpdate",value:function(e){this.router.notify({channelId:"/buffers/".concat(this.id),body:e.serializeBinary()})}}]),e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));const n=r(8),i=r(120),o=r(121),{ZERO_POINT:s,compare:a,traverse:c,traversal:l,characterIndexForPosition:u,extentForText:d}=r(20);class p{constructor({siteId:e,text:t,history:r}){n(0!==e,"siteId 0 is reserved"),this.siteId=e,this.nextSequenceNumber=1,this.splitTreesBySpliceId=new Map,this.deletionsBySpliceId=new Map,this.undoCountsBySpliceId=new Map,this.markerLayersBySiteId=new Map([[this.siteId,new Map]]),this.deferredOperationsByDependencyId=new Map,this.deferredResolutionsByDependencyId=new Map,this.deferredMarkerUpdates=new Map,this.deferredMarkerUpdatesByDependencyId=new Map,this.maxSeqsBySite={},this.operations=[],this.undoStack=[],this.redoStack=[],this.nextCheckpointId=1;const a={spliceId:{site:0,seq:0},offset:s,text:"",extent:s,nextSplit:null,deletions:new Set};this.splitTreesBySpliceId.set(h(a.spliceId),new o(a));const c={spliceId:{site:0,seq:1},offset:s,text:"",extent:s,nextSplit:null,deletions:new Set};this.splitTreesBySpliceId.set(h(c.spliceId),new o(c)),this.documentTree=new i(a,c,this.isSegmentVisible.bind(this)),t?(this.setTextInRange(s,s,t),this.undoStack.length=0):r&&this.populateHistory(r)}populateHistory({baseText:e,nextCheckpointId:t,undoStack:r,redoStack:n}){this.setTextInRange(s,s,e),this.nextCheckpointId=t;const i=[],o=r.concat(n.slice().reverse());for(let e=0;e<o.length;e++){const{type:t,changes:r,markersBefore:n,markersAfter:s,id:a,markers:c}=o[e];if("transaction"===t){const e=[],t=this.snapshotFromMarkers(n);for(let t=r.length-1;t>=0;t--){const{oldStart:n,oldEnd:i,newText:o}=r[t];e.push(...this.setTextInRange(n,i,o))}const o=this.snapshotFromMarkers(s);i.push(new v(0,e,t,o))}else{if("checkpoint"!==t)throw new Error(`Unknown entry type '${t}'`);i.push(new m(a,!1,this.snapshotFromMarkers(c)))}}this.undoStack=i;for(let e=0;e<n.length;e++)"transaction"===n[e].type&&this.undo()}replicate(e){const t=new p({siteId:e});return t.integrateOperations(this.getOperations()),t}getOperations(){const e=[];return this.markerLayersBySiteId.forEach((t,r)=>{const n={};t.forEach((e,t)=>{const r={};e.forEach((e,t)=>{r[t]=e}),n[t]=r}),e.push({type:"markers-update",updates:n,siteId:r})}),this.operations.concat(e)}setTextInRange(e,t,r,n){const i={site:this.siteId,seq:this.nextSequenceNumber},o={type:"splice",spliceId:i};return a(t,e)>0&&(o.deletion=this.delete(i,e,t)),r&&r.length>0&&(o.insertion=this.insert(i,e,r)),this.updateMaxSeqsBySite(i),this.undoStack.push(new v(this.getNow(),[o])),this.clearRedoStack(),this.operations.push(o),[o]}getMarkers(){const e={};return this.markerLayersBySiteId.forEach((t,r)=>{t.size>0&&(e[r]={},t.forEach((t,n)=>{e[r][n]={},t.forEach((t,i)=>{const o=Object.assign({},t);o.range=this.resolveLogicalRange(t.range,t.exclusive),e[r][n][i]=o})}))}),e}updateMarkers(e){const t={type:"markers-update",siteId:this.siteId,updates:{}},r=this.markerLayersBySiteId.get(this.siteId);for(let n in e){const i=e[n];n=parseInt(n);let o=r.get(n);if(null===i)o&&(r.delete(n),t.updates[n]=null);else{o||(o=new Map,r.set(n,o)),t.updates[n]={};for(let e in i){const r=i[e];e=parseInt(e);let s=o.get(e);if(r){const i=(s=s?Object.assign({},s):{exclusive:!1,reversed:!1,tailed:!0}).exclusive!==r.exclusive;Object.assign(s,r),(r.range||i)&&(s.range=this.getLogicalRange(r.range||s.range,s.exclusive)),Object.freeze(s),o.set(e,s),t.updates[n][e]=s}else o.delete(e),t.updates[n][e]=null}}}return[t]}undo(){let e,t=null,r=[];for(let n=this.undoStack.length-1;n>=0;n--){const i=this.undoStack[n];if(i instanceof v){r=i.operations,e=i.markersSnapshotBefore,t=n;break}if(i instanceof m&&i.isBarrier)return null}if(null!=t){this.redoStack.push(...this.undoStack.splice(t).reverse());const{operations:n,textUpdates:i}=this.undoOrRedoOperations(r);return{operations:n,textUpdates:i,markers:this.markersFromSnapshot(e)}}return null}redo(){let e,t=null,r=[];for(let n=this.redoStack.length-1;n>=0;n--){const i=this.redoStack[n];if(i instanceof v){r=i.operations,e=i.markersSnapshotAfter,t=n;break}}for(;this.redoStack[t-1]instanceof m;)t--;if(null!=t){this.undoStack.push(...this.redoStack.splice(t).reverse());const{operations:n,textUpdates:i}=this.undoOrRedoOperations(r);return{operations:n,textUpdates:i,markers:e?this.markersFromSnapshot(e):null}}return null}clearUndoStack(){this.undoStack.length=0}clearRedoStack(){this.redoStack.length=0}applyGroupingInterval(e){const t=this.undoStack[this.undoStack.length-1],r=this.undoStack[this.undoStack.length-2];if(t instanceof v&&(t.groupingInterval=e,r instanceof v)){t.timestamp-r.timestamp<Math.min(e,r.groupingInterval||1/0)&&(this.undoStack.pop(),r.timestamp=t.timestamp,r.groupingInterval=e,r.operations.push(...t.operations),r.markersSnapshotAfter=t.markersSnapshotAfter)}}getNow(){return Date.now()}createCheckpoint(e){const t=new m(this.nextCheckpointId++,e&&e.isBarrier,e&&this.snapshotFromMarkers(e.markers));return this.undoStack.push(t),t.id}isBarrierPresentBeforeCheckpoint(e){for(let t=this.undoStack.length-1;t>=0;t--){const r=this.undoStack[t];if(r instanceof m){if(r.id==e)return!1;if(r.isBarrier)return!0}}return!1}groupChangesSinceCheckpoint(e,t){if(this.isBarrierPresentBeforeCheckpoint(e))return!1;const r=this.collectOperationsSinceCheckpoint(e,!0,t&&t.deleteCheckpoint);if(r){const{operations:e,markersSnapshot:n}=r;return e.length>0?(this.undoStack.push(new v(this.getNow(),e,n,t&&this.snapshotFromMarkers(t.markers))),this.textUpdatesForOperations(e)):[]}return!1}revertToCheckpoint(e,t){if(this.isBarrierPresentBeforeCheckpoint(e))return!1;const r=this.collectOperationsSinceCheckpoint(e,!0,t&&t.deleteCheckpoint);if(r){const{operations:e,textUpdates:t}=this.undoOrRedoOperations(r.operations);return{operations:e,textUpdates:t,markers:this.markersFromSnapshot(r.markersSnapshot)}}return!1}getChangesSinceCheckpoint(e){const t=this.collectOperationsSinceCheckpoint(e,!1,!1);return!!t&&this.textUpdatesForOperations(t.operations)}collectOperationsSinceCheckpoint(e,t,r){let n=-1;const i=[];for(let t=this.undoStack.length-1;t>=0;t--){const r=this.undoStack[t];if(r instanceof m){if(r.id===e){n=t;break}}else{if(!(r instanceof v))throw new Error("Unknown stack entry "+r.constructor.name);i.push(...r.operations)}}if(-1===n)return null;{const{markersSnapshot:e}=this.undoStack[n];return t&&(r||n++,this.undoStack.splice(n)),{operations:i,markersSnapshot:e}}}groupLastChanges(){let e;for(let t=this.undoStack.length-1;t>=0;t--){const r=this.undoStack[t];if(r instanceof m){if(r.isBarrier)return!1}else{if(e)return this.undoStack.splice(t),this.undoStack.push(new v(this.getNow(),r.operations.concat(e.operations),r.markersSnapshotBefore,e.markersSnapshotAfter)),!0;e=r}}return!1}getHistory(e){const t=new Map(this.undoCountsBySpliceId),r=[];for(let t=this.redoStack.length-1;t>=0;t--){const n=this.redoStack[t];if(n instanceof v){const e=this.markersFromSnapshot(n.markersSnapshotBefore),t=this.undoOrRedoOperations(n.operations).textUpdates,i=this.markersFromSnapshot(n.markersSnapshotAfter);r.push({type:"transaction",changes:t,markersBefore:e,markersAfter:i})}else r.push({type:"checkpoint",id:n.id,markers:this.markersFromSnapshot(n.markersSnapshot)});if(r.length===e)break}r.reverse();for(let e=this.redoStack.length-1;e>=this.redoStack.length-r.length;e--){const t=this.redoStack[e];t instanceof v&&this.undoOrRedoOperations(t.operations)}const n=[];for(let t=this.undoStack.length-1;t>=0;t--){const r=this.undoStack[t];if(r instanceof v){const e=this.markersFromSnapshot(r.markersSnapshotAfter),t=y(this.undoOrRedoOperations(r.operations).textUpdates),i=this.markersFromSnapshot(r.markersSnapshotBefore);n.push({type:"transaction",changes:t,markersBefore:i,markersAfter:e})}else n.push({type:"checkpoint",id:r.id,markers:this.markersFromSnapshot(r.markersSnapshot)});if(n.length===e)break}n.reverse();for(let e=this.undoStack.length-1;e>=this.undoStack.length-n.length;e--){const t=this.undoStack[e];t instanceof v&&this.undoOrRedoOperations(t.operations)}return this.undoCountsBySpliceId=t,{nextCheckpointId:this.nextCheckpointId,undoStack:n,redoStack:r}}delete(e,t,r){const n=h(e),i=this.findLocalSegmentBoundary(t)[1],o=this.findLocalSegmentBoundary(r)[0],s={};let a=i;for(;;){const e=s[a.spliceId.site];if((null==e||a.spliceId.seq>e)&&(s[a.spliceId.site]=a.spliceId.seq),a.deletions.add(n),this.documentTree.splayNode(a),this.documentTree.updateSubtreeExtent(a),a===o)break;a=this.documentTree.getSuccessor(a)}const l={spliceId:e,leftDependencyId:i.spliceId,offsetInLeftDependency:i.offset,rightDependencyId:o.spliceId,offsetInRightDependency:c(o.offset,o.extent),maxSeqsBySite:s};return this.deletionsBySpliceId.set(n,l),l}insert(e,t,r){const[n,i]=this.findLocalSegmentBoundary(t),a={spliceId:e,text:r,extent:d(r),offset:s,leftDependency:n,rightDependency:i,nextSplit:null,deletions:new Set};return this.documentTree.insertBetween(n,i,a),this.splitTreesBySpliceId.set(h(e),new o(a)),{text:r,leftDependencyId:n.spliceId,offsetInLeftDependency:c(n.offset,n.extent),rightDependencyId:i.spliceId,offsetInRightDependency:i.offset}}undoOrRedoOperations(e){const t=[],r=new Map;for(var n=0;n<e.length;n++){const{spliceId:i}=e[n],o=(this.undoCountsBySpliceId.get(h(i))||0)+1;this.updateUndoCount(i,o,r);const s={type:"undo",spliceId:i,undoCount:o};t.push(s),this.operations.push(s)}return{operations:t,textUpdates:this.textUpdatesForOperations(t,r)}}isSpliceUndone({spliceId:e}){const t=this.undoCountsBySpliceId.get(h(e));return null!=t&&!0&t}canIntegrateOperation(e){switch(e.type){case"splice":{const{spliceId:t,deletion:r,insertion:n}=e;if((this.maxSeqsBySite[t.site]||0)!==t.seq-1)return!1;if(r){if(!(this.splitTreesBySpliceId.has(h(r.leftDependencyId))&&this.splitTreesBySpliceId.has(h(r.rightDependencyId))))return!1;for(const e in r.maxSeqsBySite)if(r.maxSeqsBySite[e]>(this.maxSeqsBySite[e]||0))return!1}if(n){if(!(this.splitTreesBySpliceId.has(h(n.leftDependencyId))&&this.splitTreesBySpliceId.has(h(n.rightDependencyId))))return!1}return!0}case"undo":{const t=h(e.spliceId);return this.splitTreesBySpliceId.has(t)||this.deletionsBySpliceId.has(t)}case"markers-update":return!0;default:throw new Error("Unknown operation type")}}integrateOperations(e){const t=[];let r,n=0;for(;n<e.length;){const i=e[n++];if("markers-update"!==i.type&&this.operations.push(i),this.canIntegrateOperation(i)){switch(t.push(i),i.type){case"splice":i.deletion&&this.integrateDeletion(i.spliceId,i.deletion),i.insertion&&this.integrateInsertion(i.spliceId,i.insertion),this.updateMaxSeqsBySite(i.spliceId);break;case"undo":r||(r=new Map),this.integrateUndo(i,r)}this.collectDeferredOperations(i,e)}else this.deferOperation(i)}return{textUpdates:this.textUpdatesForOperations(t,r),markerUpdates:this.updateMarkersForOperations(t)}}collectDeferredOperations({spliceId:e},t){if(e){const r=h(e),n=this.deferredOperationsByDependencyId.get(r);n&&(n.forEach(e=>{this.canIntegrateOperation(e)&&t.push(e)}),this.deferredOperationsByDependencyId.delete(r))}}deferOperation(e){if("splice"===e.type){const{spliceId:t,deletion:r,insertion:n}=e;if(this.addOperationDependency(this.deferredOperationsByDependencyId,{site:t.site,seq:t.seq-1},e),r){this.addOperationDependency(this.deferredOperationsByDependencyId,r.leftDependencyId,e),this.addOperationDependency(this.deferredOperationsByDependencyId,r.rightDependencyId,e);for(const t in r.maxSeqsBySite){const n=r.maxSeqsBySite[t];this.addOperationDependency(this.deferredOperationsByDependencyId,{site:t,seq:n},e)}}n&&(this.addOperationDependency(this.deferredOperationsByDependencyId,n.leftDependencyId,e),this.addOperationDependency(this.deferredOperationsByDependencyId,n.rightDependencyId,e))}else{if("undo"!==e.type)throw new Error("Unknown operation type: "+e.type);this.addOperationDependency(this.deferredOperationsByDependencyId,e.spliceId,e)}}addOperationDependency(e,t,r){const n=h(t);if(!this.hasAppliedSplice(t)){let t=e.get(n);t||(t=new Set,e.set(n,t)),t.add(r)}}hasAppliedSplice(e){const t=h(e);return this.splitTreesBySpliceId.has(t)||this.deletionsBySpliceId.has(t)}integrateInsertion(e,t){const{text:r,leftDependencyId:n,offsetInLeftDependency:i,rightDependencyId:a,offsetInRightDependency:c}=t,l=this.findSegmentStart(a,c),u=this.findSegmentEnd(n,i);this.documentTree.splayNode(u),this.documentTree.splayNode(l);let p=this.documentTree.getSuccessor(u),f=u,g=l;for(;p!==g;){const t=this.documentTree.getSegmentIndex(f),r=this.documentTree.getSegmentIndex(g),n=this.documentTree.getSegmentIndex(p.leftDependency),i=this.documentTree.getSegmentIndex(p.rightDependency);n<=t&&i>=r?(e.site<p.spliceId.site?g=p:f=p,p=this.documentTree.getSuccessor(f)):p=this.documentTree.getSuccessor(p)}const y={spliceId:e,offset:s,text:r,extent:d(r),leftDependency:u,rightDependency:l,nextSplit:null,deletions:new Set};this.documentTree.insertBetween(f,g,y),this.splitTreesBySpliceId.set(h(e),new o(y))}integrateDeletion(e,t){const{leftDependencyId:r,offsetInLeftDependency:n,rightDependencyId:i,offsetInRightDependency:o,maxSeqsBySite:s}=t,a=h(e);this.deletionsBySpliceId.set(a,t);const c=this.findSegmentStart(r,n),l=this.findSegmentEnd(i,o);let u=c;for(;;){const e=s[u.spliceId.site]||0;if(u.spliceId.seq<=e&&(this.documentTree.splayNode(u),u.deletions.add(a),this.documentTree.updateSubtreeExtent(u)),u===l)break;u=this.documentTree.getSuccessor(u)}}integrateUndo({spliceId:e,undoCount:t},r){return this.updateUndoCount(e,t,r)}getMarkerLayersForSiteId(e){let t=this.markerLayersBySiteId.get(e);return t||(t=new Map,this.markerLayersBySiteId.set(e,t)),t}deferMarkerUpdate(e,t,r,n){const{range:i}=n,o={siteId:e,layerId:t,markerId:r};this.addOperationDependency(this.deferredMarkerUpdatesByDependencyId,i.startDependencyId,o),this.addOperationDependency(this.deferredMarkerUpdatesByDependencyId,i.endDependencyId,o);let s=this.deferredMarkerUpdates.get(e);s||(s=new Map,this.deferredMarkerUpdates.set(e,s));let a=s.get(t);a||(a=new Map,s.set(t,a)),a.set(r,n)}updateMarkersForOperations(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];"markers-update"===n.type?this.integrateMarkerUpdates(t,n):"splice"===n.type&&this.integrateDeferredMarkerUpdates(t,n)}return t}integrateMarkerUpdates(e,{siteId:t,updates:r}){const n=this.getMarkerLayersForSiteId(t);e[t]||(e[t]={});for(let i in r){const o=r[i];i=parseInt(i);let s=n.get(i);if(o){s||(s=new Map,n.set(i,s)),e[t][i]||(e[t][i]={});for(let r in o){const n=o[r];if(r=parseInt(r),n)n.range&&!this.canResolveLogicalRange(n.range)?this.deferMarkerUpdate(t,i,r,n):this.integrateMarkerUpdate(e,t,i,r,n);else{s.has(r)&&(s.delete(r),e[t][i][r]=null);const n=this.deferredMarkerUpdates.get(t);if(n){const e=n.get(i);e&&e.delete(r)}}}}else{s&&(e[t][i]=null,n.delete(i));const r=this.deferredMarkerUpdates.get(t);r&&r.delete(i)}}}integrateDeferredMarkerUpdates(e,{spliceId:t}){const r=h(t),n=this.deferredMarkerUpdatesByDependencyId.get(r);n&&(n.forEach(({siteId:t,layerId:r,markerId:n})=>{const i=this.deferredMarkerUpdates.get(t);if(i){const o=i.get(r);if(o){const i=o.get(n);i&&this.canResolveLogicalRange(i.range)&&this.integrateMarkerUpdate(e,t,r,n,i)}}}),this.deferredMarkerUpdatesByDependencyId.delete(r))}integrateMarkerUpdate(e,t,r,n,i){let o=this.markerLayersBySiteId.get(t).get(r);o||(o=new Map,this.markerLayersBySiteId.get(t).set(r,o));let s=o.get(n);s=s?Object.assign({},s):{},Object.assign(s,i),Object.freeze(s),o.set(n,s),e[t]||(e[t]={}),e[t][r]||(e[t][r]={}),e[t][r][n]=Object.assign({},s),e[t][r][n].range=this.resolveLogicalRange(s.range,s.exclusive);const a=this.deferredMarkerUpdates.get(t);if(a){const e=a.get(r);e&&e.has(n)&&(e.delete(n),0===e.size&&(a.delete(r),0===a.size&&this.deferredMarkerUpdates.delete(t)))}}snapshotFromMarkers(e){if(!e)return e;const t={};for(const r in e){const n={},i=e[r];for(const e in i){const t=Object.assign({},i[e]);t.range=this.getLogicalRange(t.range,t.exclusive),n[e]=t}t[r]=n}return t}markersFromSnapshot(e){if(!e)return e;const t={};for(const r in e){const n={},i=e[r];for(const e in i){const t=Object.assign({},i[e]);t.range=this.resolveLogicalRange(t.range),n[e]=t}t[r]=n}return t}updateUndoCount(e,t,r){const n=h(e),i=this.undoCountsBySpliceId.get(n)||0;if(t<=i)return;r.set(n,i),this.undoCountsBySpliceId.set(n,t);const o=new Set;this.collectSegments(n,o),o.forEach(e=>{const t=this.isSegmentVisible(e,r);this.isSegmentVisible(e)!==t&&(this.documentTree.splayNode(e,r),this.documentTree.updateSubtreeExtent(e))})}textUpdatesForOperations(e,t){const r=new Set,n=new Map,i=new Map;for(let t=0;t<e.length;t++){const o=e[t],{type:s,spliceId:a,deletion:c,insertion:l}=o;if(a){const e=h(a);"splice"===s&&r.add(e),this.collectSegments(e,null,i,n)}}return this.computeChangesForSegments(i,n,t,r)}canResolveLogicalRange({startDependencyId:e,endDependencyId:t}){return this.hasAppliedSplice(e)&&this.hasAppliedSplice(t)}getLogicalRange({start:e,end:t},r){const{segment:n,offset:i}=this.findSegment(e,r),{segment:o,offset:s}=this.findSegment(t,!r||0===a(e,t));return{startDependencyId:n.spliceId,offsetInStartDependency:i,endDependencyId:o.spliceId,offsetInEndDependency:s}}resolveLogicalRange(e,t){const{startDependencyId:r,offsetInStartDependency:n,endDependencyId:i,offsetInEndDependency:o}=e;return{start:this.resolveLogicalPosition(r,n,t),end:this.resolveLogicalPosition(i,o,!t||f(e))}}resolveLogicalPosition(e,t,r){const n=this.splitTreesBySpliceId.get(h(e));let i=n.findSegmentContainingOffset(t);const o=c(i.offset,i.extent);r&&0===a(t,o)&&(i=n.getSuccessor(i)||i);const s=this.documentTree.getSegmentPosition(i);return this.isSegmentVisible(i)?c(s,l(t,i.offset)):s}findLocalSegmentBoundary(e){const{segment:t,start:r,end:n}=this.documentTree.findSegmentContainingPosition(e);if(a(e,n)<0){const n=this.splitTreesBySpliceId.get(h(t.spliceId));return this.splitSegment(n,t,l(e,r))}return[t,this.documentTree.getSuccessor(t)]}splitSegment(e,t,r){const n=e.splitSegment(t,r);return this.documentTree.splitSegment(t,n),[t,n]}findSegment(e,t){let{segment:r,start:n,end:i}=this.documentTree.findSegmentContainingPosition(e),o=c(r.offset,l(e,n));return t&&0===a(e,i)&&(o=(r=this.documentTree.getSuccessor(r)).offset),{segment:r,offset:o}}findSegmentStart(e,t){const r=this.splitTreesBySpliceId.get(h(e)),n=r.findSegmentContainingOffset(t),i=c(n.offset,n.extent);if(0===a(n.offset,t))return n;if(0===a(i,t))return n.nextSplit;{const[e,i]=this.splitSegment(r,n,l(t,n.offset));return i}}findSegmentEnd(e,t){const r=this.splitTreesBySpliceId.get(h(e)),n=r.findSegmentContainingOffset(t),i=c(n.offset,n.extent);if(0===a(i,t))return n;{const[e,i]=this.splitSegment(r,n,l(t,n.offset));return e}}getText(){let e="";const t=this.documentTree.getSegments();for(var r=0;r<t.length;r++){const n=t[r];this.isSegmentVisible(n)&&(e+=n.text)}return e}collectSegments(e,t,r,n){const i=this.splitTreesBySpliceId.get(e);if(i){let e=i.getStart();for(;e;)t?t.add(e):(n.set(e,this.documentTree.getSegmentPosition(e)),r.set(e,this.documentTree.getSegmentIndex(e))),e=i.getSuccessor(e)}const o=this.deletionsBySpliceId.get(e);if(o){const{leftDependencyId:e,offsetInLeftDependency:i,rightDependencyId:s,offsetInRightDependency:a,maxSeqsBySite:c}=o,l=this.findSegmentStart(e,i),u=this.findSegmentEnd(s,a);let d=l;for(;;){const e=c[d.spliceId.site]||0;if(d.spliceId.seq<=e&&(t?t.add(d):(n.set(d,this.documentTree.getSegmentPosition(d)),r.set(d,this.documentTree.getSegmentIndex(d)))),d===u)break;d=this.documentTree.getSuccessor(d)}}}computeChangesForSegments(e,t,r,n){const i=Array.from(e.keys()).sort((t,r)=>e.get(t)-e.get(r)),o=[];let s;for(let e=0;e<i.length;e++){const u=i[e],d=this.isSegmentVisible(u,r,n);if(d!==this.isSegmentVisible(u)){const e=t.get(u),r=s?c(s.oldEnd,l(e,s.newEnd)):e;d?o.length>0&&0===a(s.newEnd,e)?(s.oldEnd=c(s.oldEnd,u.extent),s.oldText+=u.text):(s={oldStart:r,oldEnd:c(r,u.extent),oldText:u.text,newStart:e,newEnd:e,newText:""},o.push(s)):s&&0===a(s.newEnd,e)?(s.newEnd=c(s.newEnd,u.extent),s.newText+=u.text):(s={oldStart:r,oldEnd:r,oldText:"",newStart:e,newEnd:c(e,u.extent),newText:u.text},o.push(s))}}return o}isSegmentVisible(e,t,r){const n=h(e.spliceId);if(r&&r.has(n))return!1;let i;return t&&(i=t.get(n)),null==i&&(i=this.undoCountsBySpliceId.get(n)||0),0==(1&i)&&!this.isSegmentDeleted(e,t,r)}isSegmentDeleted(e,t,r){for(const n of e.deletions){if(r&&r.has(n))continue;let e;if(t&&(e=t.get(n)),null==e&&(e=this.undoCountsBySpliceId.get(n)||0),0==(1&e))return!0}return!1}updateMaxSeqsBySite({site:e,seq:t}){const r=this.maxSeqsBySite[e]||0;n.equal(r,t-1,"Operations from a given site must be applied in order."),this.maxSeqsBySite[e]=t,this.siteId===e&&(this.nextSequenceNumber=t+1)}}function h({site:e,seq:t}){return e+"."+t}function f({startDependencyId:e,offsetInStartDependency:t,endDependencyId:r,offsetInEndDependency:n}){return g(e,r)&&0===a(t,n)}function g(e,t){return e.site===t.site&&e.seq===t.seq}function y(e){const t=[];for(let r=0;r<e.length;r++){const{oldStart:n,oldEnd:i,oldText:o,newStart:s,newEnd:a,newText:c}=e[r];t.push({oldStart:s,oldEnd:a,oldText:c,newStart:n,newEnd:i,newText:o})}return t}class m{constructor(e,t,r){this.id=e,this.isBarrier=t,this.markersSnapshot=r}}class v{constructor(e,t,r,n){this.timestamp=e,this.operations=t,this.markersSnapshotBefore=r,this.markersSnapshotAfter=n}}},function(e,t,r){const n=r(45),{ZERO_POINT:i,compare:o,traverse:s}=r(20);e.exports=class extends n{constructor(e,t,r){super(),this.firstSegment=e,this.firstSegment.documentRight=t,this.firstSegment.documentRight.documentParent=this.firstSegment,this.firstSegment.documentLeft=null,this.firstSegment.documentSubtreeExtent=i,t.documentSubtreeExtent=i,this.root=this.firstSegment,this.isSegmentVisible=r}getSegmentIndex(e){let t=e.documentLeft?e.documentLeft.documentSubtreeSize:0;for(;e.documentParent;)e.documentParent.documentRight===e&&(t++,e.documentParent.documentLeft&&(t+=e.documentParent.documentLeft.documentSubtreeSize)),e=e.documentParent;return t}getParent(e){return e.documentParent}setParent(e,t){e.documentParent=t}getLeft(e){return e.documentLeft}setLeft(e,t){e.documentLeft=t}getRight(e){return e.documentRight}setRight(e,t){e.documentRight=t}findSegmentContainingPosition(e){let t=this.root,r=i;for(;t;){let n=r;t.documentLeft&&(n=s(n,t.documentLeft.documentSubtreeExtent));let i=n;if(this.isSegmentVisible(t)&&(i=s(i,t.extent)),o(e,n)<=0&&t!==this.firstSegment)t=t.documentLeft;else{if(!(o(e,i)>0))return{segment:t,start:n,end:i};r=i,t=t.documentRight}}throw new Error("No segment found")}insertBetween(e,t,r){this.splayNode(e),this.splayNode(t),this.root=r,r.documentLeft=e,e.documentParent=r,r.documentRight=t,t.documentParent=r,t.documentLeft=null,this.updateSubtreeExtent(t),this.updateSubtreeExtent(r)}splitSegment(e,t){this.splayNode(e),this.root=t,t.documentParent=null,t.documentLeft=e,e.documentParent=t,t.documentRight=e.documentRight,t.documentRight&&(t.documentRight.documentParent=t),e.documentRight=null,this.updateSubtreeExtent(e),this.updateSubtreeExtent(t)}updateSubtreeExtent(e,t){e.documentSubtreeExtent=i,e.documentSubtreeSize=1,e.documentLeft&&(e.documentSubtreeExtent=s(e.documentSubtreeExtent,e.documentLeft.documentSubtreeExtent),e.documentSubtreeSize+=e.documentLeft.documentSubtreeSize),this.isSegmentVisible(e,t)&&(e.documentSubtreeExtent=s(e.documentSubtreeExtent,e.extent)),e.documentRight&&(e.documentSubtreeExtent=s(e.documentSubtreeExtent,e.documentRight.documentSubtreeExtent),e.documentSubtreeSize+=e.documentRight.documentSubtreeSize)}getSegmentPosition(e){return this.splayNode(e),e.documentLeft?e.documentLeft.documentSubtreeExtent:i}getSegments(){const e=[];return function t(r){r.documentLeft&&t(r.documentLeft),e.push(r),r.documentRight&&t(r.documentRight)}(this.root),e}}},function(e,t,r){const n=r(45),{ZERO_POINT:i,compare:o,traverse:s,traversal:a,characterIndexForPosition:c,extentForText:l}=r(20);e.exports=class extends n{constructor(e){super(),this.startSegment=e,this.startSegment.splitLeft=null,this.startSegment.splitRight=null,this.startSegment.splitParent=null,this.startSegment.splitSubtreeExtent=this.startSegment.extent,this.root=this.startSegment}getStart(){return this.startSegment}getParent(e){return e.splitParent}setParent(e,t){e.splitParent=t}getLeft(e){return e.splitLeft}setLeft(e,t){e.splitLeft=t}getRight(e){return e.splitRight}setRight(e,t){e.splitRight=t}updateSubtreeExtent(e){e.splitSubtreeExtent=i,e.splitLeft&&(e.splitSubtreeExtent=s(e.splitSubtreeExtent,e.splitLeft.splitSubtreeExtent)),e.splitSubtreeExtent=s(e.splitSubtreeExtent,e.extent),e.splitRight&&(e.splitSubtreeExtent=s(e.splitSubtreeExtent,e.splitRight.splitSubtreeExtent))}findSegmentContainingOffset(e){let t=this.root,r=i;for(;t;){let n=r;t.splitLeft&&(n=s(n,t.splitLeft.splitSubtreeExtent));const i=s(n,t.extent);if(o(e,n)<=0&&t.splitLeft)t=t.splitLeft;else{if(!(o(e,i)>0))return this.splayNode(t),t;r=i,t=t.splitRight}}throw new Error("No segment found")}splitSegment(e,t){const r=c(e.text,t);this.splayNode(e);const n=Object.assign({},e);return n.text=e.text.slice(r),n.extent=a(e.extent,t),n.spliceId=Object.assign({},e.spliceId),n.offset=s(n.offset,t),n.deletions=new Set(n.deletions),e.text=e.text.slice(0,r),e.extent=t,e.nextSplit=n,this.root=n,n.splitParent=null,n.splitLeft=e,e.splitParent=n,n.splitRight=e.splitRight,n.splitRight&&(n.splitRight.splitParent=n),e.splitRight=null,this.updateSubtreeExtent(e),this.updateSubtreeExtent(n),n}getSuccessor(e){return e.nextSplit}getSegments(){const e=[];let t=this.getStart();for(;t;)e.push(t),t=t.nextSplit;return e}}},function(e,t,r){const{Operation:n}=r(123);function i(e){const t=new n;switch(e.type){case"splice":t.setSplice(function(e){const t=new n.Splice;t.setSpliceId(o(e.spliceId)),e.insertion&&t.setInsertion(function(e){const t=new n.Splice.Insertion;return t.setText(e.text),t.setLeftDependencyId(o(e.leftDependencyId)),t.setOffsetInLeftDependency(s(e.offsetInLeftDependency)),t.setRightDependencyId(o(e.rightDependencyId)),t.setOffsetInRightDependency(s(e.offsetInRightDependency)),t}(e.insertion));e.deletion&&t.setDeletion(function(e){const t=new n.Splice.Deletion;t.setLeftDependencyId(o(e.leftDependencyId)),t.setOffsetInLeftDependency(s(e.offsetInLeftDependency)),t.setRightDependencyId(o(e.rightDependencyId)),t.setOffsetInRightDependency(s(e.offsetInRightDependency));const r=t.getMaxSeqsBySiteMap();for(const t in e.maxSeqsBySite)r.set(t,e.maxSeqsBySite[t]);return t}(e.deletion));return t}(e));break;case"undo":t.setUndo(function(e){const t=new n.Undo;return t.setSpliceId(o(e.spliceId)),t.setUndoCount(e.undoCount),t}(e));break;case"markers-update":t.setMarkersUpdate(function({siteId:e,updates:t}){const r=new n.MarkersUpdate;r.setSiteId(e);const i=r.getLayerOperationsMap();for(const e in t){const r=t[e],a=new n.MarkersUpdate.LayerOperation;if(r){a.setIsDeletion(!1);const e=a.getMarkerOperationsMap();for(const t in r){const i=r[t],a=new n.MarkersUpdate.MarkerOperation;if(i){a.setIsDeletion(!1);const{range:e,exclusive:t,reversed:r,tailed:c}=i,l=new n.MarkersUpdate.MarkerUpdate,u=new n.MarkersUpdate.LogicalRange;u.setStartDependencyId(o(e.startDependencyId)),u.setOffsetInStartDependency(s(e.offsetInStartDependency)),u.setEndDependencyId(o(e.endDependencyId)),u.setOffsetInEndDependency(s(e.offsetInEndDependency)),l.setRange(u),l.setExclusive(t),l.setReversed(r),l.setTailed(c),a.setMarkerUpdate(l)}else a.setIsDeletion(!0);e.set(t,a)}}else a.setIsDeletion(!0);i.set(e,a)}return r}(e));break;default:throw new Error("Unknown operation type: "+e.type)}return t}function o({site:e,seq:t}){const r=new n.SpliceId;return r.setSite(e),r.setSeq(t),r}function s({row:e,column:t}){const r=new n.Point;return r.setRow(e),r.setColumn(t),r}function a(e){if(e.hasSplice())return function(e){const t=e.getInsertion(),r=e.getDeletion();return{type:"splice",spliceId:u(e.getSpliceId()),insertion:t?c(t):null,deletion:r?l(r):null}}(e.getSplice());if(e.hasUndo())return{type:"undo",spliceId:u((t=e.getUndo()).getSpliceId()),undoCount:t.getUndoCount()};if(e.hasMarkersUpdate())return function(e){const t={};return e.getLayerOperationsMap().forEach((e,r)=>{if(e.getIsDeletion())t[r]=null;else{const n={};e.getMarkerOperationsMap().forEach((e,t)=>{if(e.getIsDeletion())n[t]=null;else{const r=e.getMarkerUpdate(),i=r.getRange(),o={startDependencyId:u(i.getStartDependencyId()),offsetInStartDependency:d(i.getOffsetInStartDependency()),endDependencyId:u(i.getEndDependencyId()),offsetInEndDependency:d(i.getOffsetInEndDependency())};n[t]={range:o,exclusive:r.getExclusive(),reversed:r.getReversed(),tailed:r.getTailed()}}}),t[r]=n}}),{type:"markers-update",siteId:e.getSiteId(),updates:t}}(e.getMarkersUpdate());throw new Error("Unknown operation type");var t}function c(e){return{text:e.getText(),leftDependencyId:u(e.getLeftDependencyId()),offsetInLeftDependency:d(e.getOffsetInLeftDependency()),rightDependencyId:u(e.getRightDependencyId()),offsetInRightDependency:d(e.getOffsetInRightDependency())}}function l(e){const t={};return e.getMaxSeqsBySiteMap().forEach((e,r)=>{t[r]=e}),{leftDependencyId:u(e.getLeftDependencyId()),offsetInLeftDependency:d(e.getOffsetInLeftDependency()),rightDependencyId:u(e.getRightDependencyId()),offsetInRightDependency:d(e.getOffsetInRightDependency()),maxSeqsBySite:t}}function u(e){return{site:e.getSite(),seq:e.getSeq()}}function d(e){return{row:e.getRow(),column:e.getColumn()}}e.exports={serializeOperation:i,deserializeOperation:a,serializeOperationBinary:function(e){return i(e).serializeBinary()},deserializeOperationBinary:function(e){return a(n.deserializeBinary(e))}}},function(e,t,r){var n=r(19),i=n,o=Function("return this")();i.exportSymbol("proto.Operation",null,o),i.exportSymbol("proto.Operation.MarkersUpdate",null,o),i.exportSymbol("proto.Operation.MarkersUpdate.LayerOperation",null,o),i.exportSymbol("proto.Operation.MarkersUpdate.LogicalRange",null,o),i.exportSymbol("proto.Operation.MarkersUpdate.MarkerOperation",null,o),i.exportSymbol("proto.Operation.MarkersUpdate.MarkerUpdate",null,o),i.exportSymbol("proto.Operation.Point",null,o),i.exportSymbol("proto.Operation.Splice",null,o),i.exportSymbol("proto.Operation.Splice.Deletion",null,o),i.exportSymbol("proto.Operation.Splice.Insertion",null,o),i.exportSymbol("proto.Operation.SpliceId",null,o),i.exportSymbol("proto.Operation.Undo",null,o),proto.Operation=function(e){n.Message.initialize(this,e,0,-1,null,proto.Operation.oneofGroups_)},i.inherits(proto.Operation,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.displayName="proto.Operation"),proto.Operation.oneofGroups_=[[1,2,3]],proto.Operation.VariantCase={VARIANT_NOT_SET:0,SPLICE:1,UNDO:2,MARKERS_UPDATE:3},proto.Operation.prototype.getVariantCase=function(){return n.Message.computeOneofCase(this,proto.Operation.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.Operation.prototype.toObject=function(e){return proto.Operation.toObject(e,this)},proto.Operation.toObject=function(e,t){var r,n={splice:(r=t.getSplice())&&proto.Operation.Splice.toObject(e,r),undo:(r=t.getUndo())&&proto.Operation.Undo.toObject(e,r),markersUpdate:(r=t.getMarkersUpdate())&&proto.Operation.MarkersUpdate.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation;return proto.Operation.deserializeBinaryFromReader(r,t)},proto.Operation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.Splice;t.readMessage(r,proto.Operation.Splice.deserializeBinaryFromReader),e.setSplice(r);break;case 2:r=new proto.Operation.Undo;t.readMessage(r,proto.Operation.Undo.deserializeBinaryFromReader),e.setUndo(r);break;case 3:r=new proto.Operation.MarkersUpdate;t.readMessage(r,proto.Operation.MarkersUpdate.deserializeBinaryFromReader),e.setMarkersUpdate(r);break;default:t.skipField()}}return e},proto.Operation.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSplice())&&t.writeMessage(1,r,proto.Operation.Splice.serializeBinaryToWriter),null!=(r=e.getUndo())&&t.writeMessage(2,r,proto.Operation.Undo.serializeBinaryToWriter),null!=(r=e.getMarkersUpdate())&&t.writeMessage(3,r,proto.Operation.MarkersUpdate.serializeBinaryToWriter)},proto.Operation.Splice=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Splice,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Splice.displayName="proto.Operation.Splice"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.prototype.toObject=function(e){return proto.Operation.Splice.toObject(e,this)},proto.Operation.Splice.toObject=function(e,t){var r,n={spliceId:(r=t.getSpliceId())&&proto.Operation.SpliceId.toObject(e,r),insertion:(r=t.getInsertion())&&proto.Operation.Splice.Insertion.toObject(e,r),deletion:(r=t.getDeletion())&&proto.Operation.Splice.Deletion.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.Splice.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Splice;return proto.Operation.Splice.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setSpliceId(r);break;case 2:r=new proto.Operation.Splice.Insertion;t.readMessage(r,proto.Operation.Splice.Insertion.deserializeBinaryFromReader),e.setInsertion(r);break;case 3:r=new proto.Operation.Splice.Deletion;t.readMessage(r,proto.Operation.Splice.Deletion.deserializeBinaryFromReader),e.setDeletion(r);break;default:t.skipField()}}return e},proto.Operation.Splice.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Splice.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSpliceId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getInsertion())&&t.writeMessage(2,r,proto.Operation.Splice.Insertion.serializeBinaryToWriter),null!=(r=e.getDeletion())&&t.writeMessage(3,r,proto.Operation.Splice.Deletion.serializeBinaryToWriter)},proto.Operation.Splice.Insertion=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Splice.Insertion,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Splice.Insertion.displayName="proto.Operation.Splice.Insertion"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.Insertion.prototype.toObject=function(e){return proto.Operation.Splice.Insertion.toObject(e,this)},proto.Operation.Splice.Insertion.toObject=function(e,t){var r,i={text:n.Message.getFieldWithDefault(t,2,""),leftDependencyId:(r=t.getLeftDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInLeftDependency:(r=t.getOffsetInLeftDependency())&&proto.Operation.Point.toObject(e,r),rightDependencyId:(r=t.getRightDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInRightDependency:(r=t.getOffsetInRightDependency())&&proto.Operation.Point.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.Splice.Insertion.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Splice.Insertion;return proto.Operation.Splice.Insertion.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.Insertion.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=t.readString();e.setText(r);break;case 3:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setLeftDependencyId(r);break;case 4:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInLeftDependency(r);break;case 5:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setRightDependencyId(r);break;case 6:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInRightDependency(r);break;default:t.skipField()}}return e},proto.Operation.Splice.Insertion.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Splice.Insertion.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.Insertion.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getText()).length>0&&t.writeString(2,r),null!=(r=e.getLeftDependencyId())&&t.writeMessage(3,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInLeftDependency())&&t.writeMessage(4,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getRightDependencyId())&&t.writeMessage(5,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInRightDependency())&&t.writeMessage(6,r,proto.Operation.Point.serializeBinaryToWriter)},proto.Operation.Splice.Insertion.prototype.getText=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.Operation.Splice.Insertion.prototype.setText=function(e){n.Message.setField(this,2,e)},proto.Operation.Splice.Insertion.prototype.getLeftDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,3)},proto.Operation.Splice.Insertion.prototype.setLeftDependencyId=function(e){n.Message.setWrapperField(this,3,e)},proto.Operation.Splice.Insertion.prototype.clearLeftDependencyId=function(){this.setLeftDependencyId(void 0)},proto.Operation.Splice.Insertion.prototype.hasLeftDependencyId=function(){return null!=n.Message.getField(this,3)},proto.Operation.Splice.Insertion.prototype.getOffsetInLeftDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,4)},proto.Operation.Splice.Insertion.prototype.setOffsetInLeftDependency=function(e){n.Message.setWrapperField(this,4,e)},proto.Operation.Splice.Insertion.prototype.clearOffsetInLeftDependency=function(){this.setOffsetInLeftDependency(void 0)},proto.Operation.Splice.Insertion.prototype.hasOffsetInLeftDependency=function(){return null!=n.Message.getField(this,4)},proto.Operation.Splice.Insertion.prototype.getRightDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,5)},proto.Operation.Splice.Insertion.prototype.setRightDependencyId=function(e){n.Message.setWrapperField(this,5,e)},proto.Operation.Splice.Insertion.prototype.clearRightDependencyId=function(){this.setRightDependencyId(void 0)},proto.Operation.Splice.Insertion.prototype.hasRightDependencyId=function(){return null!=n.Message.getField(this,5)},proto.Operation.Splice.Insertion.prototype.getOffsetInRightDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,6)},proto.Operation.Splice.Insertion.prototype.setOffsetInRightDependency=function(e){n.Message.setWrapperField(this,6,e)},proto.Operation.Splice.Insertion.prototype.clearOffsetInRightDependency=function(){this.setOffsetInRightDependency(void 0)},proto.Operation.Splice.Insertion.prototype.hasOffsetInRightDependency=function(){return null!=n.Message.getField(this,6)},proto.Operation.Splice.Deletion=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Splice.Deletion,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Splice.Deletion.displayName="proto.Operation.Splice.Deletion"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Splice.Deletion.prototype.toObject=function(e){return proto.Operation.Splice.Deletion.toObject(e,this)},proto.Operation.Splice.Deletion.toObject=function(e,t){var r,n={leftDependencyId:(r=t.getLeftDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInLeftDependency:(r=t.getOffsetInLeftDependency())&&proto.Operation.Point.toObject(e,r),rightDependencyId:(r=t.getRightDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInRightDependency:(r=t.getOffsetInRightDependency())&&proto.Operation.Point.toObject(e,r),maxSeqsBySiteMap:(r=t.getMaxSeqsBySiteMap())?r.toObject(e,void 0):[]};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.Splice.Deletion.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Splice.Deletion;return proto.Operation.Splice.Deletion.deserializeBinaryFromReader(r,t)},proto.Operation.Splice.Deletion.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 2:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setLeftDependencyId(r);break;case 3:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInLeftDependency(r);break;case 4:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setRightDependencyId(r);break;case 5:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInRightDependency(r);break;case 6:r=e.getMaxSeqsBySiteMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readUint32,n.BinaryReader.prototype.readUint32)}));break;default:t.skipField()}}return e},proto.Operation.Splice.Deletion.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Splice.Deletion.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Splice.Deletion.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getLeftDependencyId())&&t.writeMessage(2,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInLeftDependency())&&t.writeMessage(3,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getRightDependencyId())&&t.writeMessage(4,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInRightDependency())&&t.writeMessage(5,r,proto.Operation.Point.serializeBinaryToWriter),(r=e.getMaxSeqsBySiteMap(!0))&&r.getLength()>0&&r.serializeBinary(6,t,n.BinaryWriter.prototype.writeUint32,n.BinaryWriter.prototype.writeUint32)},proto.Operation.Splice.Deletion.prototype.getLeftDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,2)},proto.Operation.Splice.Deletion.prototype.setLeftDependencyId=function(e){n.Message.setWrapperField(this,2,e)},proto.Operation.Splice.Deletion.prototype.clearLeftDependencyId=function(){this.setLeftDependencyId(void 0)},proto.Operation.Splice.Deletion.prototype.hasLeftDependencyId=function(){return null!=n.Message.getField(this,2)},proto.Operation.Splice.Deletion.prototype.getOffsetInLeftDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,3)},proto.Operation.Splice.Deletion.prototype.setOffsetInLeftDependency=function(e){n.Message.setWrapperField(this,3,e)},proto.Operation.Splice.Deletion.prototype.clearOffsetInLeftDependency=function(){this.setOffsetInLeftDependency(void 0)},proto.Operation.Splice.Deletion.prototype.hasOffsetInLeftDependency=function(){return null!=n.Message.getField(this,3)},proto.Operation.Splice.Deletion.prototype.getRightDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,4)},proto.Operation.Splice.Deletion.prototype.setRightDependencyId=function(e){n.Message.setWrapperField(this,4,e)},proto.Operation.Splice.Deletion.prototype.clearRightDependencyId=function(){this.setRightDependencyId(void 0)},proto.Operation.Splice.Deletion.prototype.hasRightDependencyId=function(){return null!=n.Message.getField(this,4)},proto.Operation.Splice.Deletion.prototype.getOffsetInRightDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,5)},proto.Operation.Splice.Deletion.prototype.setOffsetInRightDependency=function(e){n.Message.setWrapperField(this,5,e)},proto.Operation.Splice.Deletion.prototype.clearOffsetInRightDependency=function(){this.setOffsetInRightDependency(void 0)},proto.Operation.Splice.Deletion.prototype.hasOffsetInRightDependency=function(){return null!=n.Message.getField(this,5)},proto.Operation.Splice.Deletion.prototype.getMaxSeqsBySiteMap=function(e){return n.Message.getMapField(this,6,e,null)},proto.Operation.Splice.Deletion.prototype.clearMaxSeqsBySiteMap=function(){this.getMaxSeqsBySiteMap().clear()},proto.Operation.Splice.prototype.getSpliceId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.Splice.prototype.setSpliceId=function(e){n.Message.setWrapperField(this,1,e)},proto.Operation.Splice.prototype.clearSpliceId=function(){this.setSpliceId(void 0)},proto.Operation.Splice.prototype.hasSpliceId=function(){return null!=n.Message.getField(this,1)},proto.Operation.Splice.prototype.getInsertion=function(){return n.Message.getWrapperField(this,proto.Operation.Splice.Insertion,2)},proto.Operation.Splice.prototype.setInsertion=function(e){n.Message.setWrapperField(this,2,e)},proto.Operation.Splice.prototype.clearInsertion=function(){this.setInsertion(void 0)},proto.Operation.Splice.prototype.hasInsertion=function(){return null!=n.Message.getField(this,2)},proto.Operation.Splice.prototype.getDeletion=function(){return n.Message.getWrapperField(this,proto.Operation.Splice.Deletion,3)},proto.Operation.Splice.prototype.setDeletion=function(e){n.Message.setWrapperField(this,3,e)},proto.Operation.Splice.prototype.clearDeletion=function(){this.setDeletion(void 0)},proto.Operation.Splice.prototype.hasDeletion=function(){return null!=n.Message.getField(this,3)},proto.Operation.Undo=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Undo,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Undo.displayName="proto.Operation.Undo"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Undo.prototype.toObject=function(e){return proto.Operation.Undo.toObject(e,this)},proto.Operation.Undo.toObject=function(e,t){var r,i={spliceId:(r=t.getSpliceId())&&proto.Operation.SpliceId.toObject(e,r),undoCount:n.Message.getFieldWithDefault(t,2,0)};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.Undo.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Undo;return proto.Operation.Undo.deserializeBinaryFromReader(r,t)},proto.Operation.Undo.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setSpliceId(r);break;case 2:r=t.readUint32();e.setUndoCount(r);break;default:t.skipField()}}return e},proto.Operation.Undo.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Undo.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Undo.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getSpliceId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),0!==(r=e.getUndoCount())&&t.writeUint32(2,r)},proto.Operation.Undo.prototype.getSpliceId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.Undo.prototype.setSpliceId=function(e){n.Message.setWrapperField(this,1,e)},proto.Operation.Undo.prototype.clearSpliceId=function(){this.setSpliceId(void 0)},proto.Operation.Undo.prototype.hasSpliceId=function(){return null!=n.Message.getField(this,1)},proto.Operation.Undo.prototype.getUndoCount=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.Operation.Undo.prototype.setUndoCount=function(e){n.Message.setField(this,2,e)},proto.Operation.MarkersUpdate=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.displayName="proto.Operation.MarkersUpdate"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.toObject(e,this)},proto.Operation.MarkersUpdate.toObject=function(e,t){var r,i={siteId:n.Message.getFieldWithDefault(t,1,0),layerOperationsMap:(r=t.getLayerOperationsMap())?r.toObject(e,proto.Operation.MarkersUpdate.LayerOperation.toObject):[]};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.MarkersUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate;return proto.Operation.MarkersUpdate.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setSiteId(r);break;case 2:r=e.getLayerOperationsMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readUint32,n.BinaryReader.prototype.readMessage,proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getSiteId())&&t.writeUint32(1,r),(r=e.getLayerOperationsMap(!0))&&r.getLength()>0&&r.serializeBinary(2,t,n.BinaryWriter.prototype.writeUint32,n.BinaryWriter.prototype.writeMessage,proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LayerOperation=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate.LayerOperation,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.LayerOperation.displayName="proto.Operation.MarkersUpdate.LayerOperation"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.LayerOperation.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.LayerOperation.toObject(e,this)},proto.Operation.MarkersUpdate.LayerOperation.toObject=function(e,t){var r,i={isDeletion:n.Message.getFieldWithDefault(t,1,!1),markerOperationsMap:(r=t.getMarkerOperationsMap())?r.toObject(e,proto.Operation.MarkersUpdate.MarkerOperation.toObject):[]};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.MarkersUpdate.LayerOperation.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate.LayerOperation;return proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.LayerOperation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setIsDeletion(r);break;case 2:r=e.getMarkerOperationsMap();t.readMessage(r,(function(e,t){n.Map.deserializeBinary(e,t,n.BinaryReader.prototype.readUint32,n.BinaryReader.prototype.readMessage,proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader)}));break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.LayerOperation.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.LayerOperation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIsDeletion())&&t.writeBool(1,r),(r=e.getMarkerOperationsMap(!0))&&r.getLength()>0&&r.serializeBinary(2,t,n.BinaryWriter.prototype.writeUint32,n.BinaryWriter.prototype.writeMessage,proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LayerOperation.prototype.getIsDeletion=function(){return n.Message.getFieldWithDefault(this,1,!1)},proto.Operation.MarkersUpdate.LayerOperation.prototype.setIsDeletion=function(e){n.Message.setField(this,1,e)},proto.Operation.MarkersUpdate.LayerOperation.prototype.getMarkerOperationsMap=function(e){return n.Message.getMapField(this,2,e,proto.Operation.MarkersUpdate.MarkerOperation)},proto.Operation.MarkersUpdate.LayerOperation.prototype.clearMarkerOperationsMap=function(){this.getMarkerOperationsMap().clear()},proto.Operation.MarkersUpdate.MarkerOperation=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate.MarkerOperation,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.MarkerOperation.displayName="proto.Operation.MarkersUpdate.MarkerOperation"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.MarkerOperation.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.MarkerOperation.toObject(e,this)},proto.Operation.MarkersUpdate.MarkerOperation.toObject=function(e,t){var r,i={isDeletion:n.Message.getFieldWithDefault(t,1,!1),markerUpdate:(r=t.getMarkerUpdate())&&proto.Operation.MarkersUpdate.MarkerUpdate.toObject(e,r)};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate.MarkerOperation;return proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.MarkerOperation.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readBool();e.setIsDeletion(r);break;case 2:r=new proto.Operation.MarkersUpdate.MarkerUpdate;t.readMessage(r,proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader),e.setMarkerUpdate(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.MarkerOperation.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.MarkerOperation.serializeBinaryToWriter=function(e,t){var r=void 0;(r=e.getIsDeletion())&&t.writeBool(1,r),null!=(r=e.getMarkerUpdate())&&t.writeMessage(2,r,proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.getIsDeletion=function(){return n.Message.getFieldWithDefault(this,1,!1)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.setIsDeletion=function(e){n.Message.setField(this,1,e)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.getMarkerUpdate=function(){return n.Message.getWrapperField(this,proto.Operation.MarkersUpdate.MarkerUpdate,2)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.setMarkerUpdate=function(e){n.Message.setWrapperField(this,2,e)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.clearMarkerUpdate=function(){this.setMarkerUpdate(void 0)},proto.Operation.MarkersUpdate.MarkerOperation.prototype.hasMarkerUpdate=function(){return null!=n.Message.getField(this,2)},proto.Operation.MarkersUpdate.MarkerUpdate=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate.MarkerUpdate,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.MarkerUpdate.displayName="proto.Operation.MarkersUpdate.MarkerUpdate"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.MarkerUpdate.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.MarkerUpdate.toObject(e,this)},proto.Operation.MarkersUpdate.MarkerUpdate.toObject=function(e,t){var r,i={range:(r=t.getRange())&&proto.Operation.MarkersUpdate.LogicalRange.toObject(e,r),exclusive:n.Message.getFieldWithDefault(t,2,!1),reversed:n.Message.getFieldWithDefault(t,3,!1),tailed:n.Message.getFieldWithDefault(t,4,!1)};return e&&(i.$jspbMessageInstance=t),i}),proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate.MarkerUpdate;return proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.MarkerUpdate.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.MarkersUpdate.LogicalRange;t.readMessage(r,proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader),e.setRange(r);break;case 2:r=t.readBool();e.setExclusive(r);break;case 3:r=t.readBool();e.setReversed(r);break;case 4:r=t.readBool();e.setTailed(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.MarkerUpdate.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getRange())&&t.writeMessage(1,r,proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter),(r=e.getExclusive())&&t.writeBool(2,r),(r=e.getReversed())&&t.writeBool(3,r),(r=e.getTailed())&&t.writeBool(4,r)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getRange=function(){return n.Message.getWrapperField(this,proto.Operation.MarkersUpdate.LogicalRange,1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setRange=function(e){n.Message.setWrapperField(this,1,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.clearRange=function(){this.setRange(void 0)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.hasRange=function(){return null!=n.Message.getField(this,1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getExclusive=function(){return n.Message.getFieldWithDefault(this,2,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setExclusive=function(e){n.Message.setField(this,2,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getReversed=function(){return n.Message.getFieldWithDefault(this,3,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setReversed=function(e){n.Message.setField(this,3,e)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.getTailed=function(){return n.Message.getFieldWithDefault(this,4,!1)},proto.Operation.MarkersUpdate.MarkerUpdate.prototype.setTailed=function(e){n.Message.setField(this,4,e)},proto.Operation.MarkersUpdate.LogicalRange=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.MarkersUpdate.LogicalRange,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.MarkersUpdate.LogicalRange.displayName="proto.Operation.MarkersUpdate.LogicalRange"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.MarkersUpdate.LogicalRange.prototype.toObject=function(e){return proto.Operation.MarkersUpdate.LogicalRange.toObject(e,this)},proto.Operation.MarkersUpdate.LogicalRange.toObject=function(e,t){var r,n={startDependencyId:(r=t.getStartDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInStartDependency:(r=t.getOffsetInStartDependency())&&proto.Operation.Point.toObject(e,r),endDependencyId:(r=t.getEndDependencyId())&&proto.Operation.SpliceId.toObject(e,r),offsetInEndDependency:(r=t.getOffsetInEndDependency())&&proto.Operation.Point.toObject(e,r)};return e&&(n.$jspbMessageInstance=t),n}),proto.Operation.MarkersUpdate.LogicalRange.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.MarkersUpdate.LogicalRange;return proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader(r,t)},proto.Operation.MarkersUpdate.LogicalRange.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setStartDependencyId(r);break;case 2:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInStartDependency(r);break;case 3:r=new proto.Operation.SpliceId;t.readMessage(r,proto.Operation.SpliceId.deserializeBinaryFromReader),e.setEndDependencyId(r);break;case 4:r=new proto.Operation.Point;t.readMessage(r,proto.Operation.Point.deserializeBinaryFromReader),e.setOffsetInEndDependency(r);break;default:t.skipField()}}return e},proto.Operation.MarkersUpdate.LogicalRange.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.MarkersUpdate.LogicalRange.serializeBinaryToWriter=function(e,t){var r=void 0;null!=(r=e.getStartDependencyId())&&t.writeMessage(1,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInStartDependency())&&t.writeMessage(2,r,proto.Operation.Point.serializeBinaryToWriter),null!=(r=e.getEndDependencyId())&&t.writeMessage(3,r,proto.Operation.SpliceId.serializeBinaryToWriter),null!=(r=e.getOffsetInEndDependency())&&t.writeMessage(4,r,proto.Operation.Point.serializeBinaryToWriter)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getStartDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,1)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setStartDependencyId=function(e){n.Message.setWrapperField(this,1,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearStartDependencyId=function(){this.setStartDependencyId(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasStartDependencyId=function(){return null!=n.Message.getField(this,1)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getOffsetInStartDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,2)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setOffsetInStartDependency=function(e){n.Message.setWrapperField(this,2,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearOffsetInStartDependency=function(){this.setOffsetInStartDependency(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasOffsetInStartDependency=function(){return null!=n.Message.getField(this,2)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getEndDependencyId=function(){return n.Message.getWrapperField(this,proto.Operation.SpliceId,3)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setEndDependencyId=function(e){n.Message.setWrapperField(this,3,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearEndDependencyId=function(){this.setEndDependencyId(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasEndDependencyId=function(){return null!=n.Message.getField(this,3)},proto.Operation.MarkersUpdate.LogicalRange.prototype.getOffsetInEndDependency=function(){return n.Message.getWrapperField(this,proto.Operation.Point,4)},proto.Operation.MarkersUpdate.LogicalRange.prototype.setOffsetInEndDependency=function(e){n.Message.setWrapperField(this,4,e)},proto.Operation.MarkersUpdate.LogicalRange.prototype.clearOffsetInEndDependency=function(){this.setOffsetInEndDependency(void 0)},proto.Operation.MarkersUpdate.LogicalRange.prototype.hasOffsetInEndDependency=function(){return null!=n.Message.getField(this,4)},proto.Operation.MarkersUpdate.prototype.getSiteId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.Operation.MarkersUpdate.prototype.setSiteId=function(e){n.Message.setField(this,1,e)},proto.Operation.MarkersUpdate.prototype.getLayerOperationsMap=function(e){return n.Message.getMapField(this,2,e,proto.Operation.MarkersUpdate.LayerOperation)},proto.Operation.MarkersUpdate.prototype.clearLayerOperationsMap=function(){this.getLayerOperationsMap().clear()},proto.Operation.SpliceId=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.SpliceId,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.SpliceId.displayName="proto.Operation.SpliceId"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.SpliceId.prototype.toObject=function(e){return proto.Operation.SpliceId.toObject(e,this)},proto.Operation.SpliceId.toObject=function(e,t){var r={site:n.Message.getFieldWithDefault(t,1,0),seq:n.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Operation.SpliceId.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.SpliceId;return proto.Operation.SpliceId.deserializeBinaryFromReader(r,t)},proto.Operation.SpliceId.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setSite(r);break;case 2:r=t.readUint32();e.setSeq(r);break;default:t.skipField()}}return e},proto.Operation.SpliceId.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.SpliceId.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.SpliceId.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getSite())&&t.writeUint32(1,r),0!==(r=e.getSeq())&&t.writeUint32(2,r)},proto.Operation.SpliceId.prototype.getSite=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.Operation.SpliceId.prototype.setSite=function(e){n.Message.setField(this,1,e)},proto.Operation.SpliceId.prototype.getSeq=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.Operation.SpliceId.prototype.setSeq=function(e){n.Message.setField(this,2,e)},proto.Operation.Point=function(e){n.Message.initialize(this,e,0,-1,null,null)},i.inherits(proto.Operation.Point,n.Message),i.DEBUG&&!COMPILED&&(proto.Operation.Point.displayName="proto.Operation.Point"),n.Message.GENERATE_TO_OBJECT&&(proto.Operation.Point.prototype.toObject=function(e){return proto.Operation.Point.toObject(e,this)},proto.Operation.Point.toObject=function(e,t){var r={row:n.Message.getFieldWithDefault(t,1,0),column:n.Message.getFieldWithDefault(t,2,0)};return e&&(r.$jspbMessageInstance=t),r}),proto.Operation.Point.deserializeBinary=function(e){var t=new n.BinaryReader(e),r=new proto.Operation.Point;return proto.Operation.Point.deserializeBinaryFromReader(r,t)},proto.Operation.Point.deserializeBinaryFromReader=function(e,t){for(;t.nextField()&&!t.isEndGroup();){switch(t.getFieldNumber()){case 1:var r=t.readUint32();e.setRow(r);break;case 2:r=t.readUint32();e.setColumn(r);break;default:t.skipField()}}return e},proto.Operation.Point.prototype.serializeBinary=function(){var e=new n.BinaryWriter;return proto.Operation.Point.serializeBinaryToWriter(this,e),e.getResultBuffer()},proto.Operation.Point.serializeBinaryToWriter=function(e,t){var r=void 0;0!==(r=e.getRow())&&t.writeUint32(1,r),0!==(r=e.getColumn())&&t.writeUint32(2,r)},proto.Operation.Point.prototype.getRow=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.Operation.Point.prototype.setRow=function(e){n.Message.setField(this,1,e)},proto.Operation.Point.prototype.getColumn=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.Operation.Point.prototype.setColumn=function(e){n.Message.setField(this,2,e)},proto.Operation.prototype.getSplice=function(){return n.Message.getWrapperField(this,proto.Operation.Splice,1)},proto.Operation.prototype.setSplice=function(e){n.Message.setOneofWrapperField(this,1,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearSplice=function(){this.setSplice(void 0)},proto.Operation.prototype.hasSplice=function(){return null!=n.Message.getField(this,1)},proto.Operation.prototype.getUndo=function(){return n.Message.getWrapperField(this,proto.Operation.Undo,2)},proto.Operation.prototype.setUndo=function(e){n.Message.setOneofWrapperField(this,2,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearUndo=function(){this.setUndo(void 0)},proto.Operation.prototype.hasUndo=function(){return null!=n.Message.getField(this,2)},proto.Operation.prototype.getMarkersUpdate=function(){return n.Message.getWrapperField(this,proto.Operation.MarkersUpdate,3)},proto.Operation.prototype.setMarkersUpdate=function(e){n.Message.setOneofWrapperField(this,3,proto.Operation.oneofGroups_[0],e)},proto.Operation.prototype.clearMarkersUpdate=function(){this.setMarkersUpdate(void 0)},proto.Operation.prototype.hasMarkersUpdate=function(){return null!=n.Message.getField(this,3)},i.object.extend(t,proto)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));r(44);function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var a=r(2),c=a.CompositeDisposable,l=a.Emitter,u=r(10),d=(r(21),r(125)),p=r(46);function h(){}var f=function(){function e(t){var r=t.id,n=t.bufferProxy,i=t.selectionLayerIdsBySiteId,o=t.selections,s=t.router,a=t.siteId,u=t.didDispose,p=t.portal;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=r,this.siteId=a,this.isHost=1===this.siteId,this.bufferProxy=n,this.router=s,this.emitDidDispose=u||h,this.selectionLayerIdsBySiteId=i||new Map,this.localHiddenSelectionsLayerId=n.getNextMarkerLayerId(),this.delegate=new d,this.emitter=new l,this.selectionsVisible=!0,this.portal=p,this.createLocalSelectionsLayer(o),this.subscriptions=new c,this.subscriptions.add(this.bufferProxy.onDidUpdateMarkers(this.bufferProxyDidUpdateMarkers.bind(this))),this.subscriptions.add(this.router.onNotification("/editors/".concat(r,"/updates"),this.receiveUpdate.bind(this))),this.isHost?this.subscriptions.add(this.router.onRequest("/editors/".concat(r),this.receiveFetch.bind(this))):this.subscriptions.add(this.router.onNotification("/editors/".concat(r,"/disposal"),this.dispose.bind(this)))}return s(e,null,[{key:"deserialize",value:function(t,r){var n=t.getId(),i=t.getBufferProxyId(),o=r.bufferProxiesById.get(i),s=new Map;return t.getSelectionLayerIdsBySiteIdMap().forEach((function(e,t){s.set(t,e)})),new e(Object.assign({id:n,bufferProxy:o,selectionLayerIdsBySiteId:s},r))}}]),s(e,[{key:"dispose",value:function(){this.subscriptions.dispose(),this.delegate.dispose(),this.isHost&&this.router.notify({channelId:"/editors/".concat(this.id,"/disposal")}),this.emitDidDispose()}},{key:"serialize",value:function(){var e=new u.EditorProxy;e.setId(this.id),e.setBufferProxyId(this.bufferProxy.id);var t=e.getSelectionLayerIdsBySiteIdMap();return this.selectionLayerIdsBySiteId.forEach((function(e,r){t.set(r,e)})),e}},{key:"getMetadata",value:function(){return new p({id:this.id,bufferProxyId:this.bufferProxy.id,bufferProxyURI:this.bufferProxy.uri})}},{key:"setDelegate",value:function(e){this.delegate=e||new d,this.bufferProxyDidUpdateMarkers(this.bufferProxy.getMarkers(),{initialUpdate:!0})}},{key:"createLocalSelectionsLayer",value:function(e){var t=this.bufferProxy.getNextMarkerLayerId();this.selectionLayerIdsBySiteId.set(this.siteId,t);var r=new u.EditorProxyUpdate.SelectionsUpdate;r.getSelectionLayerIdsBySiteIdMap().set(this.siteId,t);var n=new u.EditorProxyUpdate;n.setSelectionsUpdate(r),this.router.notify({channelId:"/editors/".concat(this.id,"/updates"),body:n.serializeBinary()}),e&&this.updateSelections(e,{initialUpdate:!0})}},{key:"updateSelections",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.bufferProxy.updateMarkers(i({},this.localHiddenSelectionsLayerId,e),!1),this.selectionsVisible){var r=this.selectionLayerIdsBySiteId.get(this.siteId);this.bufferProxy.updateMarkers(i({},r,e))}this.emitter.emit("did-update-local-selections",t)}},{key:"bufferProxyDidUpdateMarkers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Map;for(var n in e)if((n=parseInt(n))!==this.siteId){var i=e[n];for(var o in i)if(o=parseInt(o),this.selectionLayerIdsBySiteId.get(n)===o){var s=i[o];this.delegate.updateSelectionsForSiteId(n,s),r.set(n,o)}}this.emitter.emit("did-update-remote-selections",{selectionLayerIdsBySiteId:r,initialUpdate:t.initialUpdate})}},{key:"didScroll",value:function(e){this.emitter.emit("did-scroll")}},{key:"onDidScroll",value:function(e){return this.emitter.on("did-scroll",e)}},{key:"onDidUpdateLocalSelections",value:function(e){return this.emitter.on("did-update-local-selections",e)}},{key:"onDidUpdateRemoteSelections",value:function(e){return this.emitter.on("did-update-remote-selections",e)}},{key:"cursorPositionForSiteId",value:function(e){var t;if(e===this.siteId)t=this.getLocalHiddenSelections();else if(this.selectionLayerIdsBySiteId.has(e)){var r=this.bufferProxy.getMarkers()[e],i=this.selectionLayerIdsBySiteId.get(e);t=r?r[i]:{}}else t={};var o=Object.keys(t).map((function(e){return parseInt(e)}));if(o.length>0){var s=t[Math.max.apply(Math,n(o))];return s.reversed?s.range.start:s.range.end}}},{key:"isScrollNeededToViewPosition",value:function(e){return this.delegate.isScrollNeededToViewPosition(e)}},{key:"hideSelections",value:function(){var e=this.selectionLayerIdsBySiteId.get(this.siteId);if(this.selectionsVisible&&e){var t={};for(var r in this.getLocalHiddenSelections())t[r]=null;this.bufferProxy.updateMarkers(i({},e,t))}this.selectionsVisible=!1}},{key:"showSelections",value:function(){var e=this.selectionLayerIdsBySiteId.get(this.siteId);!this.selectionsVisible&&e&&this.bufferProxy.updateMarkers(i({},e,this.getLocalHiddenSelections())),this.selectionsVisible=!0}},{key:"getLocalHiddenSelections",value:function(){var e=this.bufferProxy.getMarkers()[this.siteId];return(e?e[this.localHiddenSelectionsLayerId]:null)||{}}},{key:"hostDidDisconnect",value:function(){var e=this;this.selectionLayerIdsBySiteId.forEach((function(t,r){e.siteDidDisconnect(r)}))}},{key:"siteDidDisconnect",value:function(e){this.selectionLayerIdsBySiteId.delete(e),this.delegate.clearSelectionsForSiteId(e)}},{key:"receiveFetch",value:function(e){var t=e.requestId;this.router.respond({requestId:t,body:this.serialize().serializeBinary()})}},{key:"receiveUpdate",value:function(e){var t=e.body,r=u.EditorProxyUpdate.deserializeBinary(t);r.hasSelectionsUpdate()&&this.receiveSelectionsUpdate(r.getSelectionsUpdate())}},{key:"receiveSelectionsUpdate",value:function(e){var t=this;e.getSelectionLayerIdsBySiteIdMap().forEach((function(e,r){t.selectionLayerIdsBySiteId.set(r,e)}))}}]),e}()},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"dispose",value:function(){}},{key:"isScrollNeededToViewPosition",value:function(){}},{key:"updateActivePositions",value:function(){}},{key:"updateSelectionsForSiteId",value:function(){}},{key:"clearSelectionsForSiteId",value:function(){}},{key:"updateTether",value:function(){}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,r){(function(t){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(8),o=r(2),s=o.CompositeDisposable,a=o.Emitter,c=r(10),l=c.NetworkMessage,u=c.PeerIdentity,d=r(4),p=r(18);function h(e){var t=new u;return t.setLogin(e.login),t}function f(e){return{login:e.getLogin()}}e.exports=function(){function e(t){var r=t.id,n=t.peerPool,i=t.isHub,o=t.connectionTimeout;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=r,this.peerPool=n,this.isHub=i,this.connectionTimeout=o||5e3,this.emitter=new a,this.memberIdentitiesById=new Map([[this.getPeerId(),this.peerPool.getPeerIdentity(this.getPeerId())]]),this.connectedMemberIds=new Set,this.resetConnectedMembers(),this.isHub?(this.spokes=new Set,this.state="connected"):this.state="disconnected",this.subscriptions=new s(n.onDisconnection(this.didLoseConnectionToPeer.bind(this)),n.onReceive(this.receive.bind(this)))}var r,o,c;return r=e,(o=[{key:"dispose",value:function(){this.subscriptions.dispose(),this.disconnect()}},{key:"connectTo",value:function(e){var t,r,n,o=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return i(!this.isHub,"The hub should only receive connections"),i(!this.hubId,"Can connect to hub only once"),this.state="connecting",this.hubId=e,s.next=6,regeneratorRuntime.awrap(this.peerPool.connectTo(this.hubId));case 6:s.prev=6,(t=new l.StarJoinRequest).setSenderId(this.getPeerId()),(r=new l).setStarJoinRequest(t),r.setNetworkId(this.id),this.send(this.hubId,r.serializeBinary()),s.next=20;break;case 15:throw s.prev=15,s.t0=s.catch(6),this.state="disconnected",this.hubId=null,s.t0;case 20:return n=new d.NetworkConnectionError("Connecting to the portal network timed out"),s.abrupt("return",new Promise((function(e,t){o.resolveConnectionPromise=e,setTimeout((function(){"connecting"===o.state&&(o.state="timeout",o.disconnect(),t(n))}),o.connectionTimeout)})));case 22:case"end":return s.stop()}}),null,this,[[6,15]])}},{key:"disconnect",value:function(){if("disconnected"!==this.state){var e=new l.StarLeaveNotification;e.setMemberId(this.getPeerId()),e.setConnectionLost(!1);var t=new l;t.setStarLeaveNotification(e),t.setNetworkId(this.id),this.isHub?(this.forwardBroadcast(this.getPeerId(),t.serializeBinary()),this.spokes.clear()):(this.send(this.hubId,t.serializeBinary()),this.hubId=null),this.resetConnectedMembers(),this.state="disconnected"}}},{key:"unicast",value:function(e,t){t=p(t);var r=new l.StarUnicast;r.setSenderId(this.peerPool.peerId),r.setRecipientId(e),r.setBody(t);var n=new l;n.setStarUnicast(r),n.setNetworkId(this.id);var i=n.serializeBinary();this.isHub?this.forwardUnicast(e,i):this.send(this.hubId,i)}},{key:"broadcast",value:function(e){e=p(e);var t=new l.StarBroadcast;t.setSenderId(this.peerPool.peerId),t.setBody(e);var r=new l;r.setStarBroadcast(t),r.setNetworkId(this.id);var n=r.serializeBinary();this.isHub?this.forwardBroadcast(this.peerPool.peerId,n):this.send(this.hubId,n)}},{key:"onMemberJoin",value:function(e){return this.emitter.on("join",e)}},{key:"onMemberLeave",value:function(e){return this.emitter.on("leave",e)}},{key:"onReceive",value:function(e){return this.emitter.on("receive",e)}},{key:"getMemberIds",value:function(){return Array.from(this.connectedMemberIds)}},{key:"getMemberIdentity",value:function(e){if(console.log("getting member identity for peerid"),console.log(e),!this.memberIdentitiesById.has(e)){var r=(new Error).stack,n={localPeerId:this.getPeerId(),requestedPeerId:e,isHub:this.isHub,networkState:this.state,connectedMemberIds:Array.from(this.connectedMemberIds),memberIdsWithIdentity:Array.from(this.memberIdentitiesById.keys())};t.nextTick((function(){var e=new Error("Attempted to get identity for non-connected member");throw e.metadata=n,e.privateMetadata={originalStackTrace:r},e.privateMetadataDescription=r,e}))}return this.memberIdentitiesById.get(e)}},{key:"getPeerId",value:function(){return this.peerPool.peerId}},{key:"didLoseConnectionToPeer",value:function(e){var t=e.peerId;if(this.connectedMemberIds.has(t)){if(this.isHub){this.spokes.delete(t);var r=new l.StarLeaveNotification;r.setMemberId(t),r.setConnectionLost(!0);var n=new l;n.setStarLeaveNotification(r),n.setNetworkId(this.id),this.forwardBroadcast(t,n.serializeBinary())}this.memberDidLeave(t,!0)}}},{key:"receive",value:function(e){e.senderId;var t=e.message;if("disconnected"!==this.state){var r=l.deserializeBinary(t);r.getNetworkId()===this.id&&(r.hasStarJoinRequest()?this.receiveJoinRequest(t,r.getStarJoinRequest()):r.hasStarJoinResponse()?this.receiveJoinResponse(r.getStarJoinResponse()):r.hasStarJoinNotification()?this.receiveJoinNotification(r.getStarJoinNotification()):r.hasStarLeaveNotification()?this.receiveLeaveNotification(t,r.getStarLeaveNotification()):r.hasStarUnicast()?this.receiveUnicast(t,r.getStarUnicast()):r.hasStarBroadcast()&&this.receiveBroadcast(t,r.getStarBroadcast()))}}},{key:"receiveJoinRequest",value:function(e,t){var r=this;i(this.isHub,"Join requests should only be sent to the hub");var n=t.getSenderId(),o=this.peerPool.getPeerIdentity(n);this.state="connected",this.spokes.add(n),console.log("i just got a join request!"),console.log(n),console.log(o),this.memberIdentitiesById.set(n,o),this.connectedMemberIds.add(n);var s=new l.StarJoinResponse,a=s.getMemberIdentitiesByIdMap();this.connectedMemberIds.forEach((function(e){var t=r.getMemberIdentity(e);a.set(e,h(t))}));var c=new l;c.setNetworkId(this.id),c.setStarJoinResponse(s),this.send(n,c.serializeBinary());var u=new l.StarJoinNotification;u.setMemberId(n),u.setMemberIdentity(h(o));var d=new l;d.setNetworkId(this.id),d.setStarJoinNotification(u),this.forwardBroadcast(n,d.serializeBinary()),this.emitter.emit("join",{peerId:n})}},{key:"receiveJoinResponse",value:function(e){var t=this;i(!this.isHub,"Connection responses cannot be sent to the hub"),e.getMemberIdentitiesByIdMap().forEach((function(e,r){t.memberIdentitiesById.set(r,f(e)),t.connectedMemberIds.add(r)})),this.state="connected",this.resolveConnectionPromise(),this.resolveConnectionPromise=null}},{key:"receiveJoinNotification",value:function(e){var t=e.getMemberId(),r=f(e.getMemberIdentity());this.memberIdentitiesById.set(t,r),this.connectedMemberIds.add(t),this.emitter.emit("join",{peerId:t})}},{key:"receiveLeaveNotification",value:function(e,t){var r=t.getMemberId();this.connectedMemberIds.has(r)&&(this.isHub&&(this.spokes.delete(r),this.forwardBroadcast(r,e)),this.memberDidLeave(r,t.getConnectionLost()))}},{key:"memberDidLeave",value:function(e,t){e===this.hubId?(this.hubId=null,this.state="disconnected",this.resetConnectedMembers()):this.connectedMemberIds.delete(e),this.emitter.emit("leave",{peerId:e,connectionLost:t})}},{key:"receiveUnicast",value:function(e,t){var r=t.getRecipientId();if(r===this.peerPool.peerId)this.emitter.emit("receive",{senderId:t.getSenderId(),message:p(t.getBody())});else{if(!this.isHub)throw new Error("Received a unicast not intended for this peer");this.forwardUnicast(r,e)}}},{key:"receiveBroadcast",value:function(e,t){var r=t.getSenderId();this.isHub&&this.forwardBroadcast(r,e),this.emitter.emit("receive",{senderId:r,message:p(t.getBody())})}},{key:"forwardUnicast",value:function(e,t){this.spokes.has(e)&&this.send(e,t)}},{key:"forwardBroadcast",value:function(e,t){var r=this;this.spokes.forEach((function(n){n!==e&&r.send(n,t)}))}},{key:"send",value:function(e,t){this.peerPool.isConnectedToPeer(e)&&this.peerPool.send(e,t)}},{key:"resetConnectedMembers",value:function(){this.connectedMemberIds.clear(),this.connectedMemberIds.add(this.getPeerId())}}])&&n(r.prototype,o),c&&n(r,c),e}()}).call(this,r(9))},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"dispose",value:function(){}},{key:"updateTether",value:function(){}},{key:"updateActivePositions",value:function(){}},{key:"hostDidLoseConnection",value:function(){}},{key:"hostDidClosePortal",value:function(){}},{key:"siteDidLeave",value:function(){}},{key:"siteDidJoin",value:function(){}},{key:"didChangeEditorProxies",value:function(){}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(4).HTTPRequestError;e.exports=function(){function e(t){var r=t.baseURL,n=t.oauthToken;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseURL=r,this.oauthToken=n}var t,r,o;return t=e,(r=[{key:"setOauthToken",value:function(e){this.oauthToken=e}},{key:"get",value:function(e,t){return this.fetch(e,{method:"GET",headers:this.getDefaultHeaders()})}},{key:"post",value:function(e,t){return this.fetch(e,{method:"POST",headers:Object.assign(this.getDefaultHeaders(),{"Content-Type":"application/json"}),body:JSON.stringify(t)})}},{key:"fetch",value:function(e,t){var r,n,o,a,c,l,u,d,p,h,f,g;return regeneratorRuntime.async((function(y){for(;;)switch(y.prev=y.next){case 0:return r=t.method,n=t.headers,o=t.body,a=this.getAbsoluteURL(e),y.prev=2,y.next=5,regeneratorRuntime.awrap(window.fetch(a,{method:r,headers:n,body:o}));case 5:c=y.sent,y.next=13;break;case 8:throw y.prev=8,y.t0=y.catch(2),(l=new i("Connection failure")).diagnosticMessage=s({method:r,url:a}),l;case 13:return d=(u=c).ok,p=u.status,y.next=16,regeneratorRuntime.awrap(c.text());case 16:return h=y.sent,y.prev=17,f=JSON.parse(h),y.abrupt("return",{ok:d,body:f,status:p});case 22:throw y.prev=22,y.t1=y.catch(17),(g=new i("Unexpected response")).diagnosticMessage=s({method:r,url:a,status:p,rawBody:h}),g;case 27:case"end":return y.stop()}}),null,this,[[2,8],[17,22]])}},{key:"getDefaultHeaders",value:function(){var e={Accept:"application/json"};return this.oauthToken&&(e["GitHub-OAuth-token"]=this.oauthToken),e}},{key:"getAbsoluteURL",value:function(e){return this.baseURL+e}}])&&n(t.prototype,r),o&&n(t,o),e}();var o=/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/g;function s(e){var t=e.method,r=e.url,n=e.status,i=e.rawBody,s="Request: ".concat(t," ").concat(r);return n&&(s+="\nStatus Code: ".concat(n)),i&&(s+="\nBody: ".concat(i)),s.replace(o,"REDACTED")}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(130),o=r(2).Disposable,s=r(4);e.exports=function(){function e(t){var r=t.key,n=t.options;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.channelsByName=new Map,this.subscriptionsCount=0,this.pusherClient=function(e,t){var r=Object.assign({encrypted:!0},t),n=new i(e,r);return n.disconnect(),n}(r,n)}var t,r,a;return t=e,(r=[{key:"subscribe",value:function(e,t,r){var n,i=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("i am subscribed to ".concat(e,", ").concat(t)),0!==this.subscriptionsCount){s.next=4;break}return s.next=4,regeneratorRuntime.awrap(this.connect());case 4:if(e=e.replace(/\//g,"."),n=this.channelsByName.get(e)){s.next=11;break}return n=this.pusherClient.subscribe(e),s.next=10,regeneratorRuntime.awrap(new Promise((function(e,t){n.bind("pusher:subscription_succeeded",e),n.bind("pusher:subscription_error",t)})));case 10:this.channelsByName.set(e,n);case 11:return n.bind(t,r),this.subscriptionsCount++,s.abrupt("return",new o((function(){n.unbind(t,r),i.subscriptionsCount--,0===i.subscriptionsCount&&i.disconnect()})));case 14:case"end":return s.stop()}}),null,this)}},{key:"connect",value:function(){var e=this,t=new s.PubSubConnectionError("Error establishing web socket connection to signaling server");return this.pusherClient.connect(),new Promise((function(r,n){var i=function t(){e.pusherClient.connection.unbind("connected",t),e.pusherClient.connection.unbind("error",o),r()},o=function r(){e.pusherClient.connection.unbind("connected",i),e.pusherClient.connection.unbind("error",r),n(t)};e.pusherClient.connection.bind("connected",i),e.pusherClient.connection.bind("error",o)}))}},{key:"disconnect",value:function(){var e=this;this.channelsByName.forEach((function(t){e.pusherClient.unsubscribe(t)})),this.channelsByName.clear(),this.pusherClient.disconnect()}}])&&n(t.prototype,r),a&&n(t,a),e}()},function(e,t,r){(function(t){
/*!
 * Pusher JavaScript Library v5.1.1
 * https://pusher.com/
 *
 * Copyright 2017, Pusher
 * Released under the MIT licence.
 */
var r;window,r=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),a=t([1]),c=t([56129,1]),l=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),p=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function g(e,t,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^r[n+o];return(1&s-1>>>8)-1}function y(e,t,r,n){return g(e,t,r,n,16)}function m(e,t,r,n){return g(e,t,r,n,32)}function v(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,p=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,S=o,k=s,E=a,_=c,C=l,M=u,x=d,O=p,R=h,T=f,I=g,P=y,A=m,B=v,L=b,U=w,D=0;D<20;D+=2)S^=(i=(A^=(i=(R^=(i=(C^=(i=S+A|0)<<7|i>>>25)+S|0)<<9|i>>>23)+C|0)<<13|i>>>19)+R|0)<<18|i>>>14,M^=(i=(k^=(i=(B^=(i=(T^=(i=M+k|0)<<7|i>>>25)+M|0)<<9|i>>>23)+T|0)<<13|i>>>19)+B|0)<<18|i>>>14,I^=(i=(x^=(i=(E^=(i=(L^=(i=I+x|0)<<7|i>>>25)+I|0)<<9|i>>>23)+L|0)<<13|i>>>19)+E|0)<<18|i>>>14,U^=(i=(P^=(i=(O^=(i=(_^=(i=U+P|0)<<7|i>>>25)+U|0)<<9|i>>>23)+_|0)<<13|i>>>19)+O|0)<<18|i>>>14,S^=(i=(_^=(i=(E^=(i=(k^=(i=S+_|0)<<7|i>>>25)+S|0)<<9|i>>>23)+k|0)<<13|i>>>19)+E|0)<<18|i>>>14,M^=(i=(C^=(i=(O^=(i=(x^=(i=M+C|0)<<7|i>>>25)+M|0)<<9|i>>>23)+x|0)<<13|i>>>19)+O|0)<<18|i>>>14,I^=(i=(T^=(i=(R^=(i=(P^=(i=I+T|0)<<7|i>>>25)+I|0)<<9|i>>>23)+P|0)<<13|i>>>19)+R|0)<<18|i>>>14,U^=(i=(L^=(i=(B^=(i=(A^=(i=U+L|0)<<7|i>>>25)+U|0)<<9|i>>>23)+A|0)<<13|i>>>19)+B|0)<<18|i>>>14;S=S+o|0,k=k+s|0,E=E+a|0,_=_+c|0,C=C+l|0,M=M+u|0,x=x+d|0,O=O+p|0,R=R+h|0,T=T+f|0,I=I+g|0,P=P+y|0,A=A+m|0,B=B+v|0,L=L+b|0,U=U+w|0,e[0]=S>>>0&255,e[1]=S>>>8&255,e[2]=S>>>16&255,e[3]=S>>>24&255,e[4]=k>>>0&255,e[5]=k>>>8&255,e[6]=k>>>16&255,e[7]=k>>>24&255,e[8]=E>>>0&255,e[9]=E>>>8&255,e[10]=E>>>16&255,e[11]=E>>>24&255,e[12]=_>>>0&255,e[13]=_>>>8&255,e[14]=_>>>16&255,e[15]=_>>>24&255,e[16]=C>>>0&255,e[17]=C>>>8&255,e[18]=C>>>16&255,e[19]=C>>>24&255,e[20]=M>>>0&255,e[21]=M>>>8&255,e[22]=M>>>16&255,e[23]=M>>>24&255,e[24]=x>>>0&255,e[25]=x>>>8&255,e[26]=x>>>16&255,e[27]=x>>>24&255,e[28]=O>>>0&255,e[29]=O>>>8&255,e[30]=O>>>16&255,e[31]=O>>>24&255,e[32]=R>>>0&255,e[33]=R>>>8&255,e[34]=R>>>16&255,e[35]=R>>>24&255,e[36]=T>>>0&255,e[37]=T>>>8&255,e[38]=T>>>16&255,e[39]=T>>>24&255,e[40]=I>>>0&255,e[41]=I>>>8&255,e[42]=I>>>16&255,e[43]=I>>>24&255,e[44]=P>>>0&255,e[45]=P>>>8&255,e[46]=P>>>16&255,e[47]=P>>>24&255,e[48]=A>>>0&255,e[49]=A>>>8&255,e[50]=A>>>16&255,e[51]=A>>>24&255,e[52]=B>>>0&255,e[53]=B>>>8&255,e[54]=B>>>16&255,e[55]=B>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=U>>>0&255,e[61]=U>>>8&255,e[62]=U>>>16&255,e[63]=U>>>24&255}(e,t,r,n)}function b(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,p=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,h=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,f=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,m=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,S=0;S<20;S+=2)o^=(i=(m^=(i=(h^=(i=(l^=(i=o+m|0)<<7|i>>>25)+o|0)<<9|i>>>23)+l|0)<<13|i>>>19)+h|0)<<18|i>>>14,u^=(i=(s^=(i=(v^=(i=(f^=(i=u+s|0)<<7|i>>>25)+u|0)<<9|i>>>23)+f|0)<<13|i>>>19)+v|0)<<18|i>>>14,g^=(i=(d^=(i=(a^=(i=(b^=(i=g+d|0)<<7|i>>>25)+g|0)<<9|i>>>23)+b|0)<<13|i>>>19)+a|0)<<18|i>>>14,w^=(i=(y^=(i=(p^=(i=(c^=(i=w+y|0)<<7|i>>>25)+w|0)<<9|i>>>23)+c|0)<<13|i>>>19)+p|0)<<18|i>>>14,o^=(i=(c^=(i=(a^=(i=(s^=(i=o+c|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,u^=(i=(l^=(i=(p^=(i=(d^=(i=u+l|0)<<7|i>>>25)+u|0)<<9|i>>>23)+d|0)<<13|i>>>19)+p|0)<<18|i>>>14,g^=(i=(f^=(i=(h^=(i=(y^=(i=g+f|0)<<7|i>>>25)+g|0)<<9|i>>>23)+y|0)<<13|i>>>19)+h|0)<<18|i>>>14,w^=(i=(b^=(i=(v^=(i=(m^=(i=w+b|0)<<7|i>>>25)+w|0)<<9|i>>>23)+m|0)<<13|i>>>19)+v|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=p>>>0&255,e[21]=p>>>8&255,e[22]=p>>>16&255,e[23]=p>>>24&255,e[24]=h>>>0&255,e[25]=h>>>8&255,e[26]=h>>>16&255,e[27]=h>>>24&255,e[28]=f>>>0&255,e[29]=f>>>8&255,e[30]=f>>>16&255,e[31]=f>>>24&255}(e,t,r,n)}var w=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function S(e,t,r,n,i,o,s){var a,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=o[c];for(;i>=64;){for(v(u,l,s,w),c=0;c<64;c++)e[t+c]=r[n+c]^u[c];for(a=1,c=8;c<16;c++)a=a+(255&l[c])|0,l[c]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(v(u,l,s,w),c=0;c<i;c++)e[t+c]=r[n+c]^u[c];return 0}function k(e,t,r,n,i){var o,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(v(c,a,i,w),s=0;s<64;s++)e[t+s]=c[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(v(c,a,i,w),s=0;s<r;s++)e[t+s]=c[s];return 0}function E(e,t,r,n,i){var o=new Uint8Array(32);b(o,n,i,w);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return k(e,t,r,s,o)}function _(e,t,r,n,i,o,s){var a=new Uint8Array(32);b(a,o,s,w);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=o[l+16];return S(e,t,r,n,i,c,a)}var C=function(e){var t,r,n,i,o,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function M(e,t,r,n,i,o){var s=new C(o);return s.update(r,n,i),s.finish(e,t),0}function x(e,t,r,n,i,o){var s=new Uint8Array(16);return M(s,0,r,n,i,o),y(e,t,s,0)}function O(e,t,r,n,i){var o;if(r<32)return-1;for(_(e,0,t,0,r,n,i),M(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function R(e,t,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(E(s,0,32,n,i),0!==x(t,16,t,32,r-32,s))return-1;for(_(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function T(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function I(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function P(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function A(e,r){var n,i,o,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(I(a),I(a),I(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,P(a,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function B(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return A(r,e),A(n,t),m(r,0,n,0)}function L(e){var t=new Uint8Array(32);return A(t,e),1&t[0]}function U(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function D(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function F(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function j(e,t,r){var n,i,o=0,s=0,a=0,c=0,l=0,u=0,d=0,p=0,h=0,f=0,g=0,y=0,m=0,v=0,b=0,w=0,S=0,k=0,E=0,_=0,C=0,M=0,x=0,O=0,R=0,T=0,I=0,P=0,A=0,B=0,L=0,U=r[0],D=r[1],F=r[2],j=r[3],$=r[4],N=r[5],W=r[6],z=r[7],H=r[8],V=r[9],G=r[10],q=r[11],K=r[12],J=r[13],Y=r[14],X=r[15];o+=(n=t[0])*U,s+=n*D,a+=n*F,c+=n*j,l+=n*$,u+=n*N,d+=n*W,p+=n*z,h+=n*H,f+=n*V,g+=n*G,y+=n*q,m+=n*K,v+=n*J,b+=n*Y,w+=n*X,s+=(n=t[1])*U,a+=n*D,c+=n*F,l+=n*j,u+=n*$,d+=n*N,p+=n*W,h+=n*z,f+=n*H,g+=n*V,y+=n*G,m+=n*q,v+=n*K,b+=n*J,w+=n*Y,S+=n*X,a+=(n=t[2])*U,c+=n*D,l+=n*F,u+=n*j,d+=n*$,p+=n*N,h+=n*W,f+=n*z,g+=n*H,y+=n*V,m+=n*G,v+=n*q,b+=n*K,w+=n*J,S+=n*Y,k+=n*X,c+=(n=t[3])*U,l+=n*D,u+=n*F,d+=n*j,p+=n*$,h+=n*N,f+=n*W,g+=n*z,y+=n*H,m+=n*V,v+=n*G,b+=n*q,w+=n*K,S+=n*J,k+=n*Y,E+=n*X,l+=(n=t[4])*U,u+=n*D,d+=n*F,p+=n*j,h+=n*$,f+=n*N,g+=n*W,y+=n*z,m+=n*H,v+=n*V,b+=n*G,w+=n*q,S+=n*K,k+=n*J,E+=n*Y,_+=n*X,u+=(n=t[5])*U,d+=n*D,p+=n*F,h+=n*j,f+=n*$,g+=n*N,y+=n*W,m+=n*z,v+=n*H,b+=n*V,w+=n*G,S+=n*q,k+=n*K,E+=n*J,_+=n*Y,C+=n*X,d+=(n=t[6])*U,p+=n*D,h+=n*F,f+=n*j,g+=n*$,y+=n*N,m+=n*W,v+=n*z,b+=n*H,w+=n*V,S+=n*G,k+=n*q,E+=n*K,_+=n*J,C+=n*Y,M+=n*X,p+=(n=t[7])*U,h+=n*D,f+=n*F,g+=n*j,y+=n*$,m+=n*N,v+=n*W,b+=n*z,w+=n*H,S+=n*V,k+=n*G,E+=n*q,_+=n*K,C+=n*J,M+=n*Y,x+=n*X,h+=(n=t[8])*U,f+=n*D,g+=n*F,y+=n*j,m+=n*$,v+=n*N,b+=n*W,w+=n*z,S+=n*H,k+=n*V,E+=n*G,_+=n*q,C+=n*K,M+=n*J,x+=n*Y,O+=n*X,f+=(n=t[9])*U,g+=n*D,y+=n*F,m+=n*j,v+=n*$,b+=n*N,w+=n*W,S+=n*z,k+=n*H,E+=n*V,_+=n*G,C+=n*q,M+=n*K,x+=n*J,O+=n*Y,R+=n*X,g+=(n=t[10])*U,y+=n*D,m+=n*F,v+=n*j,b+=n*$,w+=n*N,S+=n*W,k+=n*z,E+=n*H,_+=n*V,C+=n*G,M+=n*q,x+=n*K,O+=n*J,R+=n*Y,T+=n*X,y+=(n=t[11])*U,m+=n*D,v+=n*F,b+=n*j,w+=n*$,S+=n*N,k+=n*W,E+=n*z,_+=n*H,C+=n*V,M+=n*G,x+=n*q,O+=n*K,R+=n*J,T+=n*Y,I+=n*X,m+=(n=t[12])*U,v+=n*D,b+=n*F,w+=n*j,S+=n*$,k+=n*N,E+=n*W,_+=n*z,C+=n*H,M+=n*V,x+=n*G,O+=n*q,R+=n*K,T+=n*J,I+=n*Y,P+=n*X,v+=(n=t[13])*U,b+=n*D,w+=n*F,S+=n*j,k+=n*$,E+=n*N,_+=n*W,C+=n*z,M+=n*H,x+=n*V,O+=n*G,R+=n*q,T+=n*K,I+=n*J,P+=n*Y,A+=n*X,b+=(n=t[14])*U,w+=n*D,S+=n*F,k+=n*j,E+=n*$,_+=n*N,C+=n*W,M+=n*z,x+=n*H,O+=n*V,R+=n*G,T+=n*q,I+=n*K,P+=n*J,A+=n*Y,B+=n*X,w+=(n=t[15])*U,s+=38*(k+=n*F),a+=38*(E+=n*j),c+=38*(_+=n*$),l+=38*(C+=n*N),u+=38*(M+=n*W),d+=38*(x+=n*z),p+=38*(O+=n*H),h+=38*(R+=n*V),f+=38*(T+=n*G),g+=38*(I+=n*q),y+=38*(P+=n*K),m+=38*(A+=n*J),v+=38*(B+=n*Y),b+=38*(L+=n*X),o=(n=(o+=38*(S+=n*D))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=d,e[7]=p,e[8]=h,e[9]=f,e[10]=g,e[11]=y,e[12]=m,e[13]=v,e[14]=b,e[15]=w}function $(e,t){j(e,t,t)}function N(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)$(i,i),2!==n&&4!==n&&j(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function W(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)$(i,i),1!==n&&j(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function z(e,r,n){var i,o,s=new Uint8Array(32),a=new Float64Array(80),l=t(),u=t(),d=t(),p=t(),h=t(),f=t();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,U(a,n),o=0;o<16;o++)u[o]=a[o],p[o]=l[o]=d[o]=0;for(l[0]=p[0]=1,o=254;o>=0;--o)P(l,u,i=s[o>>>3]>>>(7&o)&1),P(d,p,i),D(h,l,d),F(l,l,d),D(d,u,p),F(u,u,p),$(p,h),$(f,l),j(l,d,l),j(d,u,h),D(h,l,d),F(l,l,d),$(u,l),F(d,p,f),j(l,d,c),D(l,l,p),j(d,d,l),j(l,p,f),j(p,u,a),$(u,h),P(l,u,i),P(d,p,i);for(o=0;o<16;o++)a[o+16]=l[o],a[o+32]=d[o],a[o+48]=u[o],a[o+64]=p[o];var g=a.subarray(32),y=a.subarray(16);return N(g,g),j(y,y,g),A(e,y),0}function H(e,t){return z(e,t,o)}function V(e,t){return n(t,32),H(e,t)}function G(e,t,r){var n=new Uint8Array(32);return z(n,r,t),b(e,i,n,w)}C.prototype.blocks=function(e,t,r){for(var n,i,o,s,a,c,l,u,d,p,h,f,g,y,m,v,b,w,S,k=this.fin?0:2048,E=this.h[0],_=this.h[1],C=this.h[2],M=this.h[3],x=this.h[4],O=this.h[5],R=this.h[6],T=this.h[7],I=this.h[8],P=this.h[9],A=this.r[0],B=this.r[1],L=this.r[2],U=this.r[3],D=this.r[4],F=this.r[5],j=this.r[6],$=this.r[7],N=this.r[8],W=this.r[9];r>=16;)p=d=0,p+=(E+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*A,p+=(_+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*W),p+=(C+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*N),p+=(M+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*$),d=(p+=(x+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*j))>>>13,p&=8191,p+=(O+=a>>>1&8191)*(5*F),p+=(R+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*D),p+=(T+=8191&(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*U),p+=(I+=8191&(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*L),h=d+=(p+=(P+=u>>>5|k)*(5*B))>>>13,h+=E*B,h+=_*A,h+=C*(5*W),h+=M*(5*N),d=(h+=x*(5*$))>>>13,h&=8191,h+=O*(5*j),h+=R*(5*F),h+=T*(5*D),h+=I*(5*U),d+=(h+=P*(5*L))>>>13,h&=8191,f=d,f+=E*L,f+=_*B,f+=C*A,f+=M*(5*W),d=(f+=x*(5*N))>>>13,f&=8191,f+=O*(5*$),f+=R*(5*j),f+=T*(5*F),f+=I*(5*D),g=d+=(f+=P*(5*U))>>>13,g+=E*U,g+=_*L,g+=C*B,g+=M*A,d=(g+=x*(5*W))>>>13,g&=8191,g+=O*(5*N),g+=R*(5*$),g+=T*(5*j),g+=I*(5*F),y=d+=(g+=P*(5*D))>>>13,y+=E*D,y+=_*U,y+=C*L,y+=M*B,d=(y+=x*A)>>>13,y&=8191,y+=O*(5*W),y+=R*(5*N),y+=T*(5*$),y+=I*(5*j),m=d+=(y+=P*(5*F))>>>13,m+=E*F,m+=_*D,m+=C*U,m+=M*L,d=(m+=x*B)>>>13,m&=8191,m+=O*A,m+=R*(5*W),m+=T*(5*N),m+=I*(5*$),v=d+=(m+=P*(5*j))>>>13,v+=E*j,v+=_*F,v+=C*D,v+=M*U,d=(v+=x*L)>>>13,v&=8191,v+=O*B,v+=R*A,v+=T*(5*W),v+=I*(5*N),b=d+=(v+=P*(5*$))>>>13,b+=E*$,b+=_*j,b+=C*F,b+=M*D,d=(b+=x*U)>>>13,b&=8191,b+=O*L,b+=R*B,b+=T*A,b+=I*(5*W),w=d+=(b+=P*(5*N))>>>13,w+=E*N,w+=_*$,w+=C*j,w+=M*F,d=(w+=x*D)>>>13,w&=8191,w+=O*U,w+=R*L,w+=T*B,w+=I*A,S=d+=(w+=P*(5*W))>>>13,S+=E*W,S+=_*N,S+=C*$,S+=M*j,d=(S+=x*F)>>>13,S&=8191,S+=O*D,S+=R*U,S+=T*L,S+=I*B,E=p=8191&(d=(d=((d+=(S+=P*A)>>>13)<<2)+d|0)+(p&=8191)|0),_=h+=d>>>=13,C=f&=8191,M=g&=8191,x=y&=8191,O=m&=8191,R=v&=8191,T=b&=8191,I=w&=8191,P=S&=8191,t+=16,r-=16;this.h[0]=E,this.h[1]=_,this.h[2]=C,this.h[3]=M,this.h[4]=x,this.h[5]=O,this.h[6]=R,this.h[7]=T,this.h[8]=I,this.h[9]=P},C.prototype.finish=function(e,t){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},C.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var q=O,K=R,J=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Y(e,t,r,n){for(var i,o,s,a,c,l,u,d,p,h,f,g,y,m,v,b,w,S,k,E,_,C,M,x,O,R,T=new Int32Array(16),I=new Int32Array(16),P=e[0],A=e[1],B=e[2],L=e[3],U=e[4],D=e[5],F=e[6],j=e[7],$=t[0],N=t[1],W=t[2],z=t[3],H=t[4],V=t[5],G=t[6],q=t[7],K=0;n>=128;){for(k=0;k<16;k++)E=8*k+K,T[k]=r[E+0]<<24|r[E+1]<<16|r[E+2]<<8|r[E+3],I[k]=r[E+4]<<24|r[E+5]<<16|r[E+6]<<8|r[E+7];for(k=0;k<80;k++)if(i=P,o=A,s=B,a=L,c=U,l=D,u=F,p=$,h=N,f=W,g=z,y=H,m=V,v=G,M=65535&(C=q),x=C>>>16,O=65535&(_=j),R=_>>>16,M+=65535&(C=(H>>>14|U<<18)^(H>>>18|U<<14)^(U>>>9|H<<23)),x+=C>>>16,O+=65535&(_=(U>>>14|H<<18)^(U>>>18|H<<14)^(H>>>9|U<<23)),R+=_>>>16,M+=65535&(C=H&V^~H&G),x+=C>>>16,O+=65535&(_=U&D^~U&F),R+=_>>>16,_=J[2*k],M+=65535&(C=J[2*k+1]),x+=C>>>16,O+=65535&_,R+=_>>>16,_=T[k%16],x+=(C=I[k%16])>>>16,O+=65535&_,R+=_>>>16,O+=(x+=(M+=65535&C)>>>16)>>>16,M=65535&(C=S=65535&M|x<<16),x=C>>>16,O=65535&(_=w=65535&O|(R+=O>>>16)<<16),R=_>>>16,M+=65535&(C=($>>>28|P<<4)^(P>>>2|$<<30)^(P>>>7|$<<25)),x+=C>>>16,O+=65535&(_=(P>>>28|$<<4)^($>>>2|P<<30)^($>>>7|P<<25)),R+=_>>>16,x+=(C=$&N^$&W^N&W)>>>16,O+=65535&(_=P&A^P&B^A&B),R+=_>>>16,d=65535&(O+=(x+=(M+=65535&C)>>>16)>>>16)|(R+=O>>>16)<<16,b=65535&M|x<<16,M=65535&(C=g),x=C>>>16,O=65535&(_=a),R=_>>>16,x+=(C=S)>>>16,O+=65535&(_=w),R+=_>>>16,A=i,B=o,L=s,U=a=65535&(O+=(x+=(M+=65535&C)>>>16)>>>16)|(R+=O>>>16)<<16,D=c,F=l,j=u,P=d,N=p,W=h,z=f,H=g=65535&M|x<<16,V=y,G=m,q=v,$=b,k%16==15)for(E=0;E<16;E++)_=T[E],M=65535&(C=I[E]),x=C>>>16,O=65535&_,R=_>>>16,_=T[(E+9)%16],M+=65535&(C=I[(E+9)%16]),x+=C>>>16,O+=65535&_,R+=_>>>16,w=T[(E+1)%16],M+=65535&(C=((S=I[(E+1)%16])>>>1|w<<31)^(S>>>8|w<<24)^(S>>>7|w<<25)),x+=C>>>16,O+=65535&(_=(w>>>1|S<<31)^(w>>>8|S<<24)^w>>>7),R+=_>>>16,w=T[(E+14)%16],x+=(C=((S=I[(E+14)%16])>>>19|w<<13)^(w>>>29|S<<3)^(S>>>6|w<<26))>>>16,O+=65535&(_=(w>>>19|S<<13)^(S>>>29|w<<3)^w>>>6),R+=_>>>16,R+=(O+=(x+=(M+=65535&C)>>>16)>>>16)>>>16,T[E]=65535&O|R<<16,I[E]=65535&M|x<<16;M=65535&(C=$),x=C>>>16,O=65535&(_=P),R=_>>>16,_=e[0],x+=(C=t[0])>>>16,O+=65535&_,R+=_>>>16,R+=(O+=(x+=(M+=65535&C)>>>16)>>>16)>>>16,e[0]=P=65535&O|R<<16,t[0]=$=65535&M|x<<16,M=65535&(C=N),x=C>>>16,O=65535&(_=A),R=_>>>16,_=e[1],x+=(C=t[1])>>>16,O+=65535&_,R+=_>>>16,R+=(O+=(x+=(M+=65535&C)>>>16)>>>16)>>>16,e[1]=A=65535&O|R<<16,t[1]=N=65535&M|x<<16,M=65535&(C=W),x=C>>>16,O=65535&(_=B),R=_>>>16,_=e[2],x+=(C=t[2])>>>16,O+=65535&_,R+=_>>>16,R+=(O+=(x+=(M+=65535&C)>>>16)>>>16)>>>16,e[2]=B=65535&O|R<<16,t[2]=W=65535&M|x<<16,M=65535&(C=z),x=C>>>16,O=65535&(_=L),R=_>>>16,_=e[3],x+=(C=t[3])>>>16,O+=65535&_,R+=_>>>16,R+=(O+=(x+=(M+=65535&C)>>>16)>>>16)>>>16,e[3]=L=65535&O|R<<16,t[3]=z=65535&M|x<<16,M=65535&(C=H),x=C>>>16,O=65535&(_=U),R=_>>>16,_=e[4],x+=(C=t[4])>>>16,O+=65535&_,R+=_>>>16,R+=(O+=(x+=(M+=65535&C)>>>16)>>>16)>>>16,e[4]=U=65535&O|R<<16,t[4]=H=65535&M|x<<16,M=65535&(C=V),x=C>>>16,O=65535&(_=D),R=_>>>16,_=e[5],x+=(C=t[5])>>>16,O+=65535&_,R+=_>>>16,R+=(O+=(x+=(M+=65535&C)>>>16)>>>16)>>>16,e[5]=D=65535&O|R<<16,t[5]=V=65535&M|x<<16,M=65535&(C=G),x=C>>>16,O=65535&(_=F),R=_>>>16,_=e[6],x+=(C=t[6])>>>16,O+=65535&_,R+=_>>>16,R+=(O+=(x+=(M+=65535&C)>>>16)>>>16)>>>16,e[6]=F=65535&O|R<<16,t[6]=G=65535&M|x<<16,M=65535&(C=q),x=C>>>16,O=65535&(_=j),R=_>>>16,_=e[7],x+=(C=t[7])>>>16,O+=65535&_,R+=_>>>16,R+=(O+=(x+=(M+=65535&C)>>>16)>>>16)>>>16,e[7]=j=65535&O|R<<16,t[7]=q=65535&M|x<<16,K+=128,n-=128}return n}function X(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,Y(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,f(s,r-8,a/536870912|0,a<<3),Y(i,o,s,r),n=0;n<8;n++)f(e,8*n,i[n],o[n]);return 0}function Q(e,r){var n=t(),i=t(),o=t(),s=t(),a=t(),c=t(),l=t(),d=t(),p=t();F(n,e[1],e[0]),F(p,r[1],r[0]),j(n,n,p),D(i,e[0],e[1]),D(p,r[0],r[1]),j(i,i,p),j(o,e[3],r[3]),j(o,o,u),j(s,e[2],r[2]),D(s,s,s),F(a,i,n),F(c,s,o),D(l,s,o),D(d,i,n),j(e[0],a,c),j(e[1],d,l),j(e[2],l,c),j(e[3],a,d)}function Z(e,t,r){var n;for(n=0;n<4;n++)P(e[n],t[n],r)}function ee(e,r){var n=t(),i=t(),o=t();N(o,r[2]),j(n,r[0],o),j(i,r[1],o),A(e,i),e[31]^=L(n)<<7}function te(e,t,r){var n,i;for(T(e[0],s),T(e[1],a),T(e[2],a),T(e[3],s),i=255;i>=0;--i)Z(e,t,n=r[i/8|0]>>(7&i)&1),Q(t,e),Q(e,e),Z(e,t,n)}function re(e,r){var n=[t(),t(),t(),t()];T(n[0],d),T(n[1],p),T(n[2],a),j(n[3],d,p),te(e,n,r)}function ne(e,r,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||n(r,32),X(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,re(a,s),ee(e,a),o=0;o<32;o++)r[o+32]=e[o];return 0}var ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*ie[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ie[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ie[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function se(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,r)}function ae(e,r,n,i){var o,s,a=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),d=[t(),t(),t(),t()];X(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var p=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(X(l,e.subarray(32),n+32),se(l),re(d,l),ee(e,d),o=32;o<64;o++)e[o]=i[o];for(X(c,e,n+64),se(c),o=0;o<64;o++)u[o]=0;for(o=0;o<32;o++)u[o]=l[o];for(o=0;o<32;o++)for(s=0;s<32;s++)u[o+s]+=c[o]*a[s];return oe(e.subarray(32),u),p}function ce(e,r,n,i){var o,c=new Uint8Array(32),u=new Uint8Array(64),d=[t(),t(),t(),t()],p=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),i=t(),o=t(),c=t(),u=t(),d=t(),p=t();return T(e[2],a),U(e[1],r),$(o,e[1]),j(c,o,l),F(o,o,e[2]),D(c,e[2],c),$(u,c),$(d,u),j(p,d,u),j(n,p,o),j(n,n,c),W(n,n),j(n,n,o),j(n,n,c),j(n,n,c),j(e[0],n,c),$(i,e[0]),j(i,i,c),B(i,o)&&j(e[0],e[0],h),$(i,e[0]),j(i,i,c),B(i,o)?-1:(L(e[0])===r[31]>>7&&F(e[0],s,e[0]),j(e[3],e[0],e[1]),0)}(p,i))return-1;for(o=0;o<n;o++)e[o]=r[o];for(o=0;o<32;o++)e[o+32]=i[o];if(X(u,e,n),se(u),te(d,p,u),re(p,r.subarray(32)),Q(d,p),ee(c,d),n-=64,m(r,0,c,0)){for(o=0;o<n;o++)e[o]=0;return-1}for(o=0;o<n;o++)e[o]=r[o+64];return n}var le=32,ue=24,de=32,pe=32,he=ue;function fe(e,t){if(e.length!==le)throw new Error("bad key size");if(t.length!==ue)throw new Error("bad nonce size")}function ge(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ye(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:_,crypto_stream:E,crypto_stream_salsa20_xor:S,crypto_stream_salsa20:k,crypto_onetimeauth:M,crypto_onetimeauth_verify:x,crypto_verify_16:y,crypto_verify_32:m,crypto_secretbox:O,crypto_secretbox_open:R,crypto_scalarmult:z,crypto_scalarmult_base:H,crypto_box_beforenm:G,crypto_box_afternm:q,crypto_box:function(e,t,r,n,i,o){var s=new Uint8Array(32);return G(s,i,o),q(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,i,o){var s=new Uint8Array(32);return G(s,i,o),K(e,t,r,n,s)},crypto_box_keypair:V,crypto_hash:X,crypto_sign:ae,crypto_sign_keypair:ne,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:le,crypto_secretbox_NONCEBYTES:ue,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:de,crypto_box_SECRETKEYBYTES:pe,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:he,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:l,L:ie,pack25519:A,unpack25519:U,M:j,A:D,S:$,Z:F,pow2523:W,add:Q,set25519:T,modL:oe,scalarmult:te,scalarbase:re},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){ge(e,t,r),fe(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return O(i,n,n.length,t,r),i.subarray(16)},e.secretbox.open=function(e,t,r){ge(e,t,r),fe(r,t);for(var n=new Uint8Array(16+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+16]=e[o];return n.length<32?null:0!==R(i,n,n.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=le,e.secretbox.nonceLength=ue,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(ge(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return z(r,e,t),r},e.scalarMult.base=function(e){if(ge(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return H(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){ge(e,t),function(e,t){if(e.length!==de)throw new Error("bad public key size");if(t.length!==pe)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return G(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(de),t=new Uint8Array(pe);return V(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(ge(e),e.length!==pe)throw new Error("bad secret key size");var t=new Uint8Array(de);return H(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=de,e.box.secretKeyLength=pe,e.box.sharedKeyLength=32,e.box.nonceLength=he,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(ge(e,t),64!==t.length)throw new Error("bad secret key size");var r=new Uint8Array(64+e.length);return ae(r,e,e.length,t),r},e.sign.open=function(e,t){if(ge(e,t),32!==t.length)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(64),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(ge(e,t,r),64!==t.length)throw new Error("bad signature size");if(32!==r.length)throw new Error("bad public key size");var n,i=new Uint8Array(64+e.length),o=new Uint8Array(64+e.length);for(n=0;n<64;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+64]=e[n];return ce(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return ne(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(ge(e),64!==e.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(ge(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=e[n];return ne(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){ge(e);var t=new Uint8Array(64);return X(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return ge(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===g(e,0,t,0,e.length)},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues?e.setPRNG((function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];ye(i)})):(t=r(3))&&t.randomBytes&&e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];ye(i)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},function(e,r,n){!function(t,r){"use strict";e.exports?e.exports=r():t.nacl?t.nacl.util=r():(t.nacl={},t.nacl.util=r())}(this,(function(){"use strict";var e={};function r(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},e.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==t.from?(e.encodeBase64=function(e){return t.from(e).toString("base64")},e.decodeBase64=function(e){return r(e),new Uint8Array(Array.prototype.slice.call(t.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new t(e).toString("base64")},e.decodeBase64=function(e){return r(e),new Uint8Array(Array.prototype.slice.call(new t(e,"base64"),0))}):(e.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},e.decodeBase64=function(e){r(e);var t,n=atob(e),i=new Uint8Array(n.length);for(t=0;t<n.length;t++)i[t]=n.charCodeAt(t);return i}),e}))},function(e,t,r){e.exports=r(4).default},function(e,t){},function(e,t,r){"use strict";r.r(t);for(var n=function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}return e.prototype.create=function(e){this.lastId++;var t=this.lastId,r=this.prefix+t,n=this.name+"["+t+"]",i=!1,o=function(){i||(e.apply(null,arguments),i=!0)};return this[t]=o,{number:t,id:r,name:n,callback:o}},e.prototype.remove=function(e){delete this[e.number]},e}(),i=new n("_pusher_script_","Pusher.ScriptReceivers"),o={VERSION:"5.1.1",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,ws_path:"",sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},s=function(){function e(e){this.options=e,this.receivers=e.receivers||i,this.loading={}}return e.prototype.load=function(e,t,r){var n=this;if(n.loading[e]&&n.loading[e].length>0)n.loading[e].push(r);else{n.loading[e]=[r];var i=wt.createScriptRequest(n.getPath(e,t)),o=n.receivers.create((function(t){if(n.receivers.remove(o),n.loading[e]){var r=n.loading[e];delete n.loading[e];for(var s=function(e){e||i.cleanup()},a=0;a<r.length;a++)r[a](t,s)}}));i.send(o)}},e.prototype.getRoot=function(e){var t=wt.getDocument().location.protocol;return(e&&e.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},e}(),a=new n("_pusher_dependencies","Pusher.DependenciesReceivers"),c=new s({cdn_http:o.cdn_http,cdn_https:o.cdn_https,version:o.VERSION,suffix:o.dependency_suffix,receivers:a}),l=String.fromCharCode,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d={},p=0,h=u.length;p<h;p++)d[u.charAt(p)]=p;var f,g=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t)},y=function(e){return e.replace(/[^\x00-\x7F]/g,g)},m=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[u.charAt(r>>>18),u.charAt(r>>>12&63),t>=2?"=":u.charAt(r>>>6&63),t>=1?"=":u.charAt(63&r)].join("")},v=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,m)},b=function(){function e(e,t,r,n){var i=this;this.clear=t,this.timer=e((function(){i.timer&&(i.timer=n(i.timer))}),r)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),w=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function S(e){window.clearTimeout(e)}function k(e){window.clearInterval(e)}var E=function(e){function t(t,r){return e.call(this,setTimeout,S,t,(function(e){return r(),null}))||this}return w(t,e),t}(b),_=function(e){function t(t,r){return e.call(this,setInterval,k,t,(function(e){return r(),e}))||this}return w(t,e),t}(b),C={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new E(0,e)},method:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,n.concat(arguments))}}};function M(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0;n<t.length;n++){var i=t[n];for(var o in i)i[o]&&i[o].constructor&&i[o].constructor===Object?e[o]=M(e[o]||{},i[o]):e[o]=i[o]}return e}function x(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(F(arguments[t]));return e.join(" : ")}function O(e,t){var r=Array.prototype.indexOf;if(null===e)return-1;if(r&&e.indexOf===r)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function R(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(e[r],r,e)}function T(e){var t=[];return R(e,(function(e,r){t.push(r)})),t}function I(e,t,r){for(var n=0;n<e.length;n++)t.call(r||window,e[n],n,e)}function P(e,t){for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n,e,r));return r}function A(e,t){t=t||function(e){return!!e};for(var r=[],n=0;n<e.length;n++)t(e[n],n,e,r)&&r.push(e[n]);return r}function B(e,t){var r={};return R(e,(function(n,i){(t&&t(n,i,e,r)||Boolean(n))&&(r[i]=n)})),r}function L(e,t){for(var r=0;r<e.length;r++)if(t(e[r],r,e))return!0;return!1}function U(e){return t=function(e){return"object"==typeof e&&(e=F(e)),encodeURIComponent((t=e.toString(),v(y(t))));var t},r={},R(e,(function(e,n){r[n]=t(e)})),r;var t,r}function D(e){var t,r,n=B(e,(function(e){return void 0!==e}));return P((t=U(n),r=[],R(t,(function(e,t){r.push([t,e])})),r),C.method("join","=")).join("&")}function F(e){try{return JSON.stringify(e)}catch(n){return JSON.stringify((t=[],r=[],function e(n,i){var o,s,a;switch(typeof n){case"object":if(!n)return null;for(o=0;o<t.length;o+=1)if(t[o]===n)return{$ref:r[o]};if(t.push(n),r.push(i),"[object Array]"===Object.prototype.toString.apply(n))for(a=[],o=0;o<n.length;o+=1)a[o]=e(n[o],i+"["+o+"]");else for(s in a={},n)Object.prototype.hasOwnProperty.call(n,s)&&(a[s]=e(n[s],i+"["+JSON.stringify(s)+"]"));return a;case"number":case"string":case"boolean":return n}}(e,"$")))}var t,r}var j=new(function(){function e(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLog,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogWarn,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogError,e)},e.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},e.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},e.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=x.apply(this,arguments);if(It.log)It.log(n);else if(It.logToConsole){var i=e.bind(this);i(n)}},e}()),$={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"}}},N={buildLogSuffix:function(e){var t,r=$.urls[e];return r?(r.fullUrl?t=r.fullUrl:r.path&&(t=$.baseUrl+r.path),t?"See: "+t:""):""}},W=function(e,t,r){var n,i=this;for(var o in(n=wt.createXHR()).open("POST",i.options.authEndpoint,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)n.setRequestHeader(o,this.authOptions.headers[o]);return n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var e,t=!1;try{e=JSON.parse(n.responseText),t=!0}catch(e){r(!0,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+n.responseText)}t&&r(!1,e)}else{var o=N.buildLogSuffix("authenticationEndpoint");j.error("Unable to retrieve auth string from auth endpoint - received status "+n.status+" from "+i.options.authEndpoint+". Clients must be authenticated to join private or presence channels. "+o),r(!0,n.status)}},n.send(this.composeQuery(t)),n},z=function(e,t,r){void 0!==this.authOptions.headers&&j.warn("To send headers with the auth request, you must use AJAX, rather than JSONP.");var n=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var i=e.getDocument(),o=i.createElement("script");e.auth_callbacks[n]=function(e){r(!1,e)};var s="Pusher.auth_callbacks['"+n+"']";o.src=this.options.authEndpoint+"?callback="+encodeURIComponent(s)+"&"+this.composeQuery(t);var a=i.getElementsByTagName("head")[0]||i.documentElement;a.insertBefore(o,a.firstChild)},H=function(){function e(e){this.src=e}return e.prototype.send=function(e){var t=this,r="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(r)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+r+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var n=document.getElementsByTagName("head")[0];n.insertBefore(t.script,n.firstChild),t.errorScript&&n.insertBefore(t.errorScript,t.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),V=function(){function e(e,t){this.url=e,this.data=t}return e.prototype.send=function(e){if(!this.request){var t=D(this.data),r=this.url+"/"+e.number+"?"+t;this.request=wt.createScriptRequest(r),this.request.send(e)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}(),G={name:"jsonp",getAgent:function(e,t){return function(r,n){var o="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,s=wt.createJSONPRequest(o,r),a=wt.ScriptReceivers.create((function(t,r){i.remove(a),s.cleanup(),r&&r.host&&(e.host=r.host),n&&n(t,r)}));s.send(a)}}};function q(e,t,r){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+r}function K(e,t){return"/app/"+e+"?protocol="+o.PROTOCOL+"&client=js&version="+o.VERSION+(t?"&"+t:"")}var J={getInitial:function(e,t){return q("ws",t,(t.httpPath||"")+K(e,"flash=false"))}},Y={getInitial:function(e,t){return q("http",t,(t.httpPath||"/pusher")+K(e))}},X={getInitial:function(e,t){return q("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return K(e)}},Q=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks[Z(e)]},e.prototype.add=function(e,t,r){var n=Z(e);this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push({fn:t,context:r})},e.prototype.remove=function(e,t,r){if(e||t||r){var n=e?[Z(e)]:T(this._callbacks);t||r?this.removeCallback(n,t,r):this.removeAllCallbacks(n)}else this._callbacks={}},e.prototype.removeCallback=function(e,t,r){I(e,(function(e){this._callbacks[e]=A(this._callbacks[e]||[],(function(e){return t&&t!==e.fn||r&&r!==e.context})),0===this._callbacks[e].length&&delete this._callbacks[e]}),this)},e.prototype.removeAllCallbacks=function(e){I(e,(function(e){delete this._callbacks[e]}),this)},e}();function Z(e){return"_"+e}var ee=function(){function e(e){this.callbacks=new Q,this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(e,t,r){return this.callbacks.add(e,t,r),this},e.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(e,t,r){return this.callbacks.remove(e,t,r),this},e.prototype.unbind_global=function(e){return e?(this.global_callbacks=A(this.global_callbacks||[],(function(t){return t!==e})),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(e,t,r){for(var n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](e,t);var i=this.callbacks.get(e),o=[];if(r?o.push(t,r):t&&o.push(t),i&&i.length>0)for(n=0;n<i.length;n++)i[n].fn.apply(i[n].context||window,o);else this.failThrough&&this.failThrough(e,t);return this},e}(),te=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),re=function(e){function t(t,r,n,i,o){var s=e.call(this)||this;return s.initialize=wt.transportConnectionInitializer,s.hooks=t,s.name=r,s.priority=n,s.key=i,s.options=o,s.state="new",s.timeline=o.timeline,s.activityTimeout=o.activityTimeout,s.id=s.timeline.generateUniqueID(),s}return te(t,e),t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var e=this;if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(t){return C.defer((function(){e.onError(t),e.changeState("closed")})),!1}return this.bindListeners(),j.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(e){var t=this;return"open"===this.state&&(C.defer((function(){t.socket&&t.socket.send(e)})),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.prototype.buildTimelineMessage=function(e){return M({cid:this.id},e)},t}(ee),ne=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(e,t,r,n){return new re(this.hooks,e,t,r,n)},e}(),ie=new ne({urls:J,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(wt.getWebSocketAPI())},isSupported:function(){return Boolean(wt.getWebSocketAPI())},getSocket:function(e){return wt.createWebSocket(e)}}),oe={urls:Y,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},se=M({getSocket:function(e){return wt.HTTPFactory.createStreamingSocket(e)}},oe),ae=M({getSocket:function(e){return wt.HTTPFactory.createPollingSocket(e)}},oe),ce={isSupported:function(){return wt.isXHRSupported()}},le={ws:ie,xhr_streaming:new ne(M({},se,ce)),xhr_polling:new ne(M({},ae,ce))},ue=new ne({file:"sockjs",urls:X,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:c.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),de={isSupported:function(e){return wt.isXDRSupported(e.useTLS)}},pe=new ne(M({},se,de)),he=new ne(M({},ae,de));le.xdr_streaming=pe,le.xdr_polling=he,le.sockjs=ue;var fe=le,ge=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ye=new(function(e){function t(){var t=e.call(this)||this,r=t;return void 0!==window.addEventListener&&(window.addEventListener("online",(function(){r.emit("online")}),!1),window.addEventListener("offline",(function(){r.emit("offline")}),!1)),t}return ge(t,e),t.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},t}(ee)),me=function(){function e(e,t,r){this.manager=e,this.transport=t,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(e,t,r,n){var i=this;n=M({},n,{activityTimeout:this.pingDelay});var o=this.transport.createConnection(e,t,r,n),s=null,a=function(){o.unbind("open",a),o.bind("closed",c),s=C.now()},c=function(e){if(o.unbind("closed",c),1002===e.code||1003===e.code)i.manager.reportDeath();else if(!e.wasClean&&s){var t=C.now()-s;t<2*i.maxPingDelay&&(i.manager.reportDeath(),i.pingDelay=Math.max(t/2,i.minPingDelay))}};return o.bind("open",a),o},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}(),ve={decodeMessage:function(e){try{var t=JSON.parse(e.data),r=t.data;if("string"==typeof r)try{r=JSON.parse(t.data)}catch(e){}var n={event:t.event,channel:t.channel,data:r};return t.user_id&&(n.user_id=t.user_id),n}catch(t){throw{type:"MessageParseError",error:t,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=ve.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},be=ve,we=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Se=function(e){function t(t,r){var n=e.call(this)||this;return n.id=t,n.transport=r,n.activityTimeout=r.activityTimeout,n.bindListeners(),n}return we(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(e,t,r){var n={event:e,data:t};return r&&(n.channel=r),j.debug("Event sent",n),this.send(be.encodeMessage(n))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var e=this,t={message:function(t){var r;try{r=be.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(void 0!==r){switch(j.debug("Event recd",r),r.event){case"pusher:error":e.emit("error",{type:"PusherError",data:r.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",r)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",{type:"WebSocketError",error:t})},closed:function(t){r(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},r=function(){R(t,(function(t,r){e.transport.unbind(r,t)}))};R(t,(function(t,r){e.transport.bind(r,t)}))},t.prototype.handleCloseEvent=function(e){var t=be.getCloseAction(e),r=be.getCloseError(e);r&&this.emit("error",r),t&&this.emit(t,{action:t,error:r})},t}(ee),ke=function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var e=this;this.onMessage=function(t){var r;e.unbindListeners();try{r=be.processHandshake(t)}catch(t){return e.finish("error",{error:t}),void e.transport.close()}"connected"===r.action?e.finish("connected",{connection:new Se(r.id,e.transport),activityTimeout:r.activityTimeout}):(e.finish(r.action,{error:r.error}),e.transport.close())},this.onClosed=function(t){e.unbindListeners();var r=be.getCloseAction(t)||"backoff",n=be.getCloseError(t);e.finish(r,{error:n})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(e,t){this.callback(M({transport:this.transport,action:e},t))},e}(),Ee=function(){function e(e,t){this.channel=e;var r=t.authTransport;if(void 0===wt.getAuthorizers()[r])throw"'"+r+"' is not a recognized auth transport";this.type=r,this.options=t,this.authOptions=(t||{}).auth||{}}return e.prototype.composeQuery=function(e){var t="socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var r in this.authOptions.params)t+="&"+encodeURIComponent(r)+"="+encodeURIComponent(this.authOptions.params[r]);return t},e.prototype.authorize=function(t,r){e.authorizers=e.authorizers||wt.getAuthorizers(),e.authorizers[this.type].call(this,wt,t,r)},e}(),_e=function(){function e(e,t){this.timeline=e,this.options=t||{}}return e.prototype.send=function(e,t){this.timeline.isEmpty()||this.timeline.send(wt.TimelineTransport.getAgent(this,e),t)},e}(),Ce=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Me=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n}return Ce(t,e),t}(Error),xe=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n}return Ce(t,e),t}(Error),Oe=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n}return Ce(t,e),t}(Error),Re=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n}return Ce(t,e),t}(Error),Te=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n}return Ce(t,e),t}(Error),Ie=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n}return Ce(t,e),t}(Error),Pe=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.setPrototypeOf(n,r.prototype),n}return Ce(t,e),t}(Error),Ae=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Be=function(e){function t(t,r){var n=e.call(this,(function(e,r){j.debug("No callbacks on "+t+" for "+e)}))||this;return n.name=t,n.pusher=r,n.subscribed=!1,n.subscriptionPending=!1,n.subscriptionCancelled=!1,n}return Ae(t,e),t.prototype.authorize=function(e,t){return t(!1,{auth:""})},t.prototype.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new Me("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var r=N.buildLogSuffix("triggeringClientEvents");j.warn("Client event triggered before channel 'subscription_succeeded' event . "+r)}return this.pusher.send_event(e,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(e){var t=e.event,r=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,r,{})},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)},t.prototype.subscribe=function(){var e=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(function(t,r){t?(j.error(r),e.emit("pusher:subscription_error",r)):(r=r,e.pusher.send_event("pusher:subscribe",{auth:r.auth,channel_data:r.channel_data,channel:e.name}))})))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(ee),Le=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.authorize=function(e,t){return qe.createAuthorizer(this,this.pusher.config).authorize(e,t)},t}(Be),De=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(e){var t=this;R(this.members,(function(r,n){e(t.get(n))}))},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),Fe=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),je=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.members=new De,n}return Fe(t,e),t.prototype.authorize=function(t,r){var n=this;e.prototype.authorize.call(this,t,(function(e,t){if(!e){if(void 0===(t=t).channel_data){var i=N.buildLogSuffix("authenticationEndpoint");return j.error("Invalid auth response for channel '"+n.name+"',expected 'channel_data' field. "+i),void r("Invalid auth response")}var o=JSON.parse(t.channel_data);n.members.setMyID(o.user_id)}r(e,t)}))},t.prototype.handleEvent=function(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var r=e.data,n={};e.user_id&&(n.user_id=e.user_id),this.emit(t,r,n)}},t.prototype.handleInternalEvent=function(e){var t=e.event,r=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:member_added":var n=this.members.addMember(r);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var i=this.members.removeMember(r);i&&this.emit("pusher:member_removed",i)}},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(Ue),$e=r(0),Ne=r(1),We=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ze=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.key=null,t}return We(t,e),t.prototype.authorize=function(t,r){var n=this;e.prototype.authorize.call(this,t,(function(e,t){if(e)r(!0,t);else{var i=t.shared_secret;if(i)n.key=Object(Ne.decodeBase64)(i),delete t.shared_secret,r(!1,t);else{var o="No shared_secret key in auth payload for encrypted channel: "+n.name;r(!0,o)}}}))},t.prototype.trigger=function(e,t){throw new Te("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(t){var r=t.event,n=t.data;0!==r.indexOf("pusher_internal:")&&0!==r.indexOf("pusher:")?this.handleEncryptedEvent(r,n):e.prototype.handleEvent.call(this,t)},t.prototype.handleEncryptedEvent=function(e,t){var r=this;if(this.key)if(t.ciphertext&&t.nonce){var n=Object(Ne.decodeBase64)(t.ciphertext);if(n.length<$e.secretbox.overheadLength)j.error("Expected encrypted event ciphertext length to be "+$e.secretbox.overheadLength+", got: "+n.length);else{var i=Object(Ne.decodeBase64)(t.nonce);if(i.length<$e.secretbox.nonceLength)j.error("Expected encrypted event nonce length to be "+$e.secretbox.nonceLength+", got: "+i.length);else{var o=$e.secretbox.open(n,i,this.key);if(null===o)return j.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(function(t,s){t?j.error("Failed to make a request to the authEndpoint: "+s+". Unable to fetch new key, so dropping encrypted event"):null!==(o=$e.secretbox.open(n,i,r.key))?r.emitJSON(e,Object(Ne.encodeUTF8)(o)):j.error("Failed to decrypt event with new key. Dropping encrypted event")}));this.emitJSON(e,Object(Ne.encodeUTF8)(o))}}}else j.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);else j.debug("Received encrypted event before key has been retrieved from the authEndpoint")},t.prototype.emitJSON=function(e,t){try{this.emit(e,JSON.parse(t))}catch(r){this.emit(e,t)}return this},t}(Ue),He=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ve=function(e){function t(t,r){var n=e.call(this)||this;n.key=t,n.options=r||{},n.state="initialized",n.connection=null,n.usingTLS=!!r.useTLS,n.timeline=n.options.timeline,n.errorCallbacks=n.buildErrorCallbacks(),n.connectionCallbacks=n.buildConnectionCallbacks(n.errorCallbacks),n.handshakeCallbacks=n.buildHandshakeCallbacks(n.errorCallbacks);var i=wt.getNetwork();return i.bind("online",(function(){n.timeline.info({netinfo:"online"}),"connecting"!==n.state&&"unavailable"!==n.state||n.retryIn(0)})),i.bind("offline",(function(){n.timeline.info({netinfo:"offline"}),n.connection&&n.sendActivityCheck()})),n.updateStrategy(),n}return He(t,e),t.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},t.prototype.send=function(e){return!!this.connection&&this.connection.send(e)},t.prototype.send_event=function(e,t,r){return!!this.connection&&this.connection.send_event(e,t,r)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var e=this,t=function(r,n){r?e.runner=e.strategy.connect(0,t):"error"===n.action?(e.emit("error",{type:"HandshakeError",error:n.error}),e.timeline.error({handshakeError:n.error})):(e.abortConnecting(),e.handshakeCallbacks[n.action](n))};this.runner=this.strategy.connect(0,t)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(e){var t=this;this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new E(e||0,(function(){t.disconnectInternally(),t.connect()}))},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new E(this.options.unavailableTimeout,(function(){e.updateState("unavailable")}))},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new E(this.options.pongTimeout,(function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)}))},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new E(this.activityTimeout,(function(){e.sendActivityCheck()})))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(e){var t=this;return M({},e,{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(e){var t=this;return M({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var e=this,t=function(t){return function(r){r.error&&e.emit("error",{type:"WebSocketError",error:r.error}),t(r)}};return{tls_only:t((function(){e.usingTLS=!0,e.updateStrategy(),e.retryIn(0)})),refused:t((function(){e.disconnect()})),backoff:t((function(){e.retryIn(1e3)})),retry:t((function(){e.retryIn(0)}))}},t.prototype.setConnection=function(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.prototype.updateState=function(e,t){var r=this.state;if(this.state=e,r!==e){var n=e;"connected"===n&&(n+=" with new socket ID "+t.socket_id),j.debug("State changed",r+" -> "+n),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:r,current:e}),this.emit(e,t)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(ee),Ge=function(){function e(){this.channels={}}return e.prototype.add=function(e,t){return this.channels[e]||(this.channels[e]=function(e,t){return 0===e.indexOf("private-encrypted-")?qe.createEncryptedChannel(e,t):0===e.indexOf("private-")?qe.createPrivateChannel(e,t):0===e.indexOf("presence-")?qe.createPresenceChannel(e,t):qe.createChannel(e,t)}(e,t)),this.channels[e]},e.prototype.all=function(){return function(e){var t=[];return R(e,(function(e){t.push(e)})),t}(this.channels)},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},e.prototype.disconnect=function(){R(this.channels,(function(e){e.disconnect()}))},e}(),qe={createChannels:function(){return new Ge},createConnectionManager:function(e,t){return new Ve(e,t)},createChannel:function(e,t){return new Be(e,t)},createPrivateChannel:function(e,t){return new Ue(e,t)},createPresenceChannel:function(e,t){return new je(e,t)},createEncryptedChannel:function(e,t){return new ze(e,t)},createTimelineSender:function(e,t){return new _e(e,t)},createAuthorizer:function(e,t){return t.authorizer?t.authorizer(e,t):new Ee(e,t)},createHandshake:function(e,t){return new ke(e,t)},createAssistantToTheTransportManager:function(e,t,r){return new me(e,t,r)}},Ke=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(e){return qe.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),Je=function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return L(this.strategies,C.method("isSupported"))},e.prototype.connect=function(e,t){var r=this,n=this.strategies,i=0,o=this.timeout,s=null,a=function(c,l){l?t(null,l):(i+=1,r.loop&&(i%=n.length),i<n.length?(o&&(o*=2,r.timeoutLimit&&(o=Math.min(o,r.timeoutLimit))),s=r.tryStrategy(n[i],e,{timeout:o,failFast:r.failFast},a)):t(!0))};return s=this.tryStrategy(n[i],e,{timeout:o,failFast:this.failFast},a),{abort:function(){s.abort()},forceMinPriority:function(t){e=t,s&&s.forceMinPriority(t)}}},e.prototype.tryStrategy=function(e,t,r,n){var i=null,o=null;return r.timeout>0&&(i=new E(r.timeout,(function(){o.abort(),n(!0)}))),o=e.connect(t,(function(e,t){e&&i&&i.isRunning()&&!r.failFast||(i&&i.ensureAborted(),n(e,t))})),{abort:function(){i&&i.ensureAborted(),o.abort()},forceMinPriority:function(e){o.forceMinPriority(e)}}},e}(),Ye=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return L(this.strategies,C.method("isSupported"))},e.prototype.connect=function(e,t){return function(e,t,r){var n=P(e,(function(e,n,i,o){return e.connect(t,r(n,o))}));return{abort:function(){I(n,Xe)},forceMinPriority:function(e){I(n,(function(t){t.forceMinPriority(e)}))}}}(this.strategies,e,(function(e,r){return function(n,i){r[e].error=n,n?function(e){return function(e,t){for(var r=0;r<e.length;r++)if(!t(e[r],r,e))return!1;return!0}(e,(function(e){return Boolean(e.error)}))}(r)&&t(!0):(I(r,(function(e){e.forceMinPriority(i.transport.priority)})),t(null,i))}}))},e}();function Xe(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}var Qe=function(){function e(e,t,r){this.strategy=e,this.transports=t,this.ttl=r.ttl||18e5,this.usingTLS=r.useTLS,this.timeline=r.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var r=this.usingTLS,n=function(e){var t=wt.getLocalStorage();if(t)try{var r=t[Ze(e)];if(r)return JSON.parse(r)}catch(t){et(e)}return null}(r),i=[this.strategy];if(n&&n.timestamp+this.ttl>=C.now()){var o=this.transports[n.transport];o&&(this.timeline.info({cached:!0,transport:n.transport,latency:n.latency}),i.push(new Je([o],{timeout:2*n.latency+1e3,failFast:!0})))}var s=C.now(),a=i.pop().connect(e,(function n(o,c){o?(et(r),i.length>0?(s=C.now(),a=i.pop().connect(e,n)):t(o)):(function(e,t,r){var n=wt.getLocalStorage();if(n)try{n[Ze(e)]=F({timestamp:C.now(),transport:t,latency:r})}catch(e){}}(r,c.transport.name,C.now()-s),t(null,c))}));return{abort:function(){a.abort()},forceMinPriority:function(t){e=t,a&&a.forceMinPriority(t)}}},e}();function Ze(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function et(e){var t=wt.getLocalStorage();if(t)try{delete t[Ze(e)]}catch(e){}}var tt=function(){function e(e,t){var r=t.delay;this.strategy=e,this.options={delay:r}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var r,n=this.strategy,i=new E(this.options.delay,(function(){r=n.connect(e,t)}));return{abort:function(){i.ensureAborted(),r&&r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}},e}(),rt=function(){function e(e,t,r){this.test=e,this.trueBranch=t,this.falseBranch=r}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)},e}(),nt=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var r=this.strategy.connect(e,(function(e,n){n&&r.abort(),t(e,n)}));return r},e}();function it(e){return function(){return e.isSupported()}}var ot,st=function(e,t){var r={};function n(n,i,o,s,a){var c=t(e,n,i,o,s,a);return r[n]=c,c}var i,o={hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath},s=M({},o,{useTLS:!0}),a={hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath},c={loop:!0,timeout:15e3,timeoutLimit:6e4},l=new Ke({lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}),u=new Ke({lives:2,minPingDelay:1e4,maxPingDelay:e.activity_timeout}),d=n("ws","ws",3,o,l),p=n("wss","ws",3,s,l),h=n("sockjs","sockjs",1,a),f=n("xhr_streaming","xhr_streaming",1,a,u),g=n("xdr_streaming","xdr_streaming",1,a,u),y=n("xhr_polling","xhr_polling",1,a),m=n("xdr_polling","xdr_polling",1,a),v=new Je([d],c),b=new Je([p],c),w=new Je([h],c),S=new Je([new rt(it(f),f,g)],c),k=new Je([new rt(it(y),y,m)],c),E=new Je([new rt(it(S),new Ye([S,new tt(k,{delay:4e3})]),k)],c),_=new rt(it(E),E,w);return i=e.useTLS?new Ye([v,new tt(_,{delay:2e3})]):new Ye([v,new tt(b,{delay:2e3}),new tt(_,{delay:5e3})]),new Qe(new nt(new rt(it(d),i,_)),r,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},at={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new xe),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},ct=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lt=function(e){function t(t,r,n){var i=e.call(this)||this;return i.hooks=t,i.method=r,i.url=n,i}return ct(t,e),t.prototype.start=function(e){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},wt.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)},t.prototype.close=function(){this.unloader&&(wt.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(e,t){for(;;){var r=this.advanceBuffer(t);if(!r)break;this.emit("chunk",{status:e,data:r})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(e){var t=e.slice(this.position),r=t.indexOf("\n");return-1!==r?(this.position+=r+1,t.slice(0,r)):null},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&e.length>262144},t}(ee);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"}(ot||(ot={}));var ut=ot,dt=1;function pt(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+dt++}function ht(e){return Math.floor(Math.random()*e)}var ft,gt=function(){function e(e,t){this.hooks=e,this.session=ht(1e3)+"/"+function(e){for(var t=[],r=0;r<e;r++)t.push(ht(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(t),this.readyState=ut.CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(e,t){this.onClose(e,t,!0)},e.prototype.sendRaw=function(e){if(this.readyState!==ut.OPEN)return!1;try{return wt.createSocketRequest("POST",pt((t=this.location,r=this.session,t.base+"/"+r+"/xhr_send"))).start(e),!0}catch(e){return!1}var t,r},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(e,t,r){this.closeStream(),this.readyState=ut.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:r})},e.prototype.onChunk=function(e){var t;if(200===e.status)switch(this.readyState===ut.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var r=0;r<t.length;r++)this.onEvent(t[r]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}},e.prototype.onOpen=function(e){var t,r,n;this.readyState===ut.CONNECTING?(e&&e.hostname&&(this.location.base=(t=this.location.base,r=e.hostname,(n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+r+n[3])),this.readyState=ut.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===ut.OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var e=this;this.stream=wt.createSocketRequest("POST",pt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(t){e.onChunk(t)})),this.stream.bind("finished",(function(t){e.hooks.onFinished(e,t)})),this.stream.bind("buffer_too_long",(function(){e.reconnect()}));try{this.stream.start()}catch(t){C.defer((function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)}))}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}(),yt={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},mt={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},vt={getRequest:function(e){var t=new(wt.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},bt={createStreamingSocket:function(e){return this.createSocket(yt,e)},createPollingSocket:function(e){return this.createSocket(mt,e)},createSocket:function(e,t){return new gt(e,t)},createXHR:function(e,t){return this.createRequest(vt,e,t)},createRequest:function(e,t,r){return new lt(e,t,r)},createXDR:function(e,t){return this.createRequest(at,e,t)}},wt={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:i,DependenciesReceivers:a,getDefaultStrategy:st,Transports:fe,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),c.load(e.hooks.file,{useTLS:e.options.useTLS},(function(t,r){e.hooks.isInitialized()?(e.changeState("initialized"),r(!0)):(t&&e.onError(t),e.onClose(),r(!1))}))):e.onClose()},HTTPFactory:bt,TimelineTransport:G,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var r=function(){t.onDocumentBody(e.ready)};window.JSON?r():c.load("json2",{},r)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:W,jsonp:z}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout((function(){t.onDocumentBody(e)}),0)},createJSONPRequest:function(e,t){return new V(e,t)},createScriptRequest:function(e){return new H(e)},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return ye},createWebSocket:function(e){return new(this.getWebSocketAPI())(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported:function(e){var t=e?"https:":"http:",r=this.getProtocol();return Boolean(window.XDomainRequest)&&r===t},addUnloadListener:function(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)}};!function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"}(ft||(ft={}));var St=ft,kt=function(){function e(e,t,r){this.key=e,this.session=t,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(e,t){e<=this.options.level&&(this.events.push(M({},t,{timestamp:C.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(St.ERROR,e)},e.prototype.info=function(e){this.log(St.INFO,e)},e.prototype.debug=function(e){this.log(St.DEBUG,e)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(e,t){var r=this,n=M({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(n,(function(e,n){e||r.sent++,t&&t(e,n)})),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),Et=function(){function e(e,t,r,n){this.name=e,this.priority=t,this.transport=r,this.options=n||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(e,t){var r=this;if(!this.isSupported())return _t(new Pe,t);if(this.priority<e)return _t(new Oe,t);var n=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,s=function(){i.unbind("initialized",s),i.connect()},a=function(){o=qe.createHandshake(i,(function(e){n=!0,u(),t(null,e)}))},c=function(e){u(),t(e)},l=function(){var e;u(),e=F(i),t(new Re(e))},u=function(){i.unbind("initialized",s),i.unbind("open",a),i.unbind("error",c),i.unbind("closed",l)};return i.bind("initialized",s),i.bind("open",a),i.bind("error",c),i.bind("closed",l),i.initialize(),{abort:function(){n||(u(),o?o.close():i.close())},forceMinPriority:function(e){n||r.priority<e&&(o?o.close():i.close())}}},e}();function _t(e,t){return C.defer((function(){t(e)})),{abort:function(){},forceMinPriority:function(){}}}var Ct=wt.Transports,Mt=function(e,t,r,n,i,o){var s=Ct[r];if(!s)throw new Ie(r);return e.enabledTransports&&-1===O(e.enabledTransports,t)||e.disabledTransports&&-1!==O(e.disabledTransports,t)?xt:new Et(t,n,o?o.getAssistant(s):s,M({key:e.key,useTLS:e.useTLS,timeline:e.timeline,ignoreNullOrigin:e.ignoreNullOrigin},i))},xt={isSupported:function(){return!1},connect:function(e,t){var r=C.defer((function(){t(new Pe)}));return{abort:function(){r.ensureAborted()},forceMinPriority:function(){}}}},Ot=function(){return{wsHost:o.host,wsPort:o.ws_port,wssPort:o.wss_port,wsPath:o.ws_path,httpHost:o.sockjs_host,httpPort:o.sockjs_http_port,httpsPort:o.sockjs_https_port,httpPath:o.sockjs_path,statsHost:o.stats_host,authEndpoint:o.channel_auth_endpoint,authTransport:o.channel_auth_transport,activity_timeout:o.activity_timeout,pong_timeout:o.pong_timeout,unavailable_timeout:o.unavailable_timeout}},Rt=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}},Tt=function(){function e(t,r){var n=this;if(function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(t),!(r=r||{}).cluster&&!r.wsHost&&!r.httpHost){var i=N.buildLogSuffix("javascriptQuickStart");j.warn("You should always specify a cluster when connecting. "+i)}"disableStats"in r&&(j.warn("The disableStats option is deprecated in favor of enableStats"),"enableStats"in r||(r.enableStats=!r.disableStats)),this.key=t,this.config=M(Ot(),r.cluster?Rt(r.cluster):{},r),this.channels=qe.createChannels(),this.global_emitter=new ee,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new kt(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:St.INFO,version:o.VERSION}),this.config.enableStats&&(this.timelineSender=qe.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+wt.TimelineTransport.name})),this.connection=qe.createConnectionManager(this.key,M({getStrategy:function(e){var t=M({},n.config,e);return wt.getDefaultStrategy(t,Mt)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{useTLS:this.shouldUseTLS()})),this.connection.bind("connected",(function(){n.subscribeAll(),n.timelineSender&&n.timelineSender.send(n.connection.isUsingTLS())})),this.connection.bind("message",(function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var r=n.channel(e.channel);r&&r.handleEvent(e)}t||n.global_emitter.emit(e.event,e.data)})),this.connection.bind("connecting",(function(){n.channels.disconnect()})),this.connection.bind("disconnected",(function(){n.channels.disconnect()})),this.connection.bind("error",(function(e){j.warn(e)})),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,r=e.instances.length;t<r;t++)e.instances[t].connect()},e.getClientFeatures=function(){return T(B({ws:wt.Transports.ws},(function(e){return e.isSupported({})})))},e.prototype.channel=function(e){return this.channels.find(e)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new _(6e4,(function(){t.send(e)}))}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(e,t,r){return this.global_emitter.bind(e,t,r),this},e.prototype.unbind=function(e,t,r){return this.global_emitter.unbind(e,t,r),this},e.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},e.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},e.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},e.prototype.unsubscribe=function(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&"connected"===this.connection.state&&t.unsubscribe()},e.prototype.send_event=function(e,t,r){return this.connection.send_event(e,t,r)},e.prototype.shouldUseTLS=function(){return"https:"===wt.getProtocol()||!0===this.config.forceTLS||Boolean(this.config.encrypted)},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=wt,e.ScriptReceivers=wt.ScriptReceivers,e.DependenciesReceivers=wt.DependenciesReceivers,e.auth_callbacks=wt.auth_callbacks,e}(),It=t.default=Tt;wt.setup(Tt)}])},e.exports=r()}).call(this,r(7).Buffer)},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var o=r(22),s=r(47),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.disposed=!1,this.clear()}return i(e,null,[{key:"onEventHandlerException",value:function(e){var t=this;return 0===this.exceptionHandlers.length&&(this.dispatch=this.exceptionHandlingDispatch),this.exceptionHandlers.push(e),new o((function(){if(t.exceptionHandlers.splice(t.exceptionHandlers.indexOf(e),1),0===t.exceptionHandlers.length)return t.dispatch=t.simpleDispatch}))}},{key:"simpleDispatch",value:function(e,t){return e(t)}},{key:"exceptionHandlingDispatch",value:function(e,t){try{return e(t)}catch(e){return this.exceptionHandlers.map((function(t){return t(e)}))}}}]),i(e,[{key:"clear",value:function(){null!=this.subscriptions&&this.subscriptions.dispose(),this.subscriptions=new s,this.handlersByEventName={}}},{key:"dispose",value:function(){this.subscriptions.dispose(),this.handlersByEventName=null,this.disposed=!0}},{key:"on",value:function(e,t,r){var n=this;if(null==r&&(r=!1),this.disposed)throw new Error("Emitter has been disposed");if("function"!=typeof t)throw new Error("Handler must be a function");this.handlersByEventName[e]?r?this.handlersByEventName[e].unshift(t):this.handlersByEventName[e].push(t):this.handlersByEventName[e]=[t];var i=new o((function(){return n.subscriptions.remove(i),n.off(e,t)}));return this.subscriptions.add(i),i}},{key:"once",value:function(e,t,r){null==r&&(r=!1);var n=this.on(e,(function(e){return n.dispose(),t(e)}),r);return n}},{key:"preempt",value:function(e,t){return this.on(e,t,!0)}},{key:"off",value:function(e,t){if(!this.disposed){var r=this.handlersByEventName[e];if(r){var n=r.indexOf(t);n>=0&&r.splice(n,1),0===r.length&&delete this.handlersByEventName[e]}}}},{key:"emit",value:function(e,t){var r=this.handlersByEventName&&this.handlersByEventName[e];if(r)for(var n=r.slice(),i=0;i<n.length;i++)this.constructor.dispatch(n[i],t)}},{key:"emitAsync",value:function(e,t){var r=this,n=this.handlersByEventName&&this.handlersByEventName[e];if(n){var i=n.map((function(e){return r.constructor.dispatch(e,t)}));return Promise.all(i).then((function(){}))}return Promise.resolve()}},{key:"getEventNames",value:function(){return Object.keys(this.handlersByEventName)}},{key:"listenerCountForEventName",value:function(e){var t=this.handlersByEventName[e];return null==t?0:t.length}},{key:"getTotalListenerCount",value:function(){for(var e=0,t=Object.keys(this.handlersByEventName),r=0;r<t.length;r++){var n=t[r];e+=this.handlersByEventName[n].length}return e}}]),e}();a.dispatch=a.simpleDispatch,a.exceptionHandlers=[],e.exports=a},function(e,t,r){var n=r(133),i=r(23),o=r(51),s=r(5)("socket.io-client");e.exports=t=c;var a=t.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i=n(e),c=i.source,l=i.id,u=i.path,d=a[l]&&u in a[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(s("ignoring socket cache for %s",c),r=o(c,t)):(a[l]||(s("new io instance for %s",c),a[l]=o(c,t)),r=a[l]),i.query&&!t.query&&(t.query=i.query),r.socket(i.path,t)}t.protocol=i.protocol,t.connect=c,t.Manager=r(51),t.Socket=r(57)},function(e,t,r){var n=r(48),i=r(5)("socket.io-client:url");e.exports=function(e,t){var r=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),r=n(e));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port,r.href=r.protocol+"://"+o+(t&&t.port===r.port?"":":"+r.port),r}},function(e,t,r){e.exports=function(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let r;function s(...e){if(!s.enabled)return;const t=s,i=Number(new Date),o=i-(r||i);t.diff=o,t.prev=r,t.curr=i,r=i,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if("%%"===r)return r;a++;const o=n.formatters[i];if("function"==typeof o){const n=e[a];r=o.call(t,n),e.splice(a,1),a--}return r}),n.formatArgs.call(t,e),(t.log||n.log).apply(t,e)}return s.namespace=e,s.enabled=n.enabled(e),s.useColors=n.useColors(),s.color=t(e),s.destroy=i,s.extend=o,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function i(){const e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function o(e,t){const r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){const e=[...n.names.map(s),...n.skips.map(s).map(e=>"-"+e)].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.names=[],n.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){const e=n.instances[t];e.enabled=n.enabled(e.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(135),Object.keys(e).forEach(t=>{n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function c(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===l&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return c(e,t,o,"day");if(t>=i)return c(e,t,i,"hour");if(t>=n)return c(e,t,n,"minute");if(t>=r)return c(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){(function(n){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(137)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,r(9))},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var i=t.formatters[n];if("function"==typeof i){var o=s[c];r=i.call(e,o),s.splice(c,1),c--}return r})),t.formatArgs.call(e,s),(n.log||t.log||console.log.bind(console)).apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=i,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var o=t.instances[r];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(138),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var r=1e3,n=60*r,i=60*n,o=24*i,s=365.25*o;function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var c,l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===l&&!1===isNaN(e))return t.long?a(c=e,o,"day")||a(c,i,"hour")||a(c,n,"minute")||a(c,r,"second")||c+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){var n=r(49),i=r(50),o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);t.deconstructPacket=function(e){var t=[],r=e.data,o=e;return o.data=function e(t,r){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:r.length};return r.push(t),o}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a],r);return s}if("object"==typeof t&&!(t instanceof Date)){s={};for(var c in t)s[c]=e(t[c],r);return s}return t}(r,t),o.attachments=t.length,{packet:o,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,r){if(!t)return t;if(t&&t._placeholder)return r[t.num];if(n(t))for(var i=0;i<t.length;i++)t[i]=e(t[i],r);else if("object"==typeof t)for(var o in t)t[o]=e(t[o],r);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var r=0,o=e;!function e(c,l,u){if(!c)return c;if(s&&c instanceof Blob||a&&c instanceof File){r++;var d=new FileReader;d.onload=function(){u?u[l]=this.result:o=this.result,--r||t(o)},d.readAsArrayBuffer(c)}else if(n(c))for(var p=0;p<c.length;p++)e(c[p],p,c);else if("object"==typeof c&&!i(c))for(var h in c)e(c[h],h,c)}(o),r||t(o)}},function(e,t,r){e.exports=r(142),e.exports.parser=r(11)},function(e,t,r){var n=r(52),i=r(26),o=r(5)("engine.io-client:socket"),s=r(56),a=r(11),c=r(48),l=r(13);function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=u,u.priorWebsocketSuccess=!1,i(u.prototype),u.protocol=a.protocol,u.Socket=u,u.Transport=r(25),u.transports=r(52),u.parser=r(11),u.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new n[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){o("setting transport %s",e.name);var t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},u.prototype.probe=function(e){o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;function i(){if(n.onlyBinaryUpgrades){var i=!this.supportsBinary&&n.transport.supportsBinary;r=r||i}r||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!r)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',n.transport.name),n.transport.pause((function(){r||"closed"!==n.readyState&&(o("changing transport and sending upgrade packet"),p(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())}))}else{o('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=t.name,n.emit("upgradeError",s)}})))}function s(){r||(r=!0,p(),t.close(),t=null)}function a(r){var i=new Error("probe error: "+r);i.transport=t.name,s(),o('probe transport "%s" failed because of error: %s',e,r),n.emit("upgradeError",i)}function c(){a("transport closed")}function l(){a("socket closed")}function d(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),s())}function p(){t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",c),n.removeListener("close",l),n.removeListener("upgrading",d)}u.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",a),t.once("close",c),this.once("close",l),this.once("upgrading",d),t.open()},u.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},u.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var i={type:e,data:t,options:r};this.emit("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():t()})):this.upgrading?n():t()}function t(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return this},u.prototype.onError=function(e){o("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},u.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~s(this.transports,e[r])&&t.push(e[r]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,r){var n=r(24),i=r(53),o=r(26),s=r(14),a=r(5)("engine.io-client:polling-xhr");function c(){}function l(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,r=location.port;r||(r=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}function u(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=l,e.exports.Request=u,s(l,i),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new u(e)},l.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),i=this;n.on("success",t),n.on("error",(function(e){i.onError("xhr post error",e)})),this.sendXhr=n},l.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},o(u.prototype),u.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new n(e),r=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(r.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout((function(){r.onError("number"==typeof t.status?t.status:0)}),0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){r.onError(e)}),0)}"undefined"!=typeof document&&(this.index=u.requestsCount++,u.requests[this.index]=this)},u.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},u.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},u.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},u.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete u.requests[this.index],this.xhr=null}},u.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},u.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},u.prototype.abort=function(){this.cleanup()},u.requestsCount=0,u.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",p);else if("function"==typeof addEventListener){var d="onpagehide"in self?"pagehide":"unload";addEventListener(d,p,!1)}function p(){for(var e in u.requests)u.requests.hasOwnProperty(e)&&u.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(r-t),s=t,a=0;s<r;s++,a++)o[a]=i[s];return o.buffer}},function(e,t){function r(){}e.exports=function(e,t,n){var i=!1;return n=n||r,o.count=e,0===e?t():o;function o(e,r){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=n):0!==o.count||i||t(null,r)}}},function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var r,n,i,o=String.fromCharCode;function s(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return o(e>>t&63|128)}function l(e,t){if(0==(4294967168&e))return o(e);var r="";return 0==(4294965248&e)?r=o(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),r=o(e>>12&15|224),r+=c(e,6)):0==(4292870144&e)&&(r=o(e>>18&7|240),r+=c(e,12),r+=c(e,6)),r+=o(63&e|128)}function u(){if(i>=n)throw Error("Invalid byte index");var e=255&r[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var t,o;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(t=255&r[i],i++,0==(128&t))return t;if(192==(224&t)){if((o=(31&t)<<6|u())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if((o=(15&t)<<12|u()<<6|u())>=2048)return a(o,e)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(o=(7&t)<<18|u()<<12|u()<<6|u())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var r=!1!==(t=t||{}).strict,n=s(e),i=n.length,o=-1,a="";++o<i;)a+=l(n[o],r);return a},decode:function(e,t){var a=!1!==(t=t||{}).strict;r=s(e),n=r.length,i=0;for(var c,l=[];!1!==(c=d(a));)l.push(c);return function(e){for(var t,r=e.length,n=-1,i="";++n<r;)(t=e[n])>65535&&(i+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=o(t);return i}(l)}}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<e.length;n++)r[e.charCodeAt(n)]=n;t.encode=function(t){var r,n=new Uint8Array(t),i=n.length,o="";for(r=0;r<i;r+=3)o+=e[n[r]>>2],o+=e[(3&n[r])<<4|n[r+1]>>4],o+=e[(15&n[r+1])<<2|n[r+2]>>6],o+=e[63&n[r+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,n,i,o,s,a=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),d=new Uint8Array(u);for(t=0;t<c;t+=4)n=r[e.charCodeAt(t)],i=r[e.charCodeAt(t+1)],o=r[e.charCodeAt(t+2)],s=r[e.charCodeAt(t+3)],d[l++]=n<<2|i>>4,d[l++]=(15&i)<<4|o>>2,d[l++]=(3&o)<<6|63&s;return u}}()},function(e,t){var r=void 0!==r?r:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=r&&r.prototype.append&&r.prototype.getBlob;function s(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=r.buffer}return t}return e}))}function a(e,t){t=t||{};var n=new r;return s(e).forEach((function(e){n.append(e)})),t.type?n.getBlob(t.type):n.getBlob()}function c(e,t){return new Blob(s(e),t||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=n?i?Blob:c:o?a:void 0},function(e,t,r){(function(t){var n=r(53),i=r(14);e.exports=u;var o,s=/\n/g,a=/\\n/g;function c(){}function l(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}}function u(e){if(n.call(this,e),this.query=this.query||{},!o){var t=l();o=t.___eio=t.___eio||[]}this.index=o.length;var r=this;o.push((function(e){r.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){r.script&&(r.script.onerror=c)}),!1)}i(u,n),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},u.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n,i=document.createElement("form"),o=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=c,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function l(){u(),t()}function u(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),u(),e=e.replace(a,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&l()}:this.iframe.onload=l}}).call(this,r(6))},function(e,t,r){(function(t){var n,i,o=r(25),s=r(11),a=r(13),c=r(14),l=r(55),u=r(5)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof self&&(n=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{i=r(154)}catch(e){}var d=n||i;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=n&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=i),o.call(this,e)}e.exports=p,c(p,o),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new d(e,t):new d(e):new d(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},p.prototype.write=function(e){var r=this;this.writable=!1;for(var n=e.length,i=0,o=n;i<o;i++)!function(e){s.encodePacket(e,r.supportsBinary,(function(i){if(!r.usingBrowserWebSocket){var o={};if(e.options&&(o.compress=e.options.compress),r.perMessageDeflate)("string"==typeof i?t.byteLength(i):i.length)<r.perMessageDeflate.threshold&&(o.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(i):r.ws.send(i,o)}catch(e){u("websocket closed before onclose event")}--n||a()}))}(e[i]);function a(){r.emit("flush"),setTimeout((function(){r.writable=!0,r.emit("drain")}),0)}},p.prototype.onClose=function(){o.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e},p.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===p.prototype.name)}}).call(this,r(7).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}},function(e,t){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n={},i=n.dom;function o(e){return new Promise((function(t){return setTimeout(t,e)}))}e.exports=function(){function e(t){t.config;var r=t.commandRegistry,i=t.workspace;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.commandRegistry=r,this.workspace=i,this.confirm=this.confirm.bind(this),this.cancel=this.cancel.bind(this),this.handleBlur=this.handleBlur.bind(this),this.props={uri:""},n.initialize(this),this.disposables=this.commandRegistry.add(this.element,{"core:confirm":this.confirm,"core:cancel":this.cancel})}var t,s,a;return t=e,(s=[{key:"destroy",value:function(){this.panel&&this.panel.destroy(),this.disposables.dispose(),n.destroy(this)}},{key:"show",value:function(e){var t=this;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.update({uri:e}));case 2:return r.next=4,regeneratorRuntime.awrap(o(5));case 4:return this.panel=this.workspace.addModalPanel({item:this,visible:!1,autoFocus:!0}),this.panel.show(),this.element.focus(),this.element.addEventListener("blur",this.handleBlur),r.abrupt("return",new Promise((function(e){t.resolveWithExitStatus=e,t.panel.onDidDestroy((function(){t.panel=null,t.element.removeEventListener("blur",t.handleBlur)}))})));case 9:case"end":return r.stop()}}),null,this)}},{key:"confirm",value:function(){this.refs.joinWithoutAskingCheckbox.checked?this.confirmAlways():this.confirmOnce()}},{key:"confirmOnce",value:function(){this.resolveWithExitStatus(this.constructor.EXIT_STATUS.CONFIRM_ONCE),this.panel.destroy()}},{key:"confirmAlways",value:function(){this.resolveWithExitStatus(this.constructor.EXIT_STATUS.CONFIRM_ALWAYS),this.panel.destroy()}},{key:"cancel",value:function(){this.resolveWithExitStatus(this.constructor.EXIT_STATUS.CANCEL),this.panel.destroy()}},{key:"render",value:function(){return i.div({className:"JoinViaExternalAppDialog",tabIndex:-1},i.div(null,i.h1(null,"Join this portal?"),i.a({className:"JoinViaExternalAppDialog-cancel icon icon-x",onClick:this.cancel})),i.p({className:"JoinViaExternalAppDialog-uri"},this.props.uri),i.p(null,"By joining this portal, the other collaborators will see your GitHub username, your avatar, and any edits that you perform inside the portal."),i.footer({className:"JoinViaExternalAppDialog-footer"},i.label({className:"input-label"},i.input({ref:"joinWithoutAskingCheckbox",className:"input-checkbox",type:"checkbox"}),i.span(null,"Always join without asking. I only open URLs from people I trust.")),i.button({className:"btn btn-lg btn-primary",onClick:this.confirm},"Join portal")))}},{key:"update",value:function(e){return this.props=e,n.update(this)}},{key:"writeAfterUpdate",value:function(){this.refs.joinWithoutAskingCheckbox.checked=!1}},{key:"handleBlur",value:function(e){document.hasFocus()&&!this.element.contains(e.relatedTarget)&&this.cancel()}}])&&r(t.prototype,s),a&&r(t,a),e}(),e.exports.EXIT_STATUS={CONFIRM_ALWAYS:0,CONFIRM_ONCE:1,CANCEL:2}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t),r.d(t,"PortalBindingManager",(function(){return u}));var s=r(0).Emitter,a=r(159),c=r(166),l=r(32).findPortalId,u=function(){function e(t){var r=t.client,n=t.workspace,i=t.notificationManager;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.emitter=new s,this.client=r,this.workspace=n,this.notificationManager=i,this.hostPortalBindingPromise=null,this.promisesByGuestPortalId=new Map}var t,r,u;return t=e,(r=[{key:"dispose",value:function(){var e=[];if(this.hostPortalBindingPromise){var t=this.hostPortalBindingPromise.then((function(e){e.close()}));e.push(t)}return this.promisesByGuestPortalId.forEach((function(t){var r;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.then((function(e){e&&e.leave()})),e.push(r);case 2:case"end":return n.stop()}}))})),Promise.all(e)}},{key:"createHostPortalBinding",value:function(){var e=this;return null==this.hostPortalBindingPromise&&(this.hostPortalBindingPromise=this._createHostPortalBinding(),this.hostPortalBindingPromise.then((function(t){t||(e.hostPortalBindingPromise=null)}))),this.hostPortalBindingPromise}},{key:"_createHostPortalBinding",value:function(){var e,t=this;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=new a({client:this.client,workspace:this.workspace,notificationManager:this.notificationManager,didDispose:function(){t.didDisposeHostPortalBinding()}}),r.next=3,regeneratorRuntime.awrap(e.initialize());case 3:if(!r.sent){r.next=7;break}return console.log("hostportalbinding initialized"),this.emitter.emit("did-change"),r.abrupt("return",e);case 7:case"end":return r.stop()}}),null,this)}},{key:"getHostPortalBinding",value:function(){return this.hostPortalBindingPromise?this.hostPortalBindingPromise:Promise.resolve(null)}},{key:"didDisposeHostPortalBinding",value:function(){this.hostPortalBindingPromise=null,this.emitter.emit("did-change")}},{key:"createGuestPortalBinding",value:function(e){var t=this,r=this.promisesByGuestPortalId.get(e);return r?r.then((function(e){e&&e.activate()})):((r=this._createGuestPortalBinding(e)).then((function(r){r||t.promisesByGuestPortalId.delete(e)})),this.promisesByGuestPortalId.set(e,r)),r}},{key:"_createGuestPortalBinding",value:function(e){var t,r=this;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new c({portalId:e,client:this.client,workspace:this.workspace,notificationManager:this.notificationManager,didDispose:function(){r.didDisposeGuestPortalBinding(t)}}),n.next=3,regeneratorRuntime.awrap(t.initialize());case 3:if(!n.sent){n.next=7;break}return this.workspace.getElement().classList.add("teletype-Guest"),this.emitter.emit("did-change"),n.abrupt("return",t);case 7:case"end":return n.stop()}}),null,this)}},{key:"getGuestPortalBindings",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(Promise.all(this.promisesByGuestPortalId.values()));case 2:return e=t.sent,t.abrupt("return",e.filter((function(e){return null!=e})));case 4:case"end":return t.stop()}}),null,this)}},{key:"getRemoteEditors",value:function(){var e,t,r,n,o,s,a,c;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:e=[],t=!0,r=!1,n=void 0,l.prev=4,o=this.promisesByGuestPortalId.values()[Symbol.iterator]();case 6:if(t=(s=o.next()).done){l.next=15;break}return a=s.value,l.next=10,regeneratorRuntime.awrap(a);case 10:c=l.sent,e.push.apply(e,i(c.getRemoteEditors()));case 12:t=!0,l.next=6;break;case 15:l.next=21;break;case 17:l.prev=17,l.t0=l.catch(4),r=!0,n=l.t0;case 21:l.prev=21,l.prev=22,t||null==o.return||o.return();case 24:if(l.prev=24,!r){l.next=27;break}throw n;case 27:return l.finish(24);case 28:return l.finish(21);case 29:return l.abrupt("return",e);case 30:case"end":return l.stop()}}),null,this,[[4,17,21,29],[22,,24,28]])}},{key:"getActiveGuestPortalBinding",value:function(){var e,t,r,i,o,s,a,c,l;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:e=this.workspace.getActivePaneItem(),t=!0,r=!1,i=void 0,u.prev=4,o=this.promisesByGuestPortalId[Symbol.iterator]();case 6:if(t=(s=o.next()).done){u.next=16;break}return(a=n(s.value,2))[0],c=a[1],u.next=10,regeneratorRuntime.awrap(c);case 10:if(!(l=u.sent).hasPaneItem(e)){u.next=13;break}return u.abrupt("return",l);case 13:t=!0,u.next=6;break;case 16:u.next=22;break;case 18:u.prev=18,u.t0=u.catch(4),r=!0,i=u.t0;case 22:u.prev=22,u.prev=23,t||null==o.return||o.return();case 25:if(u.prev=25,!r){u.next=28;break}throw i;case 28:return u.finish(25);case 29:return u.finish(22);case 30:case"end":return u.stop()}}),null,this,[[4,18,22,30],[23,,25,29]])}},{key:"hasActivePortals",value:function(){var e,t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.getHostPortalBinding());case 2:return e=r.sent,r.next=5,regeneratorRuntime.awrap(this.getGuestPortalBindings());case 5:return t=r.sent,r.abrupt("return",null!=e||t.length>0);case 7:case"end":return r.stop()}}),null,this)}},{key:"getRemoteEditorForURI",value:function(e){var t,r,n,i,o;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=e.replace("atom://teletype/","").split("/"),r=l(t[1]),"portal"===t[0]&&r){s.next=4;break}return s.abrupt("return",null);case 4:if(n=Number(t[3]),"editor"===t[2]&&!Number.isNaN(n)){s.next=7;break}return s.abrupt("return",null);case 7:if(!(i=this.promisesByGuestPortalId.get(r))){s.next=15;break}return s.next=11,regeneratorRuntime.awrap(i);case 11:return o=s.sent,s.abrupt("return",o.getRemoteEditor(n));case 15:throw new Error("Cannot open an editor belonging to a portal that has not been joined");case 16:case"end":return s.stop()}}),null,this)}},{key:"didDisposeGuestPortalBinding",value:function(e){this.promisesByGuestPortalId.delete(e.portalId),0===this.promisesByGuestPortalId.size&&this.workspace.getElement().classList.remove("teletype-Guest"),this.emitter.emit("did-change")}},{key:"onDidChange",value:function(e){return this.emitter.on("did-change",e)}}])&&o(t.prototype,r),u&&o(t,u),e}()},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(0),o=i.CompositeDisposable,s=i.Emitter,a=r(12).FollowState,c=r(64),l=r(66),u=r(67),d=r(28).getPortalURI;e.exports=function(){function e(t){var r=t.client,n=t.workspace,i=t.notificationManager,a=t.didDispose;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=r,this.workspace=n,this.notificationManager=i,this.editorBindingsByEditor=new WeakMap,this.editorBindingsByEditorProxy=new Map,this.bufferBindingsByBuffer=new WeakMap,this.disposables=new o,this.emitter=new s,this.lastUpdateTetherPromise=Promise.resolve(),this.didDispose=a}var t,r,i;return t=e,(r=[{key:"initialize",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(this.client.createPortal());case 3:if(this.portal=e.sent,this.portal){e.next=6;break}return e.abrupt("return",!1);case 6:return this.uri=d(this.portal.id),this.sitePositionsComponent=new u({portal:this.portal,workspace:this.workspace}),this.portal.setDelegate(this),this.disposables.add(this.workspace.observeTextEditors(this.didAddTextEditor.bind(this)),this.workspace.observeActiveTextEditor(this.didChangeActiveTextEditor.bind(this))),this.workspace.getElement().classList.add("teletype-Host"),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),this.notificationManager.addError("Failed to share portal",{description:"Attempting to share a portal failed with error: <code>".concat(e.t0.message,"</code>"),error:e.t0,dismissable:!0}),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),null,this,[[0,14]])}},{key:"dispose",value:function(){this.workspace.getElement().classList.remove("teletype-Host"),this.sitePositionsComponent.destroy(),this.disposables.dispose(),this.didDispose()}},{key:"close",value:function(){this.portal.dispose()}},{key:"siteDidJoin",value:function(e){var t=this.portal.getSiteIdentity(e).login;this.notificationManager.addInfo("@".concat(t," has joined your portal")),this.emitter.emit("did-change")}},{key:"siteDidLeave",value:function(e){var t=this.portal.getSiteIdentity(e).login;this.notificationManager.addInfo("@".concat(t," has left your portal")),this.emitter.emit("did-change")}},{key:"onDidChange",value:function(e){return this.emitter.on("did-change",e)}},{key:"didChangeActiveTextEditor",value:function(e){if(e&&!e.isRemote){var t=this.findOrCreateEditorProxyForEditor(e);this.portal.activateEditorProxy(t),this.sitePositionsComponent.show(e.element)}else this.portal.activateEditorProxy(null),this.sitePositionsComponent.hide()}},{key:"updateActivePositions",value:function(e){this.sitePositionsComponent.update({positionsBySiteId:e})}},{key:"updateTether",value:function(e,t,r){var n=this;return t&&(this.lastUpdateTetherPromise=this.lastUpdateTetherPromise.then((function(){return n._updateTether(e,t,r)}))),this.lastUpdateTetherPromise}},{key:"_updateTether",value:function(e,t,r){var n;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=this.editorBindingsByEditorProxy.get(t),e!==a.RETRACTED){i.next=7;break}return i.next=4,regeneratorRuntime.awrap(this.workspace.open(n.editor,{searchAllPanes:!0}));case 4:r&&n.updateTether(e,r),i.next=8;break;case 7:this.editorBindingsByEditorProxy.forEach((function(t){return t.updateTether(e)}));case 8:case"end":return i.stop()}}),null,this)}},{key:"didAddTextEditor",value:function(e){e.isRemote||this.findOrCreateEditorProxyForEditor(e)}},{key:"findOrCreateEditorProxyForEditor",value:function(e){var t=this,r=this.editorBindingsByEditor.get(e);if(r)return r.editorProxy;var n=this.findOrCreateBufferProxyForBuffer(e.getBuffer()),i=this.portal.createEditorProxy({bufferProxy:n});(r=new l({editor:e,portal:this.portal,isHost:!0})).setEditorProxy(i),i.setDelegate(r),this.editorBindingsByEditor.set(e,r),this.editorBindingsByEditorProxy.set(i,r);var o=e.onDidDestroy((function(){return i.dispose()}));return r.onDidDispose((function(){o.dispose(),t.editorBindingsByEditorProxy.delete(i)})),i}},{key:"findOrCreateBufferProxyForBuffer",value:function(e){var t=this.bufferBindingsByBuffer.get(e);if(t)return t.bufferProxy;t=new c({buffer:e,isHost:!0});var r=this.portal.createBufferProxy({uri:t.getBufferProxyURI(),history:e.getHistory()});return t.setBufferProxy(r),r.setDelegate(t),this.bufferBindingsByBuffer.set(e,t),r}}])&&n(t.prototype,r),i&&n(t,i),e}()},function(e,t,r){const n=r(161),i=r(30),{initialize:o,update:s,updateSync:a,destroy:c,destroySync:l}=r(163),{setScheduler:u,getScheduler:d}=r(71);e.exports={dom:n,render:i,initialize:o,update:s,updateSync:a,destroy:c,destroySync:l,setScheduler:u,getScheduler:d}},function(e,t,r){const n=r(68),i=r(29);function o(e,t,...r){let i=[];for(let e=0;e<r.length;){const t=r[e];switch(typeof t){case"string":case"number":r[e]={text:t},e++;break;case"object":Array.isArray(t)?r.splice(e,1,...t):t?(t.context||(i.push(t),t.ambiguous&&t.ambiguous.length&&(i=i.concat(t.ambiguous))),e++):r.splice(e,1);break;default:throw new Error(`Invalid child node: ${t}`)}}if(t){for(const e in t){const r=n[e];r&&(t.on||(t.on={}),t.on[r]=t[e])}t.class&&(t.className=t.class)}return{tag:e,props:t,children:r,ambiguous:i}}const s=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];for(const e of s)o[e]=(t,...r)=>o(e,t,...r);for(const e of i)o[e]=(t,...r)=>o(e,t,...r);e.exports=o},function(e,t){e.exports=new Map([["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["className","class"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["panose1","panose-1"],["paintOrder","paint-order"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xHeight","x-height"]])},function(e,t,r){const n=r(30),i=r(164),{getScheduler:o}=r(71),s=new WeakSet;let a=0,c=0;function l(e){return null!=e&&!1!==e}function u(e,t){t.context=e,t.ambiguous&&(t.ambiguous.forEach(t=>{t.context=e}),delete t.ambiguous)}function d(e,t=!0){if(!l(e.virtualNode))throw new Error(`${e.constructor?e.constructor.name+" instance":e} is not associated with a valid virtualNode. Perhaps this component was never initialized?`);if(null==e.element)throw new Error(`${e.constructor?e.constructor.name+" instance":e} is not associated with a DOM element. Perhaps this component was never initialized?`);let r=e.render();if(!l(r)){const t=e.constructor&&e.constructor.name?" in "+e.constructor.name:"";throw new Error("invalid falsy value "+r+" returned from render()"+t)}u(e,r),a++;let n=e.virtualNode,s=e.element,c=i(n,r,{refs:e.refs,listenerContext:e});if(e.virtualNode=r,c!==s&&!t)throw new Error("The root node type changed on update, but the update was performed with the replaceNode option set to false");e.element=c,"function"==typeof e.writeAfterUpdate&&e.writeAfterUpdate(),"function"==typeof e.readAfterUpdate&&o().readDocument((function(){e.readAfterUpdate()})),a--}function p(e,t=!0){c++,h(e.virtualNode),1===c&&t&&e.element.remove(),c--}function h(e){e.component&&"function"==typeof e.component.destroy?e.component.destroy():e.children&&e.children.forEach(h)}e.exports={initialize:function(e){if("function"!=typeof e.update)throw new Error("Etch components must implement `update(props, children)`.");let t=e.render();if(!l(t)){let r=e.constructor&&e.constructor.name?" in "+e.constructor.name:"";throw new Error("invalid falsy value "+t+" returned from render()"+r)}u(e,t),e.refs={},e.virtualNode=t,e.element=n(e.virtualNode,{refs:e.refs,listenerContext:e})},update:function(e,t=!0){if(a>0)return d(e,t),Promise.resolve();let r=o();return s.has(e)||(s.add(e),r.updateDocument((function(){s.delete(e),d(e,t)}))),r.getNextUpdatePromise()},updateSync:d,destroy:function(e,t=!0){if(a>0||c>0)return p(e,t),Promise.resolve();let r=o();return r.updateDocument((function(){p(e,t)})),r.getNextUpdatePromise()},destroySync:p}},function(e,t,r){const n=r(30),i=r(69),o=r(70);function s(e,t,r){const p=e.domNode;if(t===e)return p;if(l(e,t)){let h;return null!=t.text?(p.nodeValue=t.text,h=p):"function"==typeof t.tag?h=function(e,t,r){const{component:n,props:i}=e;let{props:s,children:a}=t;t.component=n;const c=r&&r.refs;c&&o(n,i&&i.ref,s&&s.ref,c);return n.update(s||{},a),n.element}(e,t,r):(!function(e,t,r,i){var o,p=0,h=t.length-1,f=t[0],g=t[h],y=0,m=r.length-1,v=r[0],b=r[m];for(;p<=h&&y<=m;)if(f)if(g)if(l(f,v))s(f,v,i),f=t[++p],v=r[++y];else if(l(g,b))s(g,b,i),g=t[--h],b=r[--m];else if(l(f,b))s(f,b,i),e.insertBefore(f.domNode,g.domNode.nextSibling),f=t[++p],b=r[--m];else if(l(g,v))s(g,v,i),e.insertBefore(g.domNode,f.domNode),g=t[--h],v=r[++y];else{o||(a.length>0?(o=a.pop()).clear():o=new Map,d(o,t,p,h));var w=u(v),S=w?o.get(w):null;if(null==S)e.insertBefore(n(v,i),f.domNode),v=r[++y];else{var k=t[S];s(k,v,i),t[S]=void 0,e.insertBefore(k.domNode,f.domNode),v=r[++y]}}else g=t[--h];else f=t[++p];if(p>h){var E=r[m+1]?r[m+1].domNode:null;for(let t=y;t<=m;t++)e.insertBefore(n(r[t],i),E)}else if(y>m)for(let e=p;e<=h;e++){var _=t[e];_&&c(_,i&&i.refs)}o&&a.push(o)}(p,e.children,t.children,r),i(p,e,t,r),h=p),t.domNode=h,h!==p&&p.parentNode&&p.parentNode.replaceChild(h,p),h}{const i=p.parentNode,o=p.nextSibling;c(e,r&&r.refs);const s=n(t,r);return i&&i.insertBefore(s,o),t.domNode=s,s}}let a=[new Map,new Map,new Map,new Map];function c(e,t,r=!0){const{domNode:n,props:i,children:o,component:s}=e,a=i&&i.ref;if(s)"function"==typeof a?a(null):t&&a&&t[a]===s&&delete t[a],s.destroy&&s.destroy();else if("function"==typeof a?a(null):t&&a&&t[a]===n&&delete t[a],o)for(let e=0;e<o.length;e++)c(o[e],t,!1);r&&n.remove()}function l(e,t){return u(e)===u(t)&&e.tag===t.tag}function u(e){return e.props?e.props.key:void 0}function d(e,t,r,n){for(let i=r;i<=n;i++){const r=u(t[i]);r&&e.set(r,i)}return e}e.exports=s},function(e,t){e.exports=class{constructor(){this.updateRequests=[],this.readRequests=[],this.pendingAnimationFrame=null,this.performUpdates=this.performUpdates.bind(this),this.performingUpdates=!1}updateDocument(e){this.updateRequests.push(e),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}readDocument(e){this.readRequests.push(e),this.pendingAnimationFrame||(this.pendingAnimationFrame=window.requestAnimationFrame(this.performUpdates))}getNextUpdatePromise(){return this.nextUpdatePromise||(this.nextUpdatePromise=new Promise(e=>{this.resolveNextUpdatePromise=e})),this.nextUpdatePromise}performUpdates(){for(;this.updateRequests.length>0;)this.updateRequests.shift()();for(this.pendingAnimationFrame=null;this.readRequests.length>0;)this.readRequests.shift()();if(this.nextUpdatePromise){let e=this.resolveNextUpdatePromise;this.nextUpdatePromise=null,this.resolveNextUpdatePromise=null,e()}}}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(0),o=i.CompositeDisposable,s=(i.Disposable,i.Emitter),a=r(12),c=a.Errors,l=a.FollowState,u=r(64),d=r(66),p=r(61).TextBuffer,h=r(63).TextEditor,f=r(67),g=r(65),y=r(28).getEditorURI,m=function(){};e.exports=function(){function e(t){var r=t.client,n=t.portalId,i=t.workspace,a=t.notificationManager,c=t.didDispose;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=r,this.portalId=n,this.workspace=i,this.notificationManager=a,this.emitDidDispose=c||m,this.lastActivePaneItem=null,this.editorBindingsByEditorProxyId=new Map,this.bufferBindingsByBufferProxyId=new Map,this.editorProxiesByEditor=new WeakMap,this.editorProxiesMetadataById=new Map,this.emitter=new s,this.subscriptions=new o,this.lastEditorProxyChangePromise=Promise.resolve(),this.shouldRelayActiveEditorChanges=!0}var t,r,i;return t=e,(r=[{key:"initialize",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(this.client.joinPortal(this.portalId));case 3:if(this.portal=e.sent,this.portal){e.next=6;break}return e.abrupt("return",!1);case 6:return this.sitePositionsComponent=new f({portal:this.portal,workspace:this.workspace}),this.subscriptions.add(this.workspace.onDidChangeActivePaneItem(this.didChangeActivePaneItem.bind(this))),e.next=10,regeneratorRuntime.awrap(this.portal.setDelegate(this));case 10:return e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),this.didFailToJoin(e.t0),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),null,this,[[0,13]])}},{key:"dispose",value:function(){this.subscriptions.dispose(),this.sitePositionsComponent.destroy(),this.emitDidDispose()}},{key:"siteDidJoin",value:function(e){var t=this.portal.getSiteIdentity(1).login,r=this.portal.getSiteIdentity(e).login;this.notificationManager.addInfo("@".concat(r," has joined @").concat(t,"'s portal")),this.emitter.emit("did-change")}},{key:"siteDidLeave",value:function(e){var t=this.portal.getSiteIdentity(1).login,r=this.portal.getSiteIdentity(e).login;this.notificationManager.addInfo("@".concat(r," has left @").concat(t,"'s portal")),this.emitter.emit("did-change")}},{key:"didChangeEditorProxies",value:function(){}},{key:"getRemoteEditors",value:function(){for(var e=this.portal.getSiteIdentity(1),t=new Set,r=[],n=this.portal.getEditorProxiesMetadata(),i=0;i<n.length;i++){var o=n[i],s=o.id,a=o.bufferProxyId,c=o.bufferProxyURI;t.has(a)||(r.push({hostGitHubUsername:e.login,uri:y(this.portal.id,s),path:g(c)}),t.add(a))}return r}},{key:"getRemoteEditor",value:function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.portal.findOrFetchEditorProxy(e));case 2:if(!(t=r.sent)){r.next=7;break}return r.abrupt("return",this.findOrCreateEditorForEditorProxy(t));case 7:return r.abrupt("return",null);case 8:case"end":return r.stop()}}),null,this)}},{key:"updateActivePositions",value:function(e){this.sitePositionsComponent.update({positionsBySiteId:e})}},{key:"updateTether",value:function(e,t,r){var n=this;return t&&(this.lastEditorProxyChangePromise=this.lastEditorProxyChangePromise.then((function(){return n._updateTether(e,t,r)}))),this.lastEditorProxyChangePromise}},{key:"_updateTether",value:function(e,t,r){var n,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e!==l.RETRACTED){o.next=8;break}return n=this.findOrCreateEditorForEditorProxy(t),this.shouldRelayActiveEditorChanges=!1,o.next=5,regeneratorRuntime.awrap(this.openPaneItem(n));case 5:this.shouldRelayActiveEditorChanges=!0,o.next=9;break;case 8:this.editorBindingsByEditorProxyId.forEach((function(t){return t.updateTether(e)}));case 9:(i=this.editorBindingsByEditorProxyId.get(t.id))&&r&&i.updateTether(e,r);case 11:case"end":return o.stop()}}),null,this)}},{key:"findOrCreateEditorForEditorProxy",value:function(e){var t,r=this,n=this.editorBindingsByEditorProxyId.get(e.id);if(n)t=n.editor;else{var i=e.bufferProxy,o=this.findOrCreateBufferForBufferProxy(i);t=new h({buffer:o,autoHeight:!1}),(n=new d({editor:t,portal:this.portal,isHost:!1})).setEditorProxy(e),e.setDelegate(n),this.editorBindingsByEditorProxyId.set(e.id,n),this.editorProxiesByEditor.set(t,e);var s=t.onDidDestroy((function(){return n.dispose()}));n.onDidDispose((function(){s.dispose();var n=r.portal.resolveFollowState()===l.RETRACTED;r.shouldRelayActiveEditorChanges=!n,t.destroy(),r.shouldRelayActiveEditorChanges=!0,r.editorProxiesByEditor.delete(t),r.editorBindingsByEditorProxyId.delete(e.id)}))}return t}},{key:"findOrCreateBufferForBufferProxy",value:function(e){var t,r=this,n=this.bufferBindingsByBufferProxyId.get(e.id);return n?t=n.buffer:(t=new p,(n=new u({buffer:t,isHost:!1,didDispose:function(){return r.bufferBindingsByBufferProxyId.delete(e.id)}})).setBufferProxy(e),e.setDelegate(n),this.bufferBindingsByBufferProxyId.set(e.id,n)),t}},{key:"activate",value:function(){var e=this.lastActivePaneItem,t=this.workspace.paneForItem(e);t&&e&&(t.activateItem(e),t.activate())}},{key:"didFailToJoin",value:function(e){var t,r;e instanceof c.PortalNotFoundError?(t="Portal not found",r="The portal you were trying to join does not exist. Please ask your host to provide you with their current portal URL."):(t="Failed to join portal",r="Attempting to join portal failed with error: <code>".concat(e.message,"</code>\n\n")+"Please wait a few moments and try again."),this.notificationManager.addError(t,{description:r,dismissable:!0})}},{key:"hostDidClosePortal",value:function(){this.notificationManager.addInfo("Portal closed",{description:"Your host stopped sharing their editor.",dismissable:!0})}},{key:"hostDidLoseConnection",value:function(){this.notificationManager.addInfo("Portal closed",{description:"We haven't heard from the host in a while.\nOnce your host is back online, they can share a new portal with you to resume collaborating.",dismissable:!0})}},{key:"leave",value:function(){this.portal&&this.portal.dispose()}},{key:"openPaneItem",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.newActivePaneItem=e,t.next=3,regeneratorRuntime.awrap(this.workspace.open(e,{searchAllPanes:!0}));case 3:this.lastActivePaneItem=this.newActivePaneItem,this.newActivePaneItem=null;case 5:case"end":return t.stop()}}),null,this)}},{key:"didChangeActivePaneItem",value:function(e){var t=this.editorProxiesByEditor.get(e);t?this.sitePositionsComponent.show(e.element):this.sitePositionsComponent.hide(),this.shouldRelayActiveEditorChanges&&this.portal.activateEditorProxy(t)}},{key:"hasPaneItem",value:function(e){return this.editorProxiesByEditor.has(e)}},{key:"getActivePaneItem",value:function(){return this.newActivePaneItem||this.workspace.getActivePaneItem()}},{key:"onDidChange",value:function(e){return this.emitter.on("did-change",e)}}])&&n(t.prototype,r),i&&n(t,i),e}()},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.r(t),r.d(t,"AuthenticationProvider",(function(){return o}));var i=r(0).Emitter,o=function(){function e(t){var r=t.client,n=t.notificationManager,o=t.workspace,s=t.credentialCache;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=r,this.client.onSignInChange(this.didChangeSignIn.bind(this)),this.credentialCache=s,this.notificationManager=n,this.workspace=o,this.emitter=new i}var t,r,o;return t=e,(r=[{key:"signInUsingSavedToken",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isSignedIn()){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,regeneratorRuntime.awrap(this.credentialCache.get("oauth-token"));case 4:if(!(e=t.sent)){t.next=9;break}return t.abrupt("return",this._signIn(e));case 9:return t.abrupt("return",!1);case 10:case"end":return t.stop()}}),null,this)}},{key:"signIn",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isSignedIn()){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,regeneratorRuntime.awrap(this._signIn(e));case 4:if(!t.sent){t.next=10;break}return t.next=7,regeneratorRuntime.awrap(this.credentialCache.set("oauth-token",e));case 7:return t.abrupt("return",!0);case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),null,this)}},{key:"signOut",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSignedIn()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,regeneratorRuntime.awrap(this.credentialCache.delete("oauth-token"));case 4:this.client.signOut();case 5:case"end":return e.stop()}}),null,this)}},{key:"_signIn",value:function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,this.signingIn=!0,this.didChangeSignIn(),r.next=5,regeneratorRuntime.awrap(this.client.signIn(e));case 5:return t=r.sent,r.abrupt("return",t);case 9:r.prev=9,r.t0=r.catch(0),this.notificationManager.addError("Failed to authenticate to teletype",{description:"Signing in failed with error: <code>".concat(r.t0.message,"</code>"),dismissable:!0});case 12:return r.prev=12,this.signingIn=!1,this.didChangeSignIn(),r.finish(12);case 16:case"end":return r.stop()}}),null,this,[[0,9,12,16]])}},{key:"isSigningIn",value:function(){return this.signingIn}},{key:"isSignedIn",value:function(){return this.client.isSignedIn()}},{key:"getIdentity",value:function(){return this.client.getLocalUserIdentity()}},{key:"onDidChange",value:function(e){return this.emitter.on("did-change",e)}},{key:"didChangeSignIn",value:function(){var e=this.workspace.getElement();this.isSignedIn()?e.classList.add("teletype-Authenticated"):e.classList.remove("teletype-Authenticated"),this.emitter.emit("did-change")}}])&&n(t.prototype,r),o&&n(t,o),e}()},function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),o=r(72),s=r.n(o),a=(r(78),r(80),r(31)),c=r.n(a),l=r(12),u=r(0),d=(r(132),r(32));function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=r(157),S=r(61).TextBuffer,k=r(63).TextEditor,E=r(158).PortalBindingManager,_=r(167).AuthenticationProvider,C=(r(31),function(e){function t(){var e;return f(this,t),(e=function(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?v(e):t}(this,m(t).call(this))).state={connected:!1,document:null,peers:{}},e.client=new l.TeletypeClient({pusherKey:"f8f1f2d00b97203cec27",pusherOptions:{cluster:"us2"},baseURL:"https://codehs-crdt.herokuapp.com"}),e.subscriptions=new u.CompositeDisposable,e.commandRegistry=new u.CompositeDisposable,e.client.signIn("0ffa59ccc190090a350da1473dfb513ca3de168f"),e.aceEditorRef=i.a.createRef(),e.aceEditor=e.aceEditorRef.editor,e.buffer=new S(v(e)),window.buffer=e.buffer,e.editor=new k({buffer:e.buffer}),window.editor=e.editor,e.workspace=new M(e.editor,v(e)),e.activate(),e.service=new x({app:v(e)}),window.app=v(e),window.joinPortal=function(t){var r;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e.joinPortal(t));case 2:return n.next=4,regeneratorRuntime.awrap(e.service.getRemoteEditors());case 4:if(!((r=n.sent).length>1)){n.next=8;break}return alert("you cant connet to more than one editor right now"),n.abrupt("return");case 8:if(0!==r.length){n.next=11;break}return alert("No portals found for that portalId"),n.abrupt("return");case 11:e.workspace.open(r[0].uri);case 12:case"end":return n.stop()}}))},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),y(t,[{key:"activate",value:function(){console.log("teletype: Using pusher key:",this.pusherKey),console.log("teletype: Using base URL:",this.baseURL),this.signInUsingSavedToken(),this.registerRemoteEditorOpener()}},{key:"deactivate",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initializationError=null,this.subscriptions.dispose(),this.subscriptions=new u.CompositeDisposable,this.portalStatusBarIndicator&&this.portalStatusBarIndicator.destroy(),!this.portalBindingManagerPromise){t.next=10;break}return t.next=7,regeneratorRuntime.awrap(this.portalBindingManagerPromise);case 7:return e=t.sent,t.next=10,regeneratorRuntime.awrap(e.dispose());case 10:case"end":return t.stop()}}),null,this)}},{key:"handleURI",value:function(e,t){var r,n,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(r=Object(d.findPortalId)(e.pathname)||t,!this.config.get("teletype.askBeforeJoiningPortalViaExternalApp")){o.next=15;break}return n=w.EXIT_STATUS,o.next=5,regeneratorRuntime.awrap(this.joinViaExternalAppDialog.show(t));case 5:i=o.sent,o.t0=i,o.next=o.t0===n.CONFIRM_ONCE?9:o.t0===n.CONFIRM_ALWAYS?10:12;break;case 9:return o.abrupt("return",this.joinPortal(r));case 10:return this.config.set("teletype.askBeforeJoiningPortalViaExternalApp",!1),o.abrupt("return",this.joinPortal(r));case 12:return o.abrupt("break",13);case 13:o.next=16;break;case 15:return o.abrupt("return",this.joinPortal(r));case 16:case"end":return o.stop()}}),null,this)}},{key:"sharePortal",value:function(){var e,t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return this.showPopover(),r.next=3,regeneratorRuntime.awrap(this.getPortalBindingManager());case 3:return e=r.sent,r.next=6,regeneratorRuntime.awrap(e.createHostPortalBinding());case 6:if(t=r.sent,console.log("shared"),console.log(t),!t){r.next=12;break}return this.setState({portalId:t.portal.id,connected:!0}),r.abrupt("return",t.portal);case 12:case"end":return r.stop()}}),null,this)}},{key:"joinPortal",value:function(e){var t,r;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.showPopover(),!e){n.next=13;break}return n.next=4,regeneratorRuntime.awrap(this.getPortalBindingManager());case 4:return t=n.sent,n.next=7,regeneratorRuntime.awrap(t.createGuestPortalBinding(e));case 7:if(!(r=n.sent)){n.next=11;break}return this.setState({connected:!0}),n.abrupt("return",r.portal);case 11:n.next=15;break;case 13:return n.next=15,regeneratorRuntime.awrap(this.showJoinPortalPrompt());case 15:case"end":return n.stop()}}),null,this)}},{key:"closeHostPortal",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.showPopover(),t.next=3,regeneratorRuntime.awrap(this.getPortalBindingManager());case 3:return e=t.sent,t.next=6,regeneratorRuntime.awrap(e.getHostPortalBinding());case 6:t.sent.close();case 8:case"end":return t.stop()}}),null,this)}},{key:"copyHostPortalURI",value:function(){var e,t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.getPortalBindingManager());case 2:return e=r.sent,r.next=5,regeneratorRuntime.awrap(e.getHostPortalBinding());case 5:t=r.sent,console.log(t.uri);case 7:case"end":return r.stop()}}),null,this)}},{key:"leavePortal",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.showPopover(),t.next=3,regeneratorRuntime.awrap(this.getPortalBindingManager());case 3:return e=t.sent,t.next=6,regeneratorRuntime.awrap(e.getActiveGuestPortalBinding());case 6:t.sent.leave();case 8:case"end":return t.stop()}}),null,this)}},{key:"provideTeletype",value:function(){console.log("todo")}},{key:"consumeStatusBar",value:function(e){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.getClient());case 2:return e.sent,e.next=5,regeneratorRuntime.awrap(this.getPortalBindingManager());case 5:return e.sent,e.next=8,regeneratorRuntime.awrap(this.getAuthenticationProvider());case 8:e.sent,console.log("todo");case 10:case"end":return e.stop()}}),null,this)}},{key:"registerRemoteEditorOpener",value:function(){var e=this;this.subscriptions.add(this.workspace.addOpener((function(t){return console.log("wew!"),t.startsWith("atom://teletype/")?e.getRemoteEditorForURI(t):null})))}},{key:"getRemoteEditorForURI",value:function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.getPortalBindingManager());case 2:if(t=r.sent,r.t0=t,!r.t0){r.next=8;break}return r.next=7,regeneratorRuntime.awrap(this.isSignedIn());case 7:r.t0=r.sent;case 8:if(!r.t0){r.next=10;break}return r.abrupt("return",t.getRemoteEditorForURI(e));case 10:case"end":return r.stop()}}),null,this)}},{key:"signInUsingSavedToken",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.getAuthenticationProvider());case 2:if(!(e=t.sent)){t.next=7;break}return t.abrupt("return",e.signInUsingSavedToken());case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),null,this)}},{key:"signOut",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.getAuthenticationProvider());case 2:if(!(e=t.sent)){t.next=7;break}return this.portalStatusBarIndicator.showPopover(),t.next=7,regeneratorRuntime.awrap(e.signOut());case 7:case"end":return t.stop()}}),null,this)}},{key:"isSignedIn",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.getAuthenticationProvider());case 2:if(!(e=t.sent)){t.next=7;break}return t.abrupt("return",e.isSignedIn());case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),null,this)}},{key:"showPopover",value:function(){this.portalStatusBarIndicator&&this.portalStatusBarIndicator.showPopover()}},{key:"showJoinPortalPrompt",value:function(){var e,t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.portalStatusBarIndicator){r.next=2;break}return r.abrupt("return");case 2:return e=this.portalStatusBarIndicator.popoverComponent,t=e.refs.portalListComponent,r.next=6,regeneratorRuntime.awrap(t.showJoinPortalPrompt());case 6:case"end":return r.stop()}}),null,this)}},{key:"handleConnectionError",value:function(e){var t="An error occurred with a teletype connection: <code>".concat(e.message,"</code>");this.notificationManager.addError("Connection Error",{description:t,dismissable:!0})}},{key:"getAuthenticationProvider",value:function(){var e=this;return this.authenticationProviderPromise||(this.authenticationProviderPromise=new Promise((function(t,r){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.getClient());case 2:(n=r.sent)?(console.log("todo"),t(new _({client:n,credentialCache:{get:function(){}},notificationManager:e.notificationManager,workspace:e.workspace}))):(e.authenticationProviderPromise=null,t(null));case 4:case"end":return r.stop()}}))}))),this.authenticationProviderPromise}},{key:"getPortalBindingManager",value:function(){var e=this;return this.portalBindingManagerPromise||(this.portalBindingManagerPromise=new Promise((function(t,r){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.getClient());case 2:(n=r.sent)?t(new E({client:n,workspace:e.workspace,notificationManager:{addInfo:function(e){console.log("notificationinfo: ".concat(e))},addSuccess:function(e){console.log("notificationsuccess: ".concat(e))},addError:function(e,t){var r=t.error;console.log("notificationerror: ".concat(e)),console.log(r)}}})):(e.portalBindingManagerPromise=null,t(null));case 4:case"end":return r.stop()}}))}))),this.portalBindingManagerPromise}},{key:"getClient",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initializationError){e.next=2;break}return e.abrupt("return",null);case 2:if(!this.isClientOutdated){e.next=4;break}return e.abrupt("return",null);case 4:return e.prev=4,e.next=7,regeneratorRuntime.awrap(this.client.initialize());case 7:return e.abrupt("return",this.client);case 10:e.prev=10,e.t0=e.catch(4),e.t0?this.isClientOutdated=!0:this.initializationError=e.t0;case 13:case"end":return e.stop()}}),null,this,[[4,10]])}},{key:"onChange",value:function(e,t){var r=Object.assign({},t.end);"insert"===t.action&&(r=t.start),"remove"===t.action&&(t.lines=[]);var n=this.workspace.editor.buffer.insertText({oldStart:t.start,oldEnd:r,newText:t.lines.join("\n")});console.log(n)}},{key:"onCursorChange",value:function(e,t){e.cursor}},{key:"onLoad",value:function(e){console.log(e)}},{key:"getMarkers",value:function(){return Object.entries(this.state.peers).map((function(e){var t=h(e,2),r=t[0],n=t[1].cursor;return{startRow:n.row,endRow:n.row,startCol:n.col,endCol:n.col+1,className:"cursor cursor--".concat(r%4),type:"line"}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"app"},this.state.connected?i.a.createElement("div",null,i.a.createElement("p",null,"connected"),this.state.portalId?i.a.createElement("p",null,this.state.portalId):"...portalid..."):i.a.createElement("div",null,i.a.createElement("p",null,"connecting"),i.a.createElement("button",{onClick:this.sharePortal.bind(this)},"Share Portal"),i.a.createElement("input",{id:"joinPortalId",placeholder:"join portal...",type:"text"}),i.a.createElement("button",{onClick:function(){e.joinPortal(document.querySelector("#joinPortalId").value)}},"join portal")),i.a.createElement(c.a,{ref:this.aceEditorRef,onChange:this.onChange.bind(this),name:"editor-target",value:"",onCursorChange:this.onCursorChange.bind(this),markers:this.getMarkers(),onLoad:this.onLoad.bind(this)}))}}]),t}(n.Component)),M=function(){function e(t,r){f(this,e),this.emitter=new u.Emitter,this.editor=t,this.app=r,this.openers=[]}return y(e,[{key:"observeTextEditors",value:function(e){return console.log("workspace.observeTextEditors"),e(this.editor),this.emitter.on("did-add-editor",e)}},{key:"onDidAddTextEditor",value:function(e){return console.log("workspace.onDidAddTextEditor"),this.emitter.on("did-add-editor",e)}},{key:"observeActiveTextEditor",value:function(e){return console.log("workspace.observeActiveTextEditor"),e(this.editor),this.emitter.on("did-add-editor",e)}},{key:"getElement",value:function(){return console.log(arguments),console.log("todo! workspace.getElement"),{classList:new Set}}},{key:"onDidChangeActivePaneItem",value:function(e){return console.log("todo! workspace.onDidChangeActivePaneItem"),this.emitter.on("did-change-active-pane-item",e)}},{key:"addOpener",value:function(e){var t=this;return this.openers.push(e),new u.Disposable((function(){t.openers=t.openers.filter((function(t){return t!==e}))}))}},{key:"open",value:function(e,t){this.editor=e,this.openers.forEach((function(r){return r(e.getURI(),t)}))}},{key:"getActivePaneItem",value:function(){return this.editor}}]),e}(),x=function(){function e(t){var r=t.app;f(this,e),this.app=r}return y(e,[{key:"getRemoteEditors",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.app.getPortalBindingManager());case 2:if(!(e=t.sent)){t.next=7;break}return t.abrupt("return",e.getRemoteEditors());case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}}),null,this)}}]),e}(),O=C;s.a.render([i.a.createElement(O,null)],document.getElementById("root"))}]);